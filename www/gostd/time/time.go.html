<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html" class="current">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2610133">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2610188">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2610242">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2610293">//&nbsp;Package&nbsp;time&nbsp;provides&nbsp;functionality&nbsp;for&nbsp;measuring&nbsp;and&nbsp;displaying&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2610367">//</span><br>
<span class="lineno"></span><span class="comment" id="2610370">//&nbsp;The&nbsp;calendrical&nbsp;calculations&nbsp;always&nbsp;assume&nbsp;a&nbsp;Gregorian&nbsp;calendar.</span><br>
<span class="lineno"></span><span class="keyword" id="2610438">package</span>&nbsp;<span class="ident" id="2610446">time</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2610452">import</span>&nbsp;<span class="string" id="2610459">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2610469">//&nbsp;A&nbsp;Time&nbsp;represents&nbsp;an&nbsp;instant&nbsp;in&nbsp;time&nbsp;with&nbsp;nanosecond&nbsp;precision.</span><br>
<span class="lineno"></span><span class="comment" id="2610536">//</span><br>
<span class="lineno"></span><span class="comment" id="2610539">//&nbsp;Programs&nbsp;using&nbsp;times&nbsp;should&nbsp;typically&nbsp;store&nbsp;and&nbsp;pass&nbsp;them&nbsp;as&nbsp;values,</span><br>
<span class="lineno">15</span><span class="comment" id="2610611">//&nbsp;not&nbsp;pointers.&nbsp;&nbsp;That&nbsp;is,&nbsp;time&nbsp;variables&nbsp;and&nbsp;struct&nbsp;fields&nbsp;should&nbsp;be&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2610684">//&nbsp;type&nbsp;time.Time,&nbsp;not&nbsp;*time.Time.&nbsp;&nbsp;A&nbsp;Time&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="2610748">//&nbsp;multiple&nbsp;goroutines&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="comment" id="2610787">//</span><br>
<span class="lineno"></span><span class="comment" id="2610790">//&nbsp;Time&nbsp;instants&nbsp;can&nbsp;be&nbsp;compared&nbsp;using&nbsp;the&nbsp;Before,&nbsp;After,&nbsp;and&nbsp;Equal&nbsp;methods.</span><br>
<span class="lineno">20</span><span class="comment" id="2610867">//&nbsp;The&nbsp;Sub&nbsp;method&nbsp;subtracts&nbsp;two&nbsp;instants,&nbsp;producing&nbsp;a&nbsp;Duration.</span><br>
<span class="lineno"></span><span class="comment" id="2610931">//&nbsp;The&nbsp;Add&nbsp;method&nbsp;adds&nbsp;a&nbsp;Time&nbsp;and&nbsp;a&nbsp;Duration,&nbsp;producing&nbsp;a&nbsp;Time.</span><br>
<span class="lineno"></span><span class="comment" id="2610995">//</span><br>
<span class="lineno"></span><span class="comment" id="2610998">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;of&nbsp;type&nbsp;Time&nbsp;is&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2611075">//&nbsp;As&nbsp;this&nbsp;time&nbsp;is&nbsp;unlikely&nbsp;to&nbsp;come&nbsp;up&nbsp;in&nbsp;practice,&nbsp;the&nbsp;IsZero&nbsp;method&nbsp;gives</span><br>
<span class="lineno">25</span><span class="comment" id="2611151">//&nbsp;a&nbsp;simple&nbsp;way&nbsp;of&nbsp;detecting&nbsp;a&nbsp;time&nbsp;that&nbsp;has&nbsp;not&nbsp;been&nbsp;initialized&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2611229">//</span><br>
<span class="lineno"></span><span class="comment" id="2611232">//&nbsp;Each&nbsp;Time&nbsp;has&nbsp;associated&nbsp;with&nbsp;it&nbsp;a&nbsp;Location,&nbsp;consulted&nbsp;when&nbsp;computing&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2611309">//&nbsp;presentation&nbsp;form&nbsp;of&nbsp;the&nbsp;time,&nbsp;such&nbsp;as&nbsp;in&nbsp;the&nbsp;Format,&nbsp;Hour,&nbsp;and&nbsp;Year&nbsp;methods.</span><br>
<span class="lineno"></span><span class="comment" id="2611390">//&nbsp;The&nbsp;methods&nbsp;Local,&nbsp;UTC,&nbsp;and&nbsp;In&nbsp;return&nbsp;a&nbsp;Time&nbsp;with&nbsp;a&nbsp;specific&nbsp;location.</span><br>
<span class="lineno">30</span><span class="comment" id="2611464">//&nbsp;Changing&nbsp;the&nbsp;location&nbsp;in&nbsp;this&nbsp;way&nbsp;changes&nbsp;only&nbsp;the&nbsp;presentation;&nbsp;it&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2611544">//&nbsp;change&nbsp;the&nbsp;instant&nbsp;in&nbsp;time&nbsp;being&nbsp;denoted&nbsp;and&nbsp;therefore&nbsp;does&nbsp;not&nbsp;affect&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2611622">//&nbsp;computations&nbsp;described&nbsp;in&nbsp;earlier&nbsp;paragraphs.</span><br>
<span class="lineno"></span><span class="comment" id="2611671">//</span><br>
<span class="lineno"></span><span class="comment" id="2611674">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;Go&nbsp;==&nbsp;operator&nbsp;compares&nbsp;not&nbsp;just&nbsp;the&nbsp;time&nbsp;instant&nbsp;but&nbsp;also&nbsp;the</span><br>
<span class="lineno">35</span><span class="comment" id="2611754">//&nbsp;Location.&nbsp;Therefore,&nbsp;Time&nbsp;values&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;as&nbsp;map&nbsp;or&nbsp;database&nbsp;keys</span><br>
<span class="lineno"></span><span class="comment" id="2611833">//&nbsp;without&nbsp;first&nbsp;guaranteeing&nbsp;that&nbsp;the&nbsp;identical&nbsp;Location&nbsp;has&nbsp;been&nbsp;set&nbsp;for&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2611912">//&nbsp;values,&nbsp;which&nbsp;can&nbsp;be&nbsp;achieved&nbsp;through&nbsp;use&nbsp;of&nbsp;the&nbsp;UTC&nbsp;or&nbsp;Local&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="2611985">//</span><br>
<span class="lineno"></span><span class="keyword" id="2611988">type</span>&nbsp;<span class="ident" id="2611993">Time</span>&nbsp;<span class="keyword" id="2611998">struct</span>&nbsp;<span class="op" id="2612005">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612008">//&nbsp;sec&nbsp;gives&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed&nbsp;since</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612058">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612094">sec</span>&nbsp;<span class="ident" id="2612098">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612106">//&nbsp;nsec&nbsp;specifies&nbsp;a&nbsp;non-negative&nbsp;nanosecond</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612151">//&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;named&nbsp;by&nbsp;Seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612198">//&nbsp;It&nbsp;must&nbsp;be&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612242">nsec</span>&nbsp;<span class="builtintype" id="2612247">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612255">//&nbsp;loc&nbsp;specifies&nbsp;the&nbsp;Location&nbsp;that&nbsp;should&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612309">//&nbsp;determine&nbsp;the&nbsp;minute,&nbsp;hour,&nbsp;month,&nbsp;day,&nbsp;and&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612362">//&nbsp;that&nbsp;correspond&nbsp;to&nbsp;this&nbsp;Time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612396">//&nbsp;Only&nbsp;the&nbsp;zero&nbsp;Time&nbsp;has&nbsp;a&nbsp;nil&nbsp;Location.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612439">//&nbsp;In&nbsp;that&nbsp;case&nbsp;it&nbsp;is&nbsp;interpreted&nbsp;to&nbsp;mean&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612487">loc</span>&nbsp;<span class="op" id="2612491">*</span><span class="ident" id="2612492">Location</span><br>
<span class="lineno">55</span><span class="op" id="2612501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2612504">//&nbsp;After&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;after&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2612560">func</span>&nbsp;<span class="op" id="2612565">(</span><span class="ident" id="2612566">t</span>&nbsp;<span class="ident" id="2612568">Time</span><span class="op" id="2612572">)</span>&nbsp;<span class="ident" id="2612574">After</span><span class="op" id="2612579">(</span><span class="ident" id="2612580">u</span>&nbsp;<span class="ident" id="2612582">Time</span><span class="op" id="2612586">)</span>&nbsp;<span class="builtintype" id="2612588">bool</span>&nbsp;<span class="op" id="2612593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612596">return</span>&nbsp;<span class="ident" id="2612603">t</span><span class="op" id="2612604">.</span><span class="ident" id="2612605">sec</span>&nbsp;<span class="op" id="2612609">&gt;</span>&nbsp;<span class="ident" id="2612611">u</span><span class="op" id="2612612">.</span><span class="ident" id="2612613">sec</span>&nbsp;<span class="op" id="2612617">||</span>&nbsp;<span class="ident" id="2612620">t</span><span class="op" id="2612621">.</span><span class="ident" id="2612622">sec</span>&nbsp;<span class="op" id="2612626">==</span>&nbsp;<span class="ident" id="2612629">u</span><span class="op" id="2612630">.</span><span class="ident" id="2612631">sec</span>&nbsp;<span class="op" id="2612635">&amp;&amp;</span>&nbsp;<span class="ident" id="2612638">t</span><span class="op" id="2612639">.</span><span class="ident" id="2612640">nsec</span>&nbsp;<span class="op" id="2612645">&gt;</span>&nbsp;<span class="ident" id="2612647">u</span><span class="op" id="2612648">.</span><span class="ident" id="2612649">nsec</span><br>
<span class="lineno">60</span><span class="op" id="2612654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2612657">//&nbsp;Before&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;before&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2612715">func</span>&nbsp;<span class="op" id="2612720">(</span><span class="ident" id="2612721">t</span>&nbsp;<span class="ident" id="2612723">Time</span><span class="op" id="2612727">)</span>&nbsp;<span class="ident" id="2612729">Before</span><span class="op" id="2612735">(</span><span class="ident" id="2612736">u</span>&nbsp;<span class="ident" id="2612738">Time</span><span class="op" id="2612742">)</span>&nbsp;<span class="builtintype" id="2612744">bool</span>&nbsp;<span class="op" id="2612749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612752">return</span>&nbsp;<span class="ident" id="2612759">t</span><span class="op" id="2612760">.</span><span class="ident" id="2612761">sec</span>&nbsp;<span class="op" id="2612765">&lt;</span>&nbsp;<span class="ident" id="2612767">u</span><span class="op" id="2612768">.</span><span class="ident" id="2612769">sec</span>&nbsp;<span class="op" id="2612773">||</span>&nbsp;<span class="ident" id="2612776">t</span><span class="op" id="2612777">.</span><span class="ident" id="2612778">sec</span>&nbsp;<span class="op" id="2612782">==</span>&nbsp;<span class="ident" id="2612785">u</span><span class="op" id="2612786">.</span><span class="ident" id="2612787">sec</span>&nbsp;<span class="op" id="2612791">&amp;&amp;</span>&nbsp;<span class="ident" id="2612794">t</span><span class="op" id="2612795">.</span><span class="ident" id="2612796">nsec</span>&nbsp;<span class="op" id="2612801">&lt;</span>&nbsp;<span class="ident" id="2612803">u</span><span class="op" id="2612804">.</span><span class="ident" id="2612805">nsec</span><br>
<span class="lineno">65</span><span class="op" id="2612810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2612813">//&nbsp;Equal&nbsp;reports&nbsp;whether&nbsp;t&nbsp;and&nbsp;u&nbsp;represent&nbsp;the&nbsp;same&nbsp;time&nbsp;instant.</span><br>
<span class="lineno"></span><span class="comment" id="2612879">//&nbsp;Two&nbsp;times&nbsp;can&nbsp;be&nbsp;equal&nbsp;even&nbsp;if&nbsp;they&nbsp;are&nbsp;in&nbsp;different&nbsp;locations.</span><br>
<span class="lineno"></span><span class="comment" id="2612946">//&nbsp;For&nbsp;example,&nbsp;6:00&nbsp;+0200&nbsp;CEST&nbsp;and&nbsp;4:00&nbsp;UTC&nbsp;are&nbsp;Equal.</span><br>
<span class="lineno">70</span><span class="comment" id="2613002">//&nbsp;This&nbsp;comparison&nbsp;is&nbsp;different&nbsp;from&nbsp;using&nbsp;t&nbsp;==&nbsp;u,&nbsp;which&nbsp;also&nbsp;compares</span><br>
<span class="lineno"></span><span class="comment" id="2613073">//&nbsp;the&nbsp;locations.</span><br>
<span class="lineno"></span><span class="keyword" id="2613091">func</span>&nbsp;<span class="op" id="2613096">(</span><span class="ident" id="2613097">t</span>&nbsp;<span class="ident" id="2613099">Time</span><span class="op" id="2613103">)</span>&nbsp;<span class="ident" id="2613105">Equal</span><span class="op" id="2613110">(</span><span class="ident" id="2613111">u</span>&nbsp;<span class="ident" id="2613113">Time</span><span class="op" id="2613117">)</span>&nbsp;<span class="builtintype" id="2613119">bool</span>&nbsp;<span class="op" id="2613124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613127">return</span>&nbsp;<span class="ident" id="2613134">t</span><span class="op" id="2613135">.</span><span class="ident" id="2613136">sec</span>&nbsp;<span class="op" id="2613140">==</span>&nbsp;<span class="ident" id="2613143">u</span><span class="op" id="2613144">.</span><span class="ident" id="2613145">sec</span>&nbsp;<span class="op" id="2613149">&amp;&amp;</span>&nbsp;<span class="ident" id="2613152">t</span><span class="op" id="2613153">.</span><span class="ident" id="2613154">nsec</span>&nbsp;<span class="op" id="2613159">==</span>&nbsp;<span class="ident" id="2613162">u</span><span class="op" id="2613163">.</span><span class="ident" id="2613164">nsec</span><br>
<span class="lineno"></span><span class="op" id="2613169">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="2613172">//&nbsp;A&nbsp;Month&nbsp;specifies&nbsp;a&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;(January&nbsp;=&nbsp;1,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2613233">type</span>&nbsp;<span class="ident" id="2613238">Month</span>&nbsp;<span class="builtintype" id="2613244">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2613249">const</span>&nbsp;<span class="op" id="2613255">(</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613258">January</span>&nbsp;<span class="ident" id="2613266">Month</span>&nbsp;<span class="op" id="2613272">=</span>&nbsp;<span class="num" id="2613274">1</span>&nbsp;<span class="op" id="2613276">+</span>&nbsp;<span class="ident" id="2613278">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613284">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613294">March</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613301">April</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613308">May</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613313">June</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613319">July</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613325">August</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613333">September</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613344">October</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613353">November</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613363">December</span><br>
<span class="lineno"></span><span class="op" id="2613372">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2613375">var</span>&nbsp;<span class="ident" id="2613379">months</span>&nbsp;<span class="op" id="2613386">=</span>&nbsp;<span class="op" id="2613388">[</span><span class="op" id="2613389">...</span><span class="op" id="2613392">]</span><span class="builtintype" id="2613393">string</span><span class="op" id="2613399">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613402">&#34;January&#34;</span><span class="op" id="2613411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613414">&#34;February&#34;</span><span class="op" id="2613424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613427">&#34;March&#34;</span><span class="op" id="2613434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613437">&#34;April&#34;</span><span class="op" id="2613444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613447">&#34;May&#34;</span><span class="op" id="2613452">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613455">&#34;June&#34;</span><span class="op" id="2613461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613464">&#34;July&#34;</span><span class="op" id="2613470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613473">&#34;August&#34;</span><span class="op" id="2613481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613484">&#34;September&#34;</span><span class="op" id="2613495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613498">&#34;October&#34;</span><span class="op" id="2613507">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613510">&#34;November&#34;</span><span class="op" id="2613520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613523">&#34;December&#34;</span><span class="op" id="2613533">,</span><br>
<span class="lineno"></span><span class="op" id="2613535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2613538">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;month&nbsp;(&#34;January&#34;,&nbsp;&#34;February&#34;,&nbsp;...).</span><br>
<span class="lineno">110</span><span class="keyword" id="2613616">func</span>&nbsp;<span class="op" id="2613621">(</span><span class="ident" id="2613622">m</span>&nbsp;<span class="ident" id="2613624">Month</span><span class="op" id="2613629">)</span>&nbsp;<span class="ident" id="2613631">String</span><span class="op" id="2613637">(</span><span class="op" id="2613638">)</span>&nbsp;<span class="builtintype" id="2613640">string</span>&nbsp;<span class="op" id="2613647">{</span>&nbsp;<span class="keyword" id="2613649">return</span>&nbsp;<span class="ident" id="2613656">months</span><span class="op" id="2613662">[</span><span class="ident" id="2613663">m</span><span class="op" id="2613664">-</span><span class="num" id="2613665">1</span><span class="op" id="2613666">]</span>&nbsp;<span class="op" id="2613668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2613671">//&nbsp;A&nbsp;Weekday&nbsp;specifies&nbsp;a&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;(Sunday&nbsp;=&nbsp;0,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2613731">type</span>&nbsp;<span class="ident" id="2613736">Weekday</span>&nbsp;<span class="builtintype" id="2613744">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="2613749">const</span>&nbsp;<span class="op" id="2613755">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613758">Sunday</span>&nbsp;<span class="ident" id="2613765">Weekday</span>&nbsp;<span class="op" id="2613773">=</span>&nbsp;<span class="ident" id="2613775">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613781">Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613789">Tuesday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613798">Wednesday</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613809">Thursday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613819">Friday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613827">Saturday</span><br>
<span class="lineno"></span><span class="op" id="2613836">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="2613839">var</span>&nbsp;<span class="ident" id="2613843">days</span>&nbsp;<span class="op" id="2613848">=</span>&nbsp;<span class="op" id="2613850">[</span><span class="op" id="2613851">...</span><span class="op" id="2613854">]</span><span class="builtintype" id="2613855">string</span><span class="op" id="2613861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613864">&#34;Sunday&#34;</span><span class="op" id="2613872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613875">&#34;Monday&#34;</span><span class="op" id="2613883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613886">&#34;Tuesday&#34;</span><span class="op" id="2613895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613898">&#34;Wednesday&#34;</span><span class="op" id="2613909">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613912">&#34;Thursday&#34;</span><span class="op" id="2613922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613925">&#34;Friday&#34;</span><span class="op" id="2613933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2613936">&#34;Saturday&#34;</span><span class="op" id="2613946">,</span><br>
<span class="lineno"></span><span class="op" id="2613948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="2613951">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;day&nbsp;(&#34;Sunday&#34;,&nbsp;&#34;Monday&#34;,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2614024">func</span>&nbsp;<span class="op" id="2614029">(</span><span class="ident" id="2614030">d</span>&nbsp;<span class="ident" id="2614032">Weekday</span><span class="op" id="2614039">)</span>&nbsp;<span class="ident" id="2614041">String</span><span class="op" id="2614047">(</span><span class="op" id="2614048">)</span>&nbsp;<span class="builtintype" id="2614050">string</span>&nbsp;<span class="op" id="2614057">{</span>&nbsp;<span class="keyword" id="2614059">return</span>&nbsp;<span class="ident" id="2614066">days</span><span class="op" id="2614070">[</span><span class="ident" id="2614071">d</span><span class="op" id="2614072">]</span>&nbsp;<span class="op" id="2614074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2614077">//&nbsp;Computations&nbsp;on&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2614102">//</span><br>
<span class="lineno">140</span><span class="comment" id="2614105">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Time&nbsp;is&nbsp;defined&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2614151">//&nbsp;&nbsp;&nbsp;&nbspJanuary&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC</span><br>
<span class="lineno"></span><span class="comment" id="2614196">//&nbsp;which&nbsp;(1)&nbsp;looks&nbsp;like&nbsp;a&nbsp;zero,&nbsp;or&nbsp;as&nbsp;close&nbsp;as&nbsp;you&nbsp;can&nbsp;get&nbsp;in&nbsp;a&nbsp;date</span><br>
<span class="lineno"></span><span class="comment" id="2614265">//&nbsp;(1-1-1&nbsp;00:00:00&nbsp;UTC),&nbsp;(2)&nbsp;is&nbsp;unlikely&nbsp;enough&nbsp;to&nbsp;arise&nbsp;in&nbsp;practice&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2614337">//&nbsp;be&nbsp;a&nbsp;suitable&nbsp;&#34;not&nbsp;set&#34;&nbsp;sentinel,&nbsp;unlike&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;and&nbsp;(3)&nbsp;has&nbsp;a</span><br>
<span class="lineno">145</span><span class="comment" id="2614407">//&nbsp;non-negative&nbsp;year&nbsp;even&nbsp;in&nbsp;time&nbsp;zones&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;unlike&nbsp;1-1-0</span><br>
<span class="lineno"></span><span class="comment" id="2614473">//&nbsp;00:00:00&nbsp;UTC,&nbsp;which&nbsp;would&nbsp;be&nbsp;12-31-(-1)&nbsp;19:00:00&nbsp;in&nbsp;New&nbsp;York.</span><br>
<span class="lineno"></span><span class="comment" id="2614538">//</span><br>
<span class="lineno"></span><span class="comment" id="2614541">//&nbsp;The&nbsp;zero&nbsp;Time&nbsp;value&nbsp;does&nbsp;not&nbsp;force&nbsp;a&nbsp;specific&nbsp;epoch&nbsp;for&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2614609">//&nbsp;representation.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;use&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;internally,&nbsp;we</span><br>
<span class="lineno">150</span><span class="comment" id="2614679">//&nbsp;could&nbsp;define&nbsp;that&nbsp;to&nbsp;distinguish&nbsp;a&nbsp;zero&nbsp;value&nbsp;from&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2614750">//&nbsp;time&nbsp;would&nbsp;be&nbsp;represented&nbsp;by&nbsp;sec=-1,&nbsp;nsec=1e9.&nbsp;&nbsp;However,&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="2614818">//&nbsp;suggest&nbsp;a&nbsp;representation,&nbsp;namely&nbsp;using&nbsp;1-1-1&nbsp;00:00:00&nbsp;UTC&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2614886">//&nbsp;epoch,&nbsp;and&nbsp;that&#39;s&nbsp;what&nbsp;we&nbsp;do.</span><br>
<span class="lineno"></span><span class="comment" id="2614919">//</span><br>
<span class="lineno">155</span><span class="comment" id="2614922">//&nbsp;The&nbsp;Add&nbsp;and&nbsp;Sub&nbsp;computations&nbsp;are&nbsp;oblivious&nbsp;to&nbsp;the&nbsp;choice&nbsp;of&nbsp;epoch.</span><br>
<span class="lineno"></span><span class="comment" id="2614992">//</span><br>
<span class="lineno"></span><span class="comment" id="2614995">//&nbsp;The&nbsp;presentation&nbsp;computations&nbsp;-&nbsp;year,&nbsp;month,&nbsp;minute,&nbsp;and&nbsp;so&nbsp;on&nbsp;-&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2615067">//&nbsp;rely&nbsp;heavily&nbsp;on&nbsp;division&nbsp;and&nbsp;modulus&nbsp;by&nbsp;positive&nbsp;constants.&nbsp;&nbsp;For</span><br>
<span class="lineno"></span><span class="comment" id="2615135">//&nbsp;calendrical&nbsp;calculations&nbsp;we&nbsp;want&nbsp;these&nbsp;divisions&nbsp;to&nbsp;round&nbsp;down,&nbsp;even</span><br>
<span class="lineno">160</span><span class="comment" id="2615207">//&nbsp;for&nbsp;negative&nbsp;values,&nbsp;so&nbsp;that&nbsp;the&nbsp;remainder&nbsp;is&nbsp;always&nbsp;positive,&nbsp;but</span><br>
<span class="lineno"></span><span class="comment" id="2615277">//&nbsp;Go&#39;s&nbsp;division&nbsp;(like&nbsp;most&nbsp;hardware&nbsp;division&nbsp;instructions)&nbsp;rounds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2615347">//&nbsp;zero.&nbsp;&nbsp;We&nbsp;can&nbsp;still&nbsp;do&nbsp;those&nbsp;computations&nbsp;and&nbsp;then&nbsp;adjust&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span><span class="comment" id="2615419">//&nbsp;for&nbsp;a&nbsp;negative&nbsp;numerator,&nbsp;but&nbsp;it&#39;s&nbsp;annoying&nbsp;to&nbsp;write&nbsp;the&nbsp;adjustment</span><br>
<span class="lineno"></span><span class="comment" id="2615490">//&nbsp;over&nbsp;and&nbsp;over.&nbsp;&nbsp;Instead,&nbsp;we&nbsp;can&nbsp;change&nbsp;to&nbsp;a&nbsp;different&nbsp;epoch&nbsp;so&nbsp;long</span><br>
<span class="lineno">165</span><span class="comment" id="2615561">//&nbsp;ago&nbsp;that&nbsp;all&nbsp;the&nbsp;times&nbsp;we&nbsp;care&nbsp;about&nbsp;will&nbsp;be&nbsp;positive,&nbsp;and&nbsp;then&nbsp;round</span><br>
<span class="lineno"></span><span class="comment" id="2615634">//&nbsp;to&nbsp;zero&nbsp;and&nbsp;round&nbsp;down&nbsp;coincide.&nbsp;&nbsp;These&nbsp;presentation&nbsp;routines&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="2615707">//&nbsp;have&nbsp;to&nbsp;add&nbsp;the&nbsp;zone&nbsp;offset,&nbsp;so&nbsp;adding&nbsp;the&nbsp;translation&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2615772">//&nbsp;alternate&nbsp;epoch&nbsp;is&nbsp;cheap.&nbsp;&nbsp;For&nbsp;example,&nbsp;having&nbsp;a&nbsp;non-negative&nbsp;time&nbsp;t</span><br>
<span class="lineno"></span><span class="comment" id="2615844">//&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">170</span><span class="comment" id="2615871">//</span><br>
<span class="lineno"></span><span class="comment" id="2615874">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2615890">//</span><br>
<span class="lineno"></span><span class="comment" id="2615893">//&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2615907">//</span><br>
<span class="lineno">175</span><span class="comment" id="2615910">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2615926">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;sec&nbsp;&lt;&nbsp;0&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2615942">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;+=&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2615956">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2615961">//</span><br>
<span class="lineno">180</span><span class="comment" id="2615964">//&nbsp;everywhere.</span><br>
<span class="lineno"></span><span class="comment" id="2615979">//</span><br>
<span class="lineno"></span><span class="comment" id="2615982">//&nbsp;The&nbsp;calendar&nbsp;runs&nbsp;on&nbsp;an&nbsp;exact&nbsp;400&nbsp;year&nbsp;cycle:&nbsp;a&nbsp;400-year&nbsp;calendar</span><br>
<span class="lineno"></span><span class="comment" id="2616051">//&nbsp;printed&nbsp;for&nbsp;1970-2469&nbsp;will&nbsp;apply&nbsp;as&nbsp;well&nbsp;to&nbsp;2470-2869.&nbsp;&nbsp;Even&nbsp;the&nbsp;days</span><br>
<span class="lineno"></span><span class="comment" id="2616124">//&nbsp;of&nbsp;the&nbsp;week&nbsp;match&nbsp;up.&nbsp;&nbsp;It&nbsp;simplifies&nbsp;the&nbsp;computations&nbsp;to&nbsp;choose&nbsp;the</span><br>
<span class="lineno">185</span><span class="comment" id="2616195">//&nbsp;cycle&nbsp;boundaries&nbsp;so&nbsp;that&nbsp;the&nbsp;exceptional&nbsp;years&nbsp;are&nbsp;always&nbsp;delayed&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2616267">//&nbsp;long&nbsp;as&nbsp;possible.&nbsp;&nbsp;That&nbsp;means&nbsp;choosing&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="2616339">//&nbsp;that&nbsp;the&nbsp;first&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;4th&nbsp;year,&nbsp;the&nbsp;first&nbsp;missed&nbsp;leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2616411">//&nbsp;is&nbsp;the&nbsp;100th&nbsp;year,&nbsp;and&nbsp;the&nbsp;missed&nbsp;missed&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;400th&nbsp;year.</span><br>
<span class="lineno"></span><span class="comment" id="2616484">//&nbsp;So&nbsp;we&#39;d&nbsp;prefer&nbsp;instead&nbsp;to&nbsp;print&nbsp;a&nbsp;calendar&nbsp;for&nbsp;2001-2400&nbsp;and&nbsp;reuse&nbsp;it</span><br>
<span class="lineno">190</span><span class="comment" id="2616557">//&nbsp;for&nbsp;2401-2800.</span><br>
<span class="lineno"></span><span class="comment" id="2616575">//</span><br>
<span class="lineno"></span><span class="comment" id="2616578">//&nbsp;Finally,&nbsp;it&#39;s&nbsp;convenient&nbsp;if&nbsp;the&nbsp;delta&nbsp;between&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2616646">//&nbsp;long-ago&nbsp;epoch&nbsp;is&nbsp;representable&nbsp;by&nbsp;an&nbsp;int64&nbsp;constant.</span><br>
<span class="lineno"></span><span class="comment" id="2616703">//</span><br>
<span class="lineno">195</span><span class="comment" id="2616706">//&nbsp;These&nbsp;three&nbsp;considerations—choose&nbsp;an&nbsp;epoch&nbsp;as&nbsp;early&nbsp;as&nbsp;possible,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2616781">//&nbsp;uses&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;that&nbsp;is&nbsp;no&nbsp;more&nbsp;than&nbsp;2⁶³&nbsp;seconds</span><br>
<span class="lineno"></span><span class="comment" id="2616856">//&nbsp;earlier&nbsp;than&nbsp;1970—bring&nbsp;us&nbsp;to&nbsp;the&nbsp;year&nbsp;-292277022399.&nbsp;&nbsp;We&nbsp;refer&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2616928">//&nbsp;this&nbsp;year&nbsp;as&nbsp;the&nbsp;absolute&nbsp;zero&nbsp;year,&nbsp;and&nbsp;to&nbsp;times&nbsp;measured&nbsp;as&nbsp;a&nbsp;uint64</span><br>
<span class="lineno"></span><span class="comment" id="2617002">//&nbsp;seconds&nbsp;since&nbsp;this&nbsp;year&nbsp;as&nbsp;absolute&nbsp;times.</span><br>
<span class="lineno">200</span><span class="comment" id="2617048">//</span><br>
<span class="lineno"></span><span class="comment" id="2617051">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1—the&nbsp;representation</span><br>
<span class="lineno"></span><span class="comment" id="2617127">//&nbsp;used&nbsp;for&nbsp;Time&#39;s&nbsp;sec&nbsp;field—are&nbsp;called&nbsp;internal&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2617185">//</span><br>
<span class="lineno"></span><span class="comment" id="2617188">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1970&nbsp;are&nbsp;called&nbsp;Unix</span><br>
<span class="lineno">205</span><span class="comment" id="2617262">//&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2617272">//</span><br>
<span class="lineno"></span><span class="comment" id="2617275">//&nbsp;It&nbsp;is&nbsp;tempting&nbsp;to&nbsp;just&nbsp;use&nbsp;the&nbsp;year&nbsp;1&nbsp;as&nbsp;the&nbsp;absolute&nbsp;epoch,&nbsp;defining</span><br>
<span class="lineno"></span><span class="comment" id="2617348">//&nbsp;that&nbsp;the&nbsp;routines&nbsp;are&nbsp;only&nbsp;valid&nbsp;for&nbsp;years&nbsp;&gt;=&nbsp;1.&nbsp;&nbsp;However,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2617414">//&nbsp;routines&nbsp;would&nbsp;then&nbsp;be&nbsp;invalid&nbsp;when&nbsp;displaying&nbsp;the&nbsp;epoch&nbsp;in&nbsp;time&nbsp;zones</span><br>
<span class="lineno">210</span><span class="comment" id="2617488">//&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;since&nbsp;it&nbsp;is&nbsp;year&nbsp;0.&nbsp;&nbsp;It&nbsp;doesn&#39;t&nbsp;seem&nbsp;tenable&nbsp;to&nbsp;say&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2617561">//&nbsp;printing&nbsp;the&nbsp;zero&nbsp;time&nbsp;correctly&nbsp;isn&#39;t&nbsp;supported&nbsp;in&nbsp;half&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2617630">//&nbsp;zones.&nbsp;&nbsp;By&nbsp;comparison,&nbsp;it&#39;s&nbsp;reasonable&nbsp;to&nbsp;mishandle&nbsp;some&nbsp;times&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2617699">//&nbsp;the&nbsp;year&nbsp;-292277022399.</span><br>
<span class="lineno"></span><span class="comment" id="2617726">//</span><br>
<span class="lineno">215</span><span class="comment" id="2617729">//&nbsp;All&nbsp;this&nbsp;is&nbsp;opaque&nbsp;to&nbsp;clients&nbsp;of&nbsp;the&nbsp;API&nbsp;and&nbsp;can&nbsp;be&nbsp;changed&nbsp;if&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2617797">//&nbsp;better&nbsp;implementation&nbsp;presents&nbsp;itself.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2617840">const</span>&nbsp;<span class="op" id="2617846">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2617849">//&nbsp;The&nbsp;unsigned&nbsp;zero&nbsp;year&nbsp;for&nbsp;internal&nbsp;calculations.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2617903">//&nbsp;Must&nbsp;be&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;times&nbsp;before&nbsp;it&nbsp;will&nbsp;not&nbsp;compute&nbsp;correctly,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2617974">//&nbsp;but&nbsp;otherwise&nbsp;can&nbsp;be&nbsp;changed&nbsp;at&nbsp;will.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618016">absoluteZeroYear</span>&nbsp;<span class="op" id="2618033">=</span>&nbsp;<span class="op" id="2618035">-</span><span class="num" id="2618036">292277022399</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618051">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Time.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618082">//&nbsp;Assumed&nbsp;by&nbsp;the&nbsp;unixToInternal&nbsp;computation&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618135">internalYear</span>&nbsp;<span class="op" id="2618148">=</span>&nbsp;<span class="num" id="2618150">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618154">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Unix&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618190">unixYear</span>&nbsp;<span class="op" id="2618199">=</span>&nbsp;<span class="num" id="2618201">1970</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618208">//&nbsp;Offsets&nbsp;to&nbsp;convert&nbsp;between&nbsp;internal&nbsp;and&nbsp;absolute&nbsp;or&nbsp;Unix&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618276">absoluteToInternal</span>&nbsp;<span class="ident" id="2618295">int64</span>&nbsp;<span class="op" id="2618301">=</span>&nbsp;<span class="op" id="2618303">(</span><span class="ident" id="2618304">absoluteZeroYear</span>&nbsp;<span class="op" id="2618321">-</span>&nbsp;<span class="ident" id="2618323">internalYear</span><span class="op" id="2618335">)</span>&nbsp;<span class="op" id="2618337">*</span>&nbsp;<span class="num" id="2618339">365.2425</span>&nbsp;<span class="op" id="2618348">*</span>&nbsp;<span class="ident" id="2618350">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618365">internalToAbsolute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2618390">=</span>&nbsp;<span class="op" id="2618392">-</span><span class="ident" id="2618393">absoluteToInternal</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618414">unixToInternal</span>&nbsp;<span class="ident" id="2618429">int64</span>&nbsp;<span class="op" id="2618435">=</span>&nbsp;<span class="op" id="2618437">(</span><span class="num" id="2618438">1969</span><span class="op" id="2618442">*</span><span class="num" id="2618443">365</span>&nbsp;<span class="op" id="2618447">+</span>&nbsp;<span class="num" id="2618449">1969</span><span class="op" id="2618453">/</span><span class="num" id="2618454">4</span>&nbsp;<span class="op" id="2618456">-</span>&nbsp;<span class="num" id="2618458">1969</span><span class="op" id="2618462">/</span><span class="num" id="2618463">100</span>&nbsp;<span class="op" id="2618467">+</span>&nbsp;<span class="num" id="2618469">1969</span><span class="op" id="2618473">/</span><span class="num" id="2618474">400</span><span class="op" id="2618477">)</span>&nbsp;<span class="op" id="2618479">*</span>&nbsp;<span class="ident" id="2618481">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618496">internalToUnix</span>&nbsp;<span class="ident" id="2618511">int64</span>&nbsp;<span class="op" id="2618517">=</span>&nbsp;<span class="op" id="2618519">-</span><span class="ident" id="2618520">unixToInternal</span><br>
<span class="lineno"></span><span class="op" id="2618535">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2618538">//&nbsp;IsZero&nbsp;reports&nbsp;whether&nbsp;t&nbsp;represents&nbsp;the&nbsp;zero&nbsp;time&nbsp;instant,</span><br>
<span class="lineno">240</span><span class="comment" id="2618600">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2618636">func</span>&nbsp;<span class="op" id="2618641">(</span><span class="ident" id="2618642">t</span>&nbsp;<span class="ident" id="2618644">Time</span><span class="op" id="2618648">)</span>&nbsp;<span class="ident" id="2618650">IsZero</span><span class="op" id="2618656">(</span><span class="op" id="2618657">)</span>&nbsp;<span class="builtintype" id="2618659">bool</span>&nbsp;<span class="op" id="2618664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618667">return</span>&nbsp;<span class="ident" id="2618674">t</span><span class="op" id="2618675">.</span><span class="ident" id="2618676">sec</span>&nbsp;<span class="op" id="2618680">==</span>&nbsp;<span class="num" id="2618683">0</span>&nbsp;<span class="op" id="2618685">&amp;&amp;</span>&nbsp;<span class="ident" id="2618688">t</span><span class="op" id="2618689">.</span><span class="ident" id="2618690">nsec</span>&nbsp;<span class="op" id="2618695">==</span>&nbsp;<span class="num" id="2618698">0</span><br>
<span class="lineno"></span><span class="op" id="2618700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2618703">//&nbsp;abs&nbsp;returns&nbsp;the&nbsp;time&nbsp;t&nbsp;as&nbsp;an&nbsp;absolute&nbsp;time,&nbsp;adjusted&nbsp;by&nbsp;the&nbsp;zone&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="2618779">//&nbsp;It&nbsp;is&nbsp;called&nbsp;when&nbsp;computing&nbsp;a&nbsp;presentation&nbsp;property&nbsp;like&nbsp;Month&nbsp;or&nbsp;Hour.</span><br>
<span class="lineno"></span><span class="keyword" id="2618854">func</span>&nbsp;<span class="op" id="2618859">(</span><span class="ident" id="2618860">t</span>&nbsp;<span class="ident" id="2618862">Time</span><span class="op" id="2618866">)</span>&nbsp;<span class="ident" id="2618868">abs</span><span class="op" id="2618871">(</span><span class="op" id="2618872">)</span>&nbsp;<span class="ident" id="2618874">uint64</span>&nbsp;<span class="op" id="2618881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618884">l</span>&nbsp;<span class="op" id="2618886">:=</span>&nbsp;<span class="ident" id="2618889">t</span><span class="op" id="2618890">.</span><span class="ident" id="2618891">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618896">//&nbsp;Avoid&nbsp;function&nbsp;calls&nbsp;when&nbsp;possible.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618936">if</span>&nbsp;<span class="ident" id="2618939">l</span>&nbsp;<span class="op" id="2618941">==</span>&nbsp;<span class="ident" id="2618944">nil</span>&nbsp;<span class="op" id="2618948">||</span>&nbsp;<span class="ident" id="2618951">l</span>&nbsp;<span class="op" id="2618953">==</span>&nbsp;<span class="op" id="2618956">&amp;</span><span class="ident" id="2618957">localLoc</span>&nbsp;<span class="op" id="2618966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618970">l</span>&nbsp;<span class="op" id="2618972">=</span>&nbsp;<span class="ident" id="2618974">l</span><span class="op" id="2618975">.</span><span class="ident" id="2618976">get</span><span class="op" id="2618979">(</span><span class="op" id="2618980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2618983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618986">sec</span>&nbsp;<span class="op" id="2618990">:=</span>&nbsp;<span class="ident" id="2618993">t</span><span class="op" id="2618994">.</span><span class="ident" id="2618995">sec</span>&nbsp;<span class="op" id="2618999">+</span>&nbsp;<span class="ident" id="2619001">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619017">if</span>&nbsp;<span class="ident" id="2619020">l</span>&nbsp;<span class="op" id="2619022">!=</span>&nbsp;<span class="op" id="2619025">&amp;</span><span class="ident" id="2619026">utcLoc</span>&nbsp;<span class="op" id="2619033">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619037">if</span>&nbsp;<span class="ident" id="2619040">l</span><span class="op" id="2619041">.</span><span class="ident" id="2619042">cacheZone</span>&nbsp;<span class="op" id="2619052">!=</span>&nbsp;<span class="ident" id="2619055">nil</span>&nbsp;<span class="op" id="2619059">&amp;&amp;</span>&nbsp;<span class="ident" id="2619062">l</span><span class="op" id="2619063">.</span><span class="ident" id="2619064">cacheStart</span>&nbsp;<span class="op" id="2619075">&lt;=</span>&nbsp;<span class="ident" id="2619078">sec</span>&nbsp;<span class="op" id="2619082">&amp;&amp;</span>&nbsp;<span class="ident" id="2619085">sec</span>&nbsp;<span class="op" id="2619089">&lt;</span>&nbsp;<span class="ident" id="2619091">l</span><span class="op" id="2619092">.</span><span class="ident" id="2619093">cacheEnd</span>&nbsp;<span class="op" id="2619102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619107">sec</span>&nbsp;<span class="op" id="2619111">+=</span>&nbsp;<span class="ident" id="2619114">int64</span><span class="op" id="2619119">(</span><span class="ident" id="2619120">l</span><span class="op" id="2619121">.</span><span class="ident" id="2619122">cacheZone</span><span class="op" id="2619131">.</span><span class="ident" id="2619132">offset</span><span class="op" id="2619138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619142">}</span>&nbsp;<span class="keyword" id="2619144">else</span>&nbsp;<span class="op" id="2619149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619154">_</span><span class="op" id="2619155">,</span>&nbsp;<span class="ident" id="2619157">offset</span><span class="op" id="2619163">,</span>&nbsp;<span class="ident" id="2619165">_</span><span class="op" id="2619166">,</span>&nbsp;<span class="ident" id="2619168">_</span><span class="op" id="2619169">,</span>&nbsp;<span class="ident" id="2619171">_</span>&nbsp;<span class="op" id="2619173">:=</span>&nbsp;<span class="ident" id="2619176">l</span><span class="op" id="2619177">.</span><span class="ident" id="2619178">lookup</span><span class="op" id="2619184">(</span><span class="ident" id="2619185">sec</span><span class="op" id="2619188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619193">sec</span>&nbsp;<span class="op" id="2619197">+=</span>&nbsp;<span class="ident" id="2619200">int64</span><span class="op" id="2619205">(</span><span class="ident" id="2619206">offset</span><span class="op" id="2619212">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619222">return</span>&nbsp;<span class="ident" id="2619229">uint64</span><span class="op" id="2619235">(</span><span class="ident" id="2619236">sec</span>&nbsp;<span class="op" id="2619240">+</span>&nbsp;<span class="op" id="2619242">(</span><span class="ident" id="2619243">unixToInternal</span>&nbsp;<span class="op" id="2619258">+</span>&nbsp;<span class="ident" id="2619260">internalToAbsolute</span><span class="op" id="2619278">)</span><span class="op" id="2619279">)</span><br>
<span class="lineno"></span><span class="op" id="2619281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="comment" id="2619284">//&nbsp;locabs&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;the&nbsp;Zone&nbsp;and&nbsp;abs&nbsp;methods,</span><br>
<span class="lineno"></span><span class="comment" id="2619340">//&nbsp;extracting&nbsp;both&nbsp;return&nbsp;values&nbsp;from&nbsp;a&nbsp;single&nbsp;zone&nbsp;lookup.</span><br>
<span class="lineno"></span><span class="keyword" id="2619400">func</span>&nbsp;<span class="op" id="2619405">(</span><span class="ident" id="2619406">t</span>&nbsp;<span class="ident" id="2619408">Time</span><span class="op" id="2619412">)</span>&nbsp;<span class="ident" id="2619414">locabs</span><span class="op" id="2619420">(</span><span class="op" id="2619421">)</span>&nbsp;<span class="op" id="2619423">(</span><span class="ident" id="2619424">name</span>&nbsp;<span class="builtintype" id="2619429">string</span><span class="op" id="2619435">,</span>&nbsp;<span class="ident" id="2619437">offset</span>&nbsp;<span class="builtintype" id="2619444">int</span><span class="op" id="2619447">,</span>&nbsp;<span class="ident" id="2619449">abs</span>&nbsp;<span class="ident" id="2619453">uint64</span><span class="op" id="2619459">)</span>&nbsp;<span class="op" id="2619461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619464">l</span>&nbsp;<span class="op" id="2619466">:=</span>&nbsp;<span class="ident" id="2619469">t</span><span class="op" id="2619470">.</span><span class="ident" id="2619471">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619476">if</span>&nbsp;<span class="ident" id="2619479">l</span>&nbsp;<span class="op" id="2619481">==</span>&nbsp;<span class="ident" id="2619484">nil</span>&nbsp;<span class="op" id="2619488">||</span>&nbsp;<span class="ident" id="2619491">l</span>&nbsp;<span class="op" id="2619493">==</span>&nbsp;<span class="op" id="2619496">&amp;</span><span class="ident" id="2619497">localLoc</span>&nbsp;<span class="op" id="2619506">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619510">l</span>&nbsp;<span class="op" id="2619512">=</span>&nbsp;<span class="ident" id="2619514">l</span><span class="op" id="2619515">.</span><span class="ident" id="2619516">get</span><span class="op" id="2619519">(</span><span class="op" id="2619520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2619526">//&nbsp;Avoid&nbsp;function&nbsp;call&nbsp;if&nbsp;we&nbsp;hit&nbsp;the&nbsp;local&nbsp;time&nbsp;cache.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619582">sec</span>&nbsp;<span class="op" id="2619586">:=</span>&nbsp;<span class="ident" id="2619589">t</span><span class="op" id="2619590">.</span><span class="ident" id="2619591">sec</span>&nbsp;<span class="op" id="2619595">+</span>&nbsp;<span class="ident" id="2619597">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619613">if</span>&nbsp;<span class="ident" id="2619616">l</span>&nbsp;<span class="op" id="2619618">!=</span>&nbsp;<span class="op" id="2619621">&amp;</span><span class="ident" id="2619622">utcLoc</span>&nbsp;<span class="op" id="2619629">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619633">if</span>&nbsp;<span class="ident" id="2619636">l</span><span class="op" id="2619637">.</span><span class="ident" id="2619638">cacheZone</span>&nbsp;<span class="op" id="2619648">!=</span>&nbsp;<span class="ident" id="2619651">nil</span>&nbsp;<span class="op" id="2619655">&amp;&amp;</span>&nbsp;<span class="ident" id="2619658">l</span><span class="op" id="2619659">.</span><span class="ident" id="2619660">cacheStart</span>&nbsp;<span class="op" id="2619671">&lt;=</span>&nbsp;<span class="ident" id="2619674">sec</span>&nbsp;<span class="op" id="2619678">&amp;&amp;</span>&nbsp;<span class="ident" id="2619681">sec</span>&nbsp;<span class="op" id="2619685">&lt;</span>&nbsp;<span class="ident" id="2619687">l</span><span class="op" id="2619688">.</span><span class="ident" id="2619689">cacheEnd</span>&nbsp;<span class="op" id="2619698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619703">name</span>&nbsp;<span class="op" id="2619708">=</span>&nbsp;<span class="ident" id="2619710">l</span><span class="op" id="2619711">.</span><span class="ident" id="2619712">cacheZone</span><span class="op" id="2619721">.</span><span class="ident" id="2619722">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619730">offset</span>&nbsp;<span class="op" id="2619737">=</span>&nbsp;<span class="ident" id="2619739">l</span><span class="op" id="2619740">.</span><span class="ident" id="2619741">cacheZone</span><span class="op" id="2619750">.</span><span class="ident" id="2619751">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619760">}</span>&nbsp;<span class="keyword" id="2619762">else</span>&nbsp;<span class="op" id="2619767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619772">name</span><span class="op" id="2619776">,</span>&nbsp;<span class="ident" id="2619778">offset</span><span class="op" id="2619784">,</span>&nbsp;<span class="ident" id="2619786">_</span><span class="op" id="2619787">,</span>&nbsp;<span class="ident" id="2619789">_</span><span class="op" id="2619790">,</span>&nbsp;<span class="ident" id="2619792">_</span>&nbsp;<span class="op" id="2619794">=</span>&nbsp;<span class="ident" id="2619796">l</span><span class="op" id="2619797">.</span><span class="ident" id="2619798">lookup</span><span class="op" id="2619804">(</span><span class="ident" id="2619805">sec</span><span class="op" id="2619808">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619816">sec</span>&nbsp;<span class="op" id="2619820">+=</span>&nbsp;<span class="ident" id="2619823">int64</span><span class="op" id="2619828">(</span><span class="ident" id="2619829">offset</span><span class="op" id="2619835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619838">}</span>&nbsp;<span class="keyword" id="2619840">else</span>&nbsp;<span class="op" id="2619845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619849">name</span>&nbsp;<span class="op" id="2619854">=</span>&nbsp;<span class="string" id="2619856">&#34;UTC&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619863">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619866">abs</span>&nbsp;<span class="op" id="2619870">=</span>&nbsp;<span class="ident" id="2619872">uint64</span><span class="op" id="2619878">(</span><span class="ident" id="2619879">sec</span>&nbsp;<span class="op" id="2619883">+</span>&nbsp;<span class="op" id="2619885">(</span><span class="ident" id="2619886">unixToInternal</span>&nbsp;<span class="op" id="2619901">+</span>&nbsp;<span class="ident" id="2619903">internalToAbsolute</span><span class="op" id="2619921">)</span><span class="op" id="2619922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619925">return</span><br>
<span class="lineno"></span><span class="op" id="2619932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2619935">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;year,&nbsp;month,&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno">290</span><span class="keyword" id="2619995">func</span>&nbsp;<span class="op" id="2620000">(</span><span class="ident" id="2620001">t</span>&nbsp;<span class="ident" id="2620003">Time</span><span class="op" id="2620007">)</span>&nbsp;<span class="ident" id="2620009">Date</span><span class="op" id="2620013">(</span><span class="op" id="2620014">)</span>&nbsp;<span class="op" id="2620016">(</span><span class="ident" id="2620017">year</span>&nbsp;<span class="builtintype" id="2620022">int</span><span class="op" id="2620025">,</span>&nbsp;<span class="ident" id="2620027">month</span>&nbsp;<span class="ident" id="2620033">Month</span><span class="op" id="2620038">,</span>&nbsp;<span class="ident" id="2620040">day</span>&nbsp;<span class="builtintype" id="2620044">int</span><span class="op" id="2620047">)</span>&nbsp;<span class="op" id="2620049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620052">year</span><span class="op" id="2620056">,</span>&nbsp;<span class="ident" id="2620058">month</span><span class="op" id="2620063">,</span>&nbsp;<span class="ident" id="2620065">day</span><span class="op" id="2620068">,</span>&nbsp;<span class="ident" id="2620070">_</span>&nbsp;<span class="op" id="2620072">=</span>&nbsp;<span class="ident" id="2620074">t</span><span class="op" id="2620075">.</span><span class="ident" id="2620076">date</span><span class="op" id="2620080">(</span><span class="builtintype" id="2620081">true</span><span class="op" id="2620085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620088">return</span><br>
<span class="lineno"></span><span class="op" id="2620095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="comment" id="2620098">//&nbsp;Year&nbsp;returns&nbsp;the&nbsp;year&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2620142">func</span>&nbsp;<span class="op" id="2620147">(</span><span class="ident" id="2620148">t</span>&nbsp;<span class="ident" id="2620150">Time</span><span class="op" id="2620154">)</span>&nbsp;<span class="ident" id="2620156">Year</span><span class="op" id="2620160">(</span><span class="op" id="2620161">)</span>&nbsp;<span class="builtintype" id="2620163">int</span>&nbsp;<span class="op" id="2620167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620170">year</span><span class="op" id="2620174">,</span>&nbsp;<span class="ident" id="2620176">_</span><span class="op" id="2620177">,</span>&nbsp;<span class="ident" id="2620179">_</span><span class="op" id="2620180">,</span>&nbsp;<span class="ident" id="2620182">_</span>&nbsp;<span class="op" id="2620184">:=</span>&nbsp;<span class="ident" id="2620187">t</span><span class="op" id="2620188">.</span><span class="ident" id="2620189">date</span><span class="op" id="2620193">(</span><span class="builtintype" id="2620194">false</span><span class="op" id="2620199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620202">return</span>&nbsp;<span class="ident" id="2620209">year</span><br>
<span class="lineno"></span><span class="op" id="2620214">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="2620217">//&nbsp;Month&nbsp;returns&nbsp;the&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2620272">func</span>&nbsp;<span class="op" id="2620277">(</span><span class="ident" id="2620278">t</span>&nbsp;<span class="ident" id="2620280">Time</span><span class="op" id="2620284">)</span>&nbsp;<span class="ident" id="2620286">Month</span><span class="op" id="2620291">(</span><span class="op" id="2620292">)</span>&nbsp;<span class="ident" id="2620294">Month</span>&nbsp;<span class="op" id="2620300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620303">_</span><span class="op" id="2620304">,</span>&nbsp;<span class="ident" id="2620306">month</span><span class="op" id="2620311">,</span>&nbsp;<span class="ident" id="2620313">_</span><span class="op" id="2620314">,</span>&nbsp;<span class="ident" id="2620316">_</span>&nbsp;<span class="op" id="2620318">:=</span>&nbsp;<span class="ident" id="2620321">t</span><span class="op" id="2620322">.</span><span class="ident" id="2620323">date</span><span class="op" id="2620327">(</span><span class="builtintype" id="2620328">true</span><span class="op" id="2620332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620335">return</span>&nbsp;<span class="ident" id="2620342">month</span><br>
<span class="lineno">305</span><span class="op" id="2620348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2620351">//&nbsp;Day&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;month&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2620403">func</span>&nbsp;<span class="op" id="2620408">(</span><span class="ident" id="2620409">t</span>&nbsp;<span class="ident" id="2620411">Time</span><span class="op" id="2620415">)</span>&nbsp;<span class="ident" id="2620417">Day</span><span class="op" id="2620420">(</span><span class="op" id="2620421">)</span>&nbsp;<span class="builtintype" id="2620423">int</span>&nbsp;<span class="op" id="2620427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620430">_</span><span class="op" id="2620431">,</span>&nbsp;<span class="ident" id="2620433">_</span><span class="op" id="2620434">,</span>&nbsp;<span class="ident" id="2620436">day</span><span class="op" id="2620439">,</span>&nbsp;<span class="ident" id="2620441">_</span>&nbsp;<span class="op" id="2620443">:=</span>&nbsp;<span class="ident" id="2620446">t</span><span class="op" id="2620447">.</span><span class="ident" id="2620448">date</span><span class="op" id="2620452">(</span><span class="builtintype" id="2620453">true</span><span class="op" id="2620457">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620460">return</span>&nbsp;<span class="ident" id="2620467">day</span><br>
<span class="lineno"></span><span class="op" id="2620471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2620474">//&nbsp;Weekday&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2620529">func</span>&nbsp;<span class="op" id="2620534">(</span><span class="ident" id="2620535">t</span>&nbsp;<span class="ident" id="2620537">Time</span><span class="op" id="2620541">)</span>&nbsp;<span class="ident" id="2620543">Weekday</span><span class="op" id="2620550">(</span><span class="op" id="2620551">)</span>&nbsp;<span class="ident" id="2620553">Weekday</span>&nbsp;<span class="op" id="2620561">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620564">return</span>&nbsp;<span class="ident" id="2620571">absWeekday</span><span class="op" id="2620581">(</span><span class="ident" id="2620582">t</span><span class="op" id="2620583">.</span><span class="ident" id="2620584">abs</span><span class="op" id="2620587">(</span><span class="op" id="2620588">)</span><span class="op" id="2620589">)</span><br>
<span class="lineno"></span><span class="op" id="2620591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2620594">//&nbsp;absWeekday&nbsp;is&nbsp;like&nbsp;Weekday&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2620658">func</span>&nbsp;<span class="ident" id="2620663">absWeekday</span><span class="op" id="2620673">(</span><span class="ident" id="2620674">abs</span>&nbsp;<span class="ident" id="2620678">uint64</span><span class="op" id="2620684">)</span>&nbsp;<span class="ident" id="2620686">Weekday</span>&nbsp;<span class="op" id="2620694">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2620697">//&nbsp;January&nbsp;1&nbsp;of&nbsp;the&nbsp;absolute&nbsp;year,&nbsp;like&nbsp;January&nbsp;1&nbsp;of&nbsp;2001,&nbsp;was&nbsp;a&nbsp;Monday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620771">sec</span>&nbsp;<span class="op" id="2620775">:=</span>&nbsp;<span class="op" id="2620778">(</span><span class="ident" id="2620779">abs</span>&nbsp;<span class="op" id="2620783">+</span>&nbsp;<span class="ident" id="2620785">uint64</span><span class="op" id="2620791">(</span><span class="ident" id="2620792">Monday</span><span class="op" id="2620798">)</span><span class="op" id="2620799">*</span><span class="ident" id="2620800">secondsPerDay</span><span class="op" id="2620813">)</span>&nbsp;<span class="op" id="2620815">%</span>&nbsp;<span class="ident" id="2620817">secondsPerWeek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620833">return</span>&nbsp;<span class="ident" id="2620840">Weekday</span><span class="op" id="2620847">(</span><span class="builtintype" id="2620848">int</span><span class="op" id="2620851">(</span><span class="ident" id="2620852">sec</span><span class="op" id="2620855">)</span>&nbsp;<span class="op" id="2620857">/</span>&nbsp;<span class="ident" id="2620859">secondsPerDay</span><span class="op" id="2620872">)</span><br>
<span class="lineno"></span><span class="op" id="2620874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="2620877">//&nbsp;ISOWeek&nbsp;returns&nbsp;the&nbsp;ISO&nbsp;8601&nbsp;year&nbsp;and&nbsp;week&nbsp;number&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="comment" id="2620949">//&nbsp;Week&nbsp;ranges&nbsp;from&nbsp;1&nbsp;to&nbsp;53.&nbsp;Jan&nbsp;01&nbsp;to&nbsp;Jan&nbsp;03&nbsp;of&nbsp;year&nbsp;n&nbsp;might&nbsp;belong&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2621021">//&nbsp;week&nbsp;52&nbsp;or&nbsp;53&nbsp;of&nbsp;year&nbsp;n-1,&nbsp;and&nbsp;Dec&nbsp;29&nbsp;to&nbsp;Dec&nbsp;31&nbsp;might&nbsp;belong&nbsp;to&nbsp;week&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2621095">//&nbsp;of&nbsp;year&nbsp;n+1.</span><br>
<span class="lineno"></span><span class="keyword" id="2621111">func</span>&nbsp;<span class="op" id="2621116">(</span><span class="ident" id="2621117">t</span>&nbsp;<span class="ident" id="2621119">Time</span><span class="op" id="2621123">)</span>&nbsp;<span class="ident" id="2621125">ISOWeek</span><span class="op" id="2621132">(</span><span class="op" id="2621133">)</span>&nbsp;<span class="op" id="2621135">(</span><span class="ident" id="2621136">year</span><span class="op" id="2621140">,</span>&nbsp;<span class="ident" id="2621142">week</span>&nbsp;<span class="builtintype" id="2621147">int</span><span class="op" id="2621150">)</span>&nbsp;<span class="op" id="2621152">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621155">year</span><span class="op" id="2621159">,</span>&nbsp;<span class="ident" id="2621161">month</span><span class="op" id="2621166">,</span>&nbsp;<span class="ident" id="2621168">day</span><span class="op" id="2621171">,</span>&nbsp;<span class="ident" id="2621173">yday</span>&nbsp;<span class="op" id="2621178">:=</span>&nbsp;<span class="ident" id="2621181">t</span><span class="op" id="2621182">.</span><span class="ident" id="2621183">date</span><span class="op" id="2621187">(</span><span class="builtintype" id="2621188">true</span><span class="op" id="2621192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621195">wday</span>&nbsp;<span class="op" id="2621200">:=</span>&nbsp;<span class="builtintype" id="2621203">int</span><span class="op" id="2621206">(</span><span class="ident" id="2621207">t</span><span class="op" id="2621208">.</span><span class="ident" id="2621209">Weekday</span><span class="op" id="2621216">(</span><span class="op" id="2621217">)</span><span class="op" id="2621218">+</span><span class="num" id="2621219">6</span><span class="op" id="2621220">)</span>&nbsp;<span class="op" id="2621222">%</span>&nbsp;<span class="num" id="2621224">7</span>&nbsp;<span class="comment" id="2621226">//&nbsp;weekday&nbsp;but&nbsp;Monday&nbsp;=&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621254">const</span>&nbsp;<span class="op" id="2621260">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621264">Mon</span>&nbsp;<span class="builtintype" id="2621268">int</span>&nbsp;<span class="op" id="2621272">=</span>&nbsp;<span class="ident" id="2621274">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621281">Tue</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621287">Wed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621293">Thu</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621299">Fri</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621305">Sat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621311">Sun</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621316">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621320">//&nbsp;Calculate&nbsp;week&nbsp;as&nbsp;number&nbsp;of&nbsp;Mondays&nbsp;in&nbsp;year&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621374">//&nbsp;and&nbsp;including&nbsp;today,&nbsp;plus&nbsp;1&nbsp;because&nbsp;the&nbsp;first&nbsp;week&nbsp;is&nbsp;week&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621440">//&nbsp;Putting&nbsp;the&nbsp;+&nbsp;1&nbsp;inside&nbsp;the&nbsp;numerator&nbsp;as&nbsp;a&nbsp;+&nbsp;7&nbsp;keeps&nbsp;the</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621500">//&nbsp;numerator&nbsp;from&nbsp;being&nbsp;negative,&nbsp;which&nbsp;would&nbsp;cause&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621559">//&nbsp;round&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621582">week</span>&nbsp;<span class="op" id="2621587">=</span>&nbsp;<span class="op" id="2621589">(</span><span class="ident" id="2621590">yday</span>&nbsp;<span class="op" id="2621595">-</span>&nbsp;<span class="ident" id="2621597">wday</span>&nbsp;<span class="op" id="2621602">+</span>&nbsp;<span class="num" id="2621604">7</span><span class="op" id="2621605">)</span>&nbsp;<span class="op" id="2621607">/</span>&nbsp;<span class="num" id="2621609">7</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621613">//&nbsp;The&nbsp;week&nbsp;number&nbsp;is&nbsp;now&nbsp;correct&nbsp;under&nbsp;the&nbsp;assumption</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621669">//&nbsp;that&nbsp;the&nbsp;first&nbsp;Monday&nbsp;of&nbsp;the&nbsp;year&nbsp;is&nbsp;in&nbsp;week&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621721">//&nbsp;If&nbsp;Jan&nbsp;1&nbsp;is&nbsp;a&nbsp;Tuesday,&nbsp;Wednesday,&nbsp;or&nbsp;Thursday,&nbsp;the&nbsp;first&nbsp;Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621789">//&nbsp;is&nbsp;actually&nbsp;in&nbsp;week&nbsp;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621816">jan1wday</span>&nbsp;<span class="op" id="2621825">:=</span>&nbsp;<span class="op" id="2621828">(</span><span class="ident" id="2621829">wday</span>&nbsp;<span class="op" id="2621834">-</span>&nbsp;<span class="ident" id="2621836">yday</span>&nbsp;<span class="op" id="2621841">+</span>&nbsp;<span class="num" id="2621843">7</span><span class="op" id="2621844">*</span><span class="num" id="2621845">53</span><span class="op" id="2621847">)</span>&nbsp;<span class="op" id="2621849">%</span>&nbsp;<span class="num" id="2621851">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621854">if</span>&nbsp;<span class="ident" id="2621857">Tue</span>&nbsp;<span class="op" id="2621861">&lt;=</span>&nbsp;<span class="ident" id="2621864">jan1wday</span>&nbsp;<span class="op" id="2621873">&amp;&amp;</span>&nbsp;<span class="ident" id="2621876">jan1wday</span>&nbsp;<span class="op" id="2621885">&lt;=</span>&nbsp;<span class="ident" id="2621888">Thu</span>&nbsp;<span class="op" id="2621892">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621896">week</span><span class="op" id="2621900">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621908">//&nbsp;If&nbsp;the&nbsp;week&nbsp;number&nbsp;is&nbsp;still&nbsp;0,&nbsp;we&#39;re&nbsp;in&nbsp;early&nbsp;January&nbsp;but&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621973">//&nbsp;the&nbsp;last&nbsp;week&nbsp;of&nbsp;last&nbsp;year.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622005">if</span>&nbsp;<span class="ident" id="2622008">week</span>&nbsp;<span class="op" id="2622013">==</span>&nbsp;<span class="num" id="2622016">0</span>&nbsp;<span class="op" id="2622018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622022">year</span><span class="op" id="2622026">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622031">week</span>&nbsp;<span class="op" id="2622036">=</span>&nbsp;<span class="num" id="2622038">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2622043">//&nbsp;A&nbsp;year&nbsp;has&nbsp;53&nbsp;weeks&nbsp;when&nbsp;Jan&nbsp;1&nbsp;or&nbsp;Dec&nbsp;31&nbsp;is&nbsp;a&nbsp;Thursday,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2622104">//&nbsp;meaning&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Friday</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2622152">//&nbsp;or&nbsp;it&nbsp;was&nbsp;a&nbsp;leap&nbsp;year&nbsp;and&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Saturday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622221">if</span>&nbsp;<span class="ident" id="2622224">jan1wday</span>&nbsp;<span class="op" id="2622233">==</span>&nbsp;<span class="ident" id="2622236">Fri</span>&nbsp;<span class="op" id="2622240">||</span>&nbsp;<span class="op" id="2622243">(</span><span class="ident" id="2622244">jan1wday</span>&nbsp;<span class="op" id="2622253">==</span>&nbsp;<span class="ident" id="2622256">Sat</span>&nbsp;<span class="op" id="2622260">&amp;&amp;</span>&nbsp;<span class="ident" id="2622263">isLeap</span><span class="op" id="2622269">(</span><span class="ident" id="2622270">year</span><span class="op" id="2622274">)</span><span class="op" id="2622275">)</span>&nbsp;<span class="op" id="2622277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622282">week</span><span class="op" id="2622286">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2622291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2622294">}</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2622298">//&nbsp;December&nbsp;29&nbsp;to&nbsp;31&nbsp;are&nbsp;in&nbsp;week&nbsp;1&nbsp;of&nbsp;next&nbsp;year&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2622350">//&nbsp;they&nbsp;are&nbsp;after&nbsp;the&nbsp;last&nbsp;Thursday&nbsp;of&nbsp;the&nbsp;year&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2622403">//&nbsp;December&nbsp;31&nbsp;is&nbsp;a&nbsp;Monday,&nbsp;Tuesday,&nbsp;or&nbsp;Wednesday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622455">if</span>&nbsp;<span class="ident" id="2622458">month</span>&nbsp;<span class="op" id="2622464">==</span>&nbsp;<span class="ident" id="2622467">December</span>&nbsp;<span class="op" id="2622476">&amp;&amp;</span>&nbsp;<span class="ident" id="2622479">day</span>&nbsp;<span class="op" id="2622483">&gt;=</span>&nbsp;<span class="num" id="2622486">29</span>&nbsp;<span class="op" id="2622489">&amp;&amp;</span>&nbsp;<span class="ident" id="2622492">wday</span>&nbsp;<span class="op" id="2622497">&lt;</span>&nbsp;<span class="ident" id="2622499">Thu</span>&nbsp;<span class="op" id="2622503">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622507">if</span>&nbsp;<span class="ident" id="2622510">dec31wday</span>&nbsp;<span class="op" id="2622520">:=</span>&nbsp;<span class="op" id="2622523">(</span><span class="ident" id="2622524">wday</span>&nbsp;<span class="op" id="2622529">+</span>&nbsp;<span class="num" id="2622531">31</span>&nbsp;<span class="op" id="2622534">-</span>&nbsp;<span class="ident" id="2622536">day</span><span class="op" id="2622539">)</span>&nbsp;<span class="op" id="2622541">%</span>&nbsp;<span class="num" id="2622543">7</span><span class="op" id="2622544">;</span>&nbsp;<span class="ident" id="2622546">Mon</span>&nbsp;<span class="op" id="2622550">&lt;=</span>&nbsp;<span class="ident" id="2622553">dec31wday</span>&nbsp;<span class="op" id="2622563">&amp;&amp;</span>&nbsp;<span class="ident" id="2622566">dec31wday</span>&nbsp;<span class="op" id="2622576">&lt;=</span>&nbsp;<span class="ident" id="2622579">Wed</span>&nbsp;<span class="op" id="2622583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622588">year</span><span class="op" id="2622592">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622598">week</span>&nbsp;<span class="op" id="2622603">=</span>&nbsp;<span class="num" id="2622605">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2622609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2622612">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622616">return</span><br>
<span class="lineno"></span><span class="op" id="2622623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2622626">//&nbsp;Clock&nbsp;returns&nbsp;the&nbsp;hour,&nbsp;minute,&nbsp;and&nbsp;second&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno">385</span><span class="keyword" id="2622703">func</span>&nbsp;<span class="op" id="2622708">(</span><span class="ident" id="2622709">t</span>&nbsp;<span class="ident" id="2622711">Time</span><span class="op" id="2622715">)</span>&nbsp;<span class="ident" id="2622717">Clock</span><span class="op" id="2622722">(</span><span class="op" id="2622723">)</span>&nbsp;<span class="op" id="2622725">(</span><span class="ident" id="2622726">hour</span><span class="op" id="2622730">,</span>&nbsp;<span class="ident" id="2622732">min</span><span class="op" id="2622735">,</span>&nbsp;<span class="ident" id="2622737">sec</span>&nbsp;<span class="builtintype" id="2622741">int</span><span class="op" id="2622744">)</span>&nbsp;<span class="op" id="2622746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622749">return</span>&nbsp;<span class="ident" id="2622756">absClock</span><span class="op" id="2622764">(</span><span class="ident" id="2622765">t</span><span class="op" id="2622766">.</span><span class="ident" id="2622767">abs</span><span class="op" id="2622770">(</span><span class="op" id="2622771">)</span><span class="op" id="2622772">)</span><br>
<span class="lineno"></span><span class="op" id="2622774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2622777">//&nbsp;absClock&nbsp;is&nbsp;like&nbsp;clock&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno">390</span><span class="keyword" id="2622837">func</span>&nbsp;<span class="ident" id="2622842">absClock</span><span class="op" id="2622850">(</span><span class="ident" id="2622851">abs</span>&nbsp;<span class="ident" id="2622855">uint64</span><span class="op" id="2622861">)</span>&nbsp;<span class="op" id="2622863">(</span><span class="ident" id="2622864">hour</span><span class="op" id="2622868">,</span>&nbsp;<span class="ident" id="2622870">min</span><span class="op" id="2622873">,</span>&nbsp;<span class="ident" id="2622875">sec</span>&nbsp;<span class="builtintype" id="2622879">int</span><span class="op" id="2622882">)</span>&nbsp;<span class="op" id="2622884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622887">sec</span>&nbsp;<span class="op" id="2622891">=</span>&nbsp;<span class="builtintype" id="2622893">int</span><span class="op" id="2622896">(</span><span class="ident" id="2622897">abs</span>&nbsp;<span class="op" id="2622901">%</span>&nbsp;<span class="ident" id="2622903">secondsPerDay</span><span class="op" id="2622916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622919">hour</span>&nbsp;<span class="op" id="2622924">=</span>&nbsp;<span class="ident" id="2622926">sec</span>&nbsp;<span class="op" id="2622930">/</span>&nbsp;<span class="ident" id="2622932">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622948">sec</span>&nbsp;<span class="op" id="2622952">-=</span>&nbsp;<span class="ident" id="2622955">hour</span>&nbsp;<span class="op" id="2622960">*</span>&nbsp;<span class="ident" id="2622962">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622978">min</span>&nbsp;<span class="op" id="2622982">=</span>&nbsp;<span class="ident" id="2622984">sec</span>&nbsp;<span class="op" id="2622988">/</span>&nbsp;<span class="ident" id="2622990">secondsPerMinute</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623008">sec</span>&nbsp;<span class="op" id="2623012">-=</span>&nbsp;<span class="ident" id="2623015">min</span>&nbsp;<span class="op" id="2623019">*</span>&nbsp;<span class="ident" id="2623021">secondsPerMinute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2623039">return</span><br>
<span class="lineno"></span><span class="op" id="2623046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2623049">//&nbsp;Hour&nbsp;returns&nbsp;the&nbsp;hour&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;23].</span><br>
<span class="lineno">400</span><span class="keyword" id="2623127">func</span>&nbsp;<span class="op" id="2623132">(</span><span class="ident" id="2623133">t</span>&nbsp;<span class="ident" id="2623135">Time</span><span class="op" id="2623139">)</span>&nbsp;<span class="ident" id="2623141">Hour</span><span class="op" id="2623145">(</span><span class="op" id="2623146">)</span>&nbsp;<span class="builtintype" id="2623148">int</span>&nbsp;<span class="op" id="2623152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2623155">return</span>&nbsp;<span class="builtintype" id="2623162">int</span><span class="op" id="2623165">(</span><span class="ident" id="2623166">t</span><span class="op" id="2623167">.</span><span class="ident" id="2623168">abs</span><span class="op" id="2623171">(</span><span class="op" id="2623172">)</span><span class="op" id="2623173">%</span><span class="ident" id="2623174">secondsPerDay</span><span class="op" id="2623187">)</span>&nbsp;<span class="op" id="2623189">/</span>&nbsp;<span class="ident" id="2623191">secondsPerHour</span><br>
<span class="lineno"></span><span class="op" id="2623206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2623209">//&nbsp;Minute&nbsp;returns&nbsp;the&nbsp;minute&nbsp;offset&nbsp;within&nbsp;the&nbsp;hour&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">405</span><span class="keyword" id="2623299">func</span>&nbsp;<span class="op" id="2623304">(</span><span class="ident" id="2623305">t</span>&nbsp;<span class="ident" id="2623307">Time</span><span class="op" id="2623311">)</span>&nbsp;<span class="ident" id="2623313">Minute</span><span class="op" id="2623319">(</span><span class="op" id="2623320">)</span>&nbsp;<span class="builtintype" id="2623322">int</span>&nbsp;<span class="op" id="2623326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2623329">return</span>&nbsp;<span class="builtintype" id="2623336">int</span><span class="op" id="2623339">(</span><span class="ident" id="2623340">t</span><span class="op" id="2623341">.</span><span class="ident" id="2623342">abs</span><span class="op" id="2623345">(</span><span class="op" id="2623346">)</span><span class="op" id="2623347">%</span><span class="ident" id="2623348">secondsPerHour</span><span class="op" id="2623362">)</span>&nbsp;<span class="op" id="2623364">/</span>&nbsp;<span class="ident" id="2623366">secondsPerMinute</span><br>
<span class="lineno"></span><span class="op" id="2623383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2623386">//&nbsp;Second&nbsp;returns&nbsp;the&nbsp;second&nbsp;offset&nbsp;within&nbsp;the&nbsp;minute&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">410</span><span class="keyword" id="2623478">func</span>&nbsp;<span class="op" id="2623483">(</span><span class="ident" id="2623484">t</span>&nbsp;<span class="ident" id="2623486">Time</span><span class="op" id="2623490">)</span>&nbsp;<span class="ident" id="2623492">Second</span><span class="op" id="2623498">(</span><span class="op" id="2623499">)</span>&nbsp;<span class="builtintype" id="2623501">int</span>&nbsp;<span class="op" id="2623505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2623508">return</span>&nbsp;<span class="builtintype" id="2623515">int</span><span class="op" id="2623518">(</span><span class="ident" id="2623519">t</span><span class="op" id="2623520">.</span><span class="ident" id="2623521">abs</span><span class="op" id="2623524">(</span><span class="op" id="2623525">)</span>&nbsp;<span class="op" id="2623527">%</span>&nbsp;<span class="ident" id="2623529">secondsPerMinute</span><span class="op" id="2623545">)</span><br>
<span class="lineno"></span><span class="op" id="2623547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2623550">//&nbsp;Nanosecond&nbsp;returns&nbsp;the&nbsp;nanosecond&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;specified&nbsp;by&nbsp;t,</span><br>
<span class="lineno">415</span><span class="comment" id="2623628">//&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2623660">func</span>&nbsp;<span class="op" id="2623665">(</span><span class="ident" id="2623666">t</span>&nbsp;<span class="ident" id="2623668">Time</span><span class="op" id="2623672">)</span>&nbsp;<span class="ident" id="2623674">Nanosecond</span><span class="op" id="2623684">(</span><span class="op" id="2623685">)</span>&nbsp;<span class="builtintype" id="2623687">int</span>&nbsp;<span class="op" id="2623691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2623694">return</span>&nbsp;<span class="builtintype" id="2623701">int</span><span class="op" id="2623704">(</span><span class="ident" id="2623705">t</span><span class="op" id="2623706">.</span><span class="ident" id="2623707">nsec</span><span class="op" id="2623711">)</span><br>
<span class="lineno"></span><span class="op" id="2623713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="2623716">//&nbsp;YearDay&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[1,365]&nbsp;for&nbsp;non-leap&nbsp;years,</span><br>
<span class="lineno"></span><span class="comment" id="2623812">//&nbsp;and&nbsp;[1,366]&nbsp;in&nbsp;leap&nbsp;years.</span><br>
<span class="lineno"></span><span class="keyword" id="2623842">func</span>&nbsp;<span class="op" id="2623847">(</span><span class="ident" id="2623848">t</span>&nbsp;<span class="ident" id="2623850">Time</span><span class="op" id="2623854">)</span>&nbsp;<span class="ident" id="2623856">YearDay</span><span class="op" id="2623863">(</span><span class="op" id="2623864">)</span>&nbsp;<span class="builtintype" id="2623866">int</span>&nbsp;<span class="op" id="2623870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623873">_</span><span class="op" id="2623874">,</span>&nbsp;<span class="ident" id="2623876">_</span><span class="op" id="2623877">,</span>&nbsp;<span class="ident" id="2623879">_</span><span class="op" id="2623880">,</span>&nbsp;<span class="ident" id="2623882">yday</span>&nbsp;<span class="op" id="2623887">:=</span>&nbsp;<span class="ident" id="2623890">t</span><span class="op" id="2623891">.</span><span class="ident" id="2623892">date</span><span class="op" id="2623896">(</span><span class="builtintype" id="2623897">false</span><span class="op" id="2623902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2623905">return</span>&nbsp;<span class="ident" id="2623912">yday</span>&nbsp;<span class="op" id="2623917">+</span>&nbsp;<span class="num" id="2623919">1</span><br>
<span class="lineno">425</span><span class="op" id="2623921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2623924">//&nbsp;A&nbsp;Duration&nbsp;represents&nbsp;the&nbsp;elapsed&nbsp;time&nbsp;between&nbsp;two&nbsp;instants</span><br>
<span class="lineno"></span><span class="comment" id="2623987">//&nbsp;as&nbsp;an&nbsp;int64&nbsp;nanosecond&nbsp;count.&nbsp;&nbsp;The&nbsp;representation&nbsp;limits&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2624051">//&nbsp;largest&nbsp;representable&nbsp;duration&nbsp;to&nbsp;approximately&nbsp;290&nbsp;years.</span><br>
<span class="lineno">430</span><span class="keyword" id="2624113">type</span>&nbsp;<span class="ident" id="2624118">Duration</span>&nbsp;<span class="ident" id="2624127">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2624134">const</span>&nbsp;<span class="op" id="2624140">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624143">minDuration</span>&nbsp;<span class="ident" id="2624155">Duration</span>&nbsp;<span class="op" id="2624164">=</span>&nbsp;<span class="op" id="2624166">-</span><span class="num" id="2624167">1</span>&nbsp;<span class="op" id="2624169">&lt;&lt;</span>&nbsp;<span class="num" id="2624172">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624176">maxDuration</span>&nbsp;<span class="ident" id="2624188">Duration</span>&nbsp;<span class="op" id="2624197">=</span>&nbsp;<span class="num" id="2624199">1</span><span class="op" id="2624200">&lt;&lt;</span><span class="num" id="2624202">63</span>&nbsp;<span class="op" id="2624205">-</span>&nbsp;<span class="num" id="2624207">1</span><br>
<span class="lineno">435</span><span class="op" id="2624209">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2624212">//&nbsp;Common&nbsp;durations.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;definition&nbsp;for&nbsp;units&nbsp;of&nbsp;Day&nbsp;or&nbsp;larger</span><br>
<span class="lineno"></span><span class="comment" id="2624284">//&nbsp;to&nbsp;avoid&nbsp;confusion&nbsp;across&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;zone&nbsp;transitions.</span><br>
<span class="lineno"></span><span class="comment" id="2624353">//</span><br>
<span class="lineno">440</span><span class="comment" id="2624356">//&nbsp;To&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;units&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;divide:</span><br>
<span class="lineno"></span><span class="comment" id="2624411">//&nbsp;&nbsp;&nbsp;&nbspsecond&nbsp;:=&nbsp;time.Second</span><br>
<span class="lineno"></span><span class="comment" id="2624436">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(int64(second/time.Millisecond))&nbsp;//&nbsp;prints&nbsp;1000</span><br>
<span class="lineno"></span><span class="comment" id="2624496">//</span><br>
<span class="lineno"></span><span class="comment" id="2624499">//&nbsp;To&nbsp;convert&nbsp;an&nbsp;integer&nbsp;number&nbsp;of&nbsp;units&nbsp;to&nbsp;a&nbsp;Duration,&nbsp;multiply:</span><br>
<span class="lineno">445</span><span class="comment" id="2624565">//&nbsp;&nbsp;&nbsp;&nbspseconds&nbsp;:=&nbsp;10</span><br>
<span class="lineno"></span><span class="comment" id="2624582">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(time.Duration(seconds)*time.Second)&nbsp;//&nbsp;prints&nbsp;10s</span><br>
<span class="lineno"></span><span class="comment" id="2624645">//</span><br>
<span class="lineno"></span><span class="keyword" id="2624648">const</span>&nbsp;<span class="op" id="2624654">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624657">Nanosecond</span>&nbsp;&nbsp;<span class="ident" id="2624669">Duration</span>&nbsp;<span class="op" id="2624678">=</span>&nbsp;<span class="num" id="2624680">1</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624683">Microsecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2624704">=</span>&nbsp;<span class="num" id="2624706">1000</span>&nbsp;<span class="op" id="2624711">*</span>&nbsp;<span class="ident" id="2624713">Nanosecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624725">Millisecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2624746">=</span>&nbsp;<span class="num" id="2624748">1000</span>&nbsp;<span class="op" id="2624753">*</span>&nbsp;<span class="ident" id="2624755">Microsecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624768">Second</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2624789">=</span>&nbsp;<span class="num" id="2624791">1000</span>&nbsp;<span class="op" id="2624796">*</span>&nbsp;<span class="ident" id="2624798">Millisecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624811">Minute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2624832">=</span>&nbsp;<span class="num" id="2624834">60</span>&nbsp;<span class="op" id="2624837">*</span>&nbsp;<span class="ident" id="2624839">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624847">Hour</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2624868">=</span>&nbsp;<span class="num" id="2624870">60</span>&nbsp;<span class="op" id="2624873">*</span>&nbsp;<span class="ident" id="2624875">Minute</span><br>
<span class="lineno">455</span><span class="op" id="2624882">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2624885">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;string&nbsp;representing&nbsp;the&nbsp;duration&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;72h3m0.5s&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2624963">//&nbsp;Leading&nbsp;zero&nbsp;units&nbsp;are&nbsp;omitted.&nbsp;&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;durations&nbsp;less&nbsp;than&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="2625042">//&nbsp;second&nbsp;format&nbsp;use&nbsp;a&nbsp;smaller&nbsp;unit&nbsp;(milli-,&nbsp;micro-,&nbsp;or&nbsp;nanoseconds)&nbsp;to&nbsp;ensure</span><br>
<span class="lineno">460</span><span class="comment" id="2625121">//&nbsp;that&nbsp;the&nbsp;leading&nbsp;digit&nbsp;is&nbsp;non-zero.&nbsp;&nbsp;The&nbsp;zero&nbsp;duration&nbsp;formats&nbsp;as&nbsp;0,</span><br>
<span class="lineno"></span><span class="comment" id="2625193">//&nbsp;with&nbsp;no&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="2625210">func</span>&nbsp;<span class="op" id="2625215">(</span><span class="ident" id="2625216">d</span>&nbsp;<span class="ident" id="2625218">Duration</span><span class="op" id="2625226">)</span>&nbsp;<span class="ident" id="2625228">String</span><span class="op" id="2625234">(</span><span class="op" id="2625235">)</span>&nbsp;<span class="builtintype" id="2625237">string</span>&nbsp;<span class="op" id="2625244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625247">//&nbsp;Largest&nbsp;time&nbsp;is&nbsp;2540400h10m10.000000000s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625292">var</span>&nbsp;<span class="ident" id="2625296">buf</span>&nbsp;<span class="op" id="2625300">[</span><span class="num" id="2625301">32</span><span class="op" id="2625303">]</span><span class="builtintype" id="2625304">byte</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625310">w</span>&nbsp;<span class="op" id="2625312">:=</span>&nbsp;<span class="builtinfunc" id="2625315">len</span><span class="op" id="2625318">(</span><span class="ident" id="2625319">buf</span><span class="op" id="2625322">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625326">u</span>&nbsp;<span class="op" id="2625328">:=</span>&nbsp;<span class="ident" id="2625331">uint64</span><span class="op" id="2625337">(</span><span class="ident" id="2625338">d</span><span class="op" id="2625339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625342">neg</span>&nbsp;<span class="op" id="2625346">:=</span>&nbsp;<span class="ident" id="2625349">d</span>&nbsp;<span class="op" id="2625351">&lt;</span>&nbsp;<span class="num" id="2625353">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625356">if</span>&nbsp;<span class="ident" id="2625359">neg</span>&nbsp;<span class="op" id="2625363">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625367">u</span>&nbsp;<span class="op" id="2625369">=</span>&nbsp;<span class="op" id="2625371">-</span><span class="ident" id="2625372">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625379">if</span>&nbsp;<span class="ident" id="2625382">u</span>&nbsp;<span class="op" id="2625384">&lt;</span>&nbsp;<span class="ident" id="2625386">uint64</span><span class="op" id="2625392">(</span><span class="ident" id="2625393">Second</span><span class="op" id="2625399">)</span>&nbsp;<span class="op" id="2625401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625405">//&nbsp;Special&nbsp;case:&nbsp;if&nbsp;duration&nbsp;is&nbsp;smaller&nbsp;than&nbsp;a&nbsp;second,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625462">//&nbsp;use&nbsp;smaller&nbsp;units,&nbsp;like&nbsp;1.2ms</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625497">var</span>&nbsp;<span class="ident" id="2625501">prec</span>&nbsp;<span class="builtintype" id="2625506">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625512">w</span><span class="op" id="2625513">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625518">buf</span><span class="op" id="2625521">[</span><span class="ident" id="2625522">w</span><span class="op" id="2625523">]</span>&nbsp;<span class="op" id="2625525">=</span>&nbsp;<span class="string" id="2625527">&#39;s&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625533">w</span><span class="op" id="2625534">--</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625539">switch</span>&nbsp;<span class="op" id="2625546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625550">case</span>&nbsp;<span class="ident" id="2625555">u</span>&nbsp;<span class="op" id="2625557">==</span>&nbsp;<span class="num" id="2625560">0</span><span class="op" id="2625561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625566">return</span>&nbsp;<span class="string" id="2625573">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625579">case</span>&nbsp;<span class="ident" id="2625584">u</span>&nbsp;<span class="op" id="2625586">&lt;</span>&nbsp;<span class="ident" id="2625588">uint64</span><span class="op" id="2625594">(</span><span class="ident" id="2625595">Microsecond</span><span class="op" id="2625606">)</span><span class="op" id="2625607">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625612">//&nbsp;print&nbsp;nanoseconds</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625636">prec</span>&nbsp;<span class="op" id="2625641">=</span>&nbsp;<span class="num" id="2625643">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625648">buf</span><span class="op" id="2625651">[</span><span class="ident" id="2625652">w</span><span class="op" id="2625653">]</span>&nbsp;<span class="op" id="2625655">=</span>&nbsp;<span class="string" id="2625657">&#39;n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625663">case</span>&nbsp;<span class="ident" id="2625668">u</span>&nbsp;<span class="op" id="2625670">&lt;</span>&nbsp;<span class="ident" id="2625672">uint64</span><span class="op" id="2625678">(</span><span class="ident" id="2625679">Millisecond</span><span class="op" id="2625690">)</span><span class="op" id="2625691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625696">//&nbsp;print&nbsp;microseconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625721">prec</span>&nbsp;<span class="op" id="2625726">=</span>&nbsp;<span class="num" id="2625728">3</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625733">//&nbsp;U+00B5&nbsp;&#39;µ&#39;&nbsp;micro&nbsp;sign&nbsp;==&nbsp;0xC2&nbsp;0xB5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625775">w</span><span class="op" id="2625776">--</span>&nbsp;<span class="comment" id="2625779">//&nbsp;Need&nbsp;room&nbsp;for&nbsp;two&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2625810">copy</span><span class="op" id="2625814">(</span><span class="ident" id="2625815">buf</span><span class="op" id="2625818">[</span><span class="ident" id="2625819">w</span><span class="op" id="2625820">:</span><span class="op" id="2625821">]</span><span class="op" id="2625822">,</span>&nbsp;<span class="string" id="2625824">&#34;µ&#34;</span><span class="op" id="2625828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625832">default</span><span class="op" id="2625839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625844">//&nbsp;print&nbsp;milliseconds</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625869">prec</span>&nbsp;<span class="op" id="2625874">=</span>&nbsp;<span class="num" id="2625876">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625881">buf</span><span class="op" id="2625884">[</span><span class="ident" id="2625885">w</span><span class="op" id="2625886">]</span>&nbsp;<span class="op" id="2625888">=</span>&nbsp;<span class="string" id="2625890">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625900">w</span><span class="op" id="2625901">,</span>&nbsp;<span class="ident" id="2625903">u</span>&nbsp;<span class="op" id="2625905">=</span>&nbsp;<span class="ident" id="2625907">fmtFrac</span><span class="op" id="2625914">(</span><span class="ident" id="2625915">buf</span><span class="op" id="2625918">[</span><span class="op" id="2625919">:</span><span class="ident" id="2625920">w</span><span class="op" id="2625921">]</span><span class="op" id="2625922">,</span>&nbsp;<span class="ident" id="2625924">u</span><span class="op" id="2625925">,</span>&nbsp;<span class="ident" id="2625927">prec</span><span class="op" id="2625931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625935">w</span>&nbsp;<span class="op" id="2625937">=</span>&nbsp;<span class="ident" id="2625939">fmtInt</span><span class="op" id="2625945">(</span><span class="ident" id="2625946">buf</span><span class="op" id="2625949">[</span><span class="op" id="2625950">:</span><span class="ident" id="2625951">w</span><span class="op" id="2625952">]</span><span class="op" id="2625953">,</span>&nbsp;<span class="ident" id="2625955">u</span><span class="op" id="2625956">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625959">}</span>&nbsp;<span class="keyword" id="2625961">else</span>&nbsp;<span class="op" id="2625966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625970">w</span><span class="op" id="2625971">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625976">buf</span><span class="op" id="2625979">[</span><span class="ident" id="2625980">w</span><span class="op" id="2625981">]</span>&nbsp;<span class="op" id="2625983">=</span>&nbsp;<span class="string" id="2625985">&#39;s&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625992">w</span><span class="op" id="2625993">,</span>&nbsp;<span class="ident" id="2625995">u</span>&nbsp;<span class="op" id="2625997">=</span>&nbsp;<span class="ident" id="2625999">fmtFrac</span><span class="op" id="2626006">(</span><span class="ident" id="2626007">buf</span><span class="op" id="2626010">[</span><span class="op" id="2626011">:</span><span class="ident" id="2626012">w</span><span class="op" id="2626013">]</span><span class="op" id="2626014">,</span>&nbsp;<span class="ident" id="2626016">u</span><span class="op" id="2626017">,</span>&nbsp;<span class="num" id="2626019">9</span><span class="op" id="2626020">)</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626025">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626055">w</span>&nbsp;<span class="op" id="2626057">=</span>&nbsp;<span class="ident" id="2626059">fmtInt</span><span class="op" id="2626065">(</span><span class="ident" id="2626066">buf</span><span class="op" id="2626069">[</span><span class="op" id="2626070">:</span><span class="ident" id="2626071">w</span><span class="op" id="2626072">]</span><span class="op" id="2626073">,</span>&nbsp;<span class="ident" id="2626075">u</span><span class="op" id="2626076">%</span><span class="num" id="2626077">60</span><span class="op" id="2626079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626083">u</span>&nbsp;<span class="op" id="2626085">/=</span>&nbsp;<span class="num" id="2626088">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626094">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626124">if</span>&nbsp;<span class="ident" id="2626127">u</span>&nbsp;<span class="op" id="2626129">&gt;</span>&nbsp;<span class="num" id="2626131">0</span>&nbsp;<span class="op" id="2626133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626138">w</span><span class="op" id="2626139">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626145">buf</span><span class="op" id="2626148">[</span><span class="ident" id="2626149">w</span><span class="op" id="2626150">]</span>&nbsp;<span class="op" id="2626152">=</span>&nbsp;<span class="string" id="2626154">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626161">w</span>&nbsp;<span class="op" id="2626163">=</span>&nbsp;<span class="ident" id="2626165">fmtInt</span><span class="op" id="2626171">(</span><span class="ident" id="2626172">buf</span><span class="op" id="2626175">[</span><span class="op" id="2626176">:</span><span class="ident" id="2626177">w</span><span class="op" id="2626178">]</span><span class="op" id="2626179">,</span>&nbsp;<span class="ident" id="2626181">u</span><span class="op" id="2626182">%</span><span class="num" id="2626183">60</span><span class="op" id="2626185">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626190">u</span>&nbsp;<span class="op" id="2626192">/=</span>&nbsp;<span class="num" id="2626195">60</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626202">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;hours</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626231">//&nbsp;Stop&nbsp;at&nbsp;hours&nbsp;because&nbsp;days&nbsp;can&nbsp;be&nbsp;different&nbsp;lengths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626290">if</span>&nbsp;<span class="ident" id="2626293">u</span>&nbsp;<span class="op" id="2626295">&gt;</span>&nbsp;<span class="num" id="2626297">0</span>&nbsp;<span class="op" id="2626299">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626305">w</span><span class="op" id="2626306">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626313">buf</span><span class="op" id="2626316">[</span><span class="ident" id="2626317">w</span><span class="op" id="2626318">]</span>&nbsp;<span class="op" id="2626320">=</span>&nbsp;<span class="string" id="2626322">&#39;h&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626330">w</span>&nbsp;<span class="op" id="2626332">=</span>&nbsp;<span class="ident" id="2626334">fmtInt</span><span class="op" id="2626340">(</span><span class="ident" id="2626341">buf</span><span class="op" id="2626344">[</span><span class="op" id="2626345">:</span><span class="ident" id="2626346">w</span><span class="op" id="2626347">]</span><span class="op" id="2626348">,</span>&nbsp;<span class="ident" id="2626350">u</span><span class="op" id="2626351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626360">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626367">if</span>&nbsp;<span class="ident" id="2626370">neg</span>&nbsp;<span class="op" id="2626374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626378">w</span><span class="op" id="2626379">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626384">buf</span><span class="op" id="2626387">[</span><span class="ident" id="2626388">w</span><span class="op" id="2626389">]</span>&nbsp;<span class="op" id="2626391">=</span>&nbsp;<span class="string" id="2626393">&#39;-&#39;</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626402">return</span>&nbsp;<span class="builtintype" id="2626409">string</span><span class="op" id="2626415">(</span><span class="ident" id="2626416">buf</span><span class="op" id="2626419">[</span><span class="ident" id="2626420">w</span><span class="op" id="2626421">:</span><span class="op" id="2626422">]</span><span class="op" id="2626423">)</span><br>
<span class="lineno"></span><span class="op" id="2626425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="2626428">//&nbsp;fmtFrac&nbsp;formats&nbsp;the&nbsp;fraction&nbsp;of&nbsp;v/10**prec&nbsp;(e.g.,&nbsp;&#34;.12345&#34;)&nbsp;into&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2626500">//&nbsp;tail&nbsp;of&nbsp;buf,&nbsp;omitting&nbsp;trailing&nbsp;zeros.&nbsp;&nbsp;it&nbsp;omits&nbsp;the&nbsp;decimal</span><br>
<span class="lineno"></span><span class="comment" id="2626563">//&nbsp;point&nbsp;too&nbsp;when&nbsp;the&nbsp;fraction&nbsp;is&nbsp;0.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2626632">//&nbsp;output&nbsp;bytes&nbsp;begin&nbsp;and&nbsp;the&nbsp;value&nbsp;v/10**prec.</span><br>
<span class="lineno"></span><span class="keyword" id="2626680">func</span>&nbsp;<span class="ident" id="2626685">fmtFrac</span><span class="op" id="2626692">(</span><span class="ident" id="2626693">buf</span>&nbsp;<span class="op" id="2626697">[</span><span class="op" id="2626698">]</span><span class="builtintype" id="2626699">byte</span><span class="op" id="2626703">,</span>&nbsp;<span class="ident" id="2626705">v</span>&nbsp;<span class="ident" id="2626707">uint64</span><span class="op" id="2626713">,</span>&nbsp;<span class="ident" id="2626715">prec</span>&nbsp;<span class="builtintype" id="2626720">int</span><span class="op" id="2626723">)</span>&nbsp;<span class="op" id="2626725">(</span><span class="ident" id="2626726">nw</span>&nbsp;<span class="builtintype" id="2626729">int</span><span class="op" id="2626732">,</span>&nbsp;<span class="ident" id="2626734">nv</span>&nbsp;<span class="ident" id="2626737">uint64</span><span class="op" id="2626743">)</span>&nbsp;<span class="op" id="2626745">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626748">//&nbsp;Omit&nbsp;trailing&nbsp;zeros&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626807">w</span>&nbsp;<span class="op" id="2626809">:=</span>&nbsp;<span class="builtinfunc" id="2626812">len</span><span class="op" id="2626815">(</span><span class="ident" id="2626816">buf</span><span class="op" id="2626819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2626822">print</span>&nbsp;<span class="op" id="2626828">:=</span>&nbsp;<span class="builtintype" id="2626831">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626838">for</span>&nbsp;<span class="ident" id="2626842">i</span>&nbsp;<span class="op" id="2626844">:=</span>&nbsp;<span class="num" id="2626847">0</span><span class="op" id="2626848">;</span>&nbsp;<span class="ident" id="2626850">i</span>&nbsp;<span class="op" id="2626852">&lt;</span>&nbsp;<span class="ident" id="2626854">prec</span><span class="op" id="2626858">;</span>&nbsp;<span class="ident" id="2626860">i</span><span class="op" id="2626861">++</span>&nbsp;<span class="op" id="2626864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626868">digit</span>&nbsp;<span class="op" id="2626874">:=</span>&nbsp;<span class="ident" id="2626877">v</span>&nbsp;<span class="op" id="2626879">%</span>&nbsp;<span class="num" id="2626881">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2626886">print</span>&nbsp;<span class="op" id="2626892">=</span>&nbsp;<span class="builtinfunc" id="2626894">print</span>&nbsp;<span class="op" id="2626900">||</span>&nbsp;<span class="ident" id="2626903">digit</span>&nbsp;<span class="op" id="2626909">!=</span>&nbsp;<span class="num" id="2626912">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626916">if</span>&nbsp;<span class="builtinfunc" id="2626919">print</span>&nbsp;<span class="op" id="2626925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626930">w</span><span class="op" id="2626931">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626937">buf</span><span class="op" id="2626940">[</span><span class="ident" id="2626941">w</span><span class="op" id="2626942">]</span>&nbsp;<span class="op" id="2626944">=</span>&nbsp;<span class="builtintype" id="2626946">byte</span><span class="op" id="2626950">(</span><span class="ident" id="2626951">digit</span><span class="op" id="2626956">)</span>&nbsp;<span class="op" id="2626958">+</span>&nbsp;<span class="string" id="2626960">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626966">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626970">v</span>&nbsp;<span class="op" id="2626972">/=</span>&nbsp;<span class="num" id="2626975">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626982">if</span>&nbsp;<span class="builtinfunc" id="2626985">print</span>&nbsp;<span class="op" id="2626991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626995">w</span><span class="op" id="2626996">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627001">buf</span><span class="op" id="2627004">[</span><span class="ident" id="2627005">w</span><span class="op" id="2627006">]</span>&nbsp;<span class="op" id="2627008">=</span>&nbsp;<span class="string" id="2627010">&#39;.&#39;</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627018">return</span>&nbsp;<span class="ident" id="2627025">w</span><span class="op" id="2627026">,</span>&nbsp;<span class="ident" id="2627028">v</span><br>
<span class="lineno"></span><span class="op" id="2627030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2627033">//&nbsp;fmtInt&nbsp;formats&nbsp;v&nbsp;into&nbsp;the&nbsp;tail&nbsp;of&nbsp;buf.</span><br>
<span class="lineno">560</span><span class="comment" id="2627075">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;output&nbsp;begins.</span><br>
<span class="lineno"></span><span class="keyword" id="2627124">func</span>&nbsp;<span class="ident" id="2627129">fmtInt</span><span class="op" id="2627135">(</span><span class="ident" id="2627136">buf</span>&nbsp;<span class="op" id="2627140">[</span><span class="op" id="2627141">]</span><span class="builtintype" id="2627142">byte</span><span class="op" id="2627146">,</span>&nbsp;<span class="ident" id="2627148">v</span>&nbsp;<span class="ident" id="2627150">uint64</span><span class="op" id="2627156">)</span>&nbsp;<span class="builtintype" id="2627158">int</span>&nbsp;<span class="op" id="2627162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627165">w</span>&nbsp;<span class="op" id="2627167">:=</span>&nbsp;<span class="builtinfunc" id="2627170">len</span><span class="op" id="2627173">(</span><span class="ident" id="2627174">buf</span><span class="op" id="2627177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627180">if</span>&nbsp;<span class="ident" id="2627183">v</span>&nbsp;<span class="op" id="2627185">==</span>&nbsp;<span class="num" id="2627188">0</span>&nbsp;<span class="op" id="2627190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627194">w</span><span class="op" id="2627195">--</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627200">buf</span><span class="op" id="2627203">[</span><span class="ident" id="2627204">w</span><span class="op" id="2627205">]</span>&nbsp;<span class="op" id="2627207">=</span>&nbsp;<span class="string" id="2627209">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627214">}</span>&nbsp;<span class="keyword" id="2627216">else</span>&nbsp;<span class="op" id="2627221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627225">for</span>&nbsp;<span class="ident" id="2627229">v</span>&nbsp;<span class="op" id="2627231">&gt;</span>&nbsp;<span class="num" id="2627233">0</span>&nbsp;<span class="op" id="2627235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627240">w</span><span class="op" id="2627241">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627247">buf</span><span class="op" id="2627250">[</span><span class="ident" id="2627251">w</span><span class="op" id="2627252">]</span>&nbsp;<span class="op" id="2627254">=</span>&nbsp;<span class="builtintype" id="2627256">byte</span><span class="op" id="2627260">(</span><span class="ident" id="2627261">v</span><span class="op" id="2627262">%</span><span class="num" id="2627263">10</span><span class="op" id="2627265">)</span>&nbsp;<span class="op" id="2627267">+</span>&nbsp;<span class="string" id="2627269">&#39;0&#39;</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627276">v</span>&nbsp;<span class="op" id="2627278">/=</span>&nbsp;<span class="num" id="2627281">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627292">return</span>&nbsp;<span class="ident" id="2627299">w</span><br>
<span class="lineno"></span><span class="op" id="2627301">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="2627304">//&nbsp;Nanoseconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;an&nbsp;integer&nbsp;nanosecond&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2627372">func</span>&nbsp;<span class="op" id="2627377">(</span><span class="ident" id="2627378">d</span>&nbsp;<span class="ident" id="2627380">Duration</span><span class="op" id="2627388">)</span>&nbsp;<span class="ident" id="2627390">Nanoseconds</span><span class="op" id="2627401">(</span><span class="op" id="2627402">)</span>&nbsp;<span class="ident" id="2627404">int64</span>&nbsp;<span class="op" id="2627410">{</span>&nbsp;<span class="keyword" id="2627412">return</span>&nbsp;<span class="ident" id="2627419">int64</span><span class="op" id="2627424">(</span><span class="ident" id="2627425">d</span><span class="op" id="2627426">)</span>&nbsp;<span class="op" id="2627428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2627431">//&nbsp;These&nbsp;methods&nbsp;return&nbsp;float64&nbsp;because&nbsp;the&nbsp;dominant</span><br>
<span class="lineno">580</span><span class="comment" id="2627484">//&nbsp;use&nbsp;case&nbsp;is&nbsp;for&nbsp;printing&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;like&nbsp;1.5s,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2627551">//&nbsp;a&nbsp;truncation&nbsp;to&nbsp;integer&nbsp;would&nbsp;make&nbsp;them&nbsp;not&nbsp;useful&nbsp;in&nbsp;those&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2627621">//&nbsp;Splitting&nbsp;the&nbsp;integer&nbsp;and&nbsp;fraction&nbsp;ourselves&nbsp;guarantees&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2627685">//&nbsp;converting&nbsp;the&nbsp;returned&nbsp;float64&nbsp;to&nbsp;an&nbsp;integer&nbsp;rounds&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2627750">//&nbsp;way&nbsp;that&nbsp;a&nbsp;pure&nbsp;integer&nbsp;conversion&nbsp;would&nbsp;have,&nbsp;even&nbsp;in&nbsp;cases</span><br>
<span class="lineno">585</span><span class="comment" id="2627814">//&nbsp;where,&nbsp;say,&nbsp;float64(d.Nanoseconds())/1e9&nbsp;would&nbsp;have&nbsp;rounded</span><br>
<span class="lineno"></span><span class="comment" id="2627877">//&nbsp;differently.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2627894">//&nbsp;Seconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;seconds.</span><br>
<span class="lineno"></span><span class="keyword" id="2627965">func</span>&nbsp;<span class="op" id="2627970">(</span><span class="ident" id="2627971">d</span>&nbsp;<span class="ident" id="2627973">Duration</span><span class="op" id="2627981">)</span>&nbsp;<span class="ident" id="2627983">Seconds</span><span class="op" id="2627990">(</span><span class="op" id="2627991">)</span>&nbsp;<span class="builtintype" id="2627993">float64</span>&nbsp;<span class="op" id="2628001">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628004">sec</span>&nbsp;<span class="op" id="2628008">:=</span>&nbsp;<span class="ident" id="2628011">d</span>&nbsp;<span class="op" id="2628013">/</span>&nbsp;<span class="ident" id="2628015">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628023">nsec</span>&nbsp;<span class="op" id="2628028">:=</span>&nbsp;<span class="ident" id="2628031">d</span>&nbsp;<span class="op" id="2628033">%</span>&nbsp;<span class="ident" id="2628035">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628043">return</span>&nbsp;<span class="builtintype" id="2628050">float64</span><span class="op" id="2628057">(</span><span class="ident" id="2628058">sec</span><span class="op" id="2628061">)</span>&nbsp;<span class="op" id="2628063">+</span>&nbsp;<span class="builtintype" id="2628065">float64</span><span class="op" id="2628072">(</span><span class="ident" id="2628073">nsec</span><span class="op" id="2628077">)</span><span class="op" id="2628078">*</span><span class="num" id="2628079">1e-9</span><br>
<span class="lineno"></span><span class="op" id="2628084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="2628087">//&nbsp;Minutes&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;minutes.</span><br>
<span class="lineno"></span><span class="keyword" id="2628158">func</span>&nbsp;<span class="op" id="2628163">(</span><span class="ident" id="2628164">d</span>&nbsp;<span class="ident" id="2628166">Duration</span><span class="op" id="2628174">)</span>&nbsp;<span class="ident" id="2628176">Minutes</span><span class="op" id="2628183">(</span><span class="op" id="2628184">)</span>&nbsp;<span class="builtintype" id="2628186">float64</span>&nbsp;<span class="op" id="2628194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628197">min</span>&nbsp;<span class="op" id="2628201">:=</span>&nbsp;<span class="ident" id="2628204">d</span>&nbsp;<span class="op" id="2628206">/</span>&nbsp;<span class="ident" id="2628208">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628216">nsec</span>&nbsp;<span class="op" id="2628221">:=</span>&nbsp;<span class="ident" id="2628224">d</span>&nbsp;<span class="op" id="2628226">%</span>&nbsp;<span class="ident" id="2628228">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628236">return</span>&nbsp;<span class="builtintype" id="2628243">float64</span><span class="op" id="2628250">(</span><span class="ident" id="2628251">min</span><span class="op" id="2628254">)</span>&nbsp;<span class="op" id="2628256">+</span>&nbsp;<span class="builtintype" id="2628258">float64</span><span class="op" id="2628265">(</span><span class="ident" id="2628266">nsec</span><span class="op" id="2628270">)</span><span class="op" id="2628271">*</span><span class="op" id="2628272">(</span><span class="num" id="2628273">1e-9</span><span class="op" id="2628277">/</span><span class="num" id="2628278">60</span><span class="op" id="2628280">)</span><br>
<span class="lineno">600</span><span class="op" id="2628282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2628285">//&nbsp;Hours&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;hours.</span><br>
<span class="lineno"></span><span class="keyword" id="2628352">func</span>&nbsp;<span class="op" id="2628357">(</span><span class="ident" id="2628358">d</span>&nbsp;<span class="ident" id="2628360">Duration</span><span class="op" id="2628368">)</span>&nbsp;<span class="ident" id="2628370">Hours</span><span class="op" id="2628375">(</span><span class="op" id="2628376">)</span>&nbsp;<span class="builtintype" id="2628378">float64</span>&nbsp;<span class="op" id="2628386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628389">hour</span>&nbsp;<span class="op" id="2628394">:=</span>&nbsp;<span class="ident" id="2628397">d</span>&nbsp;<span class="op" id="2628399">/</span>&nbsp;<span class="ident" id="2628401">Hour</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628407">nsec</span>&nbsp;<span class="op" id="2628412">:=</span>&nbsp;<span class="ident" id="2628415">d</span>&nbsp;<span class="op" id="2628417">%</span>&nbsp;<span class="ident" id="2628419">Hour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628425">return</span>&nbsp;<span class="builtintype" id="2628432">float64</span><span class="op" id="2628439">(</span><span class="ident" id="2628440">hour</span><span class="op" id="2628444">)</span>&nbsp;<span class="op" id="2628446">+</span>&nbsp;<span class="builtintype" id="2628448">float64</span><span class="op" id="2628455">(</span><span class="ident" id="2628456">nsec</span><span class="op" id="2628460">)</span><span class="op" id="2628461">*</span><span class="op" id="2628462">(</span><span class="num" id="2628463">1e-9</span><span class="op" id="2628467">/</span><span class="num" id="2628468">60</span><span class="op" id="2628470">/</span><span class="num" id="2628471">60</span><span class="op" id="2628473">)</span><br>
<span class="lineno"></span><span class="op" id="2628475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2628478">//&nbsp;Add&nbsp;returns&nbsp;the&nbsp;time&nbsp;t+d.</span><br>
<span class="lineno">610</span><span class="keyword" id="2628507">func</span>&nbsp;<span class="op" id="2628512">(</span><span class="ident" id="2628513">t</span>&nbsp;<span class="ident" id="2628515">Time</span><span class="op" id="2628519">)</span>&nbsp;<span class="ident" id="2628521">Add</span><span class="op" id="2628524">(</span><span class="ident" id="2628525">d</span>&nbsp;<span class="ident" id="2628527">Duration</span><span class="op" id="2628535">)</span>&nbsp;<span class="ident" id="2628537">Time</span>&nbsp;<span class="op" id="2628542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628545">t</span><span class="op" id="2628546">.</span><span class="ident" id="2628547">sec</span>&nbsp;<span class="op" id="2628551">+=</span>&nbsp;<span class="ident" id="2628554">int64</span><span class="op" id="2628559">(</span><span class="ident" id="2628560">d</span>&nbsp;<span class="op" id="2628562">/</span>&nbsp;<span class="num" id="2628564">1e9</span><span class="op" id="2628567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628570">nsec</span>&nbsp;<span class="op" id="2628575">:=</span>&nbsp;<span class="builtintype" id="2628578">int32</span><span class="op" id="2628583">(</span><span class="ident" id="2628584">t</span><span class="op" id="2628585">.</span><span class="ident" id="2628586">nsec</span><span class="op" id="2628590">)</span>&nbsp;<span class="op" id="2628592">+</span>&nbsp;<span class="builtintype" id="2628594">int32</span><span class="op" id="2628599">(</span><span class="ident" id="2628600">d</span><span class="op" id="2628601">%</span><span class="num" id="2628602">1e9</span><span class="op" id="2628605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628608">if</span>&nbsp;<span class="ident" id="2628611">nsec</span>&nbsp;<span class="op" id="2628616">&gt;=</span>&nbsp;<span class="num" id="2628619">1e9</span>&nbsp;<span class="op" id="2628623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628627">t</span><span class="op" id="2628628">.</span><span class="ident" id="2628629">sec</span><span class="op" id="2628632">++</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628637">nsec</span>&nbsp;<span class="op" id="2628642">-=</span>&nbsp;<span class="num" id="2628645">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628650">}</span>&nbsp;<span class="keyword" id="2628652">else</span>&nbsp;<span class="keyword" id="2628657">if</span>&nbsp;<span class="ident" id="2628660">nsec</span>&nbsp;<span class="op" id="2628665">&lt;</span>&nbsp;<span class="num" id="2628667">0</span>&nbsp;<span class="op" id="2628669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628673">t</span><span class="op" id="2628674">.</span><span class="ident" id="2628675">sec</span><span class="op" id="2628678">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628683">nsec</span>&nbsp;<span class="op" id="2628688">+=</span>&nbsp;<span class="num" id="2628691">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628696">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628699">t</span><span class="op" id="2628700">.</span><span class="ident" id="2628701">nsec</span>&nbsp;<span class="op" id="2628706">=</span>&nbsp;<span class="ident" id="2628708">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628714">return</span>&nbsp;<span class="ident" id="2628721">t</span><br>
<span class="lineno"></span><span class="op" id="2628723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2628726">//&nbsp;Sub&nbsp;returns&nbsp;the&nbsp;duration&nbsp;t-u.&nbsp;If&nbsp;the&nbsp;result&nbsp;exceeds&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)</span><br>
<span class="lineno">625</span><span class="comment" id="2628806">//&nbsp;value&nbsp;that&nbsp;can&nbsp;be&nbsp;stored&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)&nbsp;duration</span><br>
<span class="lineno"></span><span class="comment" id="2628883">//&nbsp;will&nbsp;be&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="2628904">//&nbsp;To&nbsp;compute&nbsp;t-d&nbsp;for&nbsp;a&nbsp;duration&nbsp;d,&nbsp;use&nbsp;t.Add(-d).</span><br>
<span class="lineno"></span><span class="keyword" id="2628955">func</span>&nbsp;<span class="op" id="2628960">(</span><span class="ident" id="2628961">t</span>&nbsp;<span class="ident" id="2628963">Time</span><span class="op" id="2628967">)</span>&nbsp;<span class="ident" id="2628969">Sub</span><span class="op" id="2628972">(</span><span class="ident" id="2628973">u</span>&nbsp;<span class="ident" id="2628975">Time</span><span class="op" id="2628979">)</span>&nbsp;<span class="ident" id="2628981">Duration</span>&nbsp;<span class="op" id="2628990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628993">d</span>&nbsp;<span class="op" id="2628995">:=</span>&nbsp;<span class="ident" id="2628998">Duration</span><span class="op" id="2629006">(</span><span class="ident" id="2629007">t</span><span class="op" id="2629008">.</span><span class="ident" id="2629009">sec</span><span class="op" id="2629012">-</span><span class="ident" id="2629013">u</span><span class="op" id="2629014">.</span><span class="ident" id="2629015">sec</span><span class="op" id="2629018">)</span><span class="op" id="2629019">*</span><span class="ident" id="2629020">Second</span>&nbsp;<span class="op" id="2629027">+</span>&nbsp;<span class="ident" id="2629029">Duration</span><span class="op" id="2629037">(</span><span class="builtintype" id="2629038">int32</span><span class="op" id="2629043">(</span><span class="ident" id="2629044">t</span><span class="op" id="2629045">.</span><span class="ident" id="2629046">nsec</span><span class="op" id="2629050">)</span><span class="op" id="2629051">-</span><span class="builtintype" id="2629052">int32</span><span class="op" id="2629057">(</span><span class="ident" id="2629058">u</span><span class="op" id="2629059">.</span><span class="ident" id="2629060">nsec</span><span class="op" id="2629064">)</span><span class="op" id="2629065">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2629068">//&nbsp;Check&nbsp;for&nbsp;overflow&nbsp;or&nbsp;underflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629105">switch</span>&nbsp;<span class="op" id="2629112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629115">case</span>&nbsp;<span class="ident" id="2629120">u</span><span class="op" id="2629121">.</span><span class="ident" id="2629122">Add</span><span class="op" id="2629125">(</span><span class="ident" id="2629126">d</span><span class="op" id="2629127">)</span><span class="op" id="2629128">.</span><span class="ident" id="2629129">Equal</span><span class="op" id="2629134">(</span><span class="ident" id="2629135">t</span><span class="op" id="2629136">)</span><span class="op" id="2629137">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629141">return</span>&nbsp;<span class="ident" id="2629148">d</span>&nbsp;<span class="comment" id="2629150">//&nbsp;d&nbsp;is&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629167">case</span>&nbsp;<span class="ident" id="2629172">t</span><span class="op" id="2629173">.</span><span class="ident" id="2629174">Before</span><span class="op" id="2629180">(</span><span class="ident" id="2629181">u</span><span class="op" id="2629182">)</span><span class="op" id="2629183">:</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629187">return</span>&nbsp;<span class="ident" id="2629194">minDuration</span>&nbsp;<span class="comment" id="2629206">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;negative&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629241">default</span><span class="op" id="2629248">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629252">return</span>&nbsp;<span class="ident" id="2629259">maxDuration</span>&nbsp;<span class="comment" id="2629271">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;positive&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2629306">}</span><br>
<span class="lineno"></span><span class="op" id="2629308">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="2629311">//&nbsp;Since&nbsp;returns&nbsp;the&nbsp;time&nbsp;elapsed&nbsp;since&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2629354">//&nbsp;It&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;time.Now().Sub(t).</span><br>
<span class="lineno"></span><span class="keyword" id="2629396">func</span>&nbsp;<span class="ident" id="2629401">Since</span><span class="op" id="2629406">(</span><span class="ident" id="2629407">t</span>&nbsp;<span class="ident" id="2629409">Time</span><span class="op" id="2629413">)</span>&nbsp;<span class="ident" id="2629415">Duration</span>&nbsp;<span class="op" id="2629424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629427">return</span>&nbsp;<span class="ident" id="2629434">Now</span><span class="op" id="2629437">(</span><span class="op" id="2629438">)</span><span class="op" id="2629439">.</span><span class="ident" id="2629440">Sub</span><span class="op" id="2629443">(</span><span class="ident" id="2629444">t</span><span class="op" id="2629445">)</span><br>
<span class="lineno">645</span><span class="op" id="2629447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2629450">//&nbsp;AddDate&nbsp;returns&nbsp;the&nbsp;time&nbsp;corresponding&nbsp;to&nbsp;adding&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2629506">//&nbsp;given&nbsp;number&nbsp;of&nbsp;years,&nbsp;months,&nbsp;and&nbsp;days&nbsp;to&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2629555">//&nbsp;For&nbsp;example,&nbsp;AddDate(-1,&nbsp;2,&nbsp;3)&nbsp;applied&nbsp;to&nbsp;January&nbsp;1,&nbsp;2011</span><br>
<span class="lineno">650</span><span class="comment" id="2629616">//&nbsp;returns&nbsp;March&nbsp;4,&nbsp;2010.</span><br>
<span class="lineno"></span><span class="comment" id="2629642">//</span><br>
<span class="lineno"></span><span class="comment" id="2629645">//&nbsp;AddDate&nbsp;normalizes&nbsp;its&nbsp;result&nbsp;in&nbsp;the&nbsp;same&nbsp;way&nbsp;that&nbsp;Date&nbsp;does,</span><br>
<span class="lineno"></span><span class="comment" id="2629710">//&nbsp;so,&nbsp;for&nbsp;example,&nbsp;adding&nbsp;one&nbsp;month&nbsp;to&nbsp;October&nbsp;31&nbsp;yields</span><br>
<span class="lineno"></span><span class="comment" id="2629768">//&nbsp;December&nbsp;1,&nbsp;the&nbsp;normalized&nbsp;form&nbsp;for&nbsp;November&nbsp;31.</span><br>
<span class="lineno">655</span><span class="keyword" id="2629820">func</span>&nbsp;<span class="op" id="2629825">(</span><span class="ident" id="2629826">t</span>&nbsp;<span class="ident" id="2629828">Time</span><span class="op" id="2629832">)</span>&nbsp;<span class="ident" id="2629834">AddDate</span><span class="op" id="2629841">(</span><span class="ident" id="2629842">years</span>&nbsp;<span class="builtintype" id="2629848">int</span><span class="op" id="2629851">,</span>&nbsp;<span class="ident" id="2629853">months</span>&nbsp;<span class="builtintype" id="2629860">int</span><span class="op" id="2629863">,</span>&nbsp;<span class="ident" id="2629865">days</span>&nbsp;<span class="builtintype" id="2629870">int</span><span class="op" id="2629873">)</span>&nbsp;<span class="ident" id="2629875">Time</span>&nbsp;<span class="op" id="2629880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629883">year</span><span class="op" id="2629887">,</span>&nbsp;<span class="ident" id="2629889">month</span><span class="op" id="2629894">,</span>&nbsp;<span class="ident" id="2629896">day</span>&nbsp;<span class="op" id="2629900">:=</span>&nbsp;<span class="ident" id="2629903">t</span><span class="op" id="2629904">.</span><span class="ident" id="2629905">Date</span><span class="op" id="2629909">(</span><span class="op" id="2629910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629913">hour</span><span class="op" id="2629917">,</span>&nbsp;<span class="ident" id="2629919">min</span><span class="op" id="2629922">,</span>&nbsp;<span class="ident" id="2629924">sec</span>&nbsp;<span class="op" id="2629928">:=</span>&nbsp;<span class="ident" id="2629931">t</span><span class="op" id="2629932">.</span><span class="ident" id="2629933">Clock</span><span class="op" id="2629938">(</span><span class="op" id="2629939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629942">return</span>&nbsp;<span class="ident" id="2629949">Date</span><span class="op" id="2629953">(</span><span class="ident" id="2629954">year</span><span class="op" id="2629958">+</span><span class="ident" id="2629959">years</span><span class="op" id="2629964">,</span>&nbsp;<span class="ident" id="2629966">month</span><span class="op" id="2629971">+</span><span class="ident" id="2629972">Month</span><span class="op" id="2629977">(</span><span class="ident" id="2629978">months</span><span class="op" id="2629984">)</span><span class="op" id="2629985">,</span>&nbsp;<span class="ident" id="2629987">day</span><span class="op" id="2629990">+</span><span class="ident" id="2629991">days</span><span class="op" id="2629995">,</span>&nbsp;<span class="ident" id="2629997">hour</span><span class="op" id="2630001">,</span>&nbsp;<span class="ident" id="2630003">min</span><span class="op" id="2630006">,</span>&nbsp;<span class="ident" id="2630008">sec</span><span class="op" id="2630011">,</span>&nbsp;<span class="builtintype" id="2630013">int</span><span class="op" id="2630016">(</span><span class="ident" id="2630017">t</span><span class="op" id="2630018">.</span><span class="ident" id="2630019">nsec</span><span class="op" id="2630023">)</span><span class="op" id="2630024">,</span>&nbsp;<span class="ident" id="2630026">t</span><span class="op" id="2630027">.</span><span class="ident" id="2630028">loc</span><span class="op" id="2630031">)</span><br>
<span class="lineno"></span><span class="op" id="2630033">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="keyword" id="2630036">const</span>&nbsp;<span class="op" id="2630042">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630045">secondsPerMinute</span>&nbsp;<span class="op" id="2630062">=</span>&nbsp;<span class="num" id="2630064">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630068">secondsPerHour</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2630085">=</span>&nbsp;<span class="num" id="2630087">60</span>&nbsp;<span class="op" id="2630090">*</span>&nbsp;<span class="num" id="2630092">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630096">secondsPerDay</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2630113">=</span>&nbsp;<span class="num" id="2630115">24</span>&nbsp;<span class="op" id="2630118">*</span>&nbsp;<span class="ident" id="2630120">secondsPerHour</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630136">secondsPerWeek</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2630153">=</span>&nbsp;<span class="num" id="2630155">7</span>&nbsp;<span class="op" id="2630157">*</span>&nbsp;<span class="ident" id="2630159">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630174">daysPer400Years</span>&nbsp;&nbsp;<span class="op" id="2630191">=</span>&nbsp;<span class="num" id="2630193">365</span><span class="op" id="2630196">*</span><span class="num" id="2630197">400</span>&nbsp;<span class="op" id="2630201">+</span>&nbsp;<span class="num" id="2630203">97</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630207">daysPer100Years</span>&nbsp;&nbsp;<span class="op" id="2630224">=</span>&nbsp;<span class="num" id="2630226">365</span><span class="op" id="2630229">*</span><span class="num" id="2630230">100</span>&nbsp;<span class="op" id="2630234">+</span>&nbsp;<span class="num" id="2630236">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630240">daysPer4Years</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2630257">=</span>&nbsp;<span class="num" id="2630259">365</span><span class="op" id="2630262">*</span><span class="num" id="2630263">4</span>&nbsp;<span class="op" id="2630265">+</span>&nbsp;<span class="num" id="2630267">1</span><br>
<span class="lineno"></span><span class="op" id="2630269">)</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="2630272">//&nbsp;date&nbsp;computes&nbsp;the&nbsp;year,&nbsp;day&nbsp;of&nbsp;year,&nbsp;and&nbsp;when&nbsp;full=true,</span><br>
<span class="lineno"></span><span class="comment" id="2630332">//&nbsp;the&nbsp;month&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2630372">func</span>&nbsp;<span class="op" id="2630377">(</span><span class="ident" id="2630378">t</span>&nbsp;<span class="ident" id="2630380">Time</span><span class="op" id="2630384">)</span>&nbsp;<span class="ident" id="2630386">date</span><span class="op" id="2630390">(</span><span class="ident" id="2630391">full</span>&nbsp;<span class="builtintype" id="2630396">bool</span><span class="op" id="2630400">)</span>&nbsp;<span class="op" id="2630402">(</span><span class="ident" id="2630403">year</span>&nbsp;<span class="builtintype" id="2630408">int</span><span class="op" id="2630411">,</span>&nbsp;<span class="ident" id="2630413">month</span>&nbsp;<span class="ident" id="2630419">Month</span><span class="op" id="2630424">,</span>&nbsp;<span class="ident" id="2630426">day</span>&nbsp;<span class="builtintype" id="2630430">int</span><span class="op" id="2630433">,</span>&nbsp;<span class="ident" id="2630435">yday</span>&nbsp;<span class="builtintype" id="2630440">int</span><span class="op" id="2630443">)</span>&nbsp;<span class="op" id="2630445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630448">return</span>&nbsp;<span class="ident" id="2630455">absDate</span><span class="op" id="2630462">(</span><span class="ident" id="2630463">t</span><span class="op" id="2630464">.</span><span class="ident" id="2630465">abs</span><span class="op" id="2630468">(</span><span class="op" id="2630469">)</span><span class="op" id="2630470">,</span>&nbsp;<span class="ident" id="2630472">full</span><span class="op" id="2630476">)</span><br>
<span class="lineno">675</span><span class="op" id="2630478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2630481">//&nbsp;absDate&nbsp;is&nbsp;like&nbsp;date&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2630539">func</span>&nbsp;<span class="ident" id="2630544">absDate</span><span class="op" id="2630551">(</span><span class="ident" id="2630552">abs</span>&nbsp;<span class="ident" id="2630556">uint64</span><span class="op" id="2630562">,</span>&nbsp;<span class="ident" id="2630564">full</span>&nbsp;<span class="builtintype" id="2630569">bool</span><span class="op" id="2630573">)</span>&nbsp;<span class="op" id="2630575">(</span><span class="ident" id="2630576">year</span>&nbsp;<span class="builtintype" id="2630581">int</span><span class="op" id="2630584">,</span>&nbsp;<span class="ident" id="2630586">month</span>&nbsp;<span class="ident" id="2630592">Month</span><span class="op" id="2630597">,</span>&nbsp;<span class="ident" id="2630599">day</span>&nbsp;<span class="builtintype" id="2630603">int</span><span class="op" id="2630606">,</span>&nbsp;<span class="ident" id="2630608">yday</span>&nbsp;<span class="builtintype" id="2630613">int</span><span class="op" id="2630616">)</span>&nbsp;<span class="op" id="2630618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2630621">//&nbsp;Split&nbsp;into&nbsp;time&nbsp;and&nbsp;day.</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630650">d</span>&nbsp;<span class="op" id="2630652">:=</span>&nbsp;<span class="ident" id="2630655">abs</span>&nbsp;<span class="op" id="2630659">/</span>&nbsp;<span class="ident" id="2630661">secondsPerDay</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2630677">//&nbsp;Account&nbsp;for&nbsp;400&nbsp;year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630710">n</span>&nbsp;<span class="op" id="2630712">:=</span>&nbsp;<span class="ident" id="2630715">d</span>&nbsp;<span class="op" id="2630717">/</span>&nbsp;<span class="ident" id="2630719">daysPer400Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630736">y</span>&nbsp;<span class="op" id="2630738">:=</span>&nbsp;<span class="num" id="2630741">400</span>&nbsp;<span class="op" id="2630745">*</span>&nbsp;<span class="ident" id="2630747">n</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630750">d</span>&nbsp;<span class="op" id="2630752">-=</span>&nbsp;<span class="ident" id="2630755">daysPer400Years</span>&nbsp;<span class="op" id="2630771">*</span>&nbsp;<span class="ident" id="2630773">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2630777">//&nbsp;Cut&nbsp;off&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2630806">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;one&nbsp;extra&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2630869">//&nbsp;of&nbsp;that&nbsp;year,&nbsp;day&nbsp;/&nbsp;daysPer100Years&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2630933">//&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630980">n</span>&nbsp;<span class="op" id="2630982">=</span>&nbsp;<span class="ident" id="2630984">d</span>&nbsp;<span class="op" id="2630986">/</span>&nbsp;<span class="ident" id="2630988">daysPer100Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631005">n</span>&nbsp;<span class="op" id="2631007">-=</span>&nbsp;<span class="ident" id="2631010">n</span>&nbsp;<span class="op" id="2631012">&gt;&gt;</span>&nbsp;<span class="num" id="2631015">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631018">y</span>&nbsp;<span class="op" id="2631020">+=</span>&nbsp;<span class="num" id="2631023">100</span>&nbsp;<span class="op" id="2631027">*</span>&nbsp;<span class="ident" id="2631029">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631032">d</span>&nbsp;<span class="op" id="2631034">-=</span>&nbsp;<span class="ident" id="2631037">daysPer100Years</span>&nbsp;<span class="op" id="2631053">*</span>&nbsp;<span class="ident" id="2631055">n</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631059">//&nbsp;Cut&nbsp;off&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631086">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;a&nbsp;missing&nbsp;leap&nbsp;year,&nbsp;which&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631145">//&nbsp;affect&nbsp;the&nbsp;computation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631173">n</span>&nbsp;<span class="op" id="2631175">=</span>&nbsp;<span class="ident" id="2631177">d</span>&nbsp;<span class="op" id="2631179">/</span>&nbsp;<span class="ident" id="2631181">daysPer4Years</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631196">y</span>&nbsp;<span class="op" id="2631198">+=</span>&nbsp;<span class="num" id="2631201">4</span>&nbsp;<span class="op" id="2631203">*</span>&nbsp;<span class="ident" id="2631205">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631208">d</span>&nbsp;<span class="op" id="2631210">-=</span>&nbsp;<span class="ident" id="2631213">daysPer4Years</span>&nbsp;<span class="op" id="2631227">*</span>&nbsp;<span class="ident" id="2631229">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631233">//&nbsp;Cut&nbsp;off&nbsp;years&nbsp;within&nbsp;a&nbsp;4-year&nbsp;cycle.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631274">//&nbsp;The&nbsp;last&nbsp;year&nbsp;is&nbsp;a&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day&nbsp;of&nbsp;that&nbsp;year,</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631341">//&nbsp;day&nbsp;/&nbsp;365&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.&nbsp;&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631402">//&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631427">n</span>&nbsp;<span class="op" id="2631429">=</span>&nbsp;<span class="ident" id="2631431">d</span>&nbsp;<span class="op" id="2631433">/</span>&nbsp;<span class="num" id="2631435">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631440">n</span>&nbsp;<span class="op" id="2631442">-=</span>&nbsp;<span class="ident" id="2631445">n</span>&nbsp;<span class="op" id="2631447">&gt;&gt;</span>&nbsp;<span class="num" id="2631450">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631453">y</span>&nbsp;<span class="op" id="2631455">+=</span>&nbsp;<span class="ident" id="2631458">n</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631461">d</span>&nbsp;<span class="op" id="2631463">-=</span>&nbsp;<span class="num" id="2631466">365</span>&nbsp;<span class="op" id="2631470">*</span>&nbsp;<span class="ident" id="2631472">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631476">year</span>&nbsp;<span class="op" id="2631481">=</span>&nbsp;<span class="builtintype" id="2631483">int</span><span class="op" id="2631486">(</span><span class="ident" id="2631487">int64</span><span class="op" id="2631492">(</span><span class="ident" id="2631493">y</span><span class="op" id="2631494">)</span>&nbsp;<span class="op" id="2631496">+</span>&nbsp;<span class="ident" id="2631498">absoluteZeroYear</span><span class="op" id="2631514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631517">yday</span>&nbsp;<span class="op" id="2631522">=</span>&nbsp;<span class="builtintype" id="2631524">int</span><span class="op" id="2631527">(</span><span class="ident" id="2631528">d</span><span class="op" id="2631529">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631533">if</span>&nbsp;<span class="op" id="2631536">!</span><span class="ident" id="2631537">full</span>&nbsp;<span class="op" id="2631542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631546">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631558">day</span>&nbsp;<span class="op" id="2631562">=</span>&nbsp;<span class="ident" id="2631564">yday</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631570">if</span>&nbsp;<span class="ident" id="2631573">isLeap</span><span class="op" id="2631579">(</span><span class="ident" id="2631580">year</span><span class="op" id="2631584">)</span>&nbsp;<span class="op" id="2631586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631590">//&nbsp;Leap&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631605">switch</span>&nbsp;<span class="op" id="2631612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631616">case</span>&nbsp;<span class="ident" id="2631621">day</span>&nbsp;<span class="op" id="2631625">&gt;</span>&nbsp;<span class="num" id="2631627">31</span><span class="op" id="2631629">+</span><span class="num" id="2631630">29</span><span class="op" id="2631632">-</span><span class="num" id="2631633">1</span><span class="op" id="2631634">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631639">//&nbsp;After&nbsp;leap&nbsp;day;&nbsp;pretend&nbsp;it&nbsp;wasn&#39;t&nbsp;there.</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631686">day</span><span class="op" id="2631689">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631694">case</span>&nbsp;<span class="ident" id="2631699">day</span>&nbsp;<span class="op" id="2631703">==</span>&nbsp;<span class="num" id="2631706">31</span><span class="op" id="2631708">+</span><span class="num" id="2631709">29</span><span class="op" id="2631711">-</span><span class="num" id="2631712">1</span><span class="op" id="2631713">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631718">//&nbsp;Leap&nbsp;day.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631734">month</span>&nbsp;<span class="op" id="2631740">=</span>&nbsp;<span class="ident" id="2631742">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631754">day</span>&nbsp;<span class="op" id="2631758">=</span>&nbsp;<span class="num" id="2631760">29</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631766">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631782">//&nbsp;Estimate&nbsp;month&nbsp;on&nbsp;assumption&nbsp;that&nbsp;every&nbsp;month&nbsp;has&nbsp;31&nbsp;days.</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631845">//&nbsp;The&nbsp;estimate&nbsp;may&nbsp;be&nbsp;too&nbsp;low&nbsp;by&nbsp;at&nbsp;most&nbsp;one&nbsp;month,&nbsp;so&nbsp;adjust.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631910">month</span>&nbsp;<span class="op" id="2631916">=</span>&nbsp;<span class="ident" id="2631918">Month</span><span class="op" id="2631923">(</span><span class="ident" id="2631924">day</span>&nbsp;<span class="op" id="2631928">/</span>&nbsp;<span class="num" id="2631930">31</span><span class="op" id="2631932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631935">end</span>&nbsp;<span class="op" id="2631939">:=</span>&nbsp;<span class="builtintype" id="2631942">int</span><span class="op" id="2631945">(</span><span class="ident" id="2631946">daysBefore</span><span class="op" id="2631956">[</span><span class="ident" id="2631957">month</span><span class="op" id="2631962">+</span><span class="num" id="2631963">1</span><span class="op" id="2631964">]</span><span class="op" id="2631965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631968">var</span>&nbsp;<span class="ident" id="2631972">begin</span>&nbsp;<span class="builtintype" id="2631978">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631983">if</span>&nbsp;<span class="ident" id="2631986">day</span>&nbsp;<span class="op" id="2631990">&gt;=</span>&nbsp;<span class="ident" id="2631993">end</span>&nbsp;<span class="op" id="2631997">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632001">month</span><span class="op" id="2632006">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632011">begin</span>&nbsp;<span class="op" id="2632017">=</span>&nbsp;<span class="ident" id="2632019">end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2632024">}</span>&nbsp;<span class="keyword" id="2632026">else</span>&nbsp;<span class="op" id="2632031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632035">begin</span>&nbsp;<span class="op" id="2632041">=</span>&nbsp;<span class="builtintype" id="2632043">int</span><span class="op" id="2632046">(</span><span class="ident" id="2632047">daysBefore</span><span class="op" id="2632057">[</span><span class="ident" id="2632058">month</span><span class="op" id="2632063">]</span><span class="op" id="2632064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2632067">}</span><br>
<span class="lineno">745</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632071">month</span><span class="op" id="2632076">++</span>&nbsp;<span class="comment" id="2632079">//&nbsp;because&nbsp;January&nbsp;is&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632104">day</span>&nbsp;<span class="op" id="2632108">=</span>&nbsp;<span class="ident" id="2632110">day</span>&nbsp;<span class="op" id="2632114">-</span>&nbsp;<span class="ident" id="2632116">begin</span>&nbsp;<span class="op" id="2632122">+</span>&nbsp;<span class="num" id="2632124">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632127">return</span><br>
<span class="lineno"></span><span class="op" id="2632134">}</span><br>
<span class="lineno">750</span><br>
<span class="lineno"></span><span class="comment" id="2632137">//&nbsp;daysBefore[m]&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;in&nbsp;a&nbsp;non-leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2632199">//&nbsp;before&nbsp;month&nbsp;m&nbsp;begins.&nbsp;&nbsp;There&nbsp;is&nbsp;an&nbsp;entry&nbsp;for&nbsp;m=12,&nbsp;counting</span><br>
<span class="lineno"></span><span class="comment" id="2632263">//&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;before&nbsp;January&nbsp;of&nbsp;next&nbsp;year&nbsp;(365).</span><br>
<span class="lineno"></span><span class="keyword" id="2632320">var</span>&nbsp;<span class="ident" id="2632324">daysBefore</span>&nbsp;<span class="op" id="2632335">=</span>&nbsp;<span class="op" id="2632337">[</span><span class="op" id="2632338">...</span><span class="op" id="2632341">]</span><span class="builtintype" id="2632342">int32</span><span class="op" id="2632347">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632350">0</span><span class="op" id="2632351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632354">31</span><span class="op" id="2632356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632359">31</span>&nbsp;<span class="op" id="2632362">+</span>&nbsp;<span class="num" id="2632364">28</span><span class="op" id="2632366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632369">31</span>&nbsp;<span class="op" id="2632372">+</span>&nbsp;<span class="num" id="2632374">28</span>&nbsp;<span class="op" id="2632377">+</span>&nbsp;<span class="num" id="2632379">31</span><span class="op" id="2632381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632384">31</span>&nbsp;<span class="op" id="2632387">+</span>&nbsp;<span class="num" id="2632389">28</span>&nbsp;<span class="op" id="2632392">+</span>&nbsp;<span class="num" id="2632394">31</span>&nbsp;<span class="op" id="2632397">+</span>&nbsp;<span class="num" id="2632399">30</span><span class="op" id="2632401">,</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632404">31</span>&nbsp;<span class="op" id="2632407">+</span>&nbsp;<span class="num" id="2632409">28</span>&nbsp;<span class="op" id="2632412">+</span>&nbsp;<span class="num" id="2632414">31</span>&nbsp;<span class="op" id="2632417">+</span>&nbsp;<span class="num" id="2632419">30</span>&nbsp;<span class="op" id="2632422">+</span>&nbsp;<span class="num" id="2632424">31</span><span class="op" id="2632426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632429">31</span>&nbsp;<span class="op" id="2632432">+</span>&nbsp;<span class="num" id="2632434">28</span>&nbsp;<span class="op" id="2632437">+</span>&nbsp;<span class="num" id="2632439">31</span>&nbsp;<span class="op" id="2632442">+</span>&nbsp;<span class="num" id="2632444">30</span>&nbsp;<span class="op" id="2632447">+</span>&nbsp;<span class="num" id="2632449">31</span>&nbsp;<span class="op" id="2632452">+</span>&nbsp;<span class="num" id="2632454">30</span><span class="op" id="2632456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632459">31</span>&nbsp;<span class="op" id="2632462">+</span>&nbsp;<span class="num" id="2632464">28</span>&nbsp;<span class="op" id="2632467">+</span>&nbsp;<span class="num" id="2632469">31</span>&nbsp;<span class="op" id="2632472">+</span>&nbsp;<span class="num" id="2632474">30</span>&nbsp;<span class="op" id="2632477">+</span>&nbsp;<span class="num" id="2632479">31</span>&nbsp;<span class="op" id="2632482">+</span>&nbsp;<span class="num" id="2632484">30</span>&nbsp;<span class="op" id="2632487">+</span>&nbsp;<span class="num" id="2632489">31</span><span class="op" id="2632491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632494">31</span>&nbsp;<span class="op" id="2632497">+</span>&nbsp;<span class="num" id="2632499">28</span>&nbsp;<span class="op" id="2632502">+</span>&nbsp;<span class="num" id="2632504">31</span>&nbsp;<span class="op" id="2632507">+</span>&nbsp;<span class="num" id="2632509">30</span>&nbsp;<span class="op" id="2632512">+</span>&nbsp;<span class="num" id="2632514">31</span>&nbsp;<span class="op" id="2632517">+</span>&nbsp;<span class="num" id="2632519">30</span>&nbsp;<span class="op" id="2632522">+</span>&nbsp;<span class="num" id="2632524">31</span>&nbsp;<span class="op" id="2632527">+</span>&nbsp;<span class="num" id="2632529">31</span><span class="op" id="2632531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632534">31</span>&nbsp;<span class="op" id="2632537">+</span>&nbsp;<span class="num" id="2632539">28</span>&nbsp;<span class="op" id="2632542">+</span>&nbsp;<span class="num" id="2632544">31</span>&nbsp;<span class="op" id="2632547">+</span>&nbsp;<span class="num" id="2632549">30</span>&nbsp;<span class="op" id="2632552">+</span>&nbsp;<span class="num" id="2632554">31</span>&nbsp;<span class="op" id="2632557">+</span>&nbsp;<span class="num" id="2632559">30</span>&nbsp;<span class="op" id="2632562">+</span>&nbsp;<span class="num" id="2632564">31</span>&nbsp;<span class="op" id="2632567">+</span>&nbsp;<span class="num" id="2632569">31</span>&nbsp;<span class="op" id="2632572">+</span>&nbsp;<span class="num" id="2632574">30</span><span class="op" id="2632576">,</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632579">31</span>&nbsp;<span class="op" id="2632582">+</span>&nbsp;<span class="num" id="2632584">28</span>&nbsp;<span class="op" id="2632587">+</span>&nbsp;<span class="num" id="2632589">31</span>&nbsp;<span class="op" id="2632592">+</span>&nbsp;<span class="num" id="2632594">30</span>&nbsp;<span class="op" id="2632597">+</span>&nbsp;<span class="num" id="2632599">31</span>&nbsp;<span class="op" id="2632602">+</span>&nbsp;<span class="num" id="2632604">30</span>&nbsp;<span class="op" id="2632607">+</span>&nbsp;<span class="num" id="2632609">31</span>&nbsp;<span class="op" id="2632612">+</span>&nbsp;<span class="num" id="2632614">31</span>&nbsp;<span class="op" id="2632617">+</span>&nbsp;<span class="num" id="2632619">30</span>&nbsp;<span class="op" id="2632622">+</span>&nbsp;<span class="num" id="2632624">31</span><span class="op" id="2632626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632629">31</span>&nbsp;<span class="op" id="2632632">+</span>&nbsp;<span class="num" id="2632634">28</span>&nbsp;<span class="op" id="2632637">+</span>&nbsp;<span class="num" id="2632639">31</span>&nbsp;<span class="op" id="2632642">+</span>&nbsp;<span class="num" id="2632644">30</span>&nbsp;<span class="op" id="2632647">+</span>&nbsp;<span class="num" id="2632649">31</span>&nbsp;<span class="op" id="2632652">+</span>&nbsp;<span class="num" id="2632654">30</span>&nbsp;<span class="op" id="2632657">+</span>&nbsp;<span class="num" id="2632659">31</span>&nbsp;<span class="op" id="2632662">+</span>&nbsp;<span class="num" id="2632664">31</span>&nbsp;<span class="op" id="2632667">+</span>&nbsp;<span class="num" id="2632669">30</span>&nbsp;<span class="op" id="2632672">+</span>&nbsp;<span class="num" id="2632674">31</span>&nbsp;<span class="op" id="2632677">+</span>&nbsp;<span class="num" id="2632679">30</span><span class="op" id="2632681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2632684">31</span>&nbsp;<span class="op" id="2632687">+</span>&nbsp;<span class="num" id="2632689">28</span>&nbsp;<span class="op" id="2632692">+</span>&nbsp;<span class="num" id="2632694">31</span>&nbsp;<span class="op" id="2632697">+</span>&nbsp;<span class="num" id="2632699">30</span>&nbsp;<span class="op" id="2632702">+</span>&nbsp;<span class="num" id="2632704">31</span>&nbsp;<span class="op" id="2632707">+</span>&nbsp;<span class="num" id="2632709">30</span>&nbsp;<span class="op" id="2632712">+</span>&nbsp;<span class="num" id="2632714">31</span>&nbsp;<span class="op" id="2632717">+</span>&nbsp;<span class="num" id="2632719">31</span>&nbsp;<span class="op" id="2632722">+</span>&nbsp;<span class="num" id="2632724">30</span>&nbsp;<span class="op" id="2632727">+</span>&nbsp;<span class="num" id="2632729">31</span>&nbsp;<span class="op" id="2632732">+</span>&nbsp;<span class="num" id="2632734">30</span>&nbsp;<span class="op" id="2632737">+</span>&nbsp;<span class="num" id="2632739">31</span><span class="op" id="2632741">,</span><br>
<span class="lineno"></span><span class="op" id="2632743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">770</span><span class="keyword" id="2632746">func</span>&nbsp;<span class="ident" id="2632751">daysIn</span><span class="op" id="2632757">(</span><span class="ident" id="2632758">m</span>&nbsp;<span class="ident" id="2632760">Month</span><span class="op" id="2632765">,</span>&nbsp;<span class="ident" id="2632767">year</span>&nbsp;<span class="builtintype" id="2632772">int</span><span class="op" id="2632775">)</span>&nbsp;<span class="builtintype" id="2632777">int</span>&nbsp;<span class="op" id="2632781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632784">if</span>&nbsp;<span class="ident" id="2632787">m</span>&nbsp;<span class="op" id="2632789">==</span>&nbsp;<span class="ident" id="2632792">February</span>&nbsp;<span class="op" id="2632801">&amp;&amp;</span>&nbsp;<span class="ident" id="2632804">isLeap</span><span class="op" id="2632810">(</span><span class="ident" id="2632811">year</span><span class="op" id="2632815">)</span>&nbsp;<span class="op" id="2632817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632821">return</span>&nbsp;<span class="num" id="2632828">29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2632832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632835">return</span>&nbsp;<span class="builtintype" id="2632842">int</span><span class="op" id="2632845">(</span><span class="ident" id="2632846">daysBefore</span><span class="op" id="2632856">[</span><span class="ident" id="2632857">m</span><span class="op" id="2632858">]</span>&nbsp;<span class="op" id="2632860">-</span>&nbsp;<span class="ident" id="2632862">daysBefore</span><span class="op" id="2632872">[</span><span class="ident" id="2632873">m</span><span class="op" id="2632874">-</span><span class="num" id="2632875">1</span><span class="op" id="2632876">]</span><span class="op" id="2632877">)</span><br>
<span class="lineno">775</span><span class="op" id="2632879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2632882">//&nbsp;Provided&nbsp;by&nbsp;package&nbsp;runtime.</span><br>
<span class="lineno"></span><span class="keyword" id="2632914">func</span>&nbsp;<span class="ident" id="2632919">now</span><span class="op" id="2632922">(</span><span class="op" id="2632923">)</span>&nbsp;<span class="op" id="2632925">(</span><span class="ident" id="2632926">sec</span>&nbsp;<span class="ident" id="2632930">int64</span><span class="op" id="2632935">,</span>&nbsp;<span class="ident" id="2632937">nsec</span>&nbsp;<span class="builtintype" id="2632942">int32</span><span class="op" id="2632947">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="comment" id="2632950">//&nbsp;Now&nbsp;returns&nbsp;the&nbsp;current&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2632989">func</span>&nbsp;<span class="ident" id="2632994">Now</span><span class="op" id="2632997">(</span><span class="op" id="2632998">)</span>&nbsp;<span class="ident" id="2633000">Time</span>&nbsp;<span class="op" id="2633005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633008">sec</span><span class="op" id="2633011">,</span>&nbsp;<span class="ident" id="2633013">nsec</span>&nbsp;<span class="op" id="2633018">:=</span>&nbsp;<span class="ident" id="2633021">now</span><span class="op" id="2633024">(</span><span class="op" id="2633025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633028">return</span>&nbsp;<span class="ident" id="2633035">Time</span><span class="op" id="2633039">{</span><span class="ident" id="2633040">sec</span>&nbsp;<span class="op" id="2633044">+</span>&nbsp;<span class="ident" id="2633046">unixToInternal</span><span class="op" id="2633060">,</span>&nbsp;<span class="ident" id="2633062">nsec</span><span class="op" id="2633066">,</span>&nbsp;<span class="ident" id="2633068">Local</span><span class="op" id="2633073">}</span><br>
<span class="lineno"></span><span class="op" id="2633075">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="comment" id="2633078">//&nbsp;UTC&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2633125">func</span>&nbsp;<span class="op" id="2633130">(</span><span class="ident" id="2633131">t</span>&nbsp;<span class="ident" id="2633133">Time</span><span class="op" id="2633137">)</span>&nbsp;<span class="ident" id="2633139">UTC</span><span class="op" id="2633142">(</span><span class="op" id="2633143">)</span>&nbsp;<span class="ident" id="2633145">Time</span>&nbsp;<span class="op" id="2633150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633153">t</span><span class="op" id="2633154">.</span><span class="ident" id="2633155">loc</span>&nbsp;<span class="op" id="2633159">=</span>&nbsp;<span class="ident" id="2633161">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633166">return</span>&nbsp;<span class="ident" id="2633173">t</span><br>
<span class="lineno">790</span><span class="op" id="2633175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2633178">//&nbsp;Local&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2633234">func</span>&nbsp;<span class="op" id="2633239">(</span><span class="ident" id="2633240">t</span>&nbsp;<span class="ident" id="2633242">Time</span><span class="op" id="2633246">)</span>&nbsp;<span class="ident" id="2633248">Local</span><span class="op" id="2633253">(</span><span class="op" id="2633254">)</span>&nbsp;<span class="ident" id="2633256">Time</span>&nbsp;<span class="op" id="2633261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633264">t</span><span class="op" id="2633265">.</span><span class="ident" id="2633266">loc</span>&nbsp;<span class="op" id="2633270">=</span>&nbsp;<span class="ident" id="2633272">Local</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633279">return</span>&nbsp;<span class="ident" id="2633286">t</span><br>
<span class="lineno"></span><span class="op" id="2633288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2633291">//&nbsp;In&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;information&nbsp;set&nbsp;to&nbsp;loc.</span><br>
<span class="lineno"></span><span class="comment" id="2633349">//</span><br>
<span class="lineno">800</span><span class="comment" id="2633352">//&nbsp;In&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2633380">func</span>&nbsp;<span class="op" id="2633385">(</span><span class="ident" id="2633386">t</span>&nbsp;<span class="ident" id="2633388">Time</span><span class="op" id="2633392">)</span>&nbsp;<span class="ident" id="2633394">In</span><span class="op" id="2633396">(</span><span class="ident" id="2633397">loc</span>&nbsp;<span class="op" id="2633401">*</span><span class="ident" id="2633402">Location</span><span class="op" id="2633410">)</span>&nbsp;<span class="ident" id="2633412">Time</span>&nbsp;<span class="op" id="2633417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633420">if</span>&nbsp;<span class="ident" id="2633423">loc</span>&nbsp;<span class="op" id="2633427">==</span>&nbsp;<span class="ident" id="2633430">nil</span>&nbsp;<span class="op" id="2633434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2633438">panic</span><span class="op" id="2633443">(</span><span class="string" id="2633444">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Time.In&#34;</span><span class="op" id="2633487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2633490">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633493">t</span><span class="op" id="2633494">.</span><span class="ident" id="2633495">loc</span>&nbsp;<span class="op" id="2633499">=</span>&nbsp;<span class="ident" id="2633501">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633506">return</span>&nbsp;<span class="ident" id="2633513">t</span><br>
<span class="lineno"></span><span class="op" id="2633515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2633518">//&nbsp;Location&nbsp;returns&nbsp;the&nbsp;time&nbsp;zone&nbsp;information&nbsp;associated&nbsp;with&nbsp;t.</span><br>
<span class="lineno">810</span><span class="keyword" id="2633583">func</span>&nbsp;<span class="op" id="2633588">(</span><span class="ident" id="2633589">t</span>&nbsp;<span class="ident" id="2633591">Time</span><span class="op" id="2633595">)</span>&nbsp;<span class="ident" id="2633597">Location</span><span class="op" id="2633605">(</span><span class="op" id="2633606">)</span>&nbsp;<span class="op" id="2633608">*</span><span class="ident" id="2633609">Location</span>&nbsp;<span class="op" id="2633618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633621">l</span>&nbsp;<span class="op" id="2633623">:=</span>&nbsp;<span class="ident" id="2633626">t</span><span class="op" id="2633627">.</span><span class="ident" id="2633628">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633633">if</span>&nbsp;<span class="ident" id="2633636">l</span>&nbsp;<span class="op" id="2633638">==</span>&nbsp;<span class="ident" id="2633641">nil</span>&nbsp;<span class="op" id="2633645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633649">l</span>&nbsp;<span class="op" id="2633651">=</span>&nbsp;<span class="ident" id="2633653">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2633658">}</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633661">return</span>&nbsp;<span class="ident" id="2633668">l</span><br>
<span class="lineno"></span><span class="op" id="2633670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2633673">//&nbsp;Zone&nbsp;computes&nbsp;the&nbsp;time&nbsp;zone&nbsp;in&nbsp;effect&nbsp;at&nbsp;time&nbsp;t,&nbsp;returning&nbsp;the&nbsp;abbreviated</span><br>
<span class="lineno"></span><span class="comment" id="2633751">//&nbsp;name&nbsp;of&nbsp;the&nbsp;zone&nbsp;(such&nbsp;as&nbsp;&#34;CET&#34;)&nbsp;and&nbsp;its&nbsp;offset&nbsp;in&nbsp;seconds&nbsp;east&nbsp;of&nbsp;UTC.</span><br>
<span class="lineno">820</span><span class="keyword" id="2633826">func</span>&nbsp;<span class="op" id="2633831">(</span><span class="ident" id="2633832">t</span>&nbsp;<span class="ident" id="2633834">Time</span><span class="op" id="2633838">)</span>&nbsp;<span class="ident" id="2633840">Zone</span><span class="op" id="2633844">(</span><span class="op" id="2633845">)</span>&nbsp;<span class="op" id="2633847">(</span><span class="ident" id="2633848">name</span>&nbsp;<span class="builtintype" id="2633853">string</span><span class="op" id="2633859">,</span>&nbsp;<span class="ident" id="2633861">offset</span>&nbsp;<span class="builtintype" id="2633868">int</span><span class="op" id="2633871">)</span>&nbsp;<span class="op" id="2633873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633876">name</span><span class="op" id="2633880">,</span>&nbsp;<span class="ident" id="2633882">offset</span><span class="op" id="2633888">,</span>&nbsp;<span class="ident" id="2633890">_</span><span class="op" id="2633891">,</span>&nbsp;<span class="ident" id="2633893">_</span><span class="op" id="2633894">,</span>&nbsp;<span class="ident" id="2633896">_</span>&nbsp;<span class="op" id="2633898">=</span>&nbsp;<span class="ident" id="2633900">t</span><span class="op" id="2633901">.</span><span class="ident" id="2633902">loc</span><span class="op" id="2633905">.</span><span class="ident" id="2633906">lookup</span><span class="op" id="2633912">(</span><span class="ident" id="2633913">t</span><span class="op" id="2633914">.</span><span class="ident" id="2633915">sec</span>&nbsp;<span class="op" id="2633919">+</span>&nbsp;<span class="ident" id="2633921">internalToUnix</span><span class="op" id="2633935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633938">return</span><br>
<span class="lineno"></span><span class="op" id="2633945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="2633948">//&nbsp;Unix&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2634012">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2634042">func</span>&nbsp;<span class="op" id="2634047">(</span><span class="ident" id="2634048">t</span>&nbsp;<span class="ident" id="2634050">Time</span><span class="op" id="2634054">)</span>&nbsp;<span class="ident" id="2634056">Unix</span><span class="op" id="2634060">(</span><span class="op" id="2634061">)</span>&nbsp;<span class="ident" id="2634063">int64</span>&nbsp;<span class="op" id="2634069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634072">return</span>&nbsp;<span class="ident" id="2634079">t</span><span class="op" id="2634080">.</span><span class="ident" id="2634081">sec</span>&nbsp;<span class="op" id="2634085">+</span>&nbsp;<span class="ident" id="2634087">internalToUnix</span><br>
<span class="lineno"></span><span class="op" id="2634102">}</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span><span class="comment" id="2634105">//&nbsp;UnixNano&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;nanoseconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2634177">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.&nbsp;The&nbsp;result&nbsp;is&nbsp;undefined&nbsp;if&nbsp;the&nbsp;Unix&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2634248">//&nbsp;in&nbsp;nanoseconds&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;an&nbsp;int64.&nbsp;Note&nbsp;that&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="2634316">//&nbsp;means&nbsp;the&nbsp;result&nbsp;of&nbsp;calling&nbsp;UnixNano&nbsp;on&nbsp;the&nbsp;zero&nbsp;Time&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno">835</span><span class="keyword" id="2634387">func</span>&nbsp;<span class="op" id="2634392">(</span><span class="ident" id="2634393">t</span>&nbsp;<span class="ident" id="2634395">Time</span><span class="op" id="2634399">)</span>&nbsp;<span class="ident" id="2634401">UnixNano</span><span class="op" id="2634409">(</span><span class="op" id="2634410">)</span>&nbsp;<span class="ident" id="2634412">int64</span>&nbsp;<span class="op" id="2634418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634421">return</span>&nbsp;<span class="op" id="2634428">(</span><span class="ident" id="2634429">t</span><span class="op" id="2634430">.</span><span class="ident" id="2634431">sec</span><span class="op" id="2634434">+</span><span class="ident" id="2634435">internalToUnix</span><span class="op" id="2634449">)</span><span class="op" id="2634450">*</span><span class="num" id="2634451">1e9</span>&nbsp;<span class="op" id="2634455">+</span>&nbsp;<span class="ident" id="2634457">int64</span><span class="op" id="2634462">(</span><span class="ident" id="2634463">t</span><span class="op" id="2634464">.</span><span class="ident" id="2634465">nsec</span><span class="op" id="2634469">)</span><br>
<span class="lineno"></span><span class="op" id="2634471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2634474">const</span>&nbsp;<span class="ident" id="2634480">timeBinaryVersion</span>&nbsp;<span class="builtintype" id="2634498">byte</span>&nbsp;<span class="op" id="2634503">=</span>&nbsp;<span class="num" id="2634505">1</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="comment" id="2634508">//&nbsp;MarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryMarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2634576">func</span>&nbsp;<span class="op" id="2634581">(</span><span class="ident" id="2634582">t</span>&nbsp;<span class="ident" id="2634584">Time</span><span class="op" id="2634588">)</span>&nbsp;<span class="ident" id="2634590">MarshalBinary</span><span class="op" id="2634603">(</span><span class="op" id="2634604">)</span>&nbsp;<span class="op" id="2634606">(</span><span class="op" id="2634607">[</span><span class="op" id="2634608">]</span><span class="builtintype" id="2634609">byte</span><span class="op" id="2634613">,</span>&nbsp;<span class="builtintype" id="2634615">error</span><span class="op" id="2634620">)</span>&nbsp;<span class="op" id="2634622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634625">var</span>&nbsp;<span class="ident" id="2634629">offsetMin</span>&nbsp;<span class="builtintype" id="2634639">int16</span>&nbsp;<span class="comment" id="2634645">//&nbsp;minutes&nbsp;east&nbsp;of&nbsp;UTC.&nbsp;-1&nbsp;is&nbsp;UTC.</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634682">if</span>&nbsp;<span class="ident" id="2634685">t</span><span class="op" id="2634686">.</span><span class="ident" id="2634687">Location</span><span class="op" id="2634695">(</span><span class="op" id="2634696">)</span>&nbsp;<span class="op" id="2634698">==</span>&nbsp;<span class="op" id="2634701">&amp;</span><span class="ident" id="2634702">utcLoc</span>&nbsp;<span class="op" id="2634709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634713">offsetMin</span>&nbsp;<span class="op" id="2634723">=</span>&nbsp;<span class="op" id="2634725">-</span><span class="num" id="2634726">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634729">}</span>&nbsp;<span class="keyword" id="2634731">else</span>&nbsp;<span class="op" id="2634736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634740">_</span><span class="op" id="2634741">,</span>&nbsp;<span class="ident" id="2634743">offset</span>&nbsp;<span class="op" id="2634750">:=</span>&nbsp;<span class="ident" id="2634753">t</span><span class="op" id="2634754">.</span><span class="ident" id="2634755">Zone</span><span class="op" id="2634759">(</span><span class="op" id="2634760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634764">if</span>&nbsp;<span class="ident" id="2634767">offset</span><span class="op" id="2634773">%</span><span class="num" id="2634774">60</span>&nbsp;<span class="op" id="2634777">!=</span>&nbsp;<span class="num" id="2634780">0</span>&nbsp;<span class="op" id="2634782">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634787">return</span>&nbsp;<span class="ident" id="2634794">nil</span><span class="op" id="2634797">,</span>&nbsp;<span class="ident" id="2634799">errors</span><span class="op" id="2634805">.</span><span class="ident" id="2634806">New</span><span class="op" id="2634809">(</span><span class="string" id="2634810">&#34;Time.MarshalBinary:&nbsp;zone&nbsp;offset&nbsp;has&nbsp;fractional&nbsp;minute&#34;</span><span class="op" id="2634865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634873">offset</span>&nbsp;<span class="op" id="2634880">/=</span>&nbsp;<span class="num" id="2634883">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634888">if</span>&nbsp;<span class="ident" id="2634891">offset</span>&nbsp;<span class="op" id="2634898">&lt;</span>&nbsp;<span class="op" id="2634900">-</span><span class="num" id="2634901">32768</span>&nbsp;<span class="op" id="2634907">||</span>&nbsp;<span class="ident" id="2634910">offset</span>&nbsp;<span class="op" id="2634917">==</span>&nbsp;<span class="op" id="2634920">-</span><span class="num" id="2634921">1</span>&nbsp;<span class="op" id="2634923">||</span>&nbsp;<span class="ident" id="2634926">offset</span>&nbsp;<span class="op" id="2634933">&gt;</span>&nbsp;<span class="num" id="2634935">32767</span>&nbsp;<span class="op" id="2634941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634946">return</span>&nbsp;<span class="ident" id="2634953">nil</span><span class="op" id="2634956">,</span>&nbsp;<span class="ident" id="2634958">errors</span><span class="op" id="2634964">.</span><span class="ident" id="2634965">New</span><span class="op" id="2634968">(</span><span class="string" id="2634969">&#34;Time.MarshalBinary:&nbsp;unexpected&nbsp;zone&nbsp;offset&#34;</span><span class="op" id="2635013">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635021">offsetMin</span>&nbsp;<span class="op" id="2635031">=</span>&nbsp;<span class="builtintype" id="2635033">int16</span><span class="op" id="2635038">(</span><span class="ident" id="2635039">offset</span><span class="op" id="2635045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635052">enc</span>&nbsp;<span class="op" id="2635056">:=</span>&nbsp;<span class="op" id="2635059">[</span><span class="op" id="2635060">]</span><span class="builtintype" id="2635061">byte</span><span class="op" id="2635065">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635069">timeBinaryVersion</span><span class="op" id="2635086">,</span>&nbsp;<span class="comment" id="2635088">//&nbsp;byte&nbsp;0&nbsp;:&nbsp;version</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635110">byte</span><span class="op" id="2635114">(</span><span class="ident" id="2635115">t</span><span class="op" id="2635116">.</span><span class="ident" id="2635117">sec</span>&nbsp;<span class="op" id="2635121">&gt;&gt;</span>&nbsp;<span class="num" id="2635124">56</span><span class="op" id="2635126">)</span><span class="op" id="2635127">,</span>&nbsp;<span class="comment" id="2635129">//&nbsp;bytes&nbsp;1-8:&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635153">byte</span><span class="op" id="2635157">(</span><span class="ident" id="2635158">t</span><span class="op" id="2635159">.</span><span class="ident" id="2635160">sec</span>&nbsp;<span class="op" id="2635164">&gt;&gt;</span>&nbsp;<span class="num" id="2635167">48</span><span class="op" id="2635169">)</span><span class="op" id="2635170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635174">byte</span><span class="op" id="2635178">(</span><span class="ident" id="2635179">t</span><span class="op" id="2635180">.</span><span class="ident" id="2635181">sec</span>&nbsp;<span class="op" id="2635185">&gt;&gt;</span>&nbsp;<span class="num" id="2635188">40</span><span class="op" id="2635190">)</span><span class="op" id="2635191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635195">byte</span><span class="op" id="2635199">(</span><span class="ident" id="2635200">t</span><span class="op" id="2635201">.</span><span class="ident" id="2635202">sec</span>&nbsp;<span class="op" id="2635206">&gt;&gt;</span>&nbsp;<span class="num" id="2635209">32</span><span class="op" id="2635211">)</span><span class="op" id="2635212">,</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635216">byte</span><span class="op" id="2635220">(</span><span class="ident" id="2635221">t</span><span class="op" id="2635222">.</span><span class="ident" id="2635223">sec</span>&nbsp;<span class="op" id="2635227">&gt;&gt;</span>&nbsp;<span class="num" id="2635230">24</span><span class="op" id="2635232">)</span><span class="op" id="2635233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635237">byte</span><span class="op" id="2635241">(</span><span class="ident" id="2635242">t</span><span class="op" id="2635243">.</span><span class="ident" id="2635244">sec</span>&nbsp;<span class="op" id="2635248">&gt;&gt;</span>&nbsp;<span class="num" id="2635251">16</span><span class="op" id="2635253">)</span><span class="op" id="2635254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635258">byte</span><span class="op" id="2635262">(</span><span class="ident" id="2635263">t</span><span class="op" id="2635264">.</span><span class="ident" id="2635265">sec</span>&nbsp;<span class="op" id="2635269">&gt;&gt;</span>&nbsp;<span class="num" id="2635272">8</span><span class="op" id="2635273">)</span><span class="op" id="2635274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635278">byte</span><span class="op" id="2635282">(</span><span class="ident" id="2635283">t</span><span class="op" id="2635284">.</span><span class="ident" id="2635285">sec</span><span class="op" id="2635288">)</span><span class="op" id="2635289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635293">byte</span><span class="op" id="2635297">(</span><span class="ident" id="2635298">t</span><span class="op" id="2635299">.</span><span class="ident" id="2635300">nsec</span>&nbsp;<span class="op" id="2635305">&gt;&gt;</span>&nbsp;<span class="num" id="2635308">24</span><span class="op" id="2635310">)</span><span class="op" id="2635311">,</span>&nbsp;<span class="comment" id="2635313">//&nbsp;bytes&nbsp;9-12:&nbsp;nanoseconds</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635342">byte</span><span class="op" id="2635346">(</span><span class="ident" id="2635347">t</span><span class="op" id="2635348">.</span><span class="ident" id="2635349">nsec</span>&nbsp;<span class="op" id="2635354">&gt;&gt;</span>&nbsp;<span class="num" id="2635357">16</span><span class="op" id="2635359">)</span><span class="op" id="2635360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635364">byte</span><span class="op" id="2635368">(</span><span class="ident" id="2635369">t</span><span class="op" id="2635370">.</span><span class="ident" id="2635371">nsec</span>&nbsp;<span class="op" id="2635376">&gt;&gt;</span>&nbsp;<span class="num" id="2635379">8</span><span class="op" id="2635380">)</span><span class="op" id="2635381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635385">byte</span><span class="op" id="2635389">(</span><span class="ident" id="2635390">t</span><span class="op" id="2635391">.</span><span class="ident" id="2635392">nsec</span><span class="op" id="2635396">)</span><span class="op" id="2635397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635401">byte</span><span class="op" id="2635405">(</span><span class="ident" id="2635406">offsetMin</span>&nbsp;<span class="op" id="2635416">&gt;&gt;</span>&nbsp;<span class="num" id="2635419">8</span><span class="op" id="2635420">)</span><span class="op" id="2635421">,</span>&nbsp;<span class="comment" id="2635423">//&nbsp;bytes&nbsp;13-14:&nbsp;zone&nbsp;offset&nbsp;in&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2635464">byte</span><span class="op" id="2635468">(</span><span class="ident" id="2635469">offsetMin</span><span class="op" id="2635478">)</span><span class="op" id="2635479">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635486">return</span>&nbsp;<span class="ident" id="2635493">enc</span><span class="op" id="2635496">,</span>&nbsp;<span class="ident" id="2635498">nil</span><br>
<span class="lineno"></span><span class="op" id="2635502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">880</span><span class="comment" id="2635505">//&nbsp;UnmarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2635577">func</span>&nbsp;<span class="op" id="2635582">(</span><span class="ident" id="2635583">t</span>&nbsp;<span class="op" id="2635585">*</span><span class="ident" id="2635586">Time</span><span class="op" id="2635590">)</span>&nbsp;<span class="ident" id="2635592">UnmarshalBinary</span><span class="op" id="2635607">(</span><span class="ident" id="2635608">data</span>&nbsp;<span class="op" id="2635613">[</span><span class="op" id="2635614">]</span><span class="builtintype" id="2635615">byte</span><span class="op" id="2635619">)</span>&nbsp;<span class="builtintype" id="2635621">error</span>&nbsp;<span class="op" id="2635627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635630">buf</span>&nbsp;<span class="op" id="2635634">:=</span>&nbsp;<span class="ident" id="2635637">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635643">if</span>&nbsp;<span class="builtinfunc" id="2635646">len</span><span class="op" id="2635649">(</span><span class="ident" id="2635650">buf</span><span class="op" id="2635653">)</span>&nbsp;<span class="op" id="2635655">==</span>&nbsp;<span class="num" id="2635658">0</span>&nbsp;<span class="op" id="2635660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635664">return</span>&nbsp;<span class="ident" id="2635671">errors</span><span class="op" id="2635677">.</span><span class="ident" id="2635678">New</span><span class="op" id="2635681">(</span><span class="string" id="2635682">&#34;Time.UnmarshalBinary:&nbsp;no&nbsp;data&#34;</span><span class="op" id="2635713">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635720">if</span>&nbsp;<span class="ident" id="2635723">buf</span><span class="op" id="2635726">[</span><span class="num" id="2635727">0</span><span class="op" id="2635728">]</span>&nbsp;<span class="op" id="2635730">!=</span>&nbsp;<span class="ident" id="2635733">timeBinaryVersion</span>&nbsp;<span class="op" id="2635751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635755">return</span>&nbsp;<span class="ident" id="2635762">errors</span><span class="op" id="2635768">.</span><span class="ident" id="2635769">New</span><span class="op" id="2635772">(</span><span class="string" id="2635773">&#34;Time.UnmarshalBinary:&nbsp;unsupported&nbsp;version&#34;</span><span class="op" id="2635816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635819">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635823">if</span>&nbsp;<span class="builtinfunc" id="2635826">len</span><span class="op" id="2635829">(</span><span class="ident" id="2635830">buf</span><span class="op" id="2635833">)</span>&nbsp;<span class="op" id="2635835">!=</span>&nbsp;<span class="comment" id="2635838">/*version*/</span>&nbsp;<span class="num" id="2635850">1</span><span class="op" id="2635851">+</span>&nbsp;<span class="comment" id="2635853">/*sec*/</span>&nbsp;<span class="num" id="2635861">8</span><span class="op" id="2635862">+</span>&nbsp;<span class="comment" id="2635864">/*nsec*/</span>&nbsp;<span class="num" id="2635873">4</span><span class="op" id="2635874">+</span>&nbsp;<span class="comment" id="2635876">/*zone&nbsp;offset*/</span>&nbsp;<span class="num" id="2635892">2</span>&nbsp;<span class="op" id="2635894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635898">return</span>&nbsp;<span class="ident" id="2635905">errors</span><span class="op" id="2635911">.</span><span class="ident" id="2635912">New</span><span class="op" id="2635915">(</span><span class="string" id="2635916">&#34;Time.UnmarshalBinary:&nbsp;invalid&nbsp;length&#34;</span><span class="op" id="2635954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635961">buf</span>&nbsp;<span class="op" id="2635965">=</span>&nbsp;<span class="ident" id="2635967">buf</span><span class="op" id="2635970">[</span><span class="num" id="2635971">1</span><span class="op" id="2635972">:</span><span class="op" id="2635973">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635976">t</span><span class="op" id="2635977">.</span><span class="ident" id="2635978">sec</span>&nbsp;<span class="op" id="2635982">=</span>&nbsp;<span class="ident" id="2635984">int64</span><span class="op" id="2635989">(</span><span class="ident" id="2635990">buf</span><span class="op" id="2635993">[</span><span class="num" id="2635994">7</span><span class="op" id="2635995">]</span><span class="op" id="2635996">)</span>&nbsp;<span class="op" id="2635998">|</span>&nbsp;<span class="ident" id="2636000">int64</span><span class="op" id="2636005">(</span><span class="ident" id="2636006">buf</span><span class="op" id="2636009">[</span><span class="num" id="2636010">6</span><span class="op" id="2636011">]</span><span class="op" id="2636012">)</span><span class="op" id="2636013">&lt;&lt;</span><span class="num" id="2636015">8</span>&nbsp;<span class="op" id="2636017">|</span>&nbsp;<span class="ident" id="2636019">int64</span><span class="op" id="2636024">(</span><span class="ident" id="2636025">buf</span><span class="op" id="2636028">[</span><span class="num" id="2636029">5</span><span class="op" id="2636030">]</span><span class="op" id="2636031">)</span><span class="op" id="2636032">&lt;&lt;</span><span class="num" id="2636034">16</span>&nbsp;<span class="op" id="2636037">|</span>&nbsp;<span class="ident" id="2636039">int64</span><span class="op" id="2636044">(</span><span class="ident" id="2636045">buf</span><span class="op" id="2636048">[</span><span class="num" id="2636049">4</span><span class="op" id="2636050">]</span><span class="op" id="2636051">)</span><span class="op" id="2636052">&lt;&lt;</span><span class="num" id="2636054">24</span>&nbsp;<span class="op" id="2636057">|</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636061">int64</span><span class="op" id="2636066">(</span><span class="ident" id="2636067">buf</span><span class="op" id="2636070">[</span><span class="num" id="2636071">3</span><span class="op" id="2636072">]</span><span class="op" id="2636073">)</span><span class="op" id="2636074">&lt;&lt;</span><span class="num" id="2636076">32</span>&nbsp;<span class="op" id="2636079">|</span>&nbsp;<span class="ident" id="2636081">int64</span><span class="op" id="2636086">(</span><span class="ident" id="2636087">buf</span><span class="op" id="2636090">[</span><span class="num" id="2636091">2</span><span class="op" id="2636092">]</span><span class="op" id="2636093">)</span><span class="op" id="2636094">&lt;&lt;</span><span class="num" id="2636096">40</span>&nbsp;<span class="op" id="2636099">|</span>&nbsp;<span class="ident" id="2636101">int64</span><span class="op" id="2636106">(</span><span class="ident" id="2636107">buf</span><span class="op" id="2636110">[</span><span class="num" id="2636111">1</span><span class="op" id="2636112">]</span><span class="op" id="2636113">)</span><span class="op" id="2636114">&lt;&lt;</span><span class="num" id="2636116">48</span>&nbsp;<span class="op" id="2636119">|</span>&nbsp;<span class="ident" id="2636121">int64</span><span class="op" id="2636126">(</span><span class="ident" id="2636127">buf</span><span class="op" id="2636130">[</span><span class="num" id="2636131">0</span><span class="op" id="2636132">]</span><span class="op" id="2636133">)</span><span class="op" id="2636134">&lt;&lt;</span><span class="num" id="2636136">56</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636141">buf</span>&nbsp;<span class="op" id="2636145">=</span>&nbsp;<span class="ident" id="2636147">buf</span><span class="op" id="2636150">[</span><span class="num" id="2636151">8</span><span class="op" id="2636152">:</span><span class="op" id="2636153">]</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636156">t</span><span class="op" id="2636157">.</span><span class="ident" id="2636158">nsec</span>&nbsp;<span class="op" id="2636163">=</span>&nbsp;<span class="builtintype" id="2636165">int32</span><span class="op" id="2636170">(</span><span class="ident" id="2636171">buf</span><span class="op" id="2636174">[</span><span class="num" id="2636175">3</span><span class="op" id="2636176">]</span><span class="op" id="2636177">)</span>&nbsp;<span class="op" id="2636179">|</span>&nbsp;<span class="builtintype" id="2636181">int32</span><span class="op" id="2636186">(</span><span class="ident" id="2636187">buf</span><span class="op" id="2636190">[</span><span class="num" id="2636191">2</span><span class="op" id="2636192">]</span><span class="op" id="2636193">)</span><span class="op" id="2636194">&lt;&lt;</span><span class="num" id="2636196">8</span>&nbsp;<span class="op" id="2636198">|</span>&nbsp;<span class="builtintype" id="2636200">int32</span><span class="op" id="2636205">(</span><span class="ident" id="2636206">buf</span><span class="op" id="2636209">[</span><span class="num" id="2636210">1</span><span class="op" id="2636211">]</span><span class="op" id="2636212">)</span><span class="op" id="2636213">&lt;&lt;</span><span class="num" id="2636215">16</span>&nbsp;<span class="op" id="2636218">|</span>&nbsp;<span class="builtintype" id="2636220">int32</span><span class="op" id="2636225">(</span><span class="ident" id="2636226">buf</span><span class="op" id="2636229">[</span><span class="num" id="2636230">0</span><span class="op" id="2636231">]</span><span class="op" id="2636232">)</span><span class="op" id="2636233">&lt;&lt;</span><span class="num" id="2636235">24</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636240">buf</span>&nbsp;<span class="op" id="2636244">=</span>&nbsp;<span class="ident" id="2636246">buf</span><span class="op" id="2636249">[</span><span class="num" id="2636250">4</span><span class="op" id="2636251">:</span><span class="op" id="2636252">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636255">offset</span>&nbsp;<span class="op" id="2636262">:=</span>&nbsp;<span class="builtintype" id="2636265">int</span><span class="op" id="2636268">(</span><span class="builtintype" id="2636269">int16</span><span class="op" id="2636274">(</span><span class="ident" id="2636275">buf</span><span class="op" id="2636278">[</span><span class="num" id="2636279">1</span><span class="op" id="2636280">]</span><span class="op" id="2636281">)</span><span class="op" id="2636282">|</span><span class="builtintype" id="2636283">int16</span><span class="op" id="2636288">(</span><span class="ident" id="2636289">buf</span><span class="op" id="2636292">[</span><span class="num" id="2636293">0</span><span class="op" id="2636294">]</span><span class="op" id="2636295">)</span><span class="op" id="2636296">&lt;&lt;</span><span class="num" id="2636298">8</span><span class="op" id="2636299">)</span>&nbsp;<span class="op" id="2636301">*</span>&nbsp;<span class="num" id="2636303">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636308">if</span>&nbsp;<span class="ident" id="2636311">offset</span>&nbsp;<span class="op" id="2636318">==</span>&nbsp;<span class="op" id="2636321">-</span><span class="num" id="2636322">1</span><span class="op" id="2636323">*</span><span class="num" id="2636324">60</span>&nbsp;<span class="op" id="2636327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636331">t</span><span class="op" id="2636332">.</span><span class="ident" id="2636333">loc</span>&nbsp;<span class="op" id="2636337">=</span>&nbsp;<span class="op" id="2636339">&amp;</span><span class="ident" id="2636340">utcLoc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636348">}</span>&nbsp;<span class="keyword" id="2636350">else</span>&nbsp;<span class="keyword" id="2636355">if</span>&nbsp;<span class="ident" id="2636358">_</span><span class="op" id="2636359">,</span>&nbsp;<span class="ident" id="2636361">localoff</span><span class="op" id="2636369">,</span>&nbsp;<span class="ident" id="2636371">_</span><span class="op" id="2636372">,</span>&nbsp;<span class="ident" id="2636374">_</span><span class="op" id="2636375">,</span>&nbsp;<span class="ident" id="2636377">_</span>&nbsp;<span class="op" id="2636379">:=</span>&nbsp;<span class="ident" id="2636382">Local</span><span class="op" id="2636387">.</span><span class="ident" id="2636388">lookup</span><span class="op" id="2636394">(</span><span class="ident" id="2636395">t</span><span class="op" id="2636396">.</span><span class="ident" id="2636397">sec</span>&nbsp;<span class="op" id="2636401">+</span>&nbsp;<span class="ident" id="2636403">internalToUnix</span><span class="op" id="2636417">)</span><span class="op" id="2636418">;</span>&nbsp;<span class="ident" id="2636420">offset</span>&nbsp;<span class="op" id="2636427">==</span>&nbsp;<span class="ident" id="2636430">localoff</span>&nbsp;<span class="op" id="2636439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636443">t</span><span class="op" id="2636444">.</span><span class="ident" id="2636445">loc</span>&nbsp;<span class="op" id="2636449">=</span>&nbsp;<span class="ident" id="2636451">Local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636458">}</span>&nbsp;<span class="keyword" id="2636460">else</span>&nbsp;<span class="op" id="2636465">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636469">t</span><span class="op" id="2636470">.</span><span class="ident" id="2636471">loc</span>&nbsp;<span class="op" id="2636475">=</span>&nbsp;<span class="ident" id="2636477">FixedZone</span><span class="op" id="2636486">(</span><span class="string" id="2636487">&#34;&#34;</span><span class="op" id="2636489">,</span>&nbsp;<span class="ident" id="2636491">offset</span><span class="op" id="2636497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636504">return</span>&nbsp;<span class="ident" id="2636511">nil</span><br>
<span class="lineno"></span><span class="op" id="2636515">}</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span><span class="comment" id="2636518">//&nbsp;TODO(rsc):&nbsp;Remove&nbsp;GobEncoder,&nbsp;GobDecoder,&nbsp;MarshalJSON,&nbsp;UnmarshalJSON&nbsp;in&nbsp;Go&nbsp;2.</span><br>
<span class="lineno"></span><span class="comment" id="2636599">//&nbsp;The&nbsp;same&nbsp;semantics&nbsp;will&nbsp;be&nbsp;provided&nbsp;by&nbsp;the&nbsp;generic&nbsp;MarshalBinary,&nbsp;MarshalText,</span><br>
<span class="lineno"></span><span class="comment" id="2636681">//&nbsp;UnmarshalBinary,&nbsp;UnmarshalText.</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span><span class="comment" id="2636717">//&nbsp;GobEncode&nbsp;implements&nbsp;the&nbsp;gob.GobEncoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2636771">func</span>&nbsp;<span class="op" id="2636776">(</span><span class="ident" id="2636777">t</span>&nbsp;<span class="ident" id="2636779">Time</span><span class="op" id="2636783">)</span>&nbsp;<span class="ident" id="2636785">GobEncode</span><span class="op" id="2636794">(</span><span class="op" id="2636795">)</span>&nbsp;<span class="op" id="2636797">(</span><span class="op" id="2636798">[</span><span class="op" id="2636799">]</span><span class="builtintype" id="2636800">byte</span><span class="op" id="2636804">,</span>&nbsp;<span class="builtintype" id="2636806">error</span><span class="op" id="2636811">)</span>&nbsp;<span class="op" id="2636813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636816">return</span>&nbsp;<span class="ident" id="2636823">t</span><span class="op" id="2636824">.</span><span class="ident" id="2636825">MarshalBinary</span><span class="op" id="2636838">(</span><span class="op" id="2636839">)</span><br>
<span class="lineno"></span><span class="op" id="2636841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="comment" id="2636844">//&nbsp;GobDecode&nbsp;implements&nbsp;the&nbsp;gob.GobDecoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2636898">func</span>&nbsp;<span class="op" id="2636903">(</span><span class="ident" id="2636904">t</span>&nbsp;<span class="op" id="2636906">*</span><span class="ident" id="2636907">Time</span><span class="op" id="2636911">)</span>&nbsp;<span class="ident" id="2636913">GobDecode</span><span class="op" id="2636922">(</span><span class="ident" id="2636923">data</span>&nbsp;<span class="op" id="2636928">[</span><span class="op" id="2636929">]</span><span class="builtintype" id="2636930">byte</span><span class="op" id="2636934">)</span>&nbsp;<span class="builtintype" id="2636936">error</span>&nbsp;<span class="op" id="2636942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636945">return</span>&nbsp;<span class="ident" id="2636952">t</span><span class="op" id="2636953">.</span><span class="ident" id="2636954">UnmarshalBinary</span><span class="op" id="2636969">(</span><span class="ident" id="2636970">data</span><span class="op" id="2636974">)</span><br>
<span class="lineno"></span><span class="op" id="2636976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">930</span><span class="comment" id="2636979">//&nbsp;MarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Marshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2637035">//&nbsp;The&nbsp;time&nbsp;is&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2637130">func</span>&nbsp;<span class="op" id="2637135">(</span><span class="ident" id="2637136">t</span>&nbsp;<span class="ident" id="2637138">Time</span><span class="op" id="2637142">)</span>&nbsp;<span class="ident" id="2637144">MarshalJSON</span><span class="op" id="2637155">(</span><span class="op" id="2637156">)</span>&nbsp;<span class="op" id="2637158">(</span><span class="op" id="2637159">[</span><span class="op" id="2637160">]</span><span class="builtintype" id="2637161">byte</span><span class="op" id="2637165">,</span>&nbsp;<span class="builtintype" id="2637167">error</span><span class="op" id="2637172">)</span>&nbsp;<span class="op" id="2637174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637177">if</span>&nbsp;<span class="ident" id="2637180">y</span>&nbsp;<span class="op" id="2637182">:=</span>&nbsp;<span class="ident" id="2637185">t</span><span class="op" id="2637186">.</span><span class="ident" id="2637187">Year</span><span class="op" id="2637191">(</span><span class="op" id="2637192">)</span><span class="op" id="2637193">;</span>&nbsp;<span class="ident" id="2637195">y</span>&nbsp;<span class="op" id="2637197">&lt;</span>&nbsp;<span class="num" id="2637199">0</span>&nbsp;<span class="op" id="2637201">||</span>&nbsp;<span class="ident" id="2637204">y</span>&nbsp;<span class="op" id="2637206">&gt;=</span>&nbsp;<span class="num" id="2637209">10000</span>&nbsp;<span class="op" id="2637215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2637219">//&nbsp;RFC&nbsp;3339&nbsp;is&nbsp;clear&nbsp;that&nbsp;years&nbsp;are&nbsp;4&nbsp;digits&nbsp;exactly.</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2637275">//&nbsp;See&nbsp;golang.org/issue/4556#c15&nbsp;for&nbsp;more&nbsp;discussion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637331">return</span>&nbsp;<span class="ident" id="2637338">nil</span><span class="op" id="2637341">,</span>&nbsp;<span class="ident" id="2637343">errors</span><span class="op" id="2637349">.</span><span class="ident" id="2637350">New</span><span class="op" id="2637353">(</span><span class="string" id="2637354">&#34;Time.MarshalJSON:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2637404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637410">return</span>&nbsp;<span class="op" id="2637417">[</span><span class="op" id="2637418">]</span><span class="builtintype" id="2637419">byte</span><span class="op" id="2637423">(</span><span class="ident" id="2637424">t</span><span class="op" id="2637425">.</span><span class="ident" id="2637426">Format</span><span class="op" id="2637432">(</span><span class="string" id="2637433">`&#34;`</span>&nbsp;<span class="op" id="2637437">+</span>&nbsp;<span class="ident" id="2637439">RFC3339Nano</span>&nbsp;<span class="op" id="2637451">+</span>&nbsp;<span class="string" id="2637453">`&#34;`</span><span class="op" id="2637456">)</span><span class="op" id="2637457">)</span><span class="op" id="2637458">,</span>&nbsp;<span class="ident" id="2637460">nil</span><br>
<span class="lineno"></span><span class="op" id="2637464">}</span><br>
<span class="lineno">940</span><br>
<span class="lineno"></span><span class="comment" id="2637467">//&nbsp;UnmarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Unmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2637527">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="2637593">func</span>&nbsp;<span class="op" id="2637598">(</span><span class="ident" id="2637599">t</span>&nbsp;<span class="op" id="2637601">*</span><span class="ident" id="2637602">Time</span><span class="op" id="2637606">)</span>&nbsp;<span class="ident" id="2637608">UnmarshalJSON</span><span class="op" id="2637621">(</span><span class="ident" id="2637622">data</span>&nbsp;<span class="op" id="2637627">[</span><span class="op" id="2637628">]</span><span class="builtintype" id="2637629">byte</span><span class="op" id="2637633">)</span>&nbsp;<span class="op" id="2637635">(</span><span class="ident" id="2637636">err</span>&nbsp;<span class="builtintype" id="2637640">error</span><span class="op" id="2637645">)</span>&nbsp;<span class="op" id="2637647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2637650">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637706">*</span><span class="ident" id="2637707">t</span><span class="op" id="2637708">,</span>&nbsp;<span class="ident" id="2637710">err</span>&nbsp;<span class="op" id="2637714">=</span>&nbsp;<span class="ident" id="2637716">Parse</span><span class="op" id="2637721">(</span><span class="string" id="2637722">`&#34;`</span><span class="op" id="2637725">+</span><span class="ident" id="2637726">RFC3339</span><span class="op" id="2637733">+</span><span class="string" id="2637734">`&#34;`</span><span class="op" id="2637737">,</span>&nbsp;<span class="builtintype" id="2637739">string</span><span class="op" id="2637745">(</span><span class="ident" id="2637746">data</span><span class="op" id="2637750">)</span><span class="op" id="2637751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637754">return</span><br>
<span class="lineno"></span><span class="op" id="2637761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2637764">//&nbsp;MarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextMarshaler&nbsp;interface.</span><br>
<span class="lineno">950</span><span class="comment" id="2637828">//&nbsp;The&nbsp;time&nbsp;is&nbsp;formatted&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2637917">func</span>&nbsp;<span class="op" id="2637922">(</span><span class="ident" id="2637923">t</span>&nbsp;<span class="ident" id="2637925">Time</span><span class="op" id="2637929">)</span>&nbsp;<span class="ident" id="2637931">MarshalText</span><span class="op" id="2637942">(</span><span class="op" id="2637943">)</span>&nbsp;<span class="op" id="2637945">(</span><span class="op" id="2637946">[</span><span class="op" id="2637947">]</span><span class="builtintype" id="2637948">byte</span><span class="op" id="2637952">,</span>&nbsp;<span class="builtintype" id="2637954">error</span><span class="op" id="2637959">)</span>&nbsp;<span class="op" id="2637961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637964">if</span>&nbsp;<span class="ident" id="2637967">y</span>&nbsp;<span class="op" id="2637969">:=</span>&nbsp;<span class="ident" id="2637972">t</span><span class="op" id="2637973">.</span><span class="ident" id="2637974">Year</span><span class="op" id="2637978">(</span><span class="op" id="2637979">)</span><span class="op" id="2637980">;</span>&nbsp;<span class="ident" id="2637982">y</span>&nbsp;<span class="op" id="2637984">&lt;</span>&nbsp;<span class="num" id="2637986">0</span>&nbsp;<span class="op" id="2637988">||</span>&nbsp;<span class="ident" id="2637991">y</span>&nbsp;<span class="op" id="2637993">&gt;=</span>&nbsp;<span class="num" id="2637996">10000</span>&nbsp;<span class="op" id="2638002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638006">return</span>&nbsp;<span class="ident" id="2638013">nil</span><span class="op" id="2638016">,</span>&nbsp;<span class="ident" id="2638018">errors</span><span class="op" id="2638024">.</span><span class="ident" id="2638025">New</span><span class="op" id="2638028">(</span><span class="string" id="2638029">&#34;Time.MarshalText:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2638079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2638082">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638085">return</span>&nbsp;<span class="op" id="2638092">[</span><span class="op" id="2638093">]</span><span class="builtintype" id="2638094">byte</span><span class="op" id="2638098">(</span><span class="ident" id="2638099">t</span><span class="op" id="2638100">.</span><span class="ident" id="2638101">Format</span><span class="op" id="2638107">(</span><span class="ident" id="2638108">RFC3339Nano</span><span class="op" id="2638119">)</span><span class="op" id="2638120">)</span><span class="op" id="2638121">,</span>&nbsp;<span class="ident" id="2638123">nil</span><br>
<span class="lineno"></span><span class="op" id="2638127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2638130">//&nbsp;UnmarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2638198">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno">960</span><span class="keyword" id="2638248">func</span>&nbsp;<span class="op" id="2638253">(</span><span class="ident" id="2638254">t</span>&nbsp;<span class="op" id="2638256">*</span><span class="ident" id="2638257">Time</span><span class="op" id="2638261">)</span>&nbsp;<span class="ident" id="2638263">UnmarshalText</span><span class="op" id="2638276">(</span><span class="ident" id="2638277">data</span>&nbsp;<span class="op" id="2638282">[</span><span class="op" id="2638283">]</span><span class="builtintype" id="2638284">byte</span><span class="op" id="2638288">)</span>&nbsp;<span class="op" id="2638290">(</span><span class="ident" id="2638291">err</span>&nbsp;<span class="builtintype" id="2638295">error</span><span class="op" id="2638300">)</span>&nbsp;<span class="op" id="2638302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2638305">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2638361">*</span><span class="ident" id="2638362">t</span><span class="op" id="2638363">,</span>&nbsp;<span class="ident" id="2638365">err</span>&nbsp;<span class="op" id="2638369">=</span>&nbsp;<span class="ident" id="2638371">Parse</span><span class="op" id="2638376">(</span><span class="ident" id="2638377">RFC3339</span><span class="op" id="2638384">,</span>&nbsp;<span class="builtintype" id="2638386">string</span><span class="op" id="2638392">(</span><span class="ident" id="2638393">data</span><span class="op" id="2638397">)</span><span class="op" id="2638398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638401">return</span><br>
<span class="lineno"></span><span class="op" id="2638408">}</span><br>
<span class="lineno">965</span><br>
<span class="lineno"></span><span class="comment" id="2638411">//&nbsp;Unix&nbsp;returns&nbsp;the&nbsp;local&nbsp;Time&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;Unix&nbsp;time,</span><br>
<span class="lineno"></span><span class="comment" id="2638480">//&nbsp;sec&nbsp;seconds&nbsp;and&nbsp;nsec&nbsp;nanoseconds&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2638543">//&nbsp;It&nbsp;is&nbsp;valid&nbsp;to&nbsp;pass&nbsp;nsec&nbsp;outside&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2638605">func</span>&nbsp;<span class="ident" id="2638610">Unix</span><span class="op" id="2638614">(</span><span class="ident" id="2638615">sec</span>&nbsp;<span class="ident" id="2638619">int64</span><span class="op" id="2638624">,</span>&nbsp;<span class="ident" id="2638626">nsec</span>&nbsp;<span class="ident" id="2638631">int64</span><span class="op" id="2638636">)</span>&nbsp;<span class="ident" id="2638638">Time</span>&nbsp;<span class="op" id="2638643">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638646">if</span>&nbsp;<span class="ident" id="2638649">nsec</span>&nbsp;<span class="op" id="2638654">&lt;</span>&nbsp;<span class="num" id="2638656">0</span>&nbsp;<span class="op" id="2638658">||</span>&nbsp;<span class="ident" id="2638661">nsec</span>&nbsp;<span class="op" id="2638666">&gt;=</span>&nbsp;<span class="num" id="2638669">1e9</span>&nbsp;<span class="op" id="2638673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638677">n</span>&nbsp;<span class="op" id="2638679">:=</span>&nbsp;<span class="ident" id="2638682">nsec</span>&nbsp;<span class="op" id="2638687">/</span>&nbsp;<span class="num" id="2638689">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638695">sec</span>&nbsp;<span class="op" id="2638699">+=</span>&nbsp;<span class="ident" id="2638702">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638706">nsec</span>&nbsp;<span class="op" id="2638711">-=</span>&nbsp;<span class="ident" id="2638714">n</span>&nbsp;<span class="op" id="2638716">*</span>&nbsp;<span class="num" id="2638718">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638724">if</span>&nbsp;<span class="ident" id="2638727">nsec</span>&nbsp;<span class="op" id="2638732">&lt;</span>&nbsp;<span class="num" id="2638734">0</span>&nbsp;<span class="op" id="2638736">{</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638741">nsec</span>&nbsp;<span class="op" id="2638746">+=</span>&nbsp;<span class="num" id="2638749">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638756">sec</span><span class="op" id="2638759">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2638764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2638767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638770">return</span>&nbsp;<span class="ident" id="2638777">Time</span><span class="op" id="2638781">{</span><span class="ident" id="2638782">sec</span>&nbsp;<span class="op" id="2638786">+</span>&nbsp;<span class="ident" id="2638788">unixToInternal</span><span class="op" id="2638802">,</span>&nbsp;<span class="builtintype" id="2638804">int32</span><span class="op" id="2638809">(</span><span class="ident" id="2638810">nsec</span><span class="op" id="2638814">)</span><span class="op" id="2638815">,</span>&nbsp;<span class="ident" id="2638817">Local</span><span class="op" id="2638822">}</span><br>
<span class="lineno">980</span><span class="op" id="2638824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2638827">func</span>&nbsp;<span class="ident" id="2638832">isLeap</span><span class="op" id="2638838">(</span><span class="ident" id="2638839">year</span>&nbsp;<span class="builtintype" id="2638844">int</span><span class="op" id="2638847">)</span>&nbsp;<span class="builtintype" id="2638849">bool</span>&nbsp;<span class="op" id="2638854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638857">return</span>&nbsp;<span class="ident" id="2638864">year</span><span class="op" id="2638868">%</span><span class="num" id="2638869">4</span>&nbsp;<span class="op" id="2638871">==</span>&nbsp;<span class="num" id="2638874">0</span>&nbsp;<span class="op" id="2638876">&amp;&amp;</span>&nbsp;<span class="op" id="2638879">(</span><span class="ident" id="2638880">year</span><span class="op" id="2638884">%</span><span class="num" id="2638885">100</span>&nbsp;<span class="op" id="2638889">!=</span>&nbsp;<span class="num" id="2638892">0</span>&nbsp;<span class="op" id="2638894">||</span>&nbsp;<span class="ident" id="2638897">year</span><span class="op" id="2638901">%</span><span class="num" id="2638902">400</span>&nbsp;<span class="op" id="2638906">==</span>&nbsp;<span class="num" id="2638909">0</span><span class="op" id="2638910">)</span><br>
<span class="lineno"></span><span class="op" id="2638912">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="2638915">//&nbsp;norm&nbsp;returns&nbsp;nhi,&nbsp;nlo&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2638950">//&nbsp;&nbsp;&nbsp;&nbsphi&nbsp;*&nbsp;base&nbsp;+&nbsp;lo&nbsp;==&nbsp;nhi&nbsp;*&nbsp;base&nbsp;+&nbsp;nlo</span><br>
<span class="lineno"></span><span class="comment" id="2638988">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&lt;=&nbsp;nlo&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span><span class="keyword" id="2639007">func</span>&nbsp;<span class="ident" id="2639012">norm</span><span class="op" id="2639016">(</span><span class="ident" id="2639017">hi</span><span class="op" id="2639019">,</span>&nbsp;<span class="ident" id="2639021">lo</span><span class="op" id="2639023">,</span>&nbsp;<span class="ident" id="2639025">base</span>&nbsp;<span class="builtintype" id="2639030">int</span><span class="op" id="2639033">)</span>&nbsp;<span class="op" id="2639035">(</span><span class="ident" id="2639036">nhi</span><span class="op" id="2639039">,</span>&nbsp;<span class="ident" id="2639041">nlo</span>&nbsp;<span class="builtintype" id="2639045">int</span><span class="op" id="2639048">)</span>&nbsp;<span class="op" id="2639050">{</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639053">if</span>&nbsp;<span class="ident" id="2639056">lo</span>&nbsp;<span class="op" id="2639059">&lt;</span>&nbsp;<span class="num" id="2639061">0</span>&nbsp;<span class="op" id="2639063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639067">n</span>&nbsp;<span class="op" id="2639069">:=</span>&nbsp;<span class="op" id="2639072">(</span><span class="op" id="2639073">-</span><span class="ident" id="2639074">lo</span><span class="op" id="2639076">-</span><span class="num" id="2639077">1</span><span class="op" id="2639078">)</span><span class="op" id="2639079">/</span><span class="ident" id="2639080">base</span>&nbsp;<span class="op" id="2639085">+</span>&nbsp;<span class="num" id="2639087">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639091">hi</span>&nbsp;<span class="op" id="2639094">-=</span>&nbsp;<span class="ident" id="2639097">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639101">lo</span>&nbsp;<span class="op" id="2639104">+=</span>&nbsp;<span class="ident" id="2639107">n</span>&nbsp;<span class="op" id="2639109">*</span>&nbsp;<span class="ident" id="2639111">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2639117">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639120">if</span>&nbsp;<span class="ident" id="2639123">lo</span>&nbsp;<span class="op" id="2639126">&gt;=</span>&nbsp;<span class="ident" id="2639129">base</span>&nbsp;<span class="op" id="2639134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639138">n</span>&nbsp;<span class="op" id="2639140">:=</span>&nbsp;<span class="ident" id="2639143">lo</span>&nbsp;<span class="op" id="2639146">/</span>&nbsp;<span class="ident" id="2639148">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639155">hi</span>&nbsp;<span class="op" id="2639158">+=</span>&nbsp;<span class="ident" id="2639161">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639165">lo</span>&nbsp;<span class="op" id="2639168">-=</span>&nbsp;<span class="ident" id="2639171">n</span>&nbsp;<span class="op" id="2639173">*</span>&nbsp;<span class="ident" id="2639175">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2639181">}</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639184">return</span>&nbsp;<span class="ident" id="2639191">hi</span><span class="op" id="2639193">,</span>&nbsp;<span class="ident" id="2639195">lo</span><br>
<span class="lineno"></span><span class="op" id="2639198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2639201">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;Time&nbsp;corresponding&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2639243">//&nbsp;&nbsp;&nbsp;&nbspyyyy-mm-dd&nbsp;hh:mm:ss&nbsp;+&nbsp;nsec&nbsp;nanoseconds</span><br>
<span class="lineno">1005</span><span class="comment" id="2639285">//&nbsp;in&nbsp;the&nbsp;appropriate&nbsp;zone&nbsp;for&nbsp;that&nbsp;time&nbsp;in&nbsp;the&nbsp;given&nbsp;location.</span><br>
<span class="lineno"></span><span class="comment" id="2639349">//</span><br>
<span class="lineno"></span><span class="comment" id="2639352">//&nbsp;The&nbsp;month,&nbsp;day,&nbsp;hour,&nbsp;min,&nbsp;sec,&nbsp;and&nbsp;nsec&nbsp;values&nbsp;may&nbsp;be&nbsp;outside</span><br>
<span class="lineno"></span><span class="comment" id="2639418">//&nbsp;their&nbsp;usual&nbsp;ranges&nbsp;and&nbsp;will&nbsp;be&nbsp;normalized&nbsp;during&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="comment" id="2639486">//&nbsp;For&nbsp;example,&nbsp;October&nbsp;32&nbsp;converts&nbsp;to&nbsp;November&nbsp;1.</span><br>
<span class="lineno">1010</span><span class="comment" id="2639537">//</span><br>
<span class="lineno"></span><span class="comment" id="2639540">//&nbsp;A&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;transition&nbsp;skips&nbsp;or&nbsp;repeats&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2639602">//&nbsp;For&nbsp;example,&nbsp;in&nbsp;the&nbsp;United&nbsp;States,&nbsp;March&nbsp;13,&nbsp;2011&nbsp;2:15am&nbsp;never&nbsp;occurred,</span><br>
<span class="lineno"></span><span class="comment" id="2639678">//&nbsp;while&nbsp;November&nbsp;6,&nbsp;2011&nbsp;1:15am&nbsp;occurred&nbsp;twice.&nbsp;&nbsp;In&nbsp;such&nbsp;cases,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2639747">//&nbsp;choice&nbsp;of&nbsp;time&nbsp;zone,&nbsp;and&nbsp;therefore&nbsp;the&nbsp;time,&nbsp;is&nbsp;not&nbsp;well-defined.</span><br>
<span class="lineno">1015</span><span class="comment" id="2639816">//&nbsp;Date&nbsp;returns&nbsp;a&nbsp;time&nbsp;that&nbsp;is&nbsp;correct&nbsp;in&nbsp;one&nbsp;of&nbsp;the&nbsp;two&nbsp;zones&nbsp;involved</span><br>
<span class="lineno"></span><span class="comment" id="2639888">//&nbsp;in&nbsp;the&nbsp;transition,&nbsp;but&nbsp;it&nbsp;does&nbsp;not&nbsp;guarantee&nbsp;which.</span><br>
<span class="lineno"></span><span class="comment" id="2639943">//</span><br>
<span class="lineno"></span><span class="comment" id="2639946">//&nbsp;Date&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2639976">func</span>&nbsp;<span class="ident" id="2639981">Date</span><span class="op" id="2639985">(</span><span class="ident" id="2639986">year</span>&nbsp;<span class="builtintype" id="2639991">int</span><span class="op" id="2639994">,</span>&nbsp;<span class="ident" id="2639996">month</span>&nbsp;<span class="ident" id="2640002">Month</span><span class="op" id="2640007">,</span>&nbsp;<span class="ident" id="2640009">day</span><span class="op" id="2640012">,</span>&nbsp;<span class="ident" id="2640014">hour</span><span class="op" id="2640018">,</span>&nbsp;<span class="ident" id="2640020">min</span><span class="op" id="2640023">,</span>&nbsp;<span class="ident" id="2640025">sec</span><span class="op" id="2640028">,</span>&nbsp;<span class="ident" id="2640030">nsec</span>&nbsp;<span class="builtintype" id="2640035">int</span><span class="op" id="2640038">,</span>&nbsp;<span class="ident" id="2640040">loc</span>&nbsp;<span class="op" id="2640044">*</span><span class="ident" id="2640045">Location</span><span class="op" id="2640053">)</span>&nbsp;<span class="ident" id="2640055">Time</span>&nbsp;<span class="op" id="2640060">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2640063">if</span>&nbsp;<span class="ident" id="2640066">loc</span>&nbsp;<span class="op" id="2640070">==</span>&nbsp;<span class="ident" id="2640073">nil</span>&nbsp;<span class="op" id="2640077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2640081">panic</span><span class="op" id="2640086">(</span><span class="string" id="2640087">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Date&#34;</span><span class="op" id="2640127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2640130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640134">//&nbsp;Normalize&nbsp;month,&nbsp;overflowing&nbsp;into&nbsp;year.</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640178">m</span>&nbsp;<span class="op" id="2640180">:=</span>&nbsp;<span class="builtintype" id="2640183">int</span><span class="op" id="2640186">(</span><span class="ident" id="2640187">month</span><span class="op" id="2640192">)</span>&nbsp;<span class="op" id="2640194">-</span>&nbsp;<span class="num" id="2640196">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640199">year</span><span class="op" id="2640203">,</span>&nbsp;<span class="ident" id="2640205">m</span>&nbsp;<span class="op" id="2640207">=</span>&nbsp;<span class="ident" id="2640209">norm</span><span class="op" id="2640213">(</span><span class="ident" id="2640214">year</span><span class="op" id="2640218">,</span>&nbsp;<span class="ident" id="2640220">m</span><span class="op" id="2640221">,</span>&nbsp;<span class="num" id="2640223">12</span><span class="op" id="2640225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640228">month</span>&nbsp;<span class="op" id="2640234">=</span>&nbsp;<span class="ident" id="2640236">Month</span><span class="op" id="2640241">(</span><span class="ident" id="2640242">m</span><span class="op" id="2640243">)</span>&nbsp;<span class="op" id="2640245">+</span>&nbsp;<span class="num" id="2640247">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640251">//&nbsp;Normalize&nbsp;nsec,&nbsp;sec,&nbsp;min,&nbsp;hour,&nbsp;overflowing&nbsp;into&nbsp;day.</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640309">sec</span><span class="op" id="2640312">,</span>&nbsp;<span class="ident" id="2640314">nsec</span>&nbsp;<span class="op" id="2640319">=</span>&nbsp;<span class="ident" id="2640321">norm</span><span class="op" id="2640325">(</span><span class="ident" id="2640326">sec</span><span class="op" id="2640329">,</span>&nbsp;<span class="ident" id="2640331">nsec</span><span class="op" id="2640335">,</span>&nbsp;<span class="num" id="2640337">1e9</span><span class="op" id="2640340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640343">min</span><span class="op" id="2640346">,</span>&nbsp;<span class="ident" id="2640348">sec</span>&nbsp;<span class="op" id="2640352">=</span>&nbsp;<span class="ident" id="2640354">norm</span><span class="op" id="2640358">(</span><span class="ident" id="2640359">min</span><span class="op" id="2640362">,</span>&nbsp;<span class="ident" id="2640364">sec</span><span class="op" id="2640367">,</span>&nbsp;<span class="num" id="2640369">60</span><span class="op" id="2640371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640374">hour</span><span class="op" id="2640378">,</span>&nbsp;<span class="ident" id="2640380">min</span>&nbsp;<span class="op" id="2640384">=</span>&nbsp;<span class="ident" id="2640386">norm</span><span class="op" id="2640390">(</span><span class="ident" id="2640391">hour</span><span class="op" id="2640395">,</span>&nbsp;<span class="ident" id="2640397">min</span><span class="op" id="2640400">,</span>&nbsp;<span class="num" id="2640402">60</span><span class="op" id="2640404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640407">day</span><span class="op" id="2640410">,</span>&nbsp;<span class="ident" id="2640412">hour</span>&nbsp;<span class="op" id="2640417">=</span>&nbsp;<span class="ident" id="2640419">norm</span><span class="op" id="2640423">(</span><span class="ident" id="2640424">day</span><span class="op" id="2640427">,</span>&nbsp;<span class="ident" id="2640429">hour</span><span class="op" id="2640433">,</span>&nbsp;<span class="num" id="2640435">24</span><span class="op" id="2640437">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640441">y</span>&nbsp;<span class="op" id="2640443">:=</span>&nbsp;<span class="ident" id="2640446">uint64</span><span class="op" id="2640452">(</span><span class="ident" id="2640453">int64</span><span class="op" id="2640458">(</span><span class="ident" id="2640459">year</span><span class="op" id="2640463">)</span>&nbsp;<span class="op" id="2640465">-</span>&nbsp;<span class="ident" id="2640467">absoluteZeroYear</span><span class="op" id="2640483">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640487">//&nbsp;Compute&nbsp;days&nbsp;since&nbsp;the&nbsp;absolute&nbsp;epoch.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640531">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;from&nbsp;400-year&nbsp;cycles.</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640569">n</span>&nbsp;<span class="op" id="2640571">:=</span>&nbsp;<span class="ident" id="2640574">y</span>&nbsp;<span class="op" id="2640576">/</span>&nbsp;<span class="num" id="2640578">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640583">y</span>&nbsp;<span class="op" id="2640585">-=</span>&nbsp;<span class="num" id="2640588">400</span>&nbsp;<span class="op" id="2640592">*</span>&nbsp;<span class="ident" id="2640594">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640597">d</span>&nbsp;<span class="op" id="2640599">:=</span>&nbsp;<span class="ident" id="2640602">daysPer400Years</span>&nbsp;<span class="op" id="2640618">*</span>&nbsp;<span class="ident" id="2640620">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640624">//&nbsp;Add&nbsp;in&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640652">n</span>&nbsp;<span class="op" id="2640654">=</span>&nbsp;<span class="ident" id="2640656">y</span>&nbsp;<span class="op" id="2640658">/</span>&nbsp;<span class="num" id="2640660">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640665">y</span>&nbsp;<span class="op" id="2640667">-=</span>&nbsp;<span class="num" id="2640670">100</span>&nbsp;<span class="op" id="2640674">*</span>&nbsp;<span class="ident" id="2640676">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640679">d</span>&nbsp;<span class="op" id="2640681">+=</span>&nbsp;<span class="ident" id="2640684">daysPer100Years</span>&nbsp;<span class="op" id="2640700">*</span>&nbsp;<span class="ident" id="2640702">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640706">//&nbsp;Add&nbsp;in&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640732">n</span>&nbsp;<span class="op" id="2640734">=</span>&nbsp;<span class="ident" id="2640736">y</span>&nbsp;<span class="op" id="2640738">/</span>&nbsp;<span class="num" id="2640740">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640743">y</span>&nbsp;<span class="op" id="2640745">-=</span>&nbsp;<span class="num" id="2640748">4</span>&nbsp;<span class="op" id="2640750">*</span>&nbsp;<span class="ident" id="2640752">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640755">d</span>&nbsp;<span class="op" id="2640757">+=</span>&nbsp;<span class="ident" id="2640760">daysPer4Years</span>&nbsp;<span class="op" id="2640774">*</span>&nbsp;<span class="ident" id="2640776">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640780">//&nbsp;Add&nbsp;in&nbsp;non-leap&nbsp;years.</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640807">n</span>&nbsp;<span class="op" id="2640809">=</span>&nbsp;<span class="ident" id="2640811">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640814">d</span>&nbsp;<span class="op" id="2640816">+=</span>&nbsp;<span class="num" id="2640819">365</span>&nbsp;<span class="op" id="2640823">*</span>&nbsp;<span class="ident" id="2640825">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640829">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;this&nbsp;month.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640864">d</span>&nbsp;<span class="op" id="2640866">+=</span>&nbsp;<span class="ident" id="2640869">uint64</span><span class="op" id="2640875">(</span><span class="ident" id="2640876">daysBefore</span><span class="op" id="2640886">[</span><span class="ident" id="2640887">month</span><span class="op" id="2640892">-</span><span class="num" id="2640893">1</span><span class="op" id="2640894">]</span><span class="op" id="2640895">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2640898">if</span>&nbsp;<span class="ident" id="2640901">isLeap</span><span class="op" id="2640907">(</span><span class="ident" id="2640908">year</span><span class="op" id="2640912">)</span>&nbsp;<span class="op" id="2640914">&amp;&amp;</span>&nbsp;<span class="ident" id="2640917">month</span>&nbsp;<span class="op" id="2640923">&gt;=</span>&nbsp;<span class="ident" id="2640926">March</span>&nbsp;<span class="op" id="2640932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640936">d</span><span class="op" id="2640937">++</span>&nbsp;<span class="comment" id="2640940">//&nbsp;February&nbsp;29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2640956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640960">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;today.</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640990">d</span>&nbsp;<span class="op" id="2640992">+=</span>&nbsp;<span class="ident" id="2640995">uint64</span><span class="op" id="2641001">(</span><span class="ident" id="2641002">day</span>&nbsp;<span class="op" id="2641006">-</span>&nbsp;<span class="num" id="2641008">1</span><span class="op" id="2641009">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641013">//&nbsp;Add&nbsp;in&nbsp;time&nbsp;elapsed&nbsp;today.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641044">abs</span>&nbsp;<span class="op" id="2641048">:=</span>&nbsp;<span class="ident" id="2641051">d</span>&nbsp;<span class="op" id="2641053">*</span>&nbsp;<span class="ident" id="2641055">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641070">abs</span>&nbsp;<span class="op" id="2641074">+=</span>&nbsp;<span class="ident" id="2641077">uint64</span><span class="op" id="2641083">(</span><span class="ident" id="2641084">hour</span><span class="op" id="2641088">*</span><span class="ident" id="2641089">secondsPerHour</span>&nbsp;<span class="op" id="2641104">+</span>&nbsp;<span class="ident" id="2641106">min</span><span class="op" id="2641109">*</span><span class="ident" id="2641110">secondsPerMinute</span>&nbsp;<span class="op" id="2641127">+</span>&nbsp;<span class="ident" id="2641129">sec</span><span class="op" id="2641132">)</span><br>
<span class="lineno">1070</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641136">unix</span>&nbsp;<span class="op" id="2641141">:=</span>&nbsp;<span class="ident" id="2641144">int64</span><span class="op" id="2641149">(</span><span class="ident" id="2641150">abs</span><span class="op" id="2641153">)</span>&nbsp;<span class="op" id="2641155">+</span>&nbsp;<span class="op" id="2641157">(</span><span class="ident" id="2641158">absoluteToInternal</span>&nbsp;<span class="op" id="2641177">+</span>&nbsp;<span class="ident" id="2641179">internalToUnix</span><span class="op" id="2641193">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641197">//&nbsp;Look&nbsp;for&nbsp;zone&nbsp;offset&nbsp;for&nbsp;t,&nbsp;so&nbsp;we&nbsp;can&nbsp;adjust&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641254">//&nbsp;The&nbsp;lookup&nbsp;function&nbsp;expects&nbsp;UTC,&nbsp;so&nbsp;we&nbsp;pass&nbsp;t&nbsp;in&nbsp;the</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641311">//&nbsp;hope&nbsp;that&nbsp;it&nbsp;will&nbsp;not&nbsp;be&nbsp;too&nbsp;close&nbsp;to&nbsp;a&nbsp;zone&nbsp;transition,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641372">//&nbsp;and&nbsp;then&nbsp;adjust&nbsp;if&nbsp;it&nbsp;is.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641402">_</span><span class="op" id="2641403">,</span>&nbsp;<span class="ident" id="2641405">offset</span><span class="op" id="2641411">,</span>&nbsp;<span class="ident" id="2641413">_</span><span class="op" id="2641414">,</span>&nbsp;<span class="ident" id="2641416">start</span><span class="op" id="2641421">,</span>&nbsp;<span class="ident" id="2641423">end</span>&nbsp;<span class="op" id="2641427">:=</span>&nbsp;<span class="ident" id="2641430">loc</span><span class="op" id="2641433">.</span><span class="ident" id="2641434">lookup</span><span class="op" id="2641440">(</span><span class="ident" id="2641441">unix</span><span class="op" id="2641445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641448">if</span>&nbsp;<span class="ident" id="2641451">offset</span>&nbsp;<span class="op" id="2641458">!=</span>&nbsp;<span class="num" id="2641461">0</span>&nbsp;<span class="op" id="2641463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641467">switch</span>&nbsp;<span class="ident" id="2641474">utc</span>&nbsp;<span class="op" id="2641478">:=</span>&nbsp;<span class="ident" id="2641481">unix</span>&nbsp;<span class="op" id="2641486">-</span>&nbsp;<span class="ident" id="2641488">int64</span><span class="op" id="2641493">(</span><span class="ident" id="2641494">offset</span><span class="op" id="2641500">)</span><span class="op" id="2641501">;</span>&nbsp;<span class="op" id="2641503">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641507">case</span>&nbsp;<span class="ident" id="2641512">utc</span>&nbsp;<span class="op" id="2641516">&lt;</span>&nbsp;<span class="ident" id="2641518">start</span><span class="op" id="2641523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641528">_</span><span class="op" id="2641529">,</span>&nbsp;<span class="ident" id="2641531">offset</span><span class="op" id="2641537">,</span>&nbsp;<span class="ident" id="2641539">_</span><span class="op" id="2641540">,</span>&nbsp;<span class="ident" id="2641542">_</span><span class="op" id="2641543">,</span>&nbsp;<span class="ident" id="2641545">_</span>&nbsp;<span class="op" id="2641547">=</span>&nbsp;<span class="ident" id="2641549">loc</span><span class="op" id="2641552">.</span><span class="ident" id="2641553">lookup</span><span class="op" id="2641559">(</span><span class="ident" id="2641560">start</span>&nbsp;<span class="op" id="2641566">-</span>&nbsp;<span class="num" id="2641568">1</span><span class="op" id="2641569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641573">case</span>&nbsp;<span class="ident" id="2641578">utc</span>&nbsp;<span class="op" id="2641582">&gt;=</span>&nbsp;<span class="ident" id="2641585">end</span><span class="op" id="2641588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641593">_</span><span class="op" id="2641594">,</span>&nbsp;<span class="ident" id="2641596">offset</span><span class="op" id="2641602">,</span>&nbsp;<span class="ident" id="2641604">_</span><span class="op" id="2641605">,</span>&nbsp;<span class="ident" id="2641607">_</span><span class="op" id="2641608">,</span>&nbsp;<span class="ident" id="2641610">_</span>&nbsp;<span class="op" id="2641612">=</span>&nbsp;<span class="ident" id="2641614">loc</span><span class="op" id="2641617">.</span><span class="ident" id="2641618">lookup</span><span class="op" id="2641624">(</span><span class="ident" id="2641625">end</span><span class="op" id="2641628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2641632">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641636">unix</span>&nbsp;<span class="op" id="2641641">-=</span>&nbsp;<span class="ident" id="2641644">int64</span><span class="op" id="2641649">(</span><span class="ident" id="2641650">offset</span><span class="op" id="2641656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2641659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641663">return</span>&nbsp;<span class="ident" id="2641670">Time</span><span class="op" id="2641674">{</span><span class="ident" id="2641675">unix</span>&nbsp;<span class="op" id="2641680">+</span>&nbsp;<span class="ident" id="2641682">unixToInternal</span><span class="op" id="2641696">,</span>&nbsp;<span class="builtintype" id="2641698">int32</span><span class="op" id="2641703">(</span><span class="ident" id="2641704">nsec</span><span class="op" id="2641708">)</span><span class="op" id="2641709">,</span>&nbsp;<span class="ident" id="2641711">loc</span><span class="op" id="2641714">}</span><br>
<span class="lineno"></span><span class="op" id="2641716">}</span><br>
<span class="lineno">1090</span><br>
<span class="lineno"></span><span class="comment" id="2641719">//&nbsp;Truncate&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;down&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2641811">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Truncate&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2641855">func</span>&nbsp;<span class="op" id="2641860">(</span><span class="ident" id="2641861">t</span>&nbsp;<span class="ident" id="2641863">Time</span><span class="op" id="2641867">)</span>&nbsp;<span class="ident" id="2641869">Truncate</span><span class="op" id="2641877">(</span><span class="ident" id="2641878">d</span>&nbsp;<span class="ident" id="2641880">Duration</span><span class="op" id="2641888">)</span>&nbsp;<span class="ident" id="2641890">Time</span>&nbsp;<span class="op" id="2641895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641898">if</span>&nbsp;<span class="ident" id="2641901">d</span>&nbsp;<span class="op" id="2641903">&lt;=</span>&nbsp;<span class="num" id="2641906">0</span>&nbsp;<span class="op" id="2641908">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641912">return</span>&nbsp;<span class="ident" id="2641919">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2641922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641925">_</span><span class="op" id="2641926">,</span>&nbsp;<span class="ident" id="2641928">r</span>&nbsp;<span class="op" id="2641930">:=</span>&nbsp;<span class="ident" id="2641933">div</span><span class="op" id="2641936">(</span><span class="ident" id="2641937">t</span><span class="op" id="2641938">,</span>&nbsp;<span class="ident" id="2641940">d</span><span class="op" id="2641941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641944">return</span>&nbsp;<span class="ident" id="2641951">t</span><span class="op" id="2641952">.</span><span class="ident" id="2641953">Add</span><span class="op" id="2641956">(</span><span class="op" id="2641957">-</span><span class="ident" id="2641958">r</span><span class="op" id="2641959">)</span><br>
<span class="lineno"></span><span class="op" id="2641961">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="comment" id="2641964">//&nbsp;Round&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;to&nbsp;the&nbsp;nearest&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2642058">//&nbsp;The&nbsp;rounding&nbsp;behavior&nbsp;for&nbsp;halfway&nbsp;values&nbsp;is&nbsp;to&nbsp;round&nbsp;up.</span><br>
<span class="lineno"></span><span class="comment" id="2642118">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Round&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2642159">func</span>&nbsp;<span class="op" id="2642164">(</span><span class="ident" id="2642165">t</span>&nbsp;<span class="ident" id="2642167">Time</span><span class="op" id="2642171">)</span>&nbsp;<span class="ident" id="2642173">Round</span><span class="op" id="2642178">(</span><span class="ident" id="2642179">d</span>&nbsp;<span class="ident" id="2642181">Duration</span><span class="op" id="2642189">)</span>&nbsp;<span class="ident" id="2642191">Time</span>&nbsp;<span class="op" id="2642196">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642199">if</span>&nbsp;<span class="ident" id="2642202">d</span>&nbsp;<span class="op" id="2642204">&lt;=</span>&nbsp;<span class="num" id="2642207">0</span>&nbsp;<span class="op" id="2642209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642213">return</span>&nbsp;<span class="ident" id="2642220">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2642223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642226">_</span><span class="op" id="2642227">,</span>&nbsp;<span class="ident" id="2642229">r</span>&nbsp;<span class="op" id="2642231">:=</span>&nbsp;<span class="ident" id="2642234">div</span><span class="op" id="2642237">(</span><span class="ident" id="2642238">t</span><span class="op" id="2642239">,</span>&nbsp;<span class="ident" id="2642241">d</span><span class="op" id="2642242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642245">if</span>&nbsp;<span class="ident" id="2642248">r</span><span class="op" id="2642249">+</span><span class="ident" id="2642250">r</span>&nbsp;<span class="op" id="2642252">&lt;</span>&nbsp;<span class="ident" id="2642254">d</span>&nbsp;<span class="op" id="2642256">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642260">return</span>&nbsp;<span class="ident" id="2642267">t</span><span class="op" id="2642268">.</span><span class="ident" id="2642269">Add</span><span class="op" id="2642272">(</span><span class="op" id="2642273">-</span><span class="ident" id="2642274">r</span><span class="op" id="2642275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2642278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642281">return</span>&nbsp;<span class="ident" id="2642288">t</span><span class="op" id="2642289">.</span><span class="ident" id="2642290">Add</span><span class="op" id="2642293">(</span><span class="ident" id="2642294">d</span>&nbsp;<span class="op" id="2642296">-</span>&nbsp;<span class="ident" id="2642298">r</span><span class="op" id="2642299">)</span><br>
<span class="lineno"></span><span class="op" id="2642301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span><span class="comment" id="2642304">//&nbsp;div&nbsp;divides&nbsp;t&nbsp;by&nbsp;d&nbsp;and&nbsp;returns&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;and&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="2642373">//&nbsp;We&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;anymore&nbsp;(round&nbsp;half&nbsp;up&nbsp;instead&nbsp;of&nbsp;round&nbsp;to&nbsp;even)</span><br>
<span class="lineno"></span><span class="comment" id="2642458">//&nbsp;but&nbsp;it&#39;s&nbsp;still&nbsp;here&nbsp;in&nbsp;case&nbsp;we&nbsp;change&nbsp;our&nbsp;minds.</span><br>
<span class="lineno"></span><span class="keyword" id="2642510">func</span>&nbsp;<span class="ident" id="2642515">div</span><span class="op" id="2642518">(</span><span class="ident" id="2642519">t</span>&nbsp;<span class="ident" id="2642521">Time</span><span class="op" id="2642525">,</span>&nbsp;<span class="ident" id="2642527">d</span>&nbsp;<span class="ident" id="2642529">Duration</span><span class="op" id="2642537">)</span>&nbsp;<span class="op" id="2642539">(</span><span class="ident" id="2642540">qmod2</span>&nbsp;<span class="builtintype" id="2642546">int</span><span class="op" id="2642549">,</span>&nbsp;<span class="ident" id="2642551">r</span>&nbsp;<span class="ident" id="2642553">Duration</span><span class="op" id="2642561">)</span>&nbsp;<span class="op" id="2642563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642566">neg</span>&nbsp;<span class="op" id="2642570">:=</span>&nbsp;<span class="builtintype" id="2642573">false</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642580">nsec</span>&nbsp;<span class="op" id="2642585">:=</span>&nbsp;<span class="builtintype" id="2642588">int32</span><span class="op" id="2642593">(</span><span class="ident" id="2642594">t</span><span class="op" id="2642595">.</span><span class="ident" id="2642596">nsec</span><span class="op" id="2642600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642603">if</span>&nbsp;<span class="ident" id="2642606">t</span><span class="op" id="2642607">.</span><span class="ident" id="2642608">sec</span>&nbsp;<span class="op" id="2642612">&lt;</span>&nbsp;<span class="num" id="2642614">0</span>&nbsp;<span class="op" id="2642616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2642620">//&nbsp;Operate&nbsp;on&nbsp;absolute&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642652">neg</span>&nbsp;<span class="op" id="2642656">=</span>&nbsp;<span class="builtintype" id="2642658">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642665">t</span><span class="op" id="2642666">.</span><span class="ident" id="2642667">sec</span>&nbsp;<span class="op" id="2642671">=</span>&nbsp;<span class="op" id="2642673">-</span><span class="ident" id="2642674">t</span><span class="op" id="2642675">.</span><span class="ident" id="2642676">sec</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642682">nsec</span>&nbsp;<span class="op" id="2642687">=</span>&nbsp;<span class="op" id="2642689">-</span><span class="ident" id="2642690">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642697">if</span>&nbsp;<span class="ident" id="2642700">nsec</span>&nbsp;<span class="op" id="2642705">&lt;</span>&nbsp;<span class="num" id="2642707">0</span>&nbsp;<span class="op" id="2642709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642714">nsec</span>&nbsp;<span class="op" id="2642719">+=</span>&nbsp;<span class="num" id="2642722">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642729">t</span><span class="op" id="2642730">.</span><span class="ident" id="2642731">sec</span><span class="op" id="2642734">--</span>&nbsp;<span class="comment" id="2642737">//&nbsp;t.sec&nbsp;&gt;=&nbsp;1&nbsp;before&nbsp;the&nbsp;--&nbsp;so&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2642775">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2642778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642782">switch</span>&nbsp;<span class="op" id="2642789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2642792">//&nbsp;Special&nbsp;case:&nbsp;2d&nbsp;divides&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642831">case</span>&nbsp;<span class="ident" id="2642836">d</span>&nbsp;<span class="op" id="2642838">&lt;</span>&nbsp;<span class="ident" id="2642840">Second</span>&nbsp;<span class="op" id="2642847">&amp;&amp;</span>&nbsp;<span class="ident" id="2642850">Second</span><span class="op" id="2642856">%</span><span class="op" id="2642857">(</span><span class="ident" id="2642858">d</span><span class="op" id="2642859">+</span><span class="ident" id="2642860">d</span><span class="op" id="2642861">)</span>&nbsp;<span class="op" id="2642863">==</span>&nbsp;<span class="num" id="2642866">0</span><span class="op" id="2642867">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642871">qmod2</span>&nbsp;<span class="op" id="2642877">=</span>&nbsp;<span class="builtintype" id="2642879">int</span><span class="op" id="2642882">(</span><span class="ident" id="2642883">nsec</span><span class="op" id="2642887">/</span><span class="builtintype" id="2642888">int32</span><span class="op" id="2642893">(</span><span class="ident" id="2642894">d</span><span class="op" id="2642895">)</span><span class="op" id="2642896">)</span>&nbsp;<span class="op" id="2642898">&amp;</span>&nbsp;<span class="num" id="2642900">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642904">r</span>&nbsp;<span class="op" id="2642906">=</span>&nbsp;<span class="ident" id="2642908">Duration</span><span class="op" id="2642916">(</span><span class="ident" id="2642917">nsec</span>&nbsp;<span class="op" id="2642922">%</span>&nbsp;<span class="builtintype" id="2642924">int32</span><span class="op" id="2642929">(</span><span class="ident" id="2642930">d</span><span class="op" id="2642931">)</span><span class="op" id="2642932">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2642936">//&nbsp;Special&nbsp;case:&nbsp;d&nbsp;is&nbsp;a&nbsp;multiple&nbsp;of&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642983">case</span>&nbsp;<span class="ident" id="2642988">d</span><span class="op" id="2642989">%</span><span class="ident" id="2642990">Second</span>&nbsp;<span class="op" id="2642997">==</span>&nbsp;<span class="num" id="2643000">0</span><span class="op" id="2643001">:</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643005">d1</span>&nbsp;<span class="op" id="2643008">:=</span>&nbsp;<span class="ident" id="2643011">int64</span><span class="op" id="2643016">(</span><span class="ident" id="2643017">d</span>&nbsp;<span class="op" id="2643019">/</span>&nbsp;<span class="ident" id="2643021">Second</span><span class="op" id="2643027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643031">qmod2</span>&nbsp;<span class="op" id="2643037">=</span>&nbsp;<span class="builtintype" id="2643039">int</span><span class="op" id="2643042">(</span><span class="ident" id="2643043">t</span><span class="op" id="2643044">.</span><span class="ident" id="2643045">sec</span><span class="op" id="2643048">/</span><span class="ident" id="2643049">d1</span><span class="op" id="2643051">)</span>&nbsp;<span class="op" id="2643053">&amp;</span>&nbsp;<span class="num" id="2643055">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643059">r</span>&nbsp;<span class="op" id="2643061">=</span>&nbsp;<span class="ident" id="2643063">Duration</span><span class="op" id="2643071">(</span><span class="ident" id="2643072">t</span><span class="op" id="2643073">.</span><span class="ident" id="2643074">sec</span><span class="op" id="2643077">%</span><span class="ident" id="2643078">d1</span><span class="op" id="2643080">)</span><span class="op" id="2643081">*</span><span class="ident" id="2643082">Second</span>&nbsp;<span class="op" id="2643089">+</span>&nbsp;<span class="ident" id="2643091">Duration</span><span class="op" id="2643099">(</span><span class="ident" id="2643100">nsec</span><span class="op" id="2643104">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2643108">//&nbsp;General&nbsp;case.</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2643126">//&nbsp;This&nbsp;could&nbsp;be&nbsp;faster&nbsp;if&nbsp;more&nbsp;cleverness&nbsp;were&nbsp;applied,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2643184">//&nbsp;but&nbsp;it&#39;s&nbsp;really&nbsp;only&nbsp;here&nbsp;to&nbsp;avoid&nbsp;special&nbsp;case&nbsp;restrictions&nbsp;in&nbsp;the&nbsp;API.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2643261">//&nbsp;No&nbsp;one&nbsp;will&nbsp;care&nbsp;about&nbsp;these&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643301">default</span><span class="op" id="2643308">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2643312">//&nbsp;Compute&nbsp;nanoseconds&nbsp;as&nbsp;128-bit&nbsp;number.</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643356">sec</span>&nbsp;<span class="op" id="2643360">:=</span>&nbsp;<span class="ident" id="2643363">uint64</span><span class="op" id="2643369">(</span><span class="ident" id="2643370">t</span><span class="op" id="2643371">.</span><span class="ident" id="2643372">sec</span><span class="op" id="2643375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643379">tmp</span>&nbsp;<span class="op" id="2643383">:=</span>&nbsp;<span class="op" id="2643386">(</span><span class="ident" id="2643387">sec</span>&nbsp;<span class="op" id="2643391">&gt;&gt;</span>&nbsp;<span class="num" id="2643394">32</span><span class="op" id="2643396">)</span>&nbsp;<span class="op" id="2643398">*</span>&nbsp;<span class="num" id="2643400">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643406">u1</span>&nbsp;<span class="op" id="2643409">:=</span>&nbsp;<span class="ident" id="2643412">tmp</span>&nbsp;<span class="op" id="2643416">&gt;&gt;</span>&nbsp;<span class="num" id="2643419">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643424">u0</span>&nbsp;<span class="op" id="2643427">:=</span>&nbsp;<span class="ident" id="2643430">tmp</span>&nbsp;<span class="op" id="2643434">&lt;&lt;</span>&nbsp;<span class="num" id="2643437">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643442">tmp</span>&nbsp;<span class="op" id="2643446">=</span>&nbsp;<span class="ident" id="2643448">uint64</span><span class="op" id="2643454">(</span><span class="ident" id="2643455">sec</span><span class="op" id="2643458">&amp;</span><span class="num" id="2643459">0xFFFFFFFF</span><span class="op" id="2643469">)</span>&nbsp;<span class="op" id="2643471">*</span>&nbsp;<span class="num" id="2643473">1e9</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643479">u0x</span><span class="op" id="2643482">,</span>&nbsp;<span class="ident" id="2643484">u0</span>&nbsp;<span class="op" id="2643487">:=</span>&nbsp;<span class="ident" id="2643490">u0</span><span class="op" id="2643492">,</span>&nbsp;<span class="ident" id="2643494">u0</span><span class="op" id="2643496">+</span><span class="ident" id="2643497">tmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643503">if</span>&nbsp;<span class="ident" id="2643506">u0</span>&nbsp;<span class="op" id="2643509">&lt;</span>&nbsp;<span class="ident" id="2643511">u0x</span>&nbsp;<span class="op" id="2643515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643520">u1</span><span class="op" id="2643522">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643531">u0x</span><span class="op" id="2643534">,</span>&nbsp;<span class="ident" id="2643536">u0</span>&nbsp;<span class="op" id="2643539">=</span>&nbsp;<span class="ident" id="2643541">u0</span><span class="op" id="2643543">,</span>&nbsp;<span class="ident" id="2643545">u0</span><span class="op" id="2643547">+</span><span class="ident" id="2643548">uint64</span><span class="op" id="2643554">(</span><span class="ident" id="2643555">nsec</span><span class="op" id="2643559">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643563">if</span>&nbsp;<span class="ident" id="2643566">u0</span>&nbsp;<span class="op" id="2643569">&lt;</span>&nbsp;<span class="ident" id="2643571">u0x</span>&nbsp;<span class="op" id="2643575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643580">u1</span><span class="op" id="2643582">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2643592">//&nbsp;Compute&nbsp;remainder&nbsp;by&nbsp;subtracting&nbsp;r&lt;&lt;k&nbsp;for&nbsp;decreasing&nbsp;k.</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2643653">//&nbsp;Quotient&nbsp;parity&nbsp;is&nbsp;whether&nbsp;we&nbsp;subtract&nbsp;on&nbsp;last&nbsp;round.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643712">d1</span>&nbsp;<span class="op" id="2643715">:=</span>&nbsp;<span class="ident" id="2643718">uint64</span><span class="op" id="2643724">(</span><span class="ident" id="2643725">d</span><span class="op" id="2643726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643730">for</span>&nbsp;<span class="ident" id="2643734">d1</span><span class="op" id="2643736">&gt;&gt;</span><span class="num" id="2643738">63</span>&nbsp;<span class="op" id="2643741">!=</span>&nbsp;<span class="num" id="2643744">1</span>&nbsp;<span class="op" id="2643746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643751">d1</span>&nbsp;<span class="op" id="2643754">&lt;&lt;=</span>&nbsp;<span class="num" id="2643758">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643762">}</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643766">d0</span>&nbsp;<span class="op" id="2643769">:=</span>&nbsp;<span class="ident" id="2643772">uint64</span><span class="op" id="2643778">(</span><span class="num" id="2643779">0</span><span class="op" id="2643780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643784">for</span>&nbsp;<span class="op" id="2643788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643793">qmod2</span>&nbsp;<span class="op" id="2643799">=</span>&nbsp;<span class="num" id="2643801">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643806">if</span>&nbsp;<span class="ident" id="2643809">u1</span>&nbsp;<span class="op" id="2643812">&gt;</span>&nbsp;<span class="ident" id="2643814">d1</span>&nbsp;<span class="op" id="2643817">||</span>&nbsp;<span class="ident" id="2643820">u1</span>&nbsp;<span class="op" id="2643823">==</span>&nbsp;<span class="ident" id="2643826">d1</span>&nbsp;<span class="op" id="2643829">&amp;&amp;</span>&nbsp;<span class="ident" id="2643832">u0</span>&nbsp;<span class="op" id="2643835">&gt;=</span>&nbsp;<span class="ident" id="2643838">d0</span>&nbsp;<span class="op" id="2643841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2643847">//&nbsp;subtract</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643863">qmod2</span>&nbsp;<span class="op" id="2643869">=</span>&nbsp;<span class="num" id="2643871">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643877">u0x</span><span class="op" id="2643880">,</span>&nbsp;<span class="ident" id="2643882">u0</span>&nbsp;<span class="op" id="2643885">=</span>&nbsp;<span class="ident" id="2643887">u0</span><span class="op" id="2643889">,</span>&nbsp;<span class="ident" id="2643891">u0</span><span class="op" id="2643893">-</span><span class="ident" id="2643894">d0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643901">if</span>&nbsp;<span class="ident" id="2643904">u0</span>&nbsp;<span class="op" id="2643907">&gt;</span>&nbsp;<span class="ident" id="2643909">u0x</span>&nbsp;<span class="op" id="2643913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643920">u1</span><span class="op" id="2643922">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643929">}</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643935">u1</span>&nbsp;<span class="op" id="2643938">-=</span>&nbsp;<span class="ident" id="2643941">d1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643952">if</span>&nbsp;<span class="ident" id="2643955">d1</span>&nbsp;<span class="op" id="2643958">==</span>&nbsp;<span class="num" id="2643961">0</span>&nbsp;<span class="op" id="2643963">&amp;&amp;</span>&nbsp;<span class="ident" id="2643966">d0</span>&nbsp;<span class="op" id="2643969">==</span>&nbsp;<span class="ident" id="2643972">uint64</span><span class="op" id="2643978">(</span><span class="ident" id="2643979">d</span><span class="op" id="2643980">)</span>&nbsp;<span class="op" id="2643982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643988">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643997">}</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644002">d0</span>&nbsp;<span class="op" id="2644005">&gt;&gt;=</span>&nbsp;<span class="num" id="2644009">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644014">d0</span>&nbsp;<span class="op" id="2644017">|=</span>&nbsp;<span class="op" id="2644020">(</span><span class="ident" id="2644021">d1</span>&nbsp;<span class="op" id="2644024">&amp;</span>&nbsp;<span class="num" id="2644026">1</span><span class="op" id="2644027">)</span>&nbsp;<span class="op" id="2644029">&lt;&lt;</span>&nbsp;<span class="num" id="2644032">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644038">d1</span>&nbsp;<span class="op" id="2644041">&gt;&gt;=</span>&nbsp;<span class="num" id="2644045">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2644049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644053">r</span>&nbsp;<span class="op" id="2644055">=</span>&nbsp;<span class="ident" id="2644057">Duration</span><span class="op" id="2644065">(</span><span class="ident" id="2644066">u0</span><span class="op" id="2644068">)</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2644071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2644075">if</span>&nbsp;<span class="ident" id="2644078">neg</span>&nbsp;<span class="op" id="2644082">&amp;&amp;</span>&nbsp;<span class="ident" id="2644085">r</span>&nbsp;<span class="op" id="2644087">!=</span>&nbsp;<span class="num" id="2644090">0</span>&nbsp;<span class="op" id="2644092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2644096">//&nbsp;If&nbsp;input&nbsp;was&nbsp;negative&nbsp;and&nbsp;not&nbsp;an&nbsp;exact&nbsp;multiple&nbsp;of&nbsp;d,&nbsp;we&nbsp;computed&nbsp;q,&nbsp;r&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2644182">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2644200">//&nbsp;But&nbsp;the&nbsp;right&nbsp;answers&nbsp;are&nbsp;given&nbsp;by&nbsp;-(q-1),&nbsp;d-r:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2644253">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2644271">//&nbsp;&nbsp;&nbsp;&nbsp-q*d&nbsp;-&nbsp;r&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2644289">//&nbsp;&nbsp;&nbsp;&nbsp-(q-1)*d&nbsp;+&nbsp;(d&nbsp;-&nbsp;r)&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644317">qmod2</span>&nbsp;<span class="op" id="2644323">^=</span>&nbsp;<span class="num" id="2644326">1</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644330">r</span>&nbsp;<span class="op" id="2644332">=</span>&nbsp;<span class="ident" id="2644334">d</span>&nbsp;<span class="op" id="2644336">-</span>&nbsp;<span class="ident" id="2644338">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2644341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2644344">return</span><br>
<span class="lineno"></span><span class="op" id="2644351">}</span>
</div>
</body>
</html>
