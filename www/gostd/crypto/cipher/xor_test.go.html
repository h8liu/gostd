<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html" class="current">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8106856">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8106911">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8106965">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8107016">package</span>&nbsp;<span class="ident" id="8107024">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8107032">import</span>&nbsp;<span class="op" id="8107039">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8107042">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8107051">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8107061">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8107064">func</span>&nbsp;<span class="ident" id="8107069">TestXOR</span><span class="op" id="8107076">(</span><span class="ident" id="8107077">t</span>&nbsp;<span class="op" id="8107079">*</span><span class="ident" id="8107080">testing</span><span class="op" id="8107087">.</span><span class="ident" id="8107088">T</span><span class="op" id="8107089">)</span>&nbsp;<span class="op" id="8107091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107094">for</span>&nbsp;<span class="ident" id="8107098">alignP</span>&nbsp;<span class="op" id="8107105">:=</span>&nbsp;<span class="num" id="8107108">0</span><span class="op" id="8107109">;</span>&nbsp;<span class="ident" id="8107111">alignP</span>&nbsp;<span class="op" id="8107118">&lt;</span>&nbsp;<span class="num" id="8107120">2</span><span class="op" id="8107121">;</span>&nbsp;<span class="ident" id="8107123">alignP</span><span class="op" id="8107129">++</span>&nbsp;<span class="op" id="8107132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107136">for</span>&nbsp;<span class="ident" id="8107140">alignQ</span>&nbsp;<span class="op" id="8107147">:=</span>&nbsp;<span class="num" id="8107150">0</span><span class="op" id="8107151">;</span>&nbsp;<span class="ident" id="8107153">alignQ</span>&nbsp;<span class="op" id="8107160">&lt;</span>&nbsp;<span class="num" id="8107162">2</span><span class="op" id="8107163">;</span>&nbsp;<span class="ident" id="8107165">alignQ</span><span class="op" id="8107171">++</span>&nbsp;<span class="op" id="8107174">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107179">for</span>&nbsp;<span class="ident" id="8107183">alignD</span>&nbsp;<span class="op" id="8107190">:=</span>&nbsp;<span class="num" id="8107193">0</span><span class="op" id="8107194">;</span>&nbsp;<span class="ident" id="8107196">alignD</span>&nbsp;<span class="op" id="8107203">&lt;</span>&nbsp;<span class="num" id="8107205">2</span><span class="op" id="8107206">;</span>&nbsp;<span class="ident" id="8107208">alignD</span><span class="op" id="8107214">++</span>&nbsp;<span class="op" id="8107217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107223">p</span>&nbsp;<span class="op" id="8107225">:=</span>&nbsp;<span class="builtinfunc" id="8107228">make</span><span class="op" id="8107232">(</span><span class="op" id="8107233">[</span><span class="op" id="8107234">]</span><span class="builtintype" id="8107235">byte</span><span class="op" id="8107239">,</span>&nbsp;<span class="num" id="8107241">1024</span><span class="op" id="8107245">)</span><span class="op" id="8107246">[</span><span class="ident" id="8107247">alignP</span><span class="op" id="8107253">:</span><span class="op" id="8107254">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107260">q</span>&nbsp;<span class="op" id="8107262">:=</span>&nbsp;<span class="builtinfunc" id="8107265">make</span><span class="op" id="8107269">(</span><span class="op" id="8107270">[</span><span class="op" id="8107271">]</span><span class="builtintype" id="8107272">byte</span><span class="op" id="8107276">,</span>&nbsp;<span class="num" id="8107278">1024</span><span class="op" id="8107282">)</span><span class="op" id="8107283">[</span><span class="ident" id="8107284">alignQ</span><span class="op" id="8107290">:</span><span class="op" id="8107291">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107297">d1</span>&nbsp;<span class="op" id="8107300">:=</span>&nbsp;<span class="builtinfunc" id="8107303">make</span><span class="op" id="8107307">(</span><span class="op" id="8107308">[</span><span class="op" id="8107309">]</span><span class="builtintype" id="8107310">byte</span><span class="op" id="8107314">,</span>&nbsp;<span class="num" id="8107316">1024</span><span class="op" id="8107320">+</span><span class="ident" id="8107321">alignD</span><span class="op" id="8107327">)</span><span class="op" id="8107328">[</span><span class="ident" id="8107329">alignD</span><span class="op" id="8107335">:</span><span class="op" id="8107336">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107342">d2</span>&nbsp;<span class="op" id="8107345">:=</span>&nbsp;<span class="builtinfunc" id="8107348">make</span><span class="op" id="8107352">(</span><span class="op" id="8107353">[</span><span class="op" id="8107354">]</span><span class="builtintype" id="8107355">byte</span><span class="op" id="8107359">,</span>&nbsp;<span class="num" id="8107361">1024</span><span class="op" id="8107365">+</span><span class="ident" id="8107366">alignD</span><span class="op" id="8107372">)</span><span class="op" id="8107373">[</span><span class="ident" id="8107374">alignD</span><span class="op" id="8107380">:</span><span class="op" id="8107381">]</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107387">xorBytes</span><span class="op" id="8107395">(</span><span class="ident" id="8107396">d1</span><span class="op" id="8107398">,</span>&nbsp;<span class="ident" id="8107400">p</span><span class="op" id="8107401">,</span>&nbsp;<span class="ident" id="8107403">q</span><span class="op" id="8107404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107410">safeXORBytes</span><span class="op" id="8107422">(</span><span class="ident" id="8107423">d2</span><span class="op" id="8107425">,</span>&nbsp;<span class="ident" id="8107427">p</span><span class="op" id="8107428">,</span>&nbsp;<span class="ident" id="8107430">q</span><span class="op" id="8107431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107437">if</span>&nbsp;<span class="ident" id="8107440">bytes</span><span class="op" id="8107445">.</span><span class="ident" id="8107446">Compare</span><span class="op" id="8107453">(</span><span class="ident" id="8107454">d1</span><span class="op" id="8107456">,</span>&nbsp;<span class="ident" id="8107458">d2</span><span class="op" id="8107460">)</span>&nbsp;<span class="op" id="8107462">!=</span>&nbsp;<span class="num" id="8107465">0</span>&nbsp;<span class="op" id="8107467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107474">t</span><span class="op" id="8107475">.</span><span class="ident" id="8107476">Error</span><span class="op" id="8107481">(</span><span class="string" id="8107482">&#34;not&nbsp;equal&#34;</span><span class="op" id="8107493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107499">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107511">}</span><br>
<span class="lineno"></span><span class="op" id="8107513">}</span>
</div>
</body>
</html>
