<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1738714">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1738769">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1738823">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1738874">package</span>&nbsp;<span class="ident" id="1738882">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1738891">import</span>&nbsp;<span class="string" id="1738898">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1738908">//&nbsp;ErrRange&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno">10</span><span class="keyword" id="1738980">var</span>&nbsp;<span class="ident" id="1738984">ErrRange</span>&nbsp;<span class="op" id="1738993">=</span>&nbsp;<span class="ident" id="1738995">errors</span><span class="op" id="1739001">.</span><span class="ident" id="1739002">New</span><span class="op" id="1739005">(</span><span class="string" id="1739006">&#34;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1739026">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1739029">//&nbsp;ErrSyntax&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;right&nbsp;syntax&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="1739117">var</span>&nbsp;<span class="ident" id="1739121">ErrSyntax</span>&nbsp;<span class="op" id="1739131">=</span>&nbsp;<span class="ident" id="1739133">errors</span><span class="op" id="1739139">.</span><span class="ident" id="1739140">New</span><span class="op" id="1739143">(</span><span class="string" id="1739144">&#34;invalid&nbsp;syntax&#34;</span><span class="op" id="1739160">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1739163">//&nbsp;A&nbsp;NumError&nbsp;records&nbsp;a&nbsp;failed&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="1739206">type</span>&nbsp;<span class="ident" id="1739211">NumError</span>&nbsp;<span class="keyword" id="1739220">struct</span>&nbsp;<span class="op" id="1739227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739230">Func</span>&nbsp;<span class="builtintype" id="1739235">string</span>&nbsp;<span class="comment" id="1739242">//&nbsp;the&nbsp;failing&nbsp;function&nbsp;(ParseBool,&nbsp;ParseInt,&nbsp;ParseUint,&nbsp;ParseFloat)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739312">Num</span>&nbsp;&nbsp;<span class="builtintype" id="1739317">string</span>&nbsp;<span class="comment" id="1739324">//&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739338">Err</span>&nbsp;&nbsp;<span class="builtintype" id="1739343">error</span>&nbsp;&nbsp;<span class="comment" id="1739350">//&nbsp;the&nbsp;reason&nbsp;the&nbsp;conversion&nbsp;failed&nbsp;(ErrRange,&nbsp;ErrSyntax)</span><br>
<span class="lineno">20</span><span class="op" id="1739408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1739411">func</span>&nbsp;<span class="op" id="1739416">(</span><span class="ident" id="1739417">e</span>&nbsp;<span class="op" id="1739419">*</span><span class="ident" id="1739420">NumError</span><span class="op" id="1739428">)</span>&nbsp;<span class="ident" id="1739430">Error</span><span class="op" id="1739435">(</span><span class="op" id="1739436">)</span>&nbsp;<span class="builtintype" id="1739438">string</span>&nbsp;<span class="op" id="1739445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1739448">return</span>&nbsp;<span class="string" id="1739455">&#34;strconv.&#34;</span>&nbsp;<span class="op" id="1739466">+</span>&nbsp;<span class="ident" id="1739468">e</span><span class="op" id="1739469">.</span><span class="ident" id="1739470">Func</span>&nbsp;<span class="op" id="1739475">+</span>&nbsp;<span class="string" id="1739477">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="1739482">+</span>&nbsp;<span class="string" id="1739484">&#34;parsing&nbsp;&#34;</span>&nbsp;<span class="op" id="1739495">+</span>&nbsp;<span class="ident" id="1739497">Quote</span><span class="op" id="1739502">(</span><span class="ident" id="1739503">e</span><span class="op" id="1739504">.</span><span class="ident" id="1739505">Num</span><span class="op" id="1739508">)</span>&nbsp;<span class="op" id="1739510">+</span>&nbsp;<span class="string" id="1739512">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="1739517">+</span>&nbsp;<span class="ident" id="1739519">e</span><span class="op" id="1739520">.</span><span class="ident" id="1739521">Err</span><span class="op" id="1739524">.</span><span class="ident" id="1739525">Error</span><span class="op" id="1739530">(</span><span class="op" id="1739531">)</span><br>
<span class="lineno"></span><span class="op" id="1739533">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="1739536">func</span>&nbsp;<span class="ident" id="1739541">syntaxError</span><span class="op" id="1739552">(</span><span class="ident" id="1739553">fn</span><span class="op" id="1739555">,</span>&nbsp;<span class="ident" id="1739557">str</span>&nbsp;<span class="builtintype" id="1739561">string</span><span class="op" id="1739567">)</span>&nbsp;<span class="op" id="1739569">*</span><span class="ident" id="1739570">NumError</span>&nbsp;<span class="op" id="1739579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1739582">return</span>&nbsp;<span class="op" id="1739589">&amp;</span><span class="ident" id="1739590">NumError</span><span class="op" id="1739598">{</span><span class="ident" id="1739599">fn</span><span class="op" id="1739601">,</span>&nbsp;<span class="ident" id="1739603">str</span><span class="op" id="1739606">,</span>&nbsp;<span class="ident" id="1739608">ErrSyntax</span><span class="op" id="1739617">}</span><br>
<span class="lineno"></span><span class="op" id="1739619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="1739622">func</span>&nbsp;<span class="ident" id="1739627">rangeError</span><span class="op" id="1739637">(</span><span class="ident" id="1739638">fn</span><span class="op" id="1739640">,</span>&nbsp;<span class="ident" id="1739642">str</span>&nbsp;<span class="builtintype" id="1739646">string</span><span class="op" id="1739652">)</span>&nbsp;<span class="op" id="1739654">*</span><span class="ident" id="1739655">NumError</span>&nbsp;<span class="op" id="1739664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1739667">return</span>&nbsp;<span class="op" id="1739674">&amp;</span><span class="ident" id="1739675">NumError</span><span class="op" id="1739683">{</span><span class="ident" id="1739684">fn</span><span class="op" id="1739686">,</span>&nbsp;<span class="ident" id="1739688">str</span><span class="op" id="1739691">,</span>&nbsp;<span class="ident" id="1739693">ErrRange</span><span class="op" id="1739701">}</span><br>
<span class="lineno"></span><span class="op" id="1739703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1739706">const</span>&nbsp;<span class="ident" id="1739712">intSize</span>&nbsp;<span class="op" id="1739720">=</span>&nbsp;<span class="num" id="1739722">32</span>&nbsp;<span class="op" id="1739725">&lt;&lt;</span>&nbsp;<span class="op" id="1739728">(</span><span class="op" id="1739729">^</span><span class="builtintype" id="1739730">uint</span><span class="op" id="1739734">(</span><span class="num" id="1739735">0</span><span class="op" id="1739736">)</span>&nbsp;<span class="op" id="1739738">&gt;&gt;</span>&nbsp;<span class="num" id="1739741">63</span><span class="op" id="1739743">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="1739746">//&nbsp;IntSize&nbsp;is&nbsp;the&nbsp;size&nbsp;in&nbsp;bits&nbsp;of&nbsp;an&nbsp;int&nbsp;or&nbsp;uint&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="1739802">const</span>&nbsp;<span class="ident" id="1739808">IntSize</span>&nbsp;<span class="op" id="1739816">=</span>&nbsp;<span class="ident" id="1739818">intSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1739827">//&nbsp;Return&nbsp;the&nbsp;first&nbsp;number&nbsp;n&nbsp;such&nbsp;that&nbsp;n*base&nbsp;&gt;=&nbsp;1&lt;&lt;64.</span><br>
<span class="lineno">40</span><span class="keyword" id="1739883">func</span>&nbsp;<span class="ident" id="1739888">cutoff64</span><span class="op" id="1739896">(</span><span class="ident" id="1739897">base</span>&nbsp;<span class="builtintype" id="1739902">int</span><span class="op" id="1739905">)</span>&nbsp;<span class="ident" id="1739907">uint64</span>&nbsp;<span class="op" id="1739914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1739917">if</span>&nbsp;<span class="ident" id="1739920">base</span>&nbsp;<span class="op" id="1739925">&lt;</span>&nbsp;<span class="num" id="1739927">2</span>&nbsp;<span class="op" id="1739929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1739933">return</span>&nbsp;<span class="num" id="1739940">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1739943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1739946">return</span>&nbsp;<span class="op" id="1739953">(</span><span class="num" id="1739954">1</span><span class="op" id="1739955">&lt;&lt;</span><span class="num" id="1739957">64</span><span class="op" id="1739959">-</span><span class="num" id="1739960">1</span><span class="op" id="1739961">)</span><span class="op" id="1739962">/</span><span class="ident" id="1739963">uint64</span><span class="op" id="1739969">(</span><span class="ident" id="1739970">base</span><span class="op" id="1739974">)</span>&nbsp;<span class="op" id="1739976">+</span>&nbsp;<span class="num" id="1739978">1</span><br>
<span class="lineno">45</span><span class="op" id="1739980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1739983">//&nbsp;ParseUint&nbsp;is&nbsp;like&nbsp;ParseInt&nbsp;but&nbsp;for&nbsp;unsigned&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="keyword" id="1740039">func</span>&nbsp;<span class="ident" id="1740044">ParseUint</span><span class="op" id="1740053">(</span><span class="ident" id="1740054">s</span>&nbsp;<span class="builtintype" id="1740056">string</span><span class="op" id="1740062">,</span>&nbsp;<span class="ident" id="1740064">base</span>&nbsp;<span class="builtintype" id="1740069">int</span><span class="op" id="1740072">,</span>&nbsp;<span class="ident" id="1740074">bitSize</span>&nbsp;<span class="builtintype" id="1740082">int</span><span class="op" id="1740085">)</span>&nbsp;<span class="op" id="1740087">(</span><span class="ident" id="1740088">n</span>&nbsp;<span class="ident" id="1740090">uint64</span><span class="op" id="1740096">,</span>&nbsp;<span class="ident" id="1740098">err</span>&nbsp;<span class="builtintype" id="1740102">error</span><span class="op" id="1740107">)</span>&nbsp;<span class="op" id="1740109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740112">var</span>&nbsp;<span class="ident" id="1740116">cutoff</span><span class="op" id="1740122">,</span>&nbsp;<span class="ident" id="1740124">maxVal</span>&nbsp;<span class="ident" id="1740131">uint64</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740140">if</span>&nbsp;<span class="ident" id="1740143">bitSize</span>&nbsp;<span class="op" id="1740151">==</span>&nbsp;<span class="num" id="1740154">0</span>&nbsp;<span class="op" id="1740156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740160">bitSize</span>&nbsp;<span class="op" id="1740168">=</span>&nbsp;<span class="builtintype" id="1740170">int</span><span class="op" id="1740173">(</span><span class="ident" id="1740174">IntSize</span><span class="op" id="1740181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1740184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740188">s0</span>&nbsp;<span class="op" id="1740191">:=</span>&nbsp;<span class="ident" id="1740194">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740197">switch</span>&nbsp;<span class="op" id="1740204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740207">case</span>&nbsp;<span class="builtinfunc" id="1740212">len</span><span class="op" id="1740215">(</span><span class="ident" id="1740216">s</span><span class="op" id="1740217">)</span>&nbsp;<span class="op" id="1740219">&lt;</span>&nbsp;<span class="num" id="1740221">1</span><span class="op" id="1740222">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740226">err</span>&nbsp;<span class="op" id="1740230">=</span>&nbsp;<span class="ident" id="1740232">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740244">goto</span>&nbsp;<span class="ident" id="1740249">Error</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740257">case</span>&nbsp;<span class="num" id="1740262">2</span>&nbsp;<span class="op" id="1740264">&lt;=</span>&nbsp;<span class="ident" id="1740267">base</span>&nbsp;<span class="op" id="1740272">&amp;&amp;</span>&nbsp;<span class="ident" id="1740275">base</span>&nbsp;<span class="op" id="1740280">&lt;=</span>&nbsp;<span class="num" id="1740283">36</span><span class="op" id="1740285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1740289">//&nbsp;valid&nbsp;base;&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740320">case</span>&nbsp;<span class="ident" id="1740325">base</span>&nbsp;<span class="op" id="1740330">==</span>&nbsp;<span class="num" id="1740333">0</span><span class="op" id="1740334">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1740338">//&nbsp;Look&nbsp;for&nbsp;octal,&nbsp;hex&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740371">switch</span>&nbsp;<span class="op" id="1740378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740382">case</span>&nbsp;<span class="ident" id="1740387">s</span><span class="op" id="1740388">[</span><span class="num" id="1740389">0</span><span class="op" id="1740390">]</span>&nbsp;<span class="op" id="1740392">==</span>&nbsp;<span class="string" id="1740395">&#39;0&#39;</span>&nbsp;<span class="op" id="1740399">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1740402">len</span><span class="op" id="1740405">(</span><span class="ident" id="1740406">s</span><span class="op" id="1740407">)</span>&nbsp;<span class="op" id="1740409">&gt;</span>&nbsp;<span class="num" id="1740411">1</span>&nbsp;<span class="op" id="1740413">&amp;&amp;</span>&nbsp;<span class="op" id="1740416">(</span><span class="ident" id="1740417">s</span><span class="op" id="1740418">[</span><span class="num" id="1740419">1</span><span class="op" id="1740420">]</span>&nbsp;<span class="op" id="1740422">==</span>&nbsp;<span class="string" id="1740425">&#39;x&#39;</span>&nbsp;<span class="op" id="1740429">||</span>&nbsp;<span class="ident" id="1740432">s</span><span class="op" id="1740433">[</span><span class="num" id="1740434">1</span><span class="op" id="1740435">]</span>&nbsp;<span class="op" id="1740437">==</span>&nbsp;<span class="string" id="1740440">&#39;X&#39;</span><span class="op" id="1740443">)</span><span class="op" id="1740444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740449">base</span>&nbsp;<span class="op" id="1740454">=</span>&nbsp;<span class="num" id="1740456">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740462">s</span>&nbsp;<span class="op" id="1740464">=</span>&nbsp;<span class="ident" id="1740466">s</span><span class="op" id="1740467">[</span><span class="num" id="1740468">2</span><span class="op" id="1740469">:</span><span class="op" id="1740470">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740475">if</span>&nbsp;<span class="builtinfunc" id="1740478">len</span><span class="op" id="1740481">(</span><span class="ident" id="1740482">s</span><span class="op" id="1740483">)</span>&nbsp;<span class="op" id="1740485">&lt;</span>&nbsp;<span class="num" id="1740487">1</span>&nbsp;<span class="op" id="1740489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740495">err</span>&nbsp;<span class="op" id="1740499">=</span>&nbsp;<span class="ident" id="1740501">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740515">goto</span>&nbsp;<span class="ident" id="1740520">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1740529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740533">case</span>&nbsp;<span class="ident" id="1740538">s</span><span class="op" id="1740539">[</span><span class="num" id="1740540">0</span><span class="op" id="1740541">]</span>&nbsp;<span class="op" id="1740543">==</span>&nbsp;<span class="string" id="1740546">&#39;0&#39;</span><span class="op" id="1740549">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740554">base</span>&nbsp;<span class="op" id="1740559">=</span>&nbsp;<span class="num" id="1740561">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740565">default</span><span class="op" id="1740572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740577">base</span>&nbsp;<span class="op" id="1740582">=</span>&nbsp;<span class="num" id="1740584">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1740589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740593">default</span><span class="op" id="1740600">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740604">err</span>&nbsp;<span class="op" id="1740608">=</span>&nbsp;<span class="ident" id="1740610">errors</span><span class="op" id="1740616">.</span><span class="ident" id="1740617">New</span><span class="op" id="1740620">(</span><span class="string" id="1740621">&#34;invalid&nbsp;base&nbsp;&#34;</span>&nbsp;<span class="op" id="1740637">+</span>&nbsp;<span class="ident" id="1740639">Itoa</span><span class="op" id="1740643">(</span><span class="ident" id="1740644">base</span><span class="op" id="1740648">)</span><span class="op" id="1740649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740653">goto</span>&nbsp;<span class="ident" id="1740658">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1740665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740669">n</span>&nbsp;<span class="op" id="1740671">=</span>&nbsp;<span class="num" id="1740673">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740676">cutoff</span>&nbsp;<span class="op" id="1740683">=</span>&nbsp;<span class="ident" id="1740685">cutoff64</span><span class="op" id="1740693">(</span><span class="ident" id="1740694">base</span><span class="op" id="1740698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740701">maxVal</span>&nbsp;<span class="op" id="1740708">=</span>&nbsp;<span class="num" id="1740710">1</span><span class="op" id="1740711">&lt;&lt;</span><span class="builtintype" id="1740713">uint</span><span class="op" id="1740717">(</span><span class="ident" id="1740718">bitSize</span><span class="op" id="1740725">)</span>&nbsp;<span class="op" id="1740727">-</span>&nbsp;<span class="num" id="1740729">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740733">for</span>&nbsp;<span class="ident" id="1740737">i</span>&nbsp;<span class="op" id="1740739">:=</span>&nbsp;<span class="num" id="1740742">0</span><span class="op" id="1740743">;</span>&nbsp;<span class="ident" id="1740745">i</span>&nbsp;<span class="op" id="1740747">&lt;</span>&nbsp;<span class="builtinfunc" id="1740749">len</span><span class="op" id="1740752">(</span><span class="ident" id="1740753">s</span><span class="op" id="1740754">)</span><span class="op" id="1740755">;</span>&nbsp;<span class="ident" id="1740757">i</span><span class="op" id="1740758">++</span>&nbsp;<span class="op" id="1740761">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740765">var</span>&nbsp;<span class="ident" id="1740769">v</span>&nbsp;<span class="builtintype" id="1740771">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740778">d</span>&nbsp;<span class="op" id="1740780">:=</span>&nbsp;<span class="ident" id="1740783">s</span><span class="op" id="1740784">[</span><span class="ident" id="1740785">i</span><span class="op" id="1740786">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740790">switch</span>&nbsp;<span class="op" id="1740797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740801">case</span>&nbsp;<span class="string" id="1740806">&#39;0&#39;</span>&nbsp;<span class="op" id="1740810">&lt;=</span>&nbsp;<span class="ident" id="1740813">d</span>&nbsp;<span class="op" id="1740815">&amp;&amp;</span>&nbsp;<span class="ident" id="1740818">d</span>&nbsp;<span class="op" id="1740820">&lt;=</span>&nbsp;<span class="string" id="1740823">&#39;9&#39;</span><span class="op" id="1740826">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740831">v</span>&nbsp;<span class="op" id="1740833">=</span>&nbsp;<span class="ident" id="1740835">d</span>&nbsp;<span class="op" id="1740837">-</span>&nbsp;<span class="string" id="1740839">&#39;0&#39;</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740845">case</span>&nbsp;<span class="string" id="1740850">&#39;a&#39;</span>&nbsp;<span class="op" id="1740854">&lt;=</span>&nbsp;<span class="ident" id="1740857">d</span>&nbsp;<span class="op" id="1740859">&amp;&amp;</span>&nbsp;<span class="ident" id="1740862">d</span>&nbsp;<span class="op" id="1740864">&lt;=</span>&nbsp;<span class="string" id="1740867">&#39;z&#39;</span><span class="op" id="1740870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740875">v</span>&nbsp;<span class="op" id="1740877">=</span>&nbsp;<span class="ident" id="1740879">d</span>&nbsp;<span class="op" id="1740881">-</span>&nbsp;<span class="string" id="1740883">&#39;a&#39;</span>&nbsp;<span class="op" id="1740887">+</span>&nbsp;<span class="num" id="1740889">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740894">case</span>&nbsp;<span class="string" id="1740899">&#39;A&#39;</span>&nbsp;<span class="op" id="1740903">&lt;=</span>&nbsp;<span class="ident" id="1740906">d</span>&nbsp;<span class="op" id="1740908">&amp;&amp;</span>&nbsp;<span class="ident" id="1740911">d</span>&nbsp;<span class="op" id="1740913">&lt;=</span>&nbsp;<span class="string" id="1740916">&#39;Z&#39;</span><span class="op" id="1740919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740924">v</span>&nbsp;<span class="op" id="1740926">=</span>&nbsp;<span class="ident" id="1740928">d</span>&nbsp;<span class="op" id="1740930">-</span>&nbsp;<span class="string" id="1740932">&#39;A&#39;</span>&nbsp;<span class="op" id="1740936">+</span>&nbsp;<span class="num" id="1740938">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740943">default</span><span class="op" id="1740950">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740955">n</span>&nbsp;<span class="op" id="1740957">=</span>&nbsp;<span class="num" id="1740959">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740964">err</span>&nbsp;<span class="op" id="1740968">=</span>&nbsp;<span class="ident" id="1740970">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740983">goto</span>&nbsp;<span class="ident" id="1740988">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1740996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741000">if</span>&nbsp;<span class="builtintype" id="1741003">int</span><span class="op" id="1741006">(</span><span class="ident" id="1741007">v</span><span class="op" id="1741008">)</span>&nbsp;<span class="op" id="1741010">&gt;=</span>&nbsp;<span class="ident" id="1741013">base</span>&nbsp;<span class="op" id="1741018">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741023">n</span>&nbsp;<span class="op" id="1741025">=</span>&nbsp;<span class="num" id="1741027">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741032">err</span>&nbsp;<span class="op" id="1741036">=</span>&nbsp;<span class="ident" id="1741038">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741051">goto</span>&nbsp;<span class="ident" id="1741056">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1741064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741069">if</span>&nbsp;<span class="ident" id="1741072">n</span>&nbsp;<span class="op" id="1741074">&gt;=</span>&nbsp;<span class="ident" id="1741077">cutoff</span>&nbsp;<span class="op" id="1741084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1741089">//&nbsp;n*base&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741112">n</span>&nbsp;<span class="op" id="1741114">=</span>&nbsp;<span class="num" id="1741116">1</span><span class="op" id="1741117">&lt;&lt;</span><span class="num" id="1741119">64</span>&nbsp;<span class="op" id="1741122">-</span>&nbsp;<span class="num" id="1741124">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741129">err</span>&nbsp;<span class="op" id="1741133">=</span>&nbsp;<span class="ident" id="1741135">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741147">goto</span>&nbsp;<span class="ident" id="1741152">Error</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1741160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741164">n</span>&nbsp;<span class="op" id="1741166">*=</span>&nbsp;<span class="ident" id="1741169">uint64</span><span class="op" id="1741175">(</span><span class="ident" id="1741176">base</span><span class="op" id="1741180">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741185">n1</span>&nbsp;<span class="op" id="1741188">:=</span>&nbsp;<span class="ident" id="1741191">n</span>&nbsp;<span class="op" id="1741193">+</span>&nbsp;<span class="ident" id="1741195">uint64</span><span class="op" id="1741201">(</span><span class="ident" id="1741202">v</span><span class="op" id="1741203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741207">if</span>&nbsp;<span class="ident" id="1741210">n1</span>&nbsp;<span class="op" id="1741213">&lt;</span>&nbsp;<span class="ident" id="1741215">n</span>&nbsp;<span class="op" id="1741217">||</span>&nbsp;<span class="ident" id="1741220">n1</span>&nbsp;<span class="op" id="1741223">&gt;</span>&nbsp;<span class="ident" id="1741225">maxVal</span>&nbsp;<span class="op" id="1741232">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1741237">//&nbsp;n+v&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741257">n</span>&nbsp;<span class="op" id="1741259">=</span>&nbsp;<span class="num" id="1741261">1</span><span class="op" id="1741262">&lt;&lt;</span><span class="num" id="1741264">64</span>&nbsp;<span class="op" id="1741267">-</span>&nbsp;<span class="num" id="1741269">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741274">err</span>&nbsp;<span class="op" id="1741278">=</span>&nbsp;<span class="ident" id="1741280">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741292">goto</span>&nbsp;<span class="ident" id="1741297">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1741305">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741309">n</span>&nbsp;<span class="op" id="1741311">=</span>&nbsp;<span class="ident" id="1741313">n1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1741317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741321">return</span>&nbsp;<span class="ident" id="1741328">n</span><span class="op" id="1741329">,</span>&nbsp;<span class="ident" id="1741331">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="ident" id="1741336">Error</span><span class="op" id="1741341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741344">return</span>&nbsp;<span class="ident" id="1741351">n</span><span class="op" id="1741352">,</span>&nbsp;<span class="op" id="1741354">&amp;</span><span class="ident" id="1741355">NumError</span><span class="op" id="1741363">{</span><span class="string" id="1741364">&#34;ParseUint&#34;</span><span class="op" id="1741375">,</span>&nbsp;<span class="ident" id="1741377">s0</span><span class="op" id="1741379">,</span>&nbsp;<span class="ident" id="1741381">err</span><span class="op" id="1741384">}</span><br>
<span class="lineno"></span><span class="op" id="1741386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1741389">//&nbsp;ParseInt&nbsp;interprets&nbsp;a&nbsp;string&nbsp;s&nbsp;in&nbsp;the&nbsp;given&nbsp;base&nbsp;(2&nbsp;to&nbsp;36)&nbsp;and</span><br>
<span class="lineno">135</span><span class="comment" id="1741455">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;value&nbsp;i.&nbsp;&nbsp;If&nbsp;base&nbsp;==&nbsp;0,&nbsp;the&nbsp;base&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1741520">//&nbsp;implied&nbsp;by&nbsp;the&nbsp;string&#39;s&nbsp;prefix:&nbsp;base&nbsp;16&nbsp;for&nbsp;&#34;0x&#34;,&nbsp;base&nbsp;8&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="1741584">//&nbsp;&#34;0&#34;,&nbsp;and&nbsp;base&nbsp;10&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="1741615">//</span><br>
<span class="lineno"></span><span class="comment" id="1741618">//&nbsp;The&nbsp;bitSize&nbsp;argument&nbsp;specifies&nbsp;the&nbsp;integer&nbsp;type</span><br>
<span class="lineno">140</span><span class="comment" id="1741669">//&nbsp;that&nbsp;the&nbsp;result&nbsp;must&nbsp;fit&nbsp;into.&nbsp;&nbsp;Bit&nbsp;sizes&nbsp;0,&nbsp;8,&nbsp;16,&nbsp;32,&nbsp;and&nbsp;64</span><br>
<span class="lineno"></span><span class="comment" id="1741735">//&nbsp;correspond&nbsp;to&nbsp;int,&nbsp;int8,&nbsp;int16,&nbsp;int32,&nbsp;and&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="1741788">//</span><br>
<span class="lineno"></span><span class="comment" id="1741791">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseInt&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="1741856">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.&nbsp;&nbsp;If&nbsp;s&nbsp;is&nbsp;empty&nbsp;or&nbsp;contains&nbsp;invalid</span><br>
<span class="lineno">145</span><span class="comment" id="1741919">//&nbsp;digits,&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax&nbsp;and&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;0;</span><br>
<span class="lineno"></span><span class="comment" id="1741979">//&nbsp;if&nbsp;the&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;s&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="1742041">//&nbsp;signed&nbsp;integer&nbsp;of&nbsp;the&nbsp;given&nbsp;size,&nbsp;err.Err&nbsp;=&nbsp;ErrRange&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1742105">//&nbsp;returned&nbsp;value&nbsp;is&nbsp;the&nbsp;maximum&nbsp;magnitude&nbsp;integer&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1742163">//&nbsp;appropriate&nbsp;bitSize&nbsp;and&nbsp;sign.</span><br>
<span class="lineno">150</span><span class="keyword" id="1742196">func</span>&nbsp;<span class="ident" id="1742201">ParseInt</span><span class="op" id="1742209">(</span><span class="ident" id="1742210">s</span>&nbsp;<span class="builtintype" id="1742212">string</span><span class="op" id="1742218">,</span>&nbsp;<span class="ident" id="1742220">base</span>&nbsp;<span class="builtintype" id="1742225">int</span><span class="op" id="1742228">,</span>&nbsp;<span class="ident" id="1742230">bitSize</span>&nbsp;<span class="builtintype" id="1742238">int</span><span class="op" id="1742241">)</span>&nbsp;<span class="op" id="1742243">(</span><span class="ident" id="1742244">i</span>&nbsp;<span class="ident" id="1742246">int64</span><span class="op" id="1742251">,</span>&nbsp;<span class="ident" id="1742253">err</span>&nbsp;<span class="builtintype" id="1742257">error</span><span class="op" id="1742262">)</span>&nbsp;<span class="op" id="1742264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742267">const</span>&nbsp;<span class="ident" id="1742273">fnParseInt</span>&nbsp;<span class="op" id="1742284">=</span>&nbsp;<span class="string" id="1742286">&#34;ParseInt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742299">if</span>&nbsp;<span class="ident" id="1742302">bitSize</span>&nbsp;<span class="op" id="1742310">==</span>&nbsp;<span class="num" id="1742313">0</span>&nbsp;<span class="op" id="1742315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742319">bitSize</span>&nbsp;<span class="op" id="1742327">=</span>&nbsp;<span class="builtintype" id="1742329">int</span><span class="op" id="1742332">(</span><span class="ident" id="1742333">IntSize</span><span class="op" id="1742340">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1742343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1742347">//&nbsp;Empty&nbsp;string&nbsp;bad.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742369">if</span>&nbsp;<span class="builtinfunc" id="1742372">len</span><span class="op" id="1742375">(</span><span class="ident" id="1742376">s</span><span class="op" id="1742377">)</span>&nbsp;<span class="op" id="1742379">==</span>&nbsp;<span class="num" id="1742382">0</span>&nbsp;<span class="op" id="1742384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742388">return</span>&nbsp;<span class="num" id="1742395">0</span><span class="op" id="1742396">,</span>&nbsp;<span class="ident" id="1742398">syntaxError</span><span class="op" id="1742409">(</span><span class="ident" id="1742410">fnParseInt</span><span class="op" id="1742420">,</span>&nbsp;<span class="ident" id="1742422">s</span><span class="op" id="1742423">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1742426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1742430">//&nbsp;Pick&nbsp;off&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742457">s0</span>&nbsp;<span class="op" id="1742460">:=</span>&nbsp;<span class="ident" id="1742463">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742466">neg</span>&nbsp;<span class="op" id="1742470">:=</span>&nbsp;<span class="builtintype" id="1742473">false</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742480">if</span>&nbsp;<span class="ident" id="1742483">s</span><span class="op" id="1742484">[</span><span class="num" id="1742485">0</span><span class="op" id="1742486">]</span>&nbsp;<span class="op" id="1742488">==</span>&nbsp;<span class="string" id="1742491">&#39;+&#39;</span>&nbsp;<span class="op" id="1742495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742499">s</span>&nbsp;<span class="op" id="1742501">=</span>&nbsp;<span class="ident" id="1742503">s</span><span class="op" id="1742504">[</span><span class="num" id="1742505">1</span><span class="op" id="1742506">:</span><span class="op" id="1742507">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1742510">}</span>&nbsp;<span class="keyword" id="1742512">else</span>&nbsp;<span class="keyword" id="1742517">if</span>&nbsp;<span class="ident" id="1742520">s</span><span class="op" id="1742521">[</span><span class="num" id="1742522">0</span><span class="op" id="1742523">]</span>&nbsp;<span class="op" id="1742525">==</span>&nbsp;<span class="string" id="1742528">&#39;-&#39;</span>&nbsp;<span class="op" id="1742532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742536">neg</span>&nbsp;<span class="op" id="1742540">=</span>&nbsp;<span class="builtintype" id="1742542">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742549">s</span>&nbsp;<span class="op" id="1742551">=</span>&nbsp;<span class="ident" id="1742553">s</span><span class="op" id="1742554">[</span><span class="num" id="1742555">1</span><span class="op" id="1742556">:</span><span class="op" id="1742557">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1742560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1742564">//&nbsp;Convert&nbsp;unsigned&nbsp;and&nbsp;check&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742602">var</span>&nbsp;<span class="ident" id="1742606">un</span>&nbsp;<span class="ident" id="1742609">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742617">un</span><span class="op" id="1742619">,</span>&nbsp;<span class="ident" id="1742621">err</span>&nbsp;<span class="op" id="1742625">=</span>&nbsp;<span class="ident" id="1742627">ParseUint</span><span class="op" id="1742636">(</span><span class="ident" id="1742637">s</span><span class="op" id="1742638">,</span>&nbsp;<span class="ident" id="1742640">base</span><span class="op" id="1742644">,</span>&nbsp;<span class="ident" id="1742646">bitSize</span><span class="op" id="1742653">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742656">if</span>&nbsp;<span class="ident" id="1742659">err</span>&nbsp;<span class="op" id="1742663">!=</span>&nbsp;<span class="ident" id="1742666">nil</span>&nbsp;<span class="op" id="1742670">&amp;&amp;</span>&nbsp;<span class="ident" id="1742673">err</span><span class="op" id="1742676">.</span><span class="op" id="1742677">(</span><span class="op" id="1742678">*</span><span class="ident" id="1742679">NumError</span><span class="op" id="1742687">)</span><span class="op" id="1742688">.</span><span class="ident" id="1742689">Err</span>&nbsp;<span class="op" id="1742693">!=</span>&nbsp;<span class="ident" id="1742696">ErrRange</span>&nbsp;<span class="op" id="1742705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742709">err</span><span class="op" id="1742712">.</span><span class="op" id="1742713">(</span><span class="op" id="1742714">*</span><span class="ident" id="1742715">NumError</span><span class="op" id="1742723">)</span><span class="op" id="1742724">.</span><span class="ident" id="1742725">Func</span>&nbsp;<span class="op" id="1742730">=</span>&nbsp;<span class="ident" id="1742732">fnParseInt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742745">err</span><span class="op" id="1742748">.</span><span class="op" id="1742749">(</span><span class="op" id="1742750">*</span><span class="ident" id="1742751">NumError</span><span class="op" id="1742759">)</span><span class="op" id="1742760">.</span><span class="ident" id="1742761">Num</span>&nbsp;<span class="op" id="1742765">=</span>&nbsp;<span class="ident" id="1742767">s0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742772">return</span>&nbsp;<span class="num" id="1742779">0</span><span class="op" id="1742780">,</span>&nbsp;<span class="ident" id="1742782">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1742787">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742790">cutoff</span>&nbsp;<span class="op" id="1742797">:=</span>&nbsp;<span class="ident" id="1742800">uint64</span><span class="op" id="1742806">(</span><span class="num" id="1742807">1</span>&nbsp;<span class="op" id="1742809">&lt;&lt;</span>&nbsp;<span class="builtintype" id="1742812">uint</span><span class="op" id="1742816">(</span><span class="ident" id="1742817">bitSize</span><span class="op" id="1742824">-</span><span class="num" id="1742825">1</span><span class="op" id="1742826">)</span><span class="op" id="1742827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742830">if</span>&nbsp;<span class="op" id="1742833">!</span><span class="ident" id="1742834">neg</span>&nbsp;<span class="op" id="1742838">&amp;&amp;</span>&nbsp;<span class="ident" id="1742841">un</span>&nbsp;<span class="op" id="1742844">&gt;=</span>&nbsp;<span class="ident" id="1742847">cutoff</span>&nbsp;<span class="op" id="1742854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742858">return</span>&nbsp;<span class="ident" id="1742865">int64</span><span class="op" id="1742870">(</span><span class="ident" id="1742871">cutoff</span>&nbsp;<span class="op" id="1742878">-</span>&nbsp;<span class="num" id="1742880">1</span><span class="op" id="1742881">)</span><span class="op" id="1742882">,</span>&nbsp;<span class="ident" id="1742884">rangeError</span><span class="op" id="1742894">(</span><span class="ident" id="1742895">fnParseInt</span><span class="op" id="1742905">,</span>&nbsp;<span class="ident" id="1742907">s0</span><span class="op" id="1742909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1742912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742915">if</span>&nbsp;<span class="ident" id="1742918">neg</span>&nbsp;<span class="op" id="1742922">&amp;&amp;</span>&nbsp;<span class="ident" id="1742925">un</span>&nbsp;<span class="op" id="1742928">&gt;</span>&nbsp;<span class="ident" id="1742930">cutoff</span>&nbsp;<span class="op" id="1742937">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742941">return</span>&nbsp;<span class="op" id="1742948">-</span><span class="ident" id="1742949">int64</span><span class="op" id="1742954">(</span><span class="ident" id="1742955">cutoff</span><span class="op" id="1742961">)</span><span class="op" id="1742962">,</span>&nbsp;<span class="ident" id="1742964">rangeError</span><span class="op" id="1742974">(</span><span class="ident" id="1742975">fnParseInt</span><span class="op" id="1742985">,</span>&nbsp;<span class="ident" id="1742987">s0</span><span class="op" id="1742989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1742992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742995">n</span>&nbsp;<span class="op" id="1742997">:=</span>&nbsp;<span class="ident" id="1743000">int64</span><span class="op" id="1743005">(</span><span class="ident" id="1743006">un</span><span class="op" id="1743008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743011">if</span>&nbsp;<span class="ident" id="1743014">neg</span>&nbsp;<span class="op" id="1743018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743022">n</span>&nbsp;<span class="op" id="1743024">=</span>&nbsp;<span class="op" id="1743026">-</span><span class="ident" id="1743027">n</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743033">return</span>&nbsp;<span class="ident" id="1743040">n</span><span class="op" id="1743041">,</span>&nbsp;<span class="ident" id="1743043">nil</span><br>
<span class="lineno"></span><span class="op" id="1743047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1743050">//&nbsp;Atoi&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;ParseInt(s,&nbsp;10,&nbsp;0).</span><br>
<span class="lineno">195</span><span class="keyword" id="1743095">func</span>&nbsp;<span class="ident" id="1743100">Atoi</span><span class="op" id="1743104">(</span><span class="ident" id="1743105">s</span>&nbsp;<span class="builtintype" id="1743107">string</span><span class="op" id="1743113">)</span>&nbsp;<span class="op" id="1743115">(</span><span class="ident" id="1743116">i</span>&nbsp;<span class="builtintype" id="1743118">int</span><span class="op" id="1743121">,</span>&nbsp;<span class="ident" id="1743123">err</span>&nbsp;<span class="builtintype" id="1743127">error</span><span class="op" id="1743132">)</span>&nbsp;<span class="op" id="1743134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743137">i64</span><span class="op" id="1743140">,</span>&nbsp;<span class="ident" id="1743142">err</span>&nbsp;<span class="op" id="1743146">:=</span>&nbsp;<span class="ident" id="1743149">ParseInt</span><span class="op" id="1743157">(</span><span class="ident" id="1743158">s</span><span class="op" id="1743159">,</span>&nbsp;<span class="num" id="1743161">10</span><span class="op" id="1743163">,</span>&nbsp;<span class="num" id="1743165">0</span><span class="op" id="1743166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743169">return</span>&nbsp;<span class="builtintype" id="1743176">int</span><span class="op" id="1743179">(</span><span class="ident" id="1743180">i64</span><span class="op" id="1743183">)</span><span class="op" id="1743184">,</span>&nbsp;<span class="ident" id="1743186">err</span><br>
<span class="lineno"></span><span class="op" id="1743190">}</span>
</div>
</body>
</html>
