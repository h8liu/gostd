<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7181783">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7181838">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7181892">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7181943">package</span>&nbsp;<span class="ident" id="7181951">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7181956">import</span>&nbsp;<span class="op" id="7181963">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7181966">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7181975">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7181989">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7181996">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7182002">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7182015">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7182021">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7182032">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7182043">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7182054">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7182061">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7182064">type</span>&nbsp;<span class="ident" id="7182069">untarTest</span>&nbsp;<span class="keyword" id="7182079">struct</span>&nbsp;<span class="op" id="7182086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182089">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7182097">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182105">headers</span>&nbsp;<span class="op" id="7182113">[</span><span class="op" id="7182114">]</span><span class="op" id="7182115">*</span><span class="ident" id="7182116">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182124">cksums</span>&nbsp;&nbsp;<span class="op" id="7182132">[</span><span class="op" id="7182133">]</span><span class="builtintype" id="7182134">string</span><br>
<span class="lineno"></span><span class="op" id="7182141">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7182144">var</span>&nbsp;<span class="ident" id="7182148">gnuTarTest</span>&nbsp;<span class="op" id="7182159">=</span>&nbsp;<span class="op" id="7182161">&amp;</span><span class="ident" id="7182162">untarTest</span><span class="op" id="7182171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182174">file</span><span class="op" id="7182178">:</span>&nbsp;<span class="string" id="7182180">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7182198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182201">headers</span><span class="op" id="7182208">:</span>&nbsp;<span class="op" id="7182210">[</span><span class="op" id="7182211">]</span><span class="op" id="7182212">*</span><span class="ident" id="7182213">Header</span><span class="op" id="7182219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7182223">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182228">Name</span><span class="op" id="7182232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7182238">&#34;small.txt&#34;</span><span class="op" id="7182249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182254">Mode</span><span class="op" id="7182258">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182264">0640</span><span class="op" id="7182268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182273">Uid</span><span class="op" id="7182276">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182283">73025</span><span class="op" id="7182288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182293">Gid</span><span class="op" id="7182296">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182303">5000</span><span class="op" id="7182307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182312">Size</span><span class="op" id="7182316">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182322">5</span><span class="op" id="7182323">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182328">ModTime</span><span class="op" id="7182335">:</span>&nbsp;&nbsp;<span class="ident" id="7182338">time</span><span class="op" id="7182342">.</span><span class="ident" id="7182343">Unix</span><span class="op" id="7182347">(</span><span class="num" id="7182348">1244428340</span><span class="op" id="7182358">,</span>&nbsp;<span class="num" id="7182360">0</span><span class="op" id="7182361">)</span><span class="op" id="7182362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182367">Typeflag</span><span class="op" id="7182375">:</span>&nbsp;<span class="string" id="7182377">&#39;0&#39;</span><span class="op" id="7182380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182385">Uname</span><span class="op" id="7182390">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7182395">&#34;dsymonds&#34;</span><span class="op" id="7182405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182410">Gname</span><span class="op" id="7182415">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7182420">&#34;eng&#34;</span><span class="op" id="7182425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7182429">}</span><span class="op" id="7182430">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7182434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182439">Name</span><span class="op" id="7182443">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7182449">&#34;small2.txt&#34;</span><span class="op" id="7182461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182466">Mode</span><span class="op" id="7182470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182476">0640</span><span class="op" id="7182480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182485">Uid</span><span class="op" id="7182488">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182495">73025</span><span class="op" id="7182500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182505">Gid</span><span class="op" id="7182508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182515">5000</span><span class="op" id="7182519">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182524">Size</span><span class="op" id="7182528">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182534">11</span><span class="op" id="7182536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182541">ModTime</span><span class="op" id="7182548">:</span>&nbsp;&nbsp;<span class="ident" id="7182551">time</span><span class="op" id="7182555">.</span><span class="ident" id="7182556">Unix</span><span class="op" id="7182560">(</span><span class="num" id="7182561">1244436044</span><span class="op" id="7182571">,</span>&nbsp;<span class="num" id="7182573">0</span><span class="op" id="7182574">)</span><span class="op" id="7182575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182580">Typeflag</span><span class="op" id="7182588">:</span>&nbsp;<span class="string" id="7182590">&#39;0&#39;</span><span class="op" id="7182593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182598">Uname</span><span class="op" id="7182603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7182608">&#34;dsymonds&#34;</span><span class="op" id="7182618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182623">Gname</span><span class="op" id="7182628">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7182633">&#34;eng&#34;</span><span class="op" id="7182638">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7182642">}</span><span class="op" id="7182643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7182646">}</span><span class="op" id="7182647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182650">cksums</span><span class="op" id="7182656">:</span>&nbsp;<span class="op" id="7182658">[</span><span class="op" id="7182659">]</span><span class="builtintype" id="7182660">string</span><span class="op" id="7182666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7182670">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="7182704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7182708">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="7182742">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7182745">}</span><span class="op" id="7182746">,</span><br>
<span class="lineno"></span><span class="op" id="7182748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7182751">var</span>&nbsp;<span class="ident" id="7182755">sparseTarTest</span>&nbsp;<span class="op" id="7182769">=</span>&nbsp;<span class="op" id="7182771">&amp;</span><span class="ident" id="7182772">untarTest</span><span class="op" id="7182781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182784">file</span><span class="op" id="7182788">:</span>&nbsp;<span class="string" id="7182790">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="7182819">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182822">headers</span><span class="op" id="7182829">:</span>&nbsp;<span class="op" id="7182831">[</span><span class="op" id="7182832">]</span><span class="op" id="7182833">*</span><span class="ident" id="7182834">Header</span><span class="op" id="7182840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7182844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182849">Name</span><span class="op" id="7182853">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7182859">&#34;sparse-gnu&#34;</span><span class="op" id="7182871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182876">Mode</span><span class="op" id="7182880">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182886">420</span><span class="op" id="7182889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182894">Uid</span><span class="op" id="7182897">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182904">1000</span><span class="op" id="7182908">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182913">Gid</span><span class="op" id="7182916">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182923">1000</span><span class="op" id="7182927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182932">Size</span><span class="op" id="7182936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7182942">200</span><span class="op" id="7182945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182950">ModTime</span><span class="op" id="7182957">:</span>&nbsp;&nbsp;<span class="ident" id="7182960">time</span><span class="op" id="7182964">.</span><span class="ident" id="7182965">Unix</span><span class="op" id="7182969">(</span><span class="num" id="7182970">1392395740</span><span class="op" id="7182980">,</span>&nbsp;<span class="num" id="7182982">0</span><span class="op" id="7182983">)</span><span class="op" id="7182984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7182989">Typeflag</span><span class="op" id="7182997">:</span>&nbsp;<span class="num" id="7182999">0x53</span><span class="op" id="7183003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183008">Linkname</span><span class="op" id="7183016">:</span>&nbsp;<span class="string" id="7183018">&#34;&#34;</span><span class="op" id="7183020">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183025">Uname</span><span class="op" id="7183030">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183035">&#34;david&#34;</span><span class="op" id="7183042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183047">Gname</span><span class="op" id="7183052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183057">&#34;david&#34;</span><span class="op" id="7183064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183069">Devmajor</span><span class="op" id="7183077">:</span>&nbsp;<span class="num" id="7183079">0</span><span class="op" id="7183080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183085">Devminor</span><span class="op" id="7183093">:</span>&nbsp;<span class="num" id="7183095">0</span><span class="op" id="7183096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7183100">}</span><span class="op" id="7183101">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7183105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183110">Name</span><span class="op" id="7183114">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183120">&#34;sparse-posix-0.0&#34;</span><span class="op" id="7183138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183143">Mode</span><span class="op" id="7183147">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183153">420</span><span class="op" id="7183156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183161">Uid</span><span class="op" id="7183164">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183171">1000</span><span class="op" id="7183175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183180">Gid</span><span class="op" id="7183183">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183190">1000</span><span class="op" id="7183194">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183199">Size</span><span class="op" id="7183203">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183209">200</span><span class="op" id="7183212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183217">ModTime</span><span class="op" id="7183224">:</span>&nbsp;&nbsp;<span class="ident" id="7183227">time</span><span class="op" id="7183231">.</span><span class="ident" id="7183232">Unix</span><span class="op" id="7183236">(</span><span class="num" id="7183237">1392342187</span><span class="op" id="7183247">,</span>&nbsp;<span class="num" id="7183249">0</span><span class="op" id="7183250">)</span><span class="op" id="7183251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183256">Typeflag</span><span class="op" id="7183264">:</span>&nbsp;<span class="num" id="7183266">0x30</span><span class="op" id="7183270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183275">Linkname</span><span class="op" id="7183283">:</span>&nbsp;<span class="string" id="7183285">&#34;&#34;</span><span class="op" id="7183287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183292">Uname</span><span class="op" id="7183297">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183302">&#34;david&#34;</span><span class="op" id="7183309">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183314">Gname</span><span class="op" id="7183319">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183324">&#34;david&#34;</span><span class="op" id="7183331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183336">Devmajor</span><span class="op" id="7183344">:</span>&nbsp;<span class="num" id="7183346">0</span><span class="op" id="7183347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183352">Devminor</span><span class="op" id="7183360">:</span>&nbsp;<span class="num" id="7183362">0</span><span class="op" id="7183363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7183367">}</span><span class="op" id="7183368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7183372">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183377">Name</span><span class="op" id="7183381">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183387">&#34;sparse-posix-0.1&#34;</span><span class="op" id="7183405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183410">Mode</span><span class="op" id="7183414">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183420">420</span><span class="op" id="7183423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183428">Uid</span><span class="op" id="7183431">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183438">1000</span><span class="op" id="7183442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183447">Gid</span><span class="op" id="7183450">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183457">1000</span><span class="op" id="7183461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183466">Size</span><span class="op" id="7183470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183476">200</span><span class="op" id="7183479">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183484">ModTime</span><span class="op" id="7183491">:</span>&nbsp;&nbsp;<span class="ident" id="7183494">time</span><span class="op" id="7183498">.</span><span class="ident" id="7183499">Unix</span><span class="op" id="7183503">(</span><span class="num" id="7183504">1392340456</span><span class="op" id="7183514">,</span>&nbsp;<span class="num" id="7183516">0</span><span class="op" id="7183517">)</span><span class="op" id="7183518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183523">Typeflag</span><span class="op" id="7183531">:</span>&nbsp;<span class="num" id="7183533">0x30</span><span class="op" id="7183537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183542">Linkname</span><span class="op" id="7183550">:</span>&nbsp;<span class="string" id="7183552">&#34;&#34;</span><span class="op" id="7183554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183559">Uname</span><span class="op" id="7183564">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183569">&#34;david&#34;</span><span class="op" id="7183576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183581">Gname</span><span class="op" id="7183586">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183591">&#34;david&#34;</span><span class="op" id="7183598">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183603">Devmajor</span><span class="op" id="7183611">:</span>&nbsp;<span class="num" id="7183613">0</span><span class="op" id="7183614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183619">Devminor</span><span class="op" id="7183627">:</span>&nbsp;<span class="num" id="7183629">0</span><span class="op" id="7183630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7183634">}</span><span class="op" id="7183635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7183639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183644">Name</span><span class="op" id="7183648">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183654">&#34;sparse-posix-1.0&#34;</span><span class="op" id="7183672">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183677">Mode</span><span class="op" id="7183681">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183687">420</span><span class="op" id="7183690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183695">Uid</span><span class="op" id="7183698">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183705">1000</span><span class="op" id="7183709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183714">Gid</span><span class="op" id="7183717">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183724">1000</span><span class="op" id="7183728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183733">Size</span><span class="op" id="7183737">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183743">200</span><span class="op" id="7183746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183751">ModTime</span><span class="op" id="7183758">:</span>&nbsp;&nbsp;<span class="ident" id="7183761">time</span><span class="op" id="7183765">.</span><span class="ident" id="7183766">Unix</span><span class="op" id="7183770">(</span><span class="num" id="7183771">1392337404</span><span class="op" id="7183781">,</span>&nbsp;<span class="num" id="7183783">0</span><span class="op" id="7183784">)</span><span class="op" id="7183785">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183790">Typeflag</span><span class="op" id="7183798">:</span>&nbsp;<span class="num" id="7183800">0x30</span><span class="op" id="7183804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183809">Linkname</span><span class="op" id="7183817">:</span>&nbsp;<span class="string" id="7183819">&#34;&#34;</span><span class="op" id="7183821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183826">Uname</span><span class="op" id="7183831">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183836">&#34;david&#34;</span><span class="op" id="7183843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183848">Gname</span><span class="op" id="7183853">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183858">&#34;david&#34;</span><span class="op" id="7183865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183870">Devmajor</span><span class="op" id="7183878">:</span>&nbsp;<span class="num" id="7183880">0</span><span class="op" id="7183881">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183886">Devminor</span><span class="op" id="7183894">:</span>&nbsp;<span class="num" id="7183896">0</span><span class="op" id="7183897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7183901">}</span><span class="op" id="7183902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7183906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183911">Name</span><span class="op" id="7183915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7183921">&#34;end&#34;</span><span class="op" id="7183926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183931">Mode</span><span class="op" id="7183935">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183941">420</span><span class="op" id="7183944">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183949">Uid</span><span class="op" id="7183952">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183959">1000</span><span class="op" id="7183963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183968">Gid</span><span class="op" id="7183971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183978">1000</span><span class="op" id="7183982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7183987">Size</span><span class="op" id="7183991">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7183997">4</span><span class="op" id="7183998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184003">ModTime</span><span class="op" id="7184010">:</span>&nbsp;&nbsp;<span class="ident" id="7184013">time</span><span class="op" id="7184017">.</span><span class="ident" id="7184018">Unix</span><span class="op" id="7184022">(</span><span class="num" id="7184023">1392398319</span><span class="op" id="7184033">,</span>&nbsp;<span class="num" id="7184035">0</span><span class="op" id="7184036">)</span><span class="op" id="7184037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184042">Typeflag</span><span class="op" id="7184050">:</span>&nbsp;<span class="num" id="7184052">0x30</span><span class="op" id="7184056">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184061">Linkname</span><span class="op" id="7184069">:</span>&nbsp;<span class="string" id="7184071">&#34;&#34;</span><span class="op" id="7184073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184078">Uname</span><span class="op" id="7184083">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7184088">&#34;david&#34;</span><span class="op" id="7184095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184100">Gname</span><span class="op" id="7184105">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7184110">&#34;david&#34;</span><span class="op" id="7184117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184122">Devmajor</span><span class="op" id="7184130">:</span>&nbsp;<span class="num" id="7184132">0</span><span class="op" id="7184133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184138">Devminor</span><span class="op" id="7184146">:</span>&nbsp;<span class="num" id="7184148">0</span><span class="op" id="7184149">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7184153">}</span><span class="op" id="7184154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7184157">}</span><span class="op" id="7184158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184161">cksums</span><span class="op" id="7184167">:</span>&nbsp;<span class="op" id="7184169">[</span><span class="op" id="7184170">]</span><span class="builtintype" id="7184171">string</span><span class="op" id="7184177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7184181">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7184215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7184219">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7184253">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7184257">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7184291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7184295">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7184329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7184333">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="7184367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7184370">}</span><span class="op" id="7184371">,</span><br>
<span class="lineno"></span><span class="op" id="7184373">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7184376">var</span>&nbsp;<span class="ident" id="7184380">untarTests</span>&nbsp;<span class="op" id="7184391">=</span>&nbsp;<span class="op" id="7184393">[</span><span class="op" id="7184394">]</span><span class="op" id="7184395">*</span><span class="ident" id="7184396">untarTest</span><span class="op" id="7184405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184408">gnuTarTest</span><span class="op" id="7184418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184421">sparseTarTest</span><span class="op" id="7184434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7184437">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184441">file</span><span class="op" id="7184445">:</span>&nbsp;<span class="string" id="7184447">&#34;testdata/star.tar&#34;</span><span class="op" id="7184466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184470">headers</span><span class="op" id="7184477">:</span>&nbsp;<span class="op" id="7184479">[</span><span class="op" id="7184480">]</span><span class="op" id="7184481">*</span><span class="ident" id="7184482">Header</span><span class="op" id="7184488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7184493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184499">Name</span><span class="op" id="7184503">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7184511">&#34;small.txt&#34;</span><span class="op" id="7184522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184528">Mode</span><span class="op" id="7184532">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7184540">0640</span><span class="op" id="7184544">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184550">Uid</span><span class="op" id="7184553">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7184562">73025</span><span class="op" id="7184567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184573">Gid</span><span class="op" id="7184576">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7184585">5000</span><span class="op" id="7184589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184595">Size</span><span class="op" id="7184599">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7184607">5</span><span class="op" id="7184608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184614">ModTime</span><span class="op" id="7184621">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184626">time</span><span class="op" id="7184630">.</span><span class="ident" id="7184631">Unix</span><span class="op" id="7184635">(</span><span class="num" id="7184636">1244592783</span><span class="op" id="7184646">,</span>&nbsp;<span class="num" id="7184648">0</span><span class="op" id="7184649">)</span><span class="op" id="7184650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184656">Typeflag</span><span class="op" id="7184664">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7184668">&#39;0&#39;</span><span class="op" id="7184671">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184677">Uname</span><span class="op" id="7184682">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7184689">&#34;dsymonds&#34;</span><span class="op" id="7184699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184705">Gname</span><span class="op" id="7184710">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7184717">&#34;eng&#34;</span><span class="op" id="7184722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184728">AccessTime</span><span class="op" id="7184738">:</span>&nbsp;<span class="ident" id="7184740">time</span><span class="op" id="7184744">.</span><span class="ident" id="7184745">Unix</span><span class="op" id="7184749">(</span><span class="num" id="7184750">1244592783</span><span class="op" id="7184760">,</span>&nbsp;<span class="num" id="7184762">0</span><span class="op" id="7184763">)</span><span class="op" id="7184764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184770">ChangeTime</span><span class="op" id="7184780">:</span>&nbsp;<span class="ident" id="7184782">time</span><span class="op" id="7184786">.</span><span class="ident" id="7184787">Unix</span><span class="op" id="7184791">(</span><span class="num" id="7184792">1244592783</span><span class="op" id="7184802">,</span>&nbsp;<span class="num" id="7184804">0</span><span class="op" id="7184805">)</span><span class="op" id="7184806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7184811">}</span><span class="op" id="7184812">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7184817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184823">Name</span><span class="op" id="7184827">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7184835">&#34;small2.txt&#34;</span><span class="op" id="7184847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184853">Mode</span><span class="op" id="7184857">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7184865">0640</span><span class="op" id="7184869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184875">Uid</span><span class="op" id="7184878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7184887">73025</span><span class="op" id="7184892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184898">Gid</span><span class="op" id="7184901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7184910">5000</span><span class="op" id="7184914">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184920">Size</span><span class="op" id="7184924">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7184932">11</span><span class="op" id="7184934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184940">ModTime</span><span class="op" id="7184947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7184952">time</span><span class="op" id="7184956">.</span><span class="ident" id="7184957">Unix</span><span class="op" id="7184961">(</span><span class="num" id="7184962">1244592783</span><span class="op" id="7184972">,</span>&nbsp;<span class="num" id="7184974">0</span><span class="op" id="7184975">)</span><span class="op" id="7184976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7184982">Typeflag</span><span class="op" id="7184990">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7184994">&#39;0&#39;</span><span class="op" id="7184997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185003">Uname</span><span class="op" id="7185008">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7185015">&#34;dsymonds&#34;</span><span class="op" id="7185025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185031">Gname</span><span class="op" id="7185036">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7185043">&#34;eng&#34;</span><span class="op" id="7185048">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185054">AccessTime</span><span class="op" id="7185064">:</span>&nbsp;<span class="ident" id="7185066">time</span><span class="op" id="7185070">.</span><span class="ident" id="7185071">Unix</span><span class="op" id="7185075">(</span><span class="num" id="7185076">1244592783</span><span class="op" id="7185086">,</span>&nbsp;<span class="num" id="7185088">0</span><span class="op" id="7185089">)</span><span class="op" id="7185090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185096">ChangeTime</span><span class="op" id="7185106">:</span>&nbsp;<span class="ident" id="7185108">time</span><span class="op" id="7185112">.</span><span class="ident" id="7185113">Unix</span><span class="op" id="7185117">(</span><span class="num" id="7185118">1244592783</span><span class="op" id="7185128">,</span>&nbsp;<span class="num" id="7185130">0</span><span class="op" id="7185131">)</span><span class="op" id="7185132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185137">}</span><span class="op" id="7185138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185142">}</span><span class="op" id="7185143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185146">}</span><span class="op" id="7185147">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185154">file</span><span class="op" id="7185158">:</span>&nbsp;<span class="string" id="7185160">&#34;testdata/v7.tar&#34;</span><span class="op" id="7185177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185181">headers</span><span class="op" id="7185188">:</span>&nbsp;<span class="op" id="7185190">[</span><span class="op" id="7185191">]</span><span class="op" id="7185192">*</span><span class="ident" id="7185193">Header</span><span class="op" id="7185199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185210">Name</span><span class="op" id="7185214">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7185220">&#34;small.txt&#34;</span><span class="op" id="7185231">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185237">Mode</span><span class="op" id="7185241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185247">0444</span><span class="op" id="7185251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185257">Uid</span><span class="op" id="7185260">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185267">73025</span><span class="op" id="7185272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185278">Gid</span><span class="op" id="7185281">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185288">5000</span><span class="op" id="7185292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185298">Size</span><span class="op" id="7185302">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185308">5</span><span class="op" id="7185309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185315">ModTime</span><span class="op" id="7185322">:</span>&nbsp;&nbsp;<span class="ident" id="7185325">time</span><span class="op" id="7185329">.</span><span class="ident" id="7185330">Unix</span><span class="op" id="7185334">(</span><span class="num" id="7185335">1244593104</span><span class="op" id="7185345">,</span>&nbsp;<span class="num" id="7185347">0</span><span class="op" id="7185348">)</span><span class="op" id="7185349">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185355">Typeflag</span><span class="op" id="7185363">:</span>&nbsp;<span class="string" id="7185365">&#39;\x00&#39;</span><span class="op" id="7185371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185376">}</span><span class="op" id="7185377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185388">Name</span><span class="op" id="7185392">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7185398">&#34;small2.txt&#34;</span><span class="op" id="7185410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185416">Mode</span><span class="op" id="7185420">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185426">0444</span><span class="op" id="7185430">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185436">Uid</span><span class="op" id="7185439">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185446">73025</span><span class="op" id="7185451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185457">Gid</span><span class="op" id="7185460">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185467">5000</span><span class="op" id="7185471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185477">Size</span><span class="op" id="7185481">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185487">11</span><span class="op" id="7185489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185495">ModTime</span><span class="op" id="7185502">:</span>&nbsp;&nbsp;<span class="ident" id="7185505">time</span><span class="op" id="7185509">.</span><span class="ident" id="7185510">Unix</span><span class="op" id="7185514">(</span><span class="num" id="7185515">1244593104</span><span class="op" id="7185525">,</span>&nbsp;<span class="num" id="7185527">0</span><span class="op" id="7185528">)</span><span class="op" id="7185529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185535">Typeflag</span><span class="op" id="7185543">:</span>&nbsp;<span class="string" id="7185545">&#39;\x00&#39;</span><span class="op" id="7185551">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185556">}</span><span class="op" id="7185557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185561">}</span><span class="op" id="7185562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185565">}</span><span class="op" id="7185566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185573">file</span><span class="op" id="7185577">:</span>&nbsp;<span class="string" id="7185579">&#34;testdata/pax.tar&#34;</span><span class="op" id="7185597">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185601">headers</span><span class="op" id="7185608">:</span>&nbsp;<span class="op" id="7185610">[</span><span class="op" id="7185611">]</span><span class="op" id="7185612">*</span><span class="ident" id="7185613">Header</span><span class="op" id="7185619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7185624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185630">Name</span><span class="op" id="7185634">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7185642">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7185838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185844">Mode</span><span class="op" id="7185848">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185856">0664</span><span class="op" id="7185860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185866">Uid</span><span class="op" id="7185869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185878">1000</span><span class="op" id="7185882">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185888">Gid</span><span class="op" id="7185891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185900">1000</span><span class="op" id="7185904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185910">Uname</span><span class="op" id="7185915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7185922">&#34;shane&#34;</span><span class="op" id="7185929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185935">Gname</span><span class="op" id="7185940">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7185947">&#34;shane&#34;</span><span class="op" id="7185954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185960">Size</span><span class="op" id="7185964">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7185972">7</span><span class="op" id="7185973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7185979">ModTime</span><span class="op" id="7185986">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7185991">time</span><span class="op" id="7185995">.</span><span class="ident" id="7185996">Unix</span><span class="op" id="7186000">(</span><span class="num" id="7186001">1350244992</span><span class="op" id="7186011">,</span>&nbsp;<span class="num" id="7186013">23960108</span><span class="op" id="7186021">)</span><span class="op" id="7186022">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186028">ChangeTime</span><span class="op" id="7186038">:</span>&nbsp;<span class="ident" id="7186040">time</span><span class="op" id="7186044">.</span><span class="ident" id="7186045">Unix</span><span class="op" id="7186049">(</span><span class="num" id="7186050">1350244992</span><span class="op" id="7186060">,</span>&nbsp;<span class="num" id="7186062">23960108</span><span class="op" id="7186070">)</span><span class="op" id="7186071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186077">AccessTime</span><span class="op" id="7186087">:</span>&nbsp;<span class="ident" id="7186089">time</span><span class="op" id="7186093">.</span><span class="ident" id="7186094">Unix</span><span class="op" id="7186098">(</span><span class="num" id="7186099">1350244992</span><span class="op" id="7186109">,</span>&nbsp;<span class="num" id="7186111">23960108</span><span class="op" id="7186119">)</span><span class="op" id="7186120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186126">Typeflag</span><span class="op" id="7186134">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7186138">TypeReg</span><span class="op" id="7186145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186150">}</span><span class="op" id="7186151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186156">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186162">Name</span><span class="op" id="7186166">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186174">&#34;a/b&#34;</span><span class="op" id="7186179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186185">Mode</span><span class="op" id="7186189">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7186197">0777</span><span class="op" id="7186201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186207">Uid</span><span class="op" id="7186210">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7186219">1000</span><span class="op" id="7186223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186229">Gid</span><span class="op" id="7186232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7186241">1000</span><span class="op" id="7186245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186251">Uname</span><span class="op" id="7186256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186263">&#34;shane&#34;</span><span class="op" id="7186270">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186276">Gname</span><span class="op" id="7186281">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186288">&#34;shane&#34;</span><span class="op" id="7186295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186301">Size</span><span class="op" id="7186305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7186313">0</span><span class="op" id="7186314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186320">ModTime</span><span class="op" id="7186327">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186332">time</span><span class="op" id="7186336">.</span><span class="ident" id="7186337">Unix</span><span class="op" id="7186341">(</span><span class="num" id="7186342">1350266320</span><span class="op" id="7186352">,</span>&nbsp;<span class="num" id="7186354">910238425</span><span class="op" id="7186363">)</span><span class="op" id="7186364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186370">ChangeTime</span><span class="op" id="7186380">:</span>&nbsp;<span class="ident" id="7186382">time</span><span class="op" id="7186386">.</span><span class="ident" id="7186387">Unix</span><span class="op" id="7186391">(</span><span class="num" id="7186392">1350266320</span><span class="op" id="7186402">,</span>&nbsp;<span class="num" id="7186404">910238425</span><span class="op" id="7186413">)</span><span class="op" id="7186414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186420">AccessTime</span><span class="op" id="7186430">:</span>&nbsp;<span class="ident" id="7186432">time</span><span class="op" id="7186436">.</span><span class="ident" id="7186437">Unix</span><span class="op" id="7186441">(</span><span class="num" id="7186442">1350266320</span><span class="op" id="7186452">,</span>&nbsp;<span class="num" id="7186454">910238425</span><span class="op" id="7186463">)</span><span class="op" id="7186464">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186470">Typeflag</span><span class="op" id="7186478">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7186482">TypeSymlink</span><span class="op" id="7186493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186499">Linkname</span><span class="op" id="7186507">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7186511">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7186705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186710">}</span><span class="op" id="7186711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186715">}</span><span class="op" id="7186716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186719">}</span><span class="op" id="7186720">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186727">file</span><span class="op" id="7186731">:</span>&nbsp;<span class="string" id="7186733">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="7186755">,</span>&nbsp;<span class="comment" id="7186757">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186784">headers</span><span class="op" id="7186791">:</span>&nbsp;<span class="op" id="7186793">[</span><span class="op" id="7186794">]</span><span class="op" id="7186795">*</span><span class="ident" id="7186796">Header</span><span class="op" id="7186802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7186807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186813">Name</span><span class="op" id="7186817">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186823">&#34;P1050238.JPG.log&#34;</span><span class="op" id="7186841">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186847">Mode</span><span class="op" id="7186851">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7186857">0664</span><span class="op" id="7186861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186867">Uid</span><span class="op" id="7186870">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7186877">0</span><span class="op" id="7186878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186884">Gid</span><span class="op" id="7186887">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7186894">0</span><span class="op" id="7186895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186901">Size</span><span class="op" id="7186905">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7186911">14</span><span class="op" id="7186913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186919">ModTime</span><span class="op" id="7186926">:</span>&nbsp;&nbsp;<span class="ident" id="7186929">time</span><span class="op" id="7186933">.</span><span class="ident" id="7186934">Unix</span><span class="op" id="7186938">(</span><span class="num" id="7186939">1365454838</span><span class="op" id="7186949">,</span>&nbsp;<span class="num" id="7186951">0</span><span class="op" id="7186952">)</span><span class="op" id="7186953">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186959">Typeflag</span><span class="op" id="7186967">:</span>&nbsp;<span class="ident" id="7186969">TypeReg</span><span class="op" id="7186976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7186982">Linkname</span><span class="op" id="7186990">:</span>&nbsp;<span class="string" id="7186992">&#34;&#34;</span><span class="op" id="7186994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187000">Uname</span><span class="op" id="7187005">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187010">&#34;eyefi&#34;</span><span class="op" id="7187017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187023">Gname</span><span class="op" id="7187028">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187033">&#34;eyefi&#34;</span><span class="op" id="7187040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187046">Devmajor</span><span class="op" id="7187054">:</span>&nbsp;<span class="num" id="7187056">0</span><span class="op" id="7187057">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187063">Devminor</span><span class="op" id="7187071">:</span>&nbsp;<span class="num" id="7187073">0</span><span class="op" id="7187074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187079">}</span><span class="op" id="7187080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187084">}</span><span class="op" id="7187085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187088">}</span><span class="op" id="7187089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187092">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187096">file</span><span class="op" id="7187100">:</span>&nbsp;<span class="string" id="7187102">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="7187123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187127">headers</span><span class="op" id="7187134">:</span>&nbsp;<span class="op" id="7187136">[</span><span class="op" id="7187137">]</span><span class="op" id="7187138">*</span><span class="ident" id="7187139">Header</span><span class="op" id="7187145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187156">Name</span><span class="op" id="7187160">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187168">&#34;small.txt&#34;</span><span class="op" id="7187179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187185">Mode</span><span class="op" id="7187189">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7187197">0644</span><span class="op" id="7187201">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187207">Uid</span><span class="op" id="7187210">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7187219">1000</span><span class="op" id="7187223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187229">Gid</span><span class="op" id="7187232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7187241">10</span><span class="op" id="7187243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187249">Size</span><span class="op" id="7187253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7187261">5</span><span class="op" id="7187262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187268">ModTime</span><span class="op" id="7187275">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187280">time</span><span class="op" id="7187284">.</span><span class="ident" id="7187285">Unix</span><span class="op" id="7187289">(</span><span class="num" id="7187290">1386065770</span><span class="op" id="7187300">,</span>&nbsp;<span class="num" id="7187302">448252320</span><span class="op" id="7187311">)</span><span class="op" id="7187312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187318">Typeflag</span><span class="op" id="7187326">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7187330">&#39;0&#39;</span><span class="op" id="7187333">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187339">Uname</span><span class="op" id="7187344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187351">&#34;alex&#34;</span><span class="op" id="7187357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187363">Gname</span><span class="op" id="7187368">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187375">&#34;wheel&#34;</span><span class="op" id="7187382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187388">AccessTime</span><span class="op" id="7187398">:</span>&nbsp;<span class="ident" id="7187400">time</span><span class="op" id="7187404">.</span><span class="ident" id="7187405">Unix</span><span class="op" id="7187409">(</span><span class="num" id="7187410">1389782991</span><span class="op" id="7187420">,</span>&nbsp;<span class="num" id="7187422">419875220</span><span class="op" id="7187431">)</span><span class="op" id="7187432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187438">ChangeTime</span><span class="op" id="7187448">:</span>&nbsp;<span class="ident" id="7187450">time</span><span class="op" id="7187454">.</span><span class="ident" id="7187455">Unix</span><span class="op" id="7187459">(</span><span class="num" id="7187460">1389782956</span><span class="op" id="7187470">,</span>&nbsp;<span class="num" id="7187472">794414986</span><span class="op" id="7187481">)</span><span class="op" id="7187482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187488">Xattrs</span><span class="op" id="7187494">:</span>&nbsp;<span class="keyword" id="7187496">map</span><span class="op" id="7187499">[</span><span class="builtintype" id="7187500">string</span><span class="op" id="7187506">]</span><span class="builtintype" id="7187507">string</span><span class="op" id="7187513">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7187520">&#34;user.key&#34;</span><span class="op" id="7187530">:</span>&nbsp;&nbsp;<span class="string" id="7187533">&#34;value&#34;</span><span class="op" id="7187540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7187547">&#34;user.key2&#34;</span><span class="op" id="7187558">:</span>&nbsp;<span class="string" id="7187560">&#34;value2&#34;</span><span class="op" id="7187568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7187575">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7187652">&#34;security.selinux&#34;</span><span class="op" id="7187670">:</span>&nbsp;<span class="string" id="7187672">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7187712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187718">}</span><span class="op" id="7187719">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187724">}</span><span class="op" id="7187725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7187730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187736">Name</span><span class="op" id="7187740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187748">&#34;small2.txt&#34;</span><span class="op" id="7187760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187766">Mode</span><span class="op" id="7187770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7187778">0644</span><span class="op" id="7187782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187788">Uid</span><span class="op" id="7187791">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7187800">1000</span><span class="op" id="7187804">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187810">Gid</span><span class="op" id="7187813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7187822">10</span><span class="op" id="7187824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187830">Size</span><span class="op" id="7187834">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7187842">11</span><span class="op" id="7187844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187850">ModTime</span><span class="op" id="7187857">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187862">time</span><span class="op" id="7187866">.</span><span class="ident" id="7187867">Unix</span><span class="op" id="7187871">(</span><span class="num" id="7187872">1386065770</span><span class="op" id="7187882">,</span>&nbsp;<span class="num" id="7187884">449252304</span><span class="op" id="7187893">)</span><span class="op" id="7187894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187900">Typeflag</span><span class="op" id="7187908">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7187912">&#39;0&#39;</span><span class="op" id="7187915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187921">Uname</span><span class="op" id="7187926">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187933">&#34;alex&#34;</span><span class="op" id="7187939">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187945">Gname</span><span class="op" id="7187950">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187957">&#34;wheel&#34;</span><span class="op" id="7187964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7187970">AccessTime</span><span class="op" id="7187980">:</span>&nbsp;<span class="ident" id="7187982">time</span><span class="op" id="7187986">.</span><span class="ident" id="7187987">Unix</span><span class="op" id="7187991">(</span><span class="num" id="7187992">1389782991</span><span class="op" id="7188002">,</span>&nbsp;<span class="num" id="7188004">419875220</span><span class="op" id="7188013">)</span><span class="op" id="7188014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188020">ChangeTime</span><span class="op" id="7188030">:</span>&nbsp;<span class="ident" id="7188032">time</span><span class="op" id="7188036">.</span><span class="ident" id="7188037">Unix</span><span class="op" id="7188041">(</span><span class="num" id="7188042">1386065770</span><span class="op" id="7188052">,</span>&nbsp;<span class="num" id="7188054">449252304</span><span class="op" id="7188063">)</span><span class="op" id="7188064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188070">Xattrs</span><span class="op" id="7188076">:</span>&nbsp;<span class="keyword" id="7188078">map</span><span class="op" id="7188081">[</span><span class="builtintype" id="7188082">string</span><span class="op" id="7188088">]</span><span class="builtintype" id="7188089">string</span><span class="op" id="7188095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7188102">&#34;security.selinux&#34;</span><span class="op" id="7188120">:</span>&nbsp;<span class="string" id="7188122">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7188162">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188168">}</span><span class="op" id="7188169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188174">}</span><span class="op" id="7188175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188179">}</span><span class="op" id="7188180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188183">}</span><span class="op" id="7188184">,</span><br>
<span class="lineno"></span><span class="op" id="7188186">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="7188189">func</span>&nbsp;<span class="ident" id="7188194">TestReader</span><span class="op" id="7188204">(</span><span class="ident" id="7188205">t</span>&nbsp;<span class="op" id="7188207">*</span><span class="ident" id="7188208">testing</span><span class="op" id="7188215">.</span><span class="ident" id="7188216">T</span><span class="op" id="7188217">)</span>&nbsp;<span class="op" id="7188219">{</span><br>
<span class="lineno"></span><span class="ident" id="7188221">testLoop</span><span class="op" id="7188229">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188232">for</span>&nbsp;<span class="ident" id="7188236">i</span><span class="op" id="7188237">,</span>&nbsp;<span class="ident" id="7188239">test</span>&nbsp;<span class="op" id="7188244">:=</span>&nbsp;<span class="keyword" id="7188247">range</span>&nbsp;<span class="ident" id="7188253">untarTests</span>&nbsp;<span class="op" id="7188264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188268">f</span><span class="op" id="7188269">,</span>&nbsp;<span class="ident" id="7188271">err</span>&nbsp;<span class="op" id="7188275">:=</span>&nbsp;<span class="ident" id="7188278">os</span><span class="op" id="7188280">.</span><span class="ident" id="7188281">Open</span><span class="op" id="7188285">(</span><span class="ident" id="7188286">test</span><span class="op" id="7188290">.</span><span class="ident" id="7188291">file</span><span class="op" id="7188295">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188299">if</span>&nbsp;<span class="ident" id="7188302">err</span>&nbsp;<span class="op" id="7188306">!=</span>&nbsp;<span class="ident" id="7188309">nil</span>&nbsp;<span class="op" id="7188313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188318">t</span><span class="op" id="7188319">.</span><span class="ident" id="7188320">Errorf</span><span class="op" id="7188326">(</span><span class="string" id="7188327">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7188358">,</span>&nbsp;<span class="ident" id="7188360">i</span><span class="op" id="7188361">,</span>&nbsp;<span class="ident" id="7188363">err</span><span class="op" id="7188366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188371">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188386">defer</span>&nbsp;<span class="ident" id="7188392">f</span><span class="op" id="7188393">.</span><span class="ident" id="7188394">Close</span><span class="op" id="7188399">(</span><span class="op" id="7188400">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188404">tr</span>&nbsp;<span class="op" id="7188407">:=</span>&nbsp;<span class="ident" id="7188410">NewReader</span><span class="op" id="7188419">(</span><span class="ident" id="7188420">f</span><span class="op" id="7188421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188425">for</span>&nbsp;<span class="ident" id="7188429">j</span><span class="op" id="7188430">,</span>&nbsp;<span class="ident" id="7188432">header</span>&nbsp;<span class="op" id="7188439">:=</span>&nbsp;<span class="keyword" id="7188442">range</span>&nbsp;<span class="ident" id="7188448">test</span><span class="op" id="7188452">.</span><span class="ident" id="7188453">headers</span>&nbsp;<span class="op" id="7188461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188466">hdr</span><span class="op" id="7188469">,</span>&nbsp;<span class="ident" id="7188471">err</span>&nbsp;<span class="op" id="7188475">:=</span>&nbsp;<span class="ident" id="7188478">tr</span><span class="op" id="7188480">.</span><span class="ident" id="7188481">Next</span><span class="op" id="7188485">(</span><span class="op" id="7188486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188491">if</span>&nbsp;<span class="ident" id="7188494">err</span>&nbsp;<span class="op" id="7188498">!=</span>&nbsp;<span class="ident" id="7188501">nil</span>&nbsp;<span class="op" id="7188505">||</span>&nbsp;<span class="ident" id="7188508">hdr</span>&nbsp;<span class="op" id="7188512">==</span>&nbsp;<span class="ident" id="7188515">nil</span>&nbsp;<span class="op" id="7188519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188525">t</span><span class="op" id="7188526">.</span><span class="ident" id="7188527">Errorf</span><span class="op" id="7188533">(</span><span class="string" id="7188534">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="7188575">,</span>&nbsp;<span class="ident" id="7188577">i</span><span class="op" id="7188578">,</span>&nbsp;<span class="ident" id="7188580">j</span><span class="op" id="7188581">,</span>&nbsp;<span class="ident" id="7188583">err</span><span class="op" id="7188586">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188592">f</span><span class="op" id="7188593">.</span><span class="ident" id="7188594">Close</span><span class="op" id="7188599">(</span><span class="op" id="7188600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188606">continue</span>&nbsp;<span class="ident" id="7188615">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188632">if</span>&nbsp;<span class="op" id="7188635">!</span><span class="ident" id="7188636">reflect</span><span class="op" id="7188643">.</span><span class="ident" id="7188644">DeepEqual</span><span class="op" id="7188653">(</span><span class="op" id="7188654">*</span><span class="ident" id="7188655">hdr</span><span class="op" id="7188658">,</span>&nbsp;<span class="op" id="7188660">*</span><span class="ident" id="7188661">header</span><span class="op" id="7188667">)</span>&nbsp;<span class="op" id="7188669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188675">t</span><span class="op" id="7188676">.</span><span class="ident" id="7188677">Errorf</span><span class="op" id="7188683">(</span><span class="string" id="7188684">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7188742">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188749">i</span><span class="op" id="7188750">,</span>&nbsp;<span class="ident" id="7188752">j</span><span class="op" id="7188753">,</span>&nbsp;<span class="op" id="7188755">*</span><span class="ident" id="7188756">hdr</span><span class="op" id="7188759">,</span>&nbsp;<span class="op" id="7188761">*</span><span class="ident" id="7188762">header</span><span class="op" id="7188768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188781">hdr</span><span class="op" id="7188784">,</span>&nbsp;<span class="ident" id="7188786">err</span>&nbsp;<span class="op" id="7188790">:=</span>&nbsp;<span class="ident" id="7188793">tr</span><span class="op" id="7188795">.</span><span class="ident" id="7188796">Next</span><span class="op" id="7188800">(</span><span class="op" id="7188801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188805">if</span>&nbsp;<span class="ident" id="7188808">err</span>&nbsp;<span class="op" id="7188812">==</span>&nbsp;<span class="ident" id="7188815">io</span><span class="op" id="7188817">.</span><span class="ident" id="7188818">EOF</span>&nbsp;<span class="op" id="7188822">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188827">continue</span>&nbsp;<span class="ident" id="7188836">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7188851">if</span>&nbsp;<span class="ident" id="7188854">hdr</span>&nbsp;<span class="op" id="7188858">!=</span>&nbsp;<span class="ident" id="7188861">nil</span>&nbsp;<span class="op" id="7188865">||</span>&nbsp;<span class="ident" id="7188868">err</span>&nbsp;<span class="op" id="7188872">!=</span>&nbsp;<span class="ident" id="7188875">nil</span>&nbsp;<span class="op" id="7188879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7188884">t</span><span class="op" id="7188885">.</span><span class="ident" id="7188886">Errorf</span><span class="op" id="7188892">(</span><span class="string" id="7188893">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="7188944">,</span>&nbsp;<span class="ident" id="7188946">i</span><span class="op" id="7188947">,</span>&nbsp;<span class="ident" id="7188949">hdr</span><span class="op" id="7188952">,</span>&nbsp;<span class="ident" id="7188954">err</span><span class="op" id="7188957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188961">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7188964">}</span><br>
<span class="lineno"></span><span class="op" id="7188966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7188969">func</span>&nbsp;<span class="ident" id="7188974">TestPartialRead</span><span class="op" id="7188989">(</span><span class="ident" id="7188990">t</span>&nbsp;<span class="op" id="7188992">*</span><span class="ident" id="7188993">testing</span><span class="op" id="7189000">.</span><span class="ident" id="7189001">T</span><span class="op" id="7189002">)</span>&nbsp;<span class="op" id="7189004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189007">f</span><span class="op" id="7189008">,</span>&nbsp;<span class="ident" id="7189010">err</span>&nbsp;<span class="op" id="7189014">:=</span>&nbsp;<span class="ident" id="7189017">os</span><span class="op" id="7189019">.</span><span class="ident" id="7189020">Open</span><span class="op" id="7189024">(</span><span class="string" id="7189025">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7189043">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7189046">if</span>&nbsp;<span class="ident" id="7189049">err</span>&nbsp;<span class="op" id="7189053">!=</span>&nbsp;<span class="ident" id="7189056">nil</span>&nbsp;<span class="op" id="7189060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189064">t</span><span class="op" id="7189065">.</span><span class="ident" id="7189066">Fatalf</span><span class="op" id="7189072">(</span><span class="string" id="7189073">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7189095">,</span>&nbsp;<span class="ident" id="7189097">err</span><span class="op" id="7189100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7189103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7189106">defer</span>&nbsp;<span class="ident" id="7189112">f</span><span class="op" id="7189113">.</span><span class="ident" id="7189114">Close</span><span class="op" id="7189119">(</span><span class="op" id="7189120">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189124">tr</span>&nbsp;<span class="op" id="7189127">:=</span>&nbsp;<span class="ident" id="7189130">NewReader</span><span class="op" id="7189139">(</span><span class="ident" id="7189140">f</span><span class="op" id="7189141">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7189145">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189210">hdr</span><span class="op" id="7189213">,</span>&nbsp;<span class="ident" id="7189215">err</span>&nbsp;<span class="op" id="7189219">:=</span>&nbsp;<span class="ident" id="7189222">tr</span><span class="op" id="7189224">.</span><span class="ident" id="7189225">Next</span><span class="op" id="7189229">(</span><span class="op" id="7189230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7189233">if</span>&nbsp;<span class="ident" id="7189236">err</span>&nbsp;<span class="op" id="7189240">!=</span>&nbsp;<span class="ident" id="7189243">nil</span>&nbsp;<span class="op" id="7189247">||</span>&nbsp;<span class="ident" id="7189250">hdr</span>&nbsp;<span class="op" id="7189254">==</span>&nbsp;<span class="ident" id="7189257">nil</span>&nbsp;<span class="op" id="7189261">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189265">t</span><span class="op" id="7189266">.</span><span class="ident" id="7189267">Fatalf</span><span class="op" id="7189273">(</span><span class="string" id="7189274">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7189301">,</span>&nbsp;<span class="ident" id="7189303">err</span><span class="op" id="7189306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7189309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189312">buf</span>&nbsp;<span class="op" id="7189316">:=</span>&nbsp;<span class="builtinfunc" id="7189319">make</span><span class="op" id="7189323">(</span><span class="op" id="7189324">[</span><span class="op" id="7189325">]</span><span class="builtintype" id="7189326">byte</span><span class="op" id="7189330">,</span>&nbsp;<span class="num" id="7189332">4</span><span class="op" id="7189333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7189336">if</span>&nbsp;<span class="ident" id="7189339">_</span><span class="op" id="7189340">,</span>&nbsp;<span class="ident" id="7189342">err</span>&nbsp;<span class="op" id="7189346">:=</span>&nbsp;<span class="ident" id="7189349">io</span><span class="op" id="7189351">.</span><span class="ident" id="7189352">ReadFull</span><span class="op" id="7189360">(</span><span class="ident" id="7189361">tr</span><span class="op" id="7189363">,</span>&nbsp;<span class="ident" id="7189365">buf</span><span class="op" id="7189368">)</span><span class="op" id="7189369">;</span>&nbsp;<span class="ident" id="7189371">err</span>&nbsp;<span class="op" id="7189375">!=</span>&nbsp;<span class="ident" id="7189378">nil</span>&nbsp;<span class="op" id="7189382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189386">t</span><span class="op" id="7189387">.</span><span class="ident" id="7189388">Fatalf</span><span class="op" id="7189394">(</span><span class="string" id="7189395">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7189417">,</span>&nbsp;<span class="ident" id="7189419">err</span><span class="op" id="7189422">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7189425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7189428">if</span>&nbsp;<span class="ident" id="7189431">expected</span>&nbsp;<span class="op" id="7189440">:=</span>&nbsp;<span class="op" id="7189443">[</span><span class="op" id="7189444">]</span><span class="builtintype" id="7189445">byte</span><span class="op" id="7189449">(</span><span class="string" id="7189450">&#34;Kilt&#34;</span><span class="op" id="7189456">)</span><span class="op" id="7189457">;</span>&nbsp;<span class="op" id="7189459">!</span><span class="ident" id="7189460">bytes</span><span class="op" id="7189465">.</span><span class="ident" id="7189466">Equal</span><span class="op" id="7189471">(</span><span class="ident" id="7189472">buf</span><span class="op" id="7189475">,</span>&nbsp;<span class="ident" id="7189477">expected</span><span class="op" id="7189485">)</span>&nbsp;<span class="op" id="7189487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189491">t</span><span class="op" id="7189492">.</span><span class="ident" id="7189493">Errorf</span><span class="op" id="7189499">(</span><span class="string" id="7189500">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7189524">,</span>&nbsp;<span class="ident" id="7189526">buf</span><span class="op" id="7189529">,</span>&nbsp;<span class="ident" id="7189531">expected</span><span class="op" id="7189539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7189542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7189546">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189562">hdr</span><span class="op" id="7189565">,</span>&nbsp;<span class="ident" id="7189567">err</span>&nbsp;<span class="op" id="7189571">=</span>&nbsp;<span class="ident" id="7189573">tr</span><span class="op" id="7189575">.</span><span class="ident" id="7189576">Next</span><span class="op" id="7189580">(</span><span class="op" id="7189581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7189584">if</span>&nbsp;<span class="ident" id="7189587">err</span>&nbsp;<span class="op" id="7189591">!=</span>&nbsp;<span class="ident" id="7189594">nil</span>&nbsp;<span class="op" id="7189598">||</span>&nbsp;<span class="ident" id="7189601">hdr</span>&nbsp;<span class="op" id="7189605">==</span>&nbsp;<span class="ident" id="7189608">nil</span>&nbsp;<span class="op" id="7189612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189616">t</span><span class="op" id="7189617">.</span><span class="ident" id="7189618">Fatalf</span><span class="op" id="7189624">(</span><span class="string" id="7189625">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7189653">,</span>&nbsp;<span class="ident" id="7189655">err</span><span class="op" id="7189658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7189661">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189664">buf</span>&nbsp;<span class="op" id="7189668">=</span>&nbsp;<span class="builtinfunc" id="7189670">make</span><span class="op" id="7189674">(</span><span class="op" id="7189675">[</span><span class="op" id="7189676">]</span><span class="builtintype" id="7189677">byte</span><span class="op" id="7189681">,</span>&nbsp;<span class="num" id="7189683">6</span><span class="op" id="7189684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7189687">if</span>&nbsp;<span class="ident" id="7189690">_</span><span class="op" id="7189691">,</span>&nbsp;<span class="ident" id="7189693">err</span>&nbsp;<span class="op" id="7189697">:=</span>&nbsp;<span class="ident" id="7189700">io</span><span class="op" id="7189702">.</span><span class="ident" id="7189703">ReadFull</span><span class="op" id="7189711">(</span><span class="ident" id="7189712">tr</span><span class="op" id="7189714">,</span>&nbsp;<span class="ident" id="7189716">buf</span><span class="op" id="7189719">)</span><span class="op" id="7189720">;</span>&nbsp;<span class="ident" id="7189722">err</span>&nbsp;<span class="op" id="7189726">!=</span>&nbsp;<span class="ident" id="7189729">nil</span>&nbsp;<span class="op" id="7189733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189737">t</span><span class="op" id="7189738">.</span><span class="ident" id="7189739">Fatalf</span><span class="op" id="7189745">(</span><span class="string" id="7189746">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7189768">,</span>&nbsp;<span class="ident" id="7189770">err</span><span class="op" id="7189773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7189776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7189779">if</span>&nbsp;<span class="ident" id="7189782">expected</span>&nbsp;<span class="op" id="7189791">:=</span>&nbsp;<span class="op" id="7189794">[</span><span class="op" id="7189795">]</span><span class="builtintype" id="7189796">byte</span><span class="op" id="7189800">(</span><span class="string" id="7189801">&#34;Google&#34;</span><span class="op" id="7189809">)</span><span class="op" id="7189810">;</span>&nbsp;<span class="op" id="7189812">!</span><span class="ident" id="7189813">bytes</span><span class="op" id="7189818">.</span><span class="ident" id="7189819">Equal</span><span class="op" id="7189824">(</span><span class="ident" id="7189825">buf</span><span class="op" id="7189828">,</span>&nbsp;<span class="ident" id="7189830">expected</span><span class="op" id="7189838">)</span>&nbsp;<span class="op" id="7189840">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189844">t</span><span class="op" id="7189845">.</span><span class="ident" id="7189846">Errorf</span><span class="op" id="7189852">(</span><span class="string" id="7189853">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7189877">,</span>&nbsp;<span class="ident" id="7189879">buf</span><span class="op" id="7189882">,</span>&nbsp;<span class="ident" id="7189884">expected</span><span class="op" id="7189892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7189895">}</span><br>
<span class="lineno"></span><span class="op" id="7189897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7189900">func</span>&nbsp;<span class="ident" id="7189905">TestIncrementalRead</span><span class="op" id="7189924">(</span><span class="ident" id="7189925">t</span>&nbsp;<span class="op" id="7189927">*</span><span class="ident" id="7189928">testing</span><span class="op" id="7189935">.</span><span class="ident" id="7189936">T</span><span class="op" id="7189937">)</span>&nbsp;<span class="op" id="7189939">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189942">test</span>&nbsp;<span class="op" id="7189947">:=</span>&nbsp;<span class="ident" id="7189950">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7189962">f</span><span class="op" id="7189963">,</span>&nbsp;<span class="ident" id="7189965">err</span>&nbsp;<span class="op" id="7189969">:=</span>&nbsp;<span class="ident" id="7189972">os</span><span class="op" id="7189974">.</span><span class="ident" id="7189975">Open</span><span class="op" id="7189979">(</span><span class="ident" id="7189980">test</span><span class="op" id="7189984">.</span><span class="ident" id="7189985">file</span><span class="op" id="7189989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7189992">if</span>&nbsp;<span class="ident" id="7189995">err</span>&nbsp;<span class="op" id="7189999">!=</span>&nbsp;<span class="ident" id="7190002">nil</span>&nbsp;<span class="op" id="7190006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190010">t</span><span class="op" id="7190011">.</span><span class="ident" id="7190012">Fatalf</span><span class="op" id="7190018">(</span><span class="string" id="7190019">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7190041">,</span>&nbsp;<span class="ident" id="7190043">err</span><span class="op" id="7190046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7190049">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190052">defer</span>&nbsp;<span class="ident" id="7190058">f</span><span class="op" id="7190059">.</span><span class="ident" id="7190060">Close</span><span class="op" id="7190065">(</span><span class="op" id="7190066">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190070">tr</span>&nbsp;<span class="op" id="7190073">:=</span>&nbsp;<span class="ident" id="7190076">NewReader</span><span class="op" id="7190085">(</span><span class="ident" id="7190086">f</span><span class="op" id="7190087">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190091">headers</span>&nbsp;<span class="op" id="7190099">:=</span>&nbsp;<span class="ident" id="7190102">test</span><span class="op" id="7190106">.</span><span class="ident" id="7190107">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190116">cksums</span>&nbsp;<span class="op" id="7190123">:=</span>&nbsp;<span class="ident" id="7190126">test</span><span class="op" id="7190130">.</span><span class="ident" id="7190131">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190139">nread</span>&nbsp;<span class="op" id="7190145">:=</span>&nbsp;<span class="num" id="7190148">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7190152">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190176">for</span>&nbsp;<span class="op" id="7190180">;</span>&nbsp;<span class="op" id="7190182">;</span>&nbsp;<span class="ident" id="7190184">nread</span><span class="op" id="7190189">++</span>&nbsp;<span class="op" id="7190192">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190196">hdr</span><span class="op" id="7190199">,</span>&nbsp;<span class="ident" id="7190201">err</span>&nbsp;<span class="op" id="7190205">:=</span>&nbsp;<span class="ident" id="7190208">tr</span><span class="op" id="7190210">.</span><span class="ident" id="7190211">Next</span><span class="op" id="7190215">(</span><span class="op" id="7190216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190220">if</span>&nbsp;<span class="ident" id="7190223">hdr</span>&nbsp;<span class="op" id="7190227">==</span>&nbsp;<span class="ident" id="7190230">nil</span>&nbsp;<span class="op" id="7190234">||</span>&nbsp;<span class="ident" id="7190237">err</span>&nbsp;<span class="op" id="7190241">==</span>&nbsp;<span class="ident" id="7190244">io</span><span class="op" id="7190246">.</span><span class="ident" id="7190247">EOF</span>&nbsp;<span class="op" id="7190251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190256">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7190264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7190269">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190291">if</span>&nbsp;<span class="op" id="7190294">!</span><span class="ident" id="7190295">reflect</span><span class="op" id="7190302">.</span><span class="ident" id="7190303">DeepEqual</span><span class="op" id="7190312">(</span><span class="op" id="7190313">*</span><span class="ident" id="7190314">hdr</span><span class="op" id="7190317">,</span>&nbsp;<span class="op" id="7190319">*</span><span class="ident" id="7190320">headers</span><span class="op" id="7190327">[</span><span class="ident" id="7190328">nread</span><span class="op" id="7190333">]</span><span class="op" id="7190334">)</span>&nbsp;<span class="op" id="7190336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190341">t</span><span class="op" id="7190342">.</span><span class="ident" id="7190343">Errorf</span><span class="op" id="7190349">(</span><span class="string" id="7190350">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7190389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7190395">*</span><span class="ident" id="7190396">hdr</span><span class="op" id="7190399">,</span>&nbsp;<span class="ident" id="7190401">headers</span><span class="op" id="7190408">[</span><span class="ident" id="7190409">nread</span><span class="op" id="7190414">]</span><span class="op" id="7190415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7190419">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7190424">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7190470">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190500">h</span>&nbsp;<span class="op" id="7190502">:=</span>&nbsp;<span class="ident" id="7190505">md5</span><span class="op" id="7190508">.</span><span class="ident" id="7190509">New</span><span class="op" id="7190512">(</span><span class="op" id="7190513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190517">rdbuf</span>&nbsp;<span class="op" id="7190523">:=</span>&nbsp;<span class="builtinfunc" id="7190526">make</span><span class="op" id="7190530">(</span><span class="op" id="7190531">[</span><span class="op" id="7190532">]</span><span class="builtintype" id="7190533">uint8</span><span class="op" id="7190538">,</span>&nbsp;<span class="num" id="7190540">8</span><span class="op" id="7190541">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190545">for</span>&nbsp;<span class="op" id="7190549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190554">nr</span><span class="op" id="7190556">,</span>&nbsp;<span class="ident" id="7190558">err</span>&nbsp;<span class="op" id="7190562">:=</span>&nbsp;<span class="ident" id="7190565">tr</span><span class="op" id="7190567">.</span><span class="ident" id="7190568">Read</span><span class="op" id="7190572">(</span><span class="ident" id="7190573">rdbuf</span><span class="op" id="7190578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190583">if</span>&nbsp;<span class="ident" id="7190586">err</span>&nbsp;<span class="op" id="7190590">==</span>&nbsp;<span class="ident" id="7190593">io</span><span class="op" id="7190595">.</span><span class="ident" id="7190596">EOF</span>&nbsp;<span class="op" id="7190600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190606">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7190615">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190620">if</span>&nbsp;<span class="ident" id="7190623">err</span>&nbsp;<span class="op" id="7190627">!=</span>&nbsp;<span class="ident" id="7190630">nil</span>&nbsp;<span class="op" id="7190634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190640">t</span><span class="op" id="7190641">.</span><span class="ident" id="7190642">Errorf</span><span class="op" id="7190648">(</span><span class="string" id="7190649">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7190678">,</span>&nbsp;<span class="ident" id="7190680">err</span><span class="op" id="7190683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190689">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7190698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190703">h</span><span class="op" id="7190704">.</span><span class="ident" id="7190705">Write</span><span class="op" id="7190710">(</span><span class="ident" id="7190711">rdbuf</span><span class="op" id="7190716">[</span><span class="num" id="7190717">0</span><span class="op" id="7190718">:</span><span class="ident" id="7190719">nr</span><span class="op" id="7190721">]</span><span class="op" id="7190722">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7190726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7190730">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190751">have</span>&nbsp;<span class="op" id="7190756">:=</span>&nbsp;<span class="ident" id="7190759">fmt</span><span class="op" id="7190762">.</span><span class="ident" id="7190763">Sprintf</span><span class="op" id="7190770">(</span><span class="string" id="7190771">&#34;%x&#34;</span><span class="op" id="7190775">,</span>&nbsp;<span class="ident" id="7190777">h</span><span class="op" id="7190778">.</span><span class="ident" id="7190779">Sum</span><span class="op" id="7190782">(</span><span class="ident" id="7190783">nil</span><span class="op" id="7190786">)</span><span class="op" id="7190787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190791">want</span>&nbsp;<span class="op" id="7190796">:=</span>&nbsp;<span class="ident" id="7190799">cksums</span><span class="op" id="7190805">[</span><span class="ident" id="7190806">nread</span><span class="op" id="7190811">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190815">if</span>&nbsp;<span class="ident" id="7190818">want</span>&nbsp;<span class="op" id="7190823">!=</span>&nbsp;<span class="ident" id="7190826">have</span>&nbsp;<span class="op" id="7190831">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190836">t</span><span class="op" id="7190837">.</span><span class="ident" id="7190838">Errorf</span><span class="op" id="7190844">(</span><span class="string" id="7190845">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7190891">,</span>&nbsp;<span class="ident" id="7190893">hdr</span><span class="op" id="7190896">.</span><span class="ident" id="7190897">Name</span><span class="op" id="7190901">,</span>&nbsp;<span class="ident" id="7190903">have</span><span class="op" id="7190907">,</span>&nbsp;<span class="ident" id="7190909">want</span><span class="op" id="7190913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7190917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7190920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7190923">if</span>&nbsp;<span class="ident" id="7190926">nread</span>&nbsp;<span class="op" id="7190932">!=</span>&nbsp;<span class="builtinfunc" id="7190935">len</span><span class="op" id="7190938">(</span><span class="ident" id="7190939">headers</span><span class="op" id="7190946">)</span>&nbsp;<span class="op" id="7190948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7190952">t</span><span class="op" id="7190953">.</span><span class="ident" id="7190954">Errorf</span><span class="op" id="7190960">(</span><span class="string" id="7190961">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7191017">,</span>&nbsp;<span class="builtinfunc" id="7191019">len</span><span class="op" id="7191022">(</span><span class="ident" id="7191023">headers</span><span class="op" id="7191030">)</span><span class="op" id="7191031">,</span>&nbsp;<span class="ident" id="7191033">nread</span><span class="op" id="7191038">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191041">}</span><br>
<span class="lineno"></span><span class="op" id="7191043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7191046">func</span>&nbsp;<span class="ident" id="7191051">TestNonSeekable</span><span class="op" id="7191066">(</span><span class="ident" id="7191067">t</span>&nbsp;<span class="op" id="7191069">*</span><span class="ident" id="7191070">testing</span><span class="op" id="7191077">.</span><span class="ident" id="7191078">T</span><span class="op" id="7191079">)</span>&nbsp;<span class="op" id="7191081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191084">test</span>&nbsp;<span class="op" id="7191089">:=</span>&nbsp;<span class="ident" id="7191092">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191104">f</span><span class="op" id="7191105">,</span>&nbsp;<span class="ident" id="7191107">err</span>&nbsp;<span class="op" id="7191111">:=</span>&nbsp;<span class="ident" id="7191114">os</span><span class="op" id="7191116">.</span><span class="ident" id="7191117">Open</span><span class="op" id="7191121">(</span><span class="ident" id="7191122">test</span><span class="op" id="7191126">.</span><span class="ident" id="7191127">file</span><span class="op" id="7191131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7191134">if</span>&nbsp;<span class="ident" id="7191137">err</span>&nbsp;<span class="op" id="7191141">!=</span>&nbsp;<span class="ident" id="7191144">nil</span>&nbsp;<span class="op" id="7191148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191152">t</span><span class="op" id="7191153">.</span><span class="ident" id="7191154">Fatalf</span><span class="op" id="7191160">(</span><span class="string" id="7191161">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7191183">,</span>&nbsp;<span class="ident" id="7191185">err</span><span class="op" id="7191188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7191194">defer</span>&nbsp;<span class="ident" id="7191200">f</span><span class="op" id="7191201">.</span><span class="ident" id="7191202">Close</span><span class="op" id="7191207">(</span><span class="op" id="7191208">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7191212">type</span>&nbsp;<span class="ident" id="7191217">readerOnly</span>&nbsp;<span class="keyword" id="7191228">struct</span>&nbsp;<span class="op" id="7191235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191239">io</span><span class="op" id="7191241">.</span><span class="ident" id="7191242">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191253">tr</span>&nbsp;<span class="op" id="7191256">:=</span>&nbsp;<span class="ident" id="7191259">NewReader</span><span class="op" id="7191268">(</span><span class="ident" id="7191269">readerOnly</span><span class="op" id="7191279">{</span><span class="ident" id="7191280">f</span><span class="op" id="7191281">}</span><span class="op" id="7191282">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191285">nread</span>&nbsp;<span class="op" id="7191291">:=</span>&nbsp;<span class="num" id="7191294">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7191298">for</span>&nbsp;<span class="op" id="7191302">;</span>&nbsp;<span class="op" id="7191304">;</span>&nbsp;<span class="ident" id="7191306">nread</span><span class="op" id="7191311">++</span>&nbsp;<span class="op" id="7191314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191318">_</span><span class="op" id="7191319">,</span>&nbsp;<span class="ident" id="7191321">err</span>&nbsp;<span class="op" id="7191325">:=</span>&nbsp;<span class="ident" id="7191328">tr</span><span class="op" id="7191330">.</span><span class="ident" id="7191331">Next</span><span class="op" id="7191335">(</span><span class="op" id="7191336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7191340">if</span>&nbsp;<span class="ident" id="7191343">err</span>&nbsp;<span class="op" id="7191347">==</span>&nbsp;<span class="ident" id="7191350">io</span><span class="op" id="7191352">.</span><span class="ident" id="7191353">EOF</span>&nbsp;<span class="op" id="7191357">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7191362">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7191374">if</span>&nbsp;<span class="ident" id="7191377">err</span>&nbsp;<span class="op" id="7191381">!=</span>&nbsp;<span class="ident" id="7191384">nil</span>&nbsp;<span class="op" id="7191388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191393">t</span><span class="op" id="7191394">.</span><span class="ident" id="7191395">Fatalf</span><span class="op" id="7191401">(</span><span class="string" id="7191402">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7191424">,</span>&nbsp;<span class="ident" id="7191426">err</span><span class="op" id="7191429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191433">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7191440">if</span>&nbsp;<span class="ident" id="7191443">nread</span>&nbsp;<span class="op" id="7191449">!=</span>&nbsp;<span class="builtinfunc" id="7191452">len</span><span class="op" id="7191455">(</span><span class="ident" id="7191456">test</span><span class="op" id="7191460">.</span><span class="ident" id="7191461">headers</span><span class="op" id="7191468">)</span>&nbsp;<span class="op" id="7191470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191474">t</span><span class="op" id="7191475">.</span><span class="ident" id="7191476">Errorf</span><span class="op" id="7191482">(</span><span class="string" id="7191483">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7191539">,</span>&nbsp;<span class="builtinfunc" id="7191541">len</span><span class="op" id="7191544">(</span><span class="ident" id="7191545">test</span><span class="op" id="7191549">.</span><span class="ident" id="7191550">headers</span><span class="op" id="7191557">)</span><span class="op" id="7191558">,</span>&nbsp;<span class="ident" id="7191560">nread</span><span class="op" id="7191565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191568">}</span><br>
<span class="lineno">440</span><span class="op" id="7191570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7191573">func</span>&nbsp;<span class="ident" id="7191578">TestParsePAXHeader</span><span class="op" id="7191596">(</span><span class="ident" id="7191597">t</span>&nbsp;<span class="op" id="7191599">*</span><span class="ident" id="7191600">testing</span><span class="op" id="7191607">.</span><span class="ident" id="7191608">T</span><span class="op" id="7191609">)</span>&nbsp;<span class="op" id="7191611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191614">paxTests</span>&nbsp;<span class="op" id="7191623">:=</span>&nbsp;<span class="op" id="7191626">[</span><span class="op" id="7191627">]</span><span class="op" id="7191628">[</span><span class="num" id="7191629">3</span><span class="op" id="7191630">]</span><span class="builtintype" id="7191631">string</span><span class="op" id="7191637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191641">{</span><span class="string" id="7191642">&#34;a&#34;</span><span class="op" id="7191645">,</span>&nbsp;<span class="string" id="7191647">&#34;a=name&#34;</span><span class="op" id="7191655">,</span>&nbsp;<span class="string" id="7191657">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="7191670">}</span><span class="op" id="7191671">,</span>&nbsp;<span class="comment" id="7191673">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191726">{</span><span class="string" id="7191727">&#34;a&#34;</span><span class="op" id="7191730">,</span>&nbsp;<span class="string" id="7191732">&#34;a=name&#34;</span><span class="op" id="7191740">,</span>&nbsp;<span class="string" id="7191742">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="7191754">}</span><span class="op" id="7191755">,</span>&nbsp;&nbsp;<span class="comment" id="7191758">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7191810">{</span><span class="string" id="7191811">&#34;mtime&#34;</span><span class="op" id="7191818">,</span>&nbsp;<span class="string" id="7191820">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="7191848">,</span>&nbsp;<span class="string" id="7191850">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="7191883">}</span><span class="op" id="7191884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7191887">for</span>&nbsp;<span class="ident" id="7191891">_</span><span class="op" id="7191892">,</span>&nbsp;<span class="ident" id="7191894">test</span>&nbsp;<span class="op" id="7191899">:=</span>&nbsp;<span class="keyword" id="7191902">range</span>&nbsp;<span class="ident" id="7191908">paxTests</span>&nbsp;<span class="op" id="7191917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191921">key</span><span class="op" id="7191924">,</span>&nbsp;<span class="ident" id="7191926">expected</span><span class="op" id="7191934">,</span>&nbsp;<span class="ident" id="7191936">raw</span>&nbsp;<span class="op" id="7191940">:=</span>&nbsp;<span class="ident" id="7191943">test</span><span class="op" id="7191947">[</span><span class="num" id="7191948">0</span><span class="op" id="7191949">]</span><span class="op" id="7191950">,</span>&nbsp;<span class="ident" id="7191952">test</span><span class="op" id="7191956">[</span><span class="num" id="7191957">1</span><span class="op" id="7191958">]</span><span class="op" id="7191959">,</span>&nbsp;<span class="ident" id="7191961">test</span><span class="op" id="7191965">[</span><span class="num" id="7191966">2</span><span class="op" id="7191967">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7191971">reader</span>&nbsp;<span class="op" id="7191978">:=</span>&nbsp;<span class="ident" id="7191981">bytes</span><span class="op" id="7191986">.</span><span class="ident" id="7191987">NewReader</span><span class="op" id="7191996">(</span><span class="op" id="7191997">[</span><span class="op" id="7191998">]</span><span class="builtintype" id="7191999">byte</span><span class="op" id="7192003">(</span><span class="ident" id="7192004">raw</span><span class="op" id="7192007">)</span><span class="op" id="7192008">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7192012">headers</span><span class="op" id="7192019">,</span>&nbsp;<span class="ident" id="7192021">err</span>&nbsp;<span class="op" id="7192025">:=</span>&nbsp;<span class="ident" id="7192028">parsePAX</span><span class="op" id="7192036">(</span><span class="ident" id="7192037">reader</span><span class="op" id="7192043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7192047">if</span>&nbsp;<span class="ident" id="7192050">err</span>&nbsp;<span class="op" id="7192054">!=</span>&nbsp;<span class="ident" id="7192057">nil</span>&nbsp;<span class="op" id="7192061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7192066">t</span><span class="op" id="7192067">.</span><span class="ident" id="7192068">Errorf</span><span class="op" id="7192074">(</span><span class="string" id="7192075">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="7192123">,</span>&nbsp;<span class="ident" id="7192125">err</span><span class="op" id="7192128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7192133">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7192144">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7192148">if</span>&nbsp;<span class="ident" id="7192151">strings</span><span class="op" id="7192158">.</span><span class="ident" id="7192159">EqualFold</span><span class="op" id="7192168">(</span><span class="ident" id="7192169">headers</span><span class="op" id="7192176">[</span><span class="ident" id="7192177">key</span><span class="op" id="7192180">]</span><span class="op" id="7192181">,</span>&nbsp;<span class="ident" id="7192183">expected</span><span class="op" id="7192191">)</span>&nbsp;<span class="op" id="7192193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7192198">t</span><span class="op" id="7192199">.</span><span class="ident" id="7192200">Errorf</span><span class="op" id="7192206">(</span><span class="string" id="7192207">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="7192259">,</span>&nbsp;<span class="ident" id="7192261">headers</span><span class="op" id="7192268">[</span><span class="ident" id="7192269">key</span><span class="op" id="7192272">]</span><span class="op" id="7192273">,</span>&nbsp;<span class="ident" id="7192275">expected</span><span class="op" id="7192283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7192288">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7192299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7192303">trailer</span>&nbsp;<span class="op" id="7192311">:=</span>&nbsp;<span class="builtinfunc" id="7192314">make</span><span class="op" id="7192318">(</span><span class="op" id="7192319">[</span><span class="op" id="7192320">]</span><span class="builtintype" id="7192321">byte</span><span class="op" id="7192325">,</span>&nbsp;<span class="num" id="7192327">100</span><span class="op" id="7192330">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7192334">n</span><span class="op" id="7192335">,</span>&nbsp;<span class="ident" id="7192337">err</span>&nbsp;<span class="op" id="7192341">:=</span>&nbsp;<span class="ident" id="7192344">reader</span><span class="op" id="7192350">.</span><span class="ident" id="7192351">Read</span><span class="op" id="7192355">(</span><span class="ident" id="7192356">trailer</span><span class="op" id="7192363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7192367">if</span>&nbsp;<span class="ident" id="7192370">err</span>&nbsp;<span class="op" id="7192374">!=</span>&nbsp;<span class="ident" id="7192377">io</span><span class="op" id="7192379">.</span><span class="ident" id="7192380">EOF</span>&nbsp;<span class="op" id="7192384">||</span>&nbsp;<span class="ident" id="7192387">n</span>&nbsp;<span class="op" id="7192389">!=</span>&nbsp;<span class="num" id="7192392">0</span>&nbsp;<span class="op" id="7192394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7192399">t</span><span class="op" id="7192400">.</span><span class="ident" id="7192401">Error</span><span class="op" id="7192406">(</span><span class="string" id="7192407">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="7192431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7192435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7192438">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7192441">badHeader</span>&nbsp;<span class="op" id="7192451">:=</span>&nbsp;<span class="ident" id="7192454">bytes</span><span class="op" id="7192459">.</span><span class="ident" id="7192460">NewReader</span><span class="op" id="7192469">(</span><span class="op" id="7192470">[</span><span class="op" id="7192471">]</span><span class="builtintype" id="7192472">byte</span><span class="op" id="7192476">(</span><span class="string" id="7192477">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="7192493">)</span><span class="op" id="7192494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7192497">if</span>&nbsp;<span class="ident" id="7192500">_</span><span class="op" id="7192501">,</span>&nbsp;<span class="ident" id="7192503">err</span>&nbsp;<span class="op" id="7192507">:=</span>&nbsp;<span class="ident" id="7192510">parsePAX</span><span class="op" id="7192518">(</span><span class="ident" id="7192519">badHeader</span><span class="op" id="7192528">)</span><span class="op" id="7192529">;</span>&nbsp;<span class="ident" id="7192531">err</span>&nbsp;<span class="op" id="7192535">!=</span>&nbsp;<span class="ident" id="7192538">ErrHeader</span>&nbsp;<span class="op" id="7192548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7192552">t</span><span class="op" id="7192553">.</span><span class="ident" id="7192554">Fatal</span><span class="op" id="7192559">(</span><span class="string" id="7192560">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="7192604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7192607">}</span><br>
<span class="lineno"></span><span class="op" id="7192609">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="7192612">func</span>&nbsp;<span class="ident" id="7192617">TestParsePAXTime</span><span class="op" id="7192633">(</span><span class="ident" id="7192634">t</span>&nbsp;<span class="op" id="7192636">*</span><span class="ident" id="7192637">testing</span><span class="op" id="7192644">.</span><span class="ident" id="7192645">T</span><span class="op" id="7192646">)</span>&nbsp;<span class="op" id="7192648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7192651">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7192682">timestamps</span>&nbsp;<span class="op" id="7192693">:=</span>&nbsp;<span class="keyword" id="7192696">map</span><span class="op" id="7192699">[</span><span class="builtintype" id="7192700">string</span><span class="op" id="7192706">]</span><span class="ident" id="7192707">time</span><span class="op" id="7192711">.</span><span class="ident" id="7192712">Time</span><span class="op" id="7192716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7192720">&#34;1350244992.023960108&#34;</span><span class="op" id="7192742">:</span>&nbsp;&nbsp;<span class="ident" id="7192745">time</span><span class="op" id="7192749">.</span><span class="ident" id="7192750">Unix</span><span class="op" id="7192754">(</span><span class="num" id="7192755">1350244992</span><span class="op" id="7192765">,</span>&nbsp;<span class="num" id="7192767">23960108</span><span class="op" id="7192775">)</span><span class="op" id="7192776">,</span>&nbsp;<span class="comment" id="7192778">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7192799">&#34;1350244992.02396010&#34;</span><span class="op" id="7192820">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7192824">time</span><span class="op" id="7192828">.</span><span class="ident" id="7192829">Unix</span><span class="op" id="7192833">(</span><span class="num" id="7192834">1350244992</span><span class="op" id="7192844">,</span>&nbsp;<span class="num" id="7192846">23960100</span><span class="op" id="7192854">)</span><span class="op" id="7192855">,</span>&nbsp;<span class="comment" id="7192857">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7192884">&#34;1350244992.0239601089&#34;</span><span class="op" id="7192907">:</span>&nbsp;<span class="ident" id="7192909">time</span><span class="op" id="7192913">.</span><span class="ident" id="7192914">Unix</span><span class="op" id="7192918">(</span><span class="num" id="7192919">1350244992</span><span class="op" id="7192929">,</span>&nbsp;<span class="num" id="7192931">23960108</span><span class="op" id="7192939">)</span><span class="op" id="7192940">,</span>&nbsp;<span class="comment" id="7192942">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7192970">&#34;1350244992&#34;</span><span class="op" id="7192982">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192995">time</span><span class="op" id="7192999">.</span><span class="ident" id="7193000">Unix</span><span class="op" id="7193004">(</span><span class="num" id="7193005">1350244992</span><span class="op" id="7193015">,</span>&nbsp;<span class="num" id="7193017">0</span><span class="op" id="7193018">)</span><span class="op" id="7193019">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7193028">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7193052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7193055">for</span>&nbsp;<span class="ident" id="7193059">input</span><span class="op" id="7193064">,</span>&nbsp;<span class="ident" id="7193066">expected</span>&nbsp;<span class="op" id="7193075">:=</span>&nbsp;<span class="keyword" id="7193078">range</span>&nbsp;<span class="ident" id="7193084">timestamps</span>&nbsp;<span class="op" id="7193095">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193099">ts</span><span class="op" id="7193101">,</span>&nbsp;<span class="ident" id="7193103">err</span>&nbsp;<span class="op" id="7193107">:=</span>&nbsp;<span class="ident" id="7193110">parsePAXTime</span><span class="op" id="7193122">(</span><span class="ident" id="7193123">input</span><span class="op" id="7193128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7193132">if</span>&nbsp;<span class="ident" id="7193135">err</span>&nbsp;<span class="op" id="7193139">!=</span>&nbsp;<span class="ident" id="7193142">nil</span>&nbsp;<span class="op" id="7193146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193151">t</span><span class="op" id="7193152">.</span><span class="ident" id="7193153">Fatal</span><span class="op" id="7193158">(</span><span class="ident" id="7193159">err</span><span class="op" id="7193162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7193166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7193170">if</span>&nbsp;<span class="op" id="7193173">!</span><span class="ident" id="7193174">ts</span><span class="op" id="7193176">.</span><span class="ident" id="7193177">Equal</span><span class="op" id="7193182">(</span><span class="ident" id="7193183">expected</span><span class="op" id="7193191">)</span>&nbsp;<span class="op" id="7193193">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193198">t</span><span class="op" id="7193199">.</span><span class="ident" id="7193200">Fatalf</span><span class="op" id="7193206">(</span><span class="string" id="7193207">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="7193235">,</span>&nbsp;<span class="ident" id="7193237">ts</span><span class="op" id="7193239">,</span>&nbsp;<span class="ident" id="7193241">expected</span><span class="op" id="7193249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7193253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7193256">}</span><br>
<span class="lineno"></span><span class="op" id="7193258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="7193261">func</span>&nbsp;<span class="ident" id="7193266">TestMergePAX</span><span class="op" id="7193278">(</span><span class="ident" id="7193279">t</span>&nbsp;<span class="op" id="7193281">*</span><span class="ident" id="7193282">testing</span><span class="op" id="7193289">.</span><span class="ident" id="7193290">T</span><span class="op" id="7193291">)</span>&nbsp;<span class="op" id="7193293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193296">hdr</span>&nbsp;<span class="op" id="7193300">:=</span>&nbsp;<span class="builtinfunc" id="7193303">new</span><span class="op" id="7193306">(</span><span class="ident" id="7193307">Header</span><span class="op" id="7193313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7193316">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193366">headers</span>&nbsp;<span class="op" id="7193374">:=</span>&nbsp;<span class="keyword" id="7193377">map</span><span class="op" id="7193380">[</span><span class="builtintype" id="7193381">string</span><span class="op" id="7193387">]</span><span class="builtintype" id="7193388">string</span><span class="op" id="7193394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7193398">&#34;path&#34;</span><span class="op" id="7193404">:</span>&nbsp;&nbsp;<span class="string" id="7193407">&#34;a/b/c&#34;</span><span class="op" id="7193414">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7193418">&#34;uid&#34;</span><span class="op" id="7193423">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7193427">&#34;1000&#34;</span><span class="op" id="7193433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7193437">&#34;mtime&#34;</span><span class="op" id="7193444">:</span>&nbsp;<span class="string" id="7193446">&#34;1350244992.023960108&#34;</span><span class="op" id="7193468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7193471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193474">err</span>&nbsp;<span class="op" id="7193478">:=</span>&nbsp;<span class="ident" id="7193481">mergePAX</span><span class="op" id="7193489">(</span><span class="ident" id="7193490">hdr</span><span class="op" id="7193493">,</span>&nbsp;<span class="ident" id="7193495">headers</span><span class="op" id="7193502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7193505">if</span>&nbsp;<span class="ident" id="7193508">err</span>&nbsp;<span class="op" id="7193512">!=</span>&nbsp;<span class="ident" id="7193515">nil</span>&nbsp;<span class="op" id="7193519">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193523">t</span><span class="op" id="7193524">.</span><span class="ident" id="7193525">Fatal</span><span class="op" id="7193530">(</span><span class="ident" id="7193531">err</span><span class="op" id="7193534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7193537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193540">want</span>&nbsp;<span class="op" id="7193545">:=</span>&nbsp;<span class="op" id="7193548">&amp;</span><span class="ident" id="7193549">Header</span><span class="op" id="7193555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193559">Name</span><span class="op" id="7193563">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193568">&#34;a/b/c&#34;</span><span class="op" id="7193575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193579">Uid</span><span class="op" id="7193582">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7193588">1000</span><span class="op" id="7193592">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193596">ModTime</span><span class="op" id="7193603">:</span>&nbsp;<span class="ident" id="7193605">time</span><span class="op" id="7193609">.</span><span class="ident" id="7193610">Unix</span><span class="op" id="7193614">(</span><span class="num" id="7193615">1350244992</span><span class="op" id="7193625">,</span>&nbsp;<span class="num" id="7193627">23960108</span><span class="op" id="7193635">)</span><span class="op" id="7193636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7193639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7193642">if</span>&nbsp;<span class="op" id="7193645">!</span><span class="ident" id="7193646">reflect</span><span class="op" id="7193653">.</span><span class="ident" id="7193654">DeepEqual</span><span class="op" id="7193663">(</span><span class="ident" id="7193664">hdr</span><span class="op" id="7193667">,</span>&nbsp;<span class="ident" id="7193669">want</span><span class="op" id="7193673">)</span>&nbsp;<span class="op" id="7193675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193679">t</span><span class="op" id="7193680">.</span><span class="ident" id="7193681">Errorf</span><span class="op" id="7193687">(</span><span class="string" id="7193688">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7193724">,</span>&nbsp;<span class="ident" id="7193726">hdr</span><span class="op" id="7193729">,</span>&nbsp;<span class="ident" id="7193731">want</span><span class="op" id="7193735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7193738">}</span><br>
<span class="lineno">510</span><span class="op" id="7193740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7193743">func</span>&nbsp;<span class="ident" id="7193748">TestSparseEndToEnd</span><span class="op" id="7193766">(</span><span class="ident" id="7193767">t</span>&nbsp;<span class="op" id="7193769">*</span><span class="ident" id="7193770">testing</span><span class="op" id="7193777">.</span><span class="ident" id="7193778">T</span><span class="op" id="7193779">)</span>&nbsp;<span class="op" id="7193781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193784">test</span>&nbsp;<span class="op" id="7193789">:=</span>&nbsp;<span class="ident" id="7193792">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193807">f</span><span class="op" id="7193808">,</span>&nbsp;<span class="ident" id="7193810">err</span>&nbsp;<span class="op" id="7193814">:=</span>&nbsp;<span class="ident" id="7193817">os</span><span class="op" id="7193819">.</span><span class="ident" id="7193820">Open</span><span class="op" id="7193824">(</span><span class="ident" id="7193825">test</span><span class="op" id="7193829">.</span><span class="ident" id="7193830">file</span><span class="op" id="7193834">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7193837">if</span>&nbsp;<span class="ident" id="7193840">err</span>&nbsp;<span class="op" id="7193844">!=</span>&nbsp;<span class="ident" id="7193847">nil</span>&nbsp;<span class="op" id="7193851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193855">t</span><span class="op" id="7193856">.</span><span class="ident" id="7193857">Fatalf</span><span class="op" id="7193863">(</span><span class="string" id="7193864">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7193886">,</span>&nbsp;<span class="ident" id="7193888">err</span><span class="op" id="7193891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7193894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7193897">defer</span>&nbsp;<span class="ident" id="7193903">f</span><span class="op" id="7193904">.</span><span class="ident" id="7193905">Close</span><span class="op" id="7193910">(</span><span class="op" id="7193911">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193915">tr</span>&nbsp;<span class="op" id="7193918">:=</span>&nbsp;<span class="ident" id="7193921">NewReader</span><span class="op" id="7193930">(</span><span class="ident" id="7193931">f</span><span class="op" id="7193932">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193936">headers</span>&nbsp;<span class="op" id="7193944">:=</span>&nbsp;<span class="ident" id="7193947">test</span><span class="op" id="7193951">.</span><span class="ident" id="7193952">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193961">cksums</span>&nbsp;<span class="op" id="7193968">:=</span>&nbsp;<span class="ident" id="7193971">test</span><span class="op" id="7193975">.</span><span class="ident" id="7193976">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7193984">nread</span>&nbsp;<span class="op" id="7193990">:=</span>&nbsp;<span class="num" id="7193993">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7193997">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7194021">for</span>&nbsp;<span class="op" id="7194025">;</span>&nbsp;<span class="op" id="7194027">;</span>&nbsp;<span class="ident" id="7194029">nread</span><span class="op" id="7194034">++</span>&nbsp;<span class="op" id="7194037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194041">hdr</span><span class="op" id="7194044">,</span>&nbsp;<span class="ident" id="7194046">err</span>&nbsp;<span class="op" id="7194050">:=</span>&nbsp;<span class="ident" id="7194053">tr</span><span class="op" id="7194055">.</span><span class="ident" id="7194056">Next</span><span class="op" id="7194060">(</span><span class="op" id="7194061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7194065">if</span>&nbsp;<span class="ident" id="7194068">hdr</span>&nbsp;<span class="op" id="7194072">==</span>&nbsp;<span class="ident" id="7194075">nil</span>&nbsp;<span class="op" id="7194079">||</span>&nbsp;<span class="ident" id="7194082">err</span>&nbsp;<span class="op" id="7194086">==</span>&nbsp;<span class="ident" id="7194089">io</span><span class="op" id="7194091">.</span><span class="ident" id="7194092">EOF</span>&nbsp;<span class="op" id="7194096">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7194101">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7194114">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7194136">if</span>&nbsp;<span class="op" id="7194139">!</span><span class="ident" id="7194140">reflect</span><span class="op" id="7194147">.</span><span class="ident" id="7194148">DeepEqual</span><span class="op" id="7194157">(</span><span class="op" id="7194158">*</span><span class="ident" id="7194159">hdr</span><span class="op" id="7194162">,</span>&nbsp;<span class="op" id="7194164">*</span><span class="ident" id="7194165">headers</span><span class="op" id="7194172">[</span><span class="ident" id="7194173">nread</span><span class="op" id="7194178">]</span><span class="op" id="7194179">)</span>&nbsp;<span class="op" id="7194181">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194186">t</span><span class="op" id="7194187">.</span><span class="ident" id="7194188">Errorf</span><span class="op" id="7194194">(</span><span class="string" id="7194195">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7194234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194240">*</span><span class="ident" id="7194241">hdr</span><span class="op" id="7194244">,</span>&nbsp;<span class="ident" id="7194246">headers</span><span class="op" id="7194253">[</span><span class="ident" id="7194254">nread</span><span class="op" id="7194259">]</span><span class="op" id="7194260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7194269">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194306">h</span>&nbsp;<span class="op" id="7194308">:=</span>&nbsp;<span class="ident" id="7194311">md5</span><span class="op" id="7194314">.</span><span class="ident" id="7194315">New</span><span class="op" id="7194318">(</span><span class="op" id="7194319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194323">_</span><span class="op" id="7194324">,</span>&nbsp;<span class="ident" id="7194326">err</span>&nbsp;<span class="op" id="7194330">=</span>&nbsp;<span class="ident" id="7194332">io</span><span class="op" id="7194334">.</span><span class="ident" id="7194335">Copy</span><span class="op" id="7194339">(</span><span class="ident" id="7194340">h</span><span class="op" id="7194341">,</span>&nbsp;<span class="ident" id="7194343">tr</span><span class="op" id="7194345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7194349">if</span>&nbsp;<span class="ident" id="7194352">err</span>&nbsp;<span class="op" id="7194356">!=</span>&nbsp;<span class="ident" id="7194359">nil</span>&nbsp;<span class="op" id="7194363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194368">t</span><span class="op" id="7194369">.</span><span class="ident" id="7194370">Fatalf</span><span class="op" id="7194376">(</span><span class="string" id="7194377">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7194399">,</span>&nbsp;<span class="ident" id="7194401">err</span><span class="op" id="7194404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194408">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7194413">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194434">have</span>&nbsp;<span class="op" id="7194439">:=</span>&nbsp;<span class="ident" id="7194442">fmt</span><span class="op" id="7194445">.</span><span class="ident" id="7194446">Sprintf</span><span class="op" id="7194453">(</span><span class="string" id="7194454">&#34;%x&#34;</span><span class="op" id="7194458">,</span>&nbsp;<span class="ident" id="7194460">h</span><span class="op" id="7194461">.</span><span class="ident" id="7194462">Sum</span><span class="op" id="7194465">(</span><span class="ident" id="7194466">nil</span><span class="op" id="7194469">)</span><span class="op" id="7194470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194474">want</span>&nbsp;<span class="op" id="7194479">:=</span>&nbsp;<span class="ident" id="7194482">cksums</span><span class="op" id="7194488">[</span><span class="ident" id="7194489">nread</span><span class="op" id="7194494">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7194498">if</span>&nbsp;<span class="ident" id="7194501">want</span>&nbsp;<span class="op" id="7194506">!=</span>&nbsp;<span class="ident" id="7194509">have</span>&nbsp;<span class="op" id="7194514">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194519">t</span><span class="op" id="7194520">.</span><span class="ident" id="7194521">Errorf</span><span class="op" id="7194527">(</span><span class="string" id="7194528">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7194574">,</span>&nbsp;<span class="ident" id="7194576">hdr</span><span class="op" id="7194579">.</span><span class="ident" id="7194580">Name</span><span class="op" id="7194584">,</span>&nbsp;<span class="ident" id="7194586">have</span><span class="op" id="7194590">,</span>&nbsp;<span class="ident" id="7194592">want</span><span class="op" id="7194596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7194606">if</span>&nbsp;<span class="ident" id="7194609">nread</span>&nbsp;<span class="op" id="7194615">!=</span>&nbsp;<span class="builtinfunc" id="7194618">len</span><span class="op" id="7194621">(</span><span class="ident" id="7194622">headers</span><span class="op" id="7194629">)</span>&nbsp;<span class="op" id="7194631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194635">t</span><span class="op" id="7194636">.</span><span class="ident" id="7194637">Errorf</span><span class="op" id="7194643">(</span><span class="string" id="7194644">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7194700">,</span>&nbsp;<span class="builtinfunc" id="7194702">len</span><span class="op" id="7194705">(</span><span class="ident" id="7194706">headers</span><span class="op" id="7194713">)</span><span class="op" id="7194714">,</span>&nbsp;<span class="ident" id="7194716">nread</span><span class="op" id="7194721">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194724">}</span><br>
<span class="lineno"></span><span class="op" id="7194726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7194729">type</span>&nbsp;<span class="ident" id="7194734">sparseFileReadTest</span>&nbsp;<span class="keyword" id="7194753">struct</span>&nbsp;<span class="op" id="7194760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194763">sparseData</span>&nbsp;<span class="op" id="7194774">[</span><span class="op" id="7194775">]</span><span class="builtintype" id="7194776">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194782">sparseMap</span>&nbsp;&nbsp;<span class="op" id="7194793">[</span><span class="op" id="7194794">]</span><span class="ident" id="7194795">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194808">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7194819">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194826">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7194837">[</span><span class="op" id="7194838">]</span><span class="builtintype" id="7194839">byte</span><br>
<span class="lineno"></span><span class="op" id="7194844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7194847">var</span>&nbsp;<span class="ident" id="7194851">sparseFileReadTests</span>&nbsp;<span class="op" id="7194871">=</span>&nbsp;<span class="op" id="7194873">[</span><span class="op" id="7194874">]</span><span class="ident" id="7194875">sparseFileReadTest</span><span class="op" id="7194893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194900">sparseData</span><span class="op" id="7194910">:</span>&nbsp;<span class="op" id="7194912">[</span><span class="op" id="7194913">]</span><span class="builtintype" id="7194914">byte</span><span class="op" id="7194918">(</span><span class="string" id="7194919">&#34;abcde&#34;</span><span class="op" id="7194926">)</span><span class="op" id="7194927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7194931">sparseMap</span><span class="op" id="7194940">:</span>&nbsp;<span class="op" id="7194942">[</span><span class="op" id="7194943">]</span><span class="ident" id="7194944">sparseEntry</span><span class="op" id="7194955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194960">{</span><span class="ident" id="7194961">offset</span><span class="op" id="7194967">:</span>&nbsp;<span class="num" id="7194969">0</span><span class="op" id="7194970">,</span>&nbsp;<span class="ident" id="7194972">numBytes</span><span class="op" id="7194980">:</span>&nbsp;<span class="num" id="7194982">2</span><span class="op" id="7194983">}</span><span class="op" id="7194984">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7194989">{</span><span class="ident" id="7194990">offset</span><span class="op" id="7194996">:</span>&nbsp;<span class="num" id="7194998">5</span><span class="op" id="7194999">,</span>&nbsp;<span class="ident" id="7195001">numBytes</span><span class="op" id="7195009">:</span>&nbsp;<span class="num" id="7195011">3</span><span class="op" id="7195012">}</span><span class="op" id="7195013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195017">}</span><span class="op" id="7195018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195022">realSize</span><span class="op" id="7195030">:</span>&nbsp;<span class="num" id="7195032">8</span><span class="op" id="7195033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195037">expected</span><span class="op" id="7195045">:</span>&nbsp;<span class="op" id="7195047">[</span><span class="op" id="7195048">]</span><span class="builtintype" id="7195049">byte</span><span class="op" id="7195053">(</span><span class="string" id="7195054">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="7195073">)</span><span class="op" id="7195074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195077">}</span><span class="op" id="7195078">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195085">sparseData</span><span class="op" id="7195095">:</span>&nbsp;<span class="op" id="7195097">[</span><span class="op" id="7195098">]</span><span class="builtintype" id="7195099">byte</span><span class="op" id="7195103">(</span><span class="string" id="7195104">&#34;abcde&#34;</span><span class="op" id="7195111">)</span><span class="op" id="7195112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195116">sparseMap</span><span class="op" id="7195125">:</span>&nbsp;<span class="op" id="7195127">[</span><span class="op" id="7195128">]</span><span class="ident" id="7195129">sparseEntry</span><span class="op" id="7195140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195145">{</span><span class="ident" id="7195146">offset</span><span class="op" id="7195152">:</span>&nbsp;<span class="num" id="7195154">0</span><span class="op" id="7195155">,</span>&nbsp;<span class="ident" id="7195157">numBytes</span><span class="op" id="7195165">:</span>&nbsp;<span class="num" id="7195167">2</span><span class="op" id="7195168">}</span><span class="op" id="7195169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195174">{</span><span class="ident" id="7195175">offset</span><span class="op" id="7195181">:</span>&nbsp;<span class="num" id="7195183">5</span><span class="op" id="7195184">,</span>&nbsp;<span class="ident" id="7195186">numBytes</span><span class="op" id="7195194">:</span>&nbsp;<span class="num" id="7195196">3</span><span class="op" id="7195197">}</span><span class="op" id="7195198">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195202">}</span><span class="op" id="7195203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195207">realSize</span><span class="op" id="7195215">:</span>&nbsp;<span class="num" id="7195217">10</span><span class="op" id="7195219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195223">expected</span><span class="op" id="7195231">:</span>&nbsp;<span class="op" id="7195233">[</span><span class="op" id="7195234">]</span><span class="builtintype" id="7195235">byte</span><span class="op" id="7195239">(</span><span class="string" id="7195240">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="7195267">)</span><span class="op" id="7195268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195271">}</span><span class="op" id="7195272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195275">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195279">sparseData</span><span class="op" id="7195289">:</span>&nbsp;<span class="op" id="7195291">[</span><span class="op" id="7195292">]</span><span class="builtintype" id="7195293">byte</span><span class="op" id="7195297">(</span><span class="string" id="7195298">&#34;abcde&#34;</span><span class="op" id="7195305">)</span><span class="op" id="7195306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195310">sparseMap</span><span class="op" id="7195319">:</span>&nbsp;<span class="op" id="7195321">[</span><span class="op" id="7195322">]</span><span class="ident" id="7195323">sparseEntry</span><span class="op" id="7195334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195339">{</span><span class="ident" id="7195340">offset</span><span class="op" id="7195346">:</span>&nbsp;<span class="num" id="7195348">1</span><span class="op" id="7195349">,</span>&nbsp;<span class="ident" id="7195351">numBytes</span><span class="op" id="7195359">:</span>&nbsp;<span class="num" id="7195361">3</span><span class="op" id="7195362">}</span><span class="op" id="7195363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195368">{</span><span class="ident" id="7195369">offset</span><span class="op" id="7195375">:</span>&nbsp;<span class="num" id="7195377">6</span><span class="op" id="7195378">,</span>&nbsp;<span class="ident" id="7195380">numBytes</span><span class="op" id="7195388">:</span>&nbsp;<span class="num" id="7195390">2</span><span class="op" id="7195391">}</span><span class="op" id="7195392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195396">}</span><span class="op" id="7195397">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195401">realSize</span><span class="op" id="7195409">:</span>&nbsp;<span class="num" id="7195411">8</span><span class="op" id="7195412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195416">expected</span><span class="op" id="7195424">:</span>&nbsp;<span class="op" id="7195426">[</span><span class="op" id="7195427">]</span><span class="builtintype" id="7195428">byte</span><span class="op" id="7195432">(</span><span class="string" id="7195433">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="7195452">)</span><span class="op" id="7195453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195456">}</span><span class="op" id="7195457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195464">sparseData</span><span class="op" id="7195474">:</span>&nbsp;<span class="op" id="7195476">[</span><span class="op" id="7195477">]</span><span class="builtintype" id="7195478">byte</span><span class="op" id="7195482">(</span><span class="string" id="7195483">&#34;abcde&#34;</span><span class="op" id="7195490">)</span><span class="op" id="7195491">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195495">sparseMap</span><span class="op" id="7195504">:</span>&nbsp;<span class="op" id="7195506">[</span><span class="op" id="7195507">]</span><span class="ident" id="7195508">sparseEntry</span><span class="op" id="7195519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195524">{</span><span class="ident" id="7195525">offset</span><span class="op" id="7195531">:</span>&nbsp;<span class="num" id="7195533">1</span><span class="op" id="7195534">,</span>&nbsp;<span class="ident" id="7195536">numBytes</span><span class="op" id="7195544">:</span>&nbsp;<span class="num" id="7195546">3</span><span class="op" id="7195547">}</span><span class="op" id="7195548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195553">{</span><span class="ident" id="7195554">offset</span><span class="op" id="7195560">:</span>&nbsp;<span class="num" id="7195562">6</span><span class="op" id="7195563">,</span>&nbsp;<span class="ident" id="7195565">numBytes</span><span class="op" id="7195573">:</span>&nbsp;<span class="num" id="7195575">2</span><span class="op" id="7195576">}</span><span class="op" id="7195577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195581">}</span><span class="op" id="7195582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195586">realSize</span><span class="op" id="7195594">:</span>&nbsp;<span class="num" id="7195596">10</span><span class="op" id="7195598">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195602">expected</span><span class="op" id="7195610">:</span>&nbsp;<span class="op" id="7195612">[</span><span class="op" id="7195613">]</span><span class="builtintype" id="7195614">byte</span><span class="op" id="7195618">(</span><span class="string" id="7195619">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="7195646">)</span><span class="op" id="7195647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195650">}</span><span class="op" id="7195651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195658">sparseData</span><span class="op" id="7195668">:</span>&nbsp;<span class="op" id="7195670">[</span><span class="op" id="7195671">]</span><span class="builtintype" id="7195672">byte</span><span class="op" id="7195676">(</span><span class="string" id="7195677">&#34;&#34;</span><span class="op" id="7195679">)</span><span class="op" id="7195680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195684">sparseMap</span><span class="op" id="7195693">:</span>&nbsp;&nbsp;<span class="ident" id="7195696">nil</span><span class="op" id="7195699">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195703">realSize</span><span class="op" id="7195711">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="7195715">2</span><span class="op" id="7195716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195720">expected</span><span class="op" id="7195728">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7195732">[</span><span class="op" id="7195733">]</span><span class="builtintype" id="7195734">byte</span><span class="op" id="7195738">(</span><span class="string" id="7195739">&#34;\x00\x00&#34;</span><span class="op" id="7195749">)</span><span class="op" id="7195750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7195753">}</span><span class="op" id="7195754">,</span><br>
<span class="lineno"></span><span class="op" id="7195756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="7195759">func</span>&nbsp;<span class="ident" id="7195764">TestSparseFileReader</span><span class="op" id="7195784">(</span><span class="ident" id="7195785">t</span>&nbsp;<span class="op" id="7195787">*</span><span class="ident" id="7195788">testing</span><span class="op" id="7195795">.</span><span class="ident" id="7195796">T</span><span class="op" id="7195797">)</span>&nbsp;<span class="op" id="7195799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7195802">for</span>&nbsp;<span class="ident" id="7195806">i</span><span class="op" id="7195807">,</span>&nbsp;<span class="ident" id="7195809">test</span>&nbsp;<span class="op" id="7195814">:=</span>&nbsp;<span class="keyword" id="7195817">range</span>&nbsp;<span class="ident" id="7195823">sparseFileReadTests</span>&nbsp;<span class="op" id="7195843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195847">r</span>&nbsp;<span class="op" id="7195849">:=</span>&nbsp;<span class="ident" id="7195852">bytes</span><span class="op" id="7195857">.</span><span class="ident" id="7195858">NewReader</span><span class="op" id="7195867">(</span><span class="ident" id="7195868">test</span><span class="op" id="7195872">.</span><span class="ident" id="7195873">sparseData</span><span class="op" id="7195883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195887">nb</span>&nbsp;<span class="op" id="7195890">:=</span>&nbsp;<span class="ident" id="7195893">int64</span><span class="op" id="7195898">(</span><span class="ident" id="7195899">r</span><span class="op" id="7195900">.</span><span class="ident" id="7195901">Len</span><span class="op" id="7195904">(</span><span class="op" id="7195905">)</span><span class="op" id="7195906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195910">sfr</span>&nbsp;<span class="op" id="7195914">:=</span>&nbsp;<span class="op" id="7195917">&amp;</span><span class="ident" id="7195918">sparseFileReader</span><span class="op" id="7195934">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195939">rfr</span><span class="op" id="7195942">:</span>&nbsp;<span class="op" id="7195944">&amp;</span><span class="ident" id="7195945">regFileReader</span><span class="op" id="7195958">{</span><span class="ident" id="7195959">r</span><span class="op" id="7195960">:</span>&nbsp;<span class="ident" id="7195962">r</span><span class="op" id="7195963">,</span>&nbsp;<span class="ident" id="7195965">nb</span><span class="op" id="7195967">:</span>&nbsp;<span class="ident" id="7195969">nb</span><span class="op" id="7195971">}</span><span class="op" id="7195972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7195977">sp</span><span class="op" id="7195979">:</span>&nbsp;&nbsp;<span class="ident" id="7195982">test</span><span class="op" id="7195986">.</span><span class="ident" id="7195987">sparseMap</span><span class="op" id="7195996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196001">pos</span><span class="op" id="7196004">:</span>&nbsp;<span class="num" id="7196006">0</span><span class="op" id="7196007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196012">tot</span><span class="op" id="7196015">:</span>&nbsp;<span class="ident" id="7196017">test</span><span class="op" id="7196021">.</span><span class="ident" id="7196022">realSize</span><span class="op" id="7196030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7196034">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7196038">if</span>&nbsp;<span class="ident" id="7196041">sfr</span><span class="op" id="7196044">.</span><span class="ident" id="7196045">numBytes</span><span class="op" id="7196053">(</span><span class="op" id="7196054">)</span>&nbsp;<span class="op" id="7196056">!=</span>&nbsp;<span class="ident" id="7196059">nb</span>&nbsp;<span class="op" id="7196062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196067">t</span><span class="op" id="7196068">.</span><span class="ident" id="7196069">Errorf</span><span class="op" id="7196075">(</span><span class="string" id="7196076">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7196131">,</span>&nbsp;<span class="ident" id="7196133">i</span><span class="op" id="7196134">,</span>&nbsp;<span class="ident" id="7196136">sfr</span><span class="op" id="7196139">.</span><span class="ident" id="7196140">numBytes</span><span class="op" id="7196148">(</span><span class="op" id="7196149">)</span><span class="op" id="7196150">,</span>&nbsp;<span class="ident" id="7196152">nb</span><span class="op" id="7196154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7196158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196162">buf</span><span class="op" id="7196165">,</span>&nbsp;<span class="ident" id="7196167">err</span>&nbsp;<span class="op" id="7196171">:=</span>&nbsp;<span class="ident" id="7196174">ioutil</span><span class="op" id="7196180">.</span><span class="ident" id="7196181">ReadAll</span><span class="op" id="7196188">(</span><span class="ident" id="7196189">sfr</span><span class="op" id="7196192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7196196">if</span>&nbsp;<span class="ident" id="7196199">err</span>&nbsp;<span class="op" id="7196203">!=</span>&nbsp;<span class="ident" id="7196206">nil</span>&nbsp;<span class="op" id="7196210">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196215">t</span><span class="op" id="7196216">.</span><span class="ident" id="7196217">Errorf</span><span class="op" id="7196223">(</span><span class="string" id="7196224">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7196255">,</span>&nbsp;<span class="ident" id="7196257">i</span><span class="op" id="7196258">,</span>&nbsp;<span class="ident" id="7196260">err</span><span class="op" id="7196263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7196267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7196271">if</span>&nbsp;<span class="ident" id="7196274">e</span>&nbsp;<span class="op" id="7196276">:=</span>&nbsp;<span class="ident" id="7196279">test</span><span class="op" id="7196283">.</span><span class="ident" id="7196284">expected</span><span class="op" id="7196292">;</span>&nbsp;<span class="op" id="7196294">!</span><span class="ident" id="7196295">bytes</span><span class="op" id="7196300">.</span><span class="ident" id="7196301">Equal</span><span class="op" id="7196306">(</span><span class="ident" id="7196307">buf</span><span class="op" id="7196310">,</span>&nbsp;<span class="ident" id="7196312">e</span><span class="op" id="7196313">)</span>&nbsp;<span class="op" id="7196315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196320">t</span><span class="op" id="7196321">.</span><span class="ident" id="7196322">Errorf</span><span class="op" id="7196328">(</span><span class="string" id="7196329">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7196362">,</span>&nbsp;<span class="ident" id="7196364">i</span><span class="op" id="7196365">,</span>&nbsp;<span class="ident" id="7196367">buf</span><span class="op" id="7196370">,</span>&nbsp;<span class="ident" id="7196372">e</span><span class="op" id="7196373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7196377">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7196381">if</span>&nbsp;<span class="ident" id="7196384">sfr</span><span class="op" id="7196387">.</span><span class="ident" id="7196388">numBytes</span><span class="op" id="7196396">(</span><span class="op" id="7196397">)</span>&nbsp;<span class="op" id="7196399">!=</span>&nbsp;<span class="num" id="7196402">0</span>&nbsp;<span class="op" id="7196404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196409">t</span><span class="op" id="7196410">.</span><span class="ident" id="7196411">Errorf</span><span class="op" id="7196417">(</span><span class="string" id="7196418">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="7196478">,</span>&nbsp;<span class="ident" id="7196480">i</span><span class="op" id="7196481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7196485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7196488">}</span><br>
<span class="lineno"></span><span class="op" id="7196490">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="7196493">func</span>&nbsp;<span class="ident" id="7196498">TestSparseIncrementalRead</span><span class="op" id="7196523">(</span><span class="ident" id="7196524">t</span>&nbsp;<span class="op" id="7196526">*</span><span class="ident" id="7196527">testing</span><span class="op" id="7196534">.</span><span class="ident" id="7196535">T</span><span class="op" id="7196536">)</span>&nbsp;<span class="op" id="7196538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196541">sparseMap</span>&nbsp;<span class="op" id="7196551">:=</span>&nbsp;<span class="op" id="7196554">[</span><span class="op" id="7196555">]</span><span class="ident" id="7196556">sparseEntry</span><span class="op" id="7196567">{</span><span class="op" id="7196568">{</span><span class="num" id="7196569">10</span><span class="op" id="7196571">,</span>&nbsp;<span class="num" id="7196573">2</span><span class="op" id="7196574">}</span><span class="op" id="7196575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196578">sparseData</span>&nbsp;<span class="op" id="7196589">:=</span>&nbsp;<span class="op" id="7196592">[</span><span class="op" id="7196593">]</span><span class="builtintype" id="7196594">byte</span><span class="op" id="7196598">(</span><span class="string" id="7196599">&#34;Go&#34;</span><span class="op" id="7196603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196606">expected</span>&nbsp;<span class="op" id="7196615">:=</span>&nbsp;<span class="string" id="7196618">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196697">r</span>&nbsp;<span class="op" id="7196699">:=</span>&nbsp;<span class="ident" id="7196702">bytes</span><span class="op" id="7196707">.</span><span class="ident" id="7196708">NewReader</span><span class="op" id="7196717">(</span><span class="ident" id="7196718">sparseData</span><span class="op" id="7196728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196731">nb</span>&nbsp;<span class="op" id="7196734">:=</span>&nbsp;<span class="ident" id="7196737">int64</span><span class="op" id="7196742">(</span><span class="ident" id="7196743">r</span><span class="op" id="7196744">.</span><span class="ident" id="7196745">Len</span><span class="op" id="7196748">(</span><span class="op" id="7196749">)</span><span class="op" id="7196750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196753">sfr</span>&nbsp;<span class="op" id="7196757">:=</span>&nbsp;<span class="op" id="7196760">&amp;</span><span class="ident" id="7196761">sparseFileReader</span><span class="op" id="7196777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196781">rfr</span><span class="op" id="7196784">:</span>&nbsp;<span class="op" id="7196786">&amp;</span><span class="ident" id="7196787">regFileReader</span><span class="op" id="7196800">{</span><span class="ident" id="7196801">r</span><span class="op" id="7196802">:</span>&nbsp;<span class="ident" id="7196804">r</span><span class="op" id="7196805">,</span>&nbsp;<span class="ident" id="7196807">nb</span><span class="op" id="7196809">:</span>&nbsp;<span class="ident" id="7196811">nb</span><span class="op" id="7196813">}</span><span class="op" id="7196814">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196818">sp</span><span class="op" id="7196820">:</span>&nbsp;&nbsp;<span class="ident" id="7196823">sparseMap</span><span class="op" id="7196832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196836">pos</span><span class="op" id="7196839">:</span>&nbsp;<span class="num" id="7196841">0</span><span class="op" id="7196842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7196846">tot</span><span class="op" id="7196849">:</span>&nbsp;<span class="ident" id="7196851">int64</span><span class="op" id="7196856">(</span><span class="builtinfunc" id="7196857">len</span><span class="op" id="7196860">(</span><span class="ident" id="7196861">expected</span><span class="op" id="7196869">)</span><span class="op" id="7196870">)</span><span class="op" id="7196871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7196874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7196878">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7196947">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7196995">var</span>&nbsp;<span class="ident" id="7196999">outputBuf</span>&nbsp;<span class="ident" id="7197009">bytes</span><span class="op" id="7197014">.</span><span class="ident" id="7197015">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197023">buf</span>&nbsp;<span class="op" id="7197027">:=</span>&nbsp;<span class="builtinfunc" id="7197030">make</span><span class="op" id="7197034">(</span><span class="op" id="7197035">[</span><span class="op" id="7197036">]</span><span class="builtintype" id="7197037">byte</span><span class="op" id="7197041">,</span>&nbsp;<span class="num" id="7197043">6</span><span class="op" id="7197044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7197047">for</span>&nbsp;<span class="op" id="7197051">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197055">n</span><span class="op" id="7197056">,</span>&nbsp;<span class="ident" id="7197058">err</span>&nbsp;<span class="op" id="7197062">:=</span>&nbsp;<span class="ident" id="7197065">sfr</span><span class="op" id="7197068">.</span><span class="ident" id="7197069">Read</span><span class="op" id="7197073">(</span><span class="ident" id="7197074">buf</span><span class="op" id="7197077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7197081">if</span>&nbsp;<span class="ident" id="7197084">err</span>&nbsp;<span class="op" id="7197088">==</span>&nbsp;<span class="ident" id="7197091">io</span><span class="op" id="7197093">.</span><span class="ident" id="7197094">EOF</span>&nbsp;<span class="op" id="7197098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7197103">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7197115">if</span>&nbsp;<span class="ident" id="7197118">err</span>&nbsp;<span class="op" id="7197122">!=</span>&nbsp;<span class="ident" id="7197125">nil</span>&nbsp;<span class="op" id="7197129">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197134">t</span><span class="op" id="7197135">.</span><span class="ident" id="7197136">Errorf</span><span class="op" id="7197142">(</span><span class="string" id="7197143">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7197172">,</span>&nbsp;<span class="ident" id="7197174">err</span><span class="op" id="7197177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7197185">if</span>&nbsp;<span class="ident" id="7197188">n</span>&nbsp;<span class="op" id="7197190">&gt;</span>&nbsp;<span class="num" id="7197192">0</span>&nbsp;<span class="op" id="7197194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197199">_</span><span class="op" id="7197200">,</span>&nbsp;<span class="ident" id="7197202">err</span>&nbsp;<span class="op" id="7197206">:=</span>&nbsp;<span class="ident" id="7197209">outputBuf</span><span class="op" id="7197218">.</span><span class="ident" id="7197219">Write</span><span class="op" id="7197224">(</span><span class="ident" id="7197225">buf</span><span class="op" id="7197228">[</span><span class="op" id="7197229">:</span><span class="ident" id="7197230">n</span><span class="op" id="7197231">]</span><span class="op" id="7197232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7197237">if</span>&nbsp;<span class="ident" id="7197240">err</span>&nbsp;<span class="op" id="7197244">!=</span>&nbsp;<span class="ident" id="7197247">nil</span>&nbsp;<span class="op" id="7197251">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197257">t</span><span class="op" id="7197258">.</span><span class="ident" id="7197259">Errorf</span><span class="op" id="7197265">(</span><span class="string" id="7197266">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7197296">,</span>&nbsp;<span class="ident" id="7197298">err</span><span class="op" id="7197301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197316">got</span>&nbsp;<span class="op" id="7197320">:=</span>&nbsp;<span class="ident" id="7197323">outputBuf</span><span class="op" id="7197332">.</span><span class="ident" id="7197333">String</span><span class="op" id="7197339">(</span><span class="op" id="7197340">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7197343">if</span>&nbsp;<span class="ident" id="7197346">got</span>&nbsp;<span class="op" id="7197350">!=</span>&nbsp;<span class="ident" id="7197353">expected</span>&nbsp;<span class="op" id="7197362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197366">t</span><span class="op" id="7197367">.</span><span class="ident" id="7197368">Errorf</span><span class="op" id="7197374">(</span><span class="string" id="7197375">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7197399">,</span>&nbsp;<span class="ident" id="7197401">got</span><span class="op" id="7197404">,</span>&nbsp;<span class="ident" id="7197406">expected</span><span class="op" id="7197414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197417">}</span><br>
<span class="lineno"></span><span class="op" id="7197419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7197422">func</span>&nbsp;<span class="ident" id="7197427">TestReadGNUSparseMap0x1</span><span class="op" id="7197450">(</span><span class="ident" id="7197451">t</span>&nbsp;<span class="op" id="7197453">*</span><span class="ident" id="7197454">testing</span><span class="op" id="7197461">.</span><span class="ident" id="7197462">T</span><span class="op" id="7197463">)</span>&nbsp;<span class="op" id="7197465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197468">headers</span>&nbsp;<span class="op" id="7197476">:=</span>&nbsp;<span class="keyword" id="7197479">map</span><span class="op" id="7197482">[</span><span class="builtintype" id="7197483">string</span><span class="op" id="7197489">]</span><span class="builtintype" id="7197490">string</span><span class="op" id="7197496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197500">paxGNUSparseNumBlocks</span><span class="op" id="7197521">:</span>&nbsp;<span class="string" id="7197523">&#34;4&#34;</span><span class="op" id="7197526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197530">paxGNUSparseMap</span><span class="op" id="7197545">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7197553">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="7197573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197576">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197579">expected</span>&nbsp;<span class="op" id="7197588">:=</span>&nbsp;<span class="op" id="7197591">[</span><span class="op" id="7197592">]</span><span class="ident" id="7197593">sparseEntry</span><span class="op" id="7197604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197608">{</span><span class="ident" id="7197609">offset</span><span class="op" id="7197615">:</span>&nbsp;<span class="num" id="7197617">0</span><span class="op" id="7197618">,</span>&nbsp;<span class="ident" id="7197620">numBytes</span><span class="op" id="7197628">:</span>&nbsp;<span class="num" id="7197630">5</span><span class="op" id="7197631">}</span><span class="op" id="7197632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197636">{</span><span class="ident" id="7197637">offset</span><span class="op" id="7197643">:</span>&nbsp;<span class="num" id="7197645">10</span><span class="op" id="7197647">,</span>&nbsp;<span class="ident" id="7197649">numBytes</span><span class="op" id="7197657">:</span>&nbsp;<span class="num" id="7197659">5</span><span class="op" id="7197660">}</span><span class="op" id="7197661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197665">{</span><span class="ident" id="7197666">offset</span><span class="op" id="7197672">:</span>&nbsp;<span class="num" id="7197674">20</span><span class="op" id="7197676">,</span>&nbsp;<span class="ident" id="7197678">numBytes</span><span class="op" id="7197686">:</span>&nbsp;<span class="num" id="7197688">5</span><span class="op" id="7197689">}</span><span class="op" id="7197690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197694">{</span><span class="ident" id="7197695">offset</span><span class="op" id="7197701">:</span>&nbsp;<span class="num" id="7197703">30</span><span class="op" id="7197705">,</span>&nbsp;<span class="ident" id="7197707">numBytes</span><span class="op" id="7197715">:</span>&nbsp;<span class="num" id="7197717">5</span><span class="op" id="7197718">}</span><span class="op" id="7197719">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197726">sp</span><span class="op" id="7197728">,</span>&nbsp;<span class="ident" id="7197730">err</span>&nbsp;<span class="op" id="7197734">:=</span>&nbsp;<span class="ident" id="7197737">readGNUSparseMap0x1</span><span class="op" id="7197756">(</span><span class="ident" id="7197757">headers</span><span class="op" id="7197764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7197767">if</span>&nbsp;<span class="ident" id="7197770">err</span>&nbsp;<span class="op" id="7197774">!=</span>&nbsp;<span class="ident" id="7197777">nil</span>&nbsp;<span class="op" id="7197781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197785">t</span><span class="op" id="7197786">.</span><span class="ident" id="7197787">Errorf</span><span class="op" id="7197793">(</span><span class="string" id="7197794">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7197816">,</span>&nbsp;<span class="ident" id="7197818">err</span><span class="op" id="7197821">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7197827">if</span>&nbsp;<span class="op" id="7197830">!</span><span class="ident" id="7197831">reflect</span><span class="op" id="7197838">.</span><span class="ident" id="7197839">DeepEqual</span><span class="op" id="7197848">(</span><span class="ident" id="7197849">sp</span><span class="op" id="7197851">,</span>&nbsp;<span class="ident" id="7197853">expected</span><span class="op" id="7197861">)</span>&nbsp;<span class="op" id="7197863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7197867">t</span><span class="op" id="7197868">.</span><span class="ident" id="7197869">Errorf</span><span class="op" id="7197875">(</span><span class="string" id="7197876">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7197917">,</span>&nbsp;<span class="ident" id="7197919">sp</span><span class="op" id="7197921">,</span>&nbsp;<span class="ident" id="7197923">expected</span><span class="op" id="7197931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7197934">}</span><br>
<span class="lineno"></span><span class="op" id="7197936">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="7197939">func</span>&nbsp;<span class="ident" id="7197944">TestReadGNUSparseMap1x0</span><span class="op" id="7197967">(</span><span class="ident" id="7197968">t</span>&nbsp;<span class="op" id="7197970">*</span><span class="ident" id="7197971">testing</span><span class="op" id="7197978">.</span><span class="ident" id="7197979">T</span><span class="op" id="7197980">)</span>&nbsp;<span class="op" id="7197982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7197985">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198069">numEntries</span>&nbsp;<span class="op" id="7198080">:=</span>&nbsp;<span class="num" id="7198083">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198088">expected</span>&nbsp;<span class="op" id="7198097">:=</span>&nbsp;<span class="builtinfunc" id="7198100">make</span><span class="op" id="7198104">(</span><span class="op" id="7198105">[</span><span class="op" id="7198106">]</span><span class="ident" id="7198107">sparseEntry</span><span class="op" id="7198118">,</span>&nbsp;<span class="num" id="7198120">0</span><span class="op" id="7198121">,</span>&nbsp;<span class="ident" id="7198123">numEntries</span><span class="op" id="7198133">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198136">sparseMap</span>&nbsp;<span class="op" id="7198146">:=</span>&nbsp;<span class="builtinfunc" id="7198149">new</span><span class="op" id="7198152">(</span><span class="ident" id="7198153">bytes</span><span class="op" id="7198158">.</span><span class="ident" id="7198159">Buffer</span><span class="op" id="7198165">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198169">fmt</span><span class="op" id="7198172">.</span><span class="ident" id="7198173">Fprintf</span><span class="op" id="7198180">(</span><span class="ident" id="7198181">sparseMap</span><span class="op" id="7198190">,</span>&nbsp;<span class="string" id="7198192">&#34;%d\n&#34;</span><span class="op" id="7198198">,</span>&nbsp;<span class="ident" id="7198200">numEntries</span><span class="op" id="7198210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7198213">for</span>&nbsp;<span class="ident" id="7198217">i</span>&nbsp;<span class="op" id="7198219">:=</span>&nbsp;<span class="num" id="7198222">0</span><span class="op" id="7198223">;</span>&nbsp;<span class="ident" id="7198225">i</span>&nbsp;<span class="op" id="7198227">&lt;</span>&nbsp;<span class="ident" id="7198229">numEntries</span><span class="op" id="7198239">;</span>&nbsp;<span class="ident" id="7198241">i</span><span class="op" id="7198242">++</span>&nbsp;<span class="op" id="7198245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198249">offset</span>&nbsp;<span class="op" id="7198256">:=</span>&nbsp;<span class="ident" id="7198259">int64</span><span class="op" id="7198264">(</span><span class="num" id="7198265">2048</span>&nbsp;<span class="op" id="7198270">*</span>&nbsp;<span class="ident" id="7198272">i</span><span class="op" id="7198273">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198277">numBytes</span>&nbsp;<span class="op" id="7198286">:=</span>&nbsp;<span class="ident" id="7198289">int64</span><span class="op" id="7198294">(</span><span class="num" id="7198295">1024</span><span class="op" id="7198299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198303">expected</span>&nbsp;<span class="op" id="7198312">=</span>&nbsp;<span class="builtinfunc" id="7198314">append</span><span class="op" id="7198320">(</span><span class="ident" id="7198321">expected</span><span class="op" id="7198329">,</span>&nbsp;<span class="ident" id="7198331">sparseEntry</span><span class="op" id="7198342">{</span><span class="ident" id="7198343">offset</span><span class="op" id="7198349">:</span>&nbsp;<span class="ident" id="7198351">offset</span><span class="op" id="7198357">,</span>&nbsp;<span class="ident" id="7198359">numBytes</span><span class="op" id="7198367">:</span>&nbsp;<span class="ident" id="7198369">numBytes</span><span class="op" id="7198377">}</span><span class="op" id="7198378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198382">fmt</span><span class="op" id="7198385">.</span><span class="ident" id="7198386">Fprintf</span><span class="op" id="7198393">(</span><span class="ident" id="7198394">sparseMap</span><span class="op" id="7198403">,</span>&nbsp;<span class="string" id="7198405">&#34;%d\n%d\n&#34;</span><span class="op" id="7198415">,</span>&nbsp;<span class="ident" id="7198417">offset</span><span class="op" id="7198423">,</span>&nbsp;<span class="ident" id="7198425">numBytes</span><span class="op" id="7198433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7198436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7198440">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198519">headerBlocks</span>&nbsp;<span class="op" id="7198532">:=</span>&nbsp;<span class="op" id="7198535">(</span><span class="ident" id="7198536">sparseMap</span><span class="op" id="7198545">.</span><span class="ident" id="7198546">Len</span><span class="op" id="7198549">(</span><span class="op" id="7198550">)</span>&nbsp;<span class="op" id="7198552">+</span>&nbsp;<span class="ident" id="7198554">blockSize</span>&nbsp;<span class="op" id="7198564">-</span>&nbsp;<span class="num" id="7198566">1</span><span class="op" id="7198567">)</span>&nbsp;<span class="op" id="7198569">/</span>&nbsp;<span class="ident" id="7198571">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198582">bufLen</span>&nbsp;<span class="op" id="7198589">:=</span>&nbsp;<span class="ident" id="7198592">blockSize</span>&nbsp;<span class="op" id="7198602">*</span>&nbsp;<span class="ident" id="7198604">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198618">buf</span>&nbsp;<span class="op" id="7198622">:=</span>&nbsp;<span class="builtinfunc" id="7198625">make</span><span class="op" id="7198629">(</span><span class="op" id="7198630">[</span><span class="op" id="7198631">]</span><span class="builtintype" id="7198632">byte</span><span class="op" id="7198636">,</span>&nbsp;<span class="ident" id="7198638">bufLen</span><span class="op" id="7198644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7198647">copy</span><span class="op" id="7198651">(</span><span class="ident" id="7198652">buf</span><span class="op" id="7198655">,</span>&nbsp;<span class="ident" id="7198657">sparseMap</span><span class="op" id="7198666">.</span><span class="ident" id="7198667">Bytes</span><span class="op" id="7198672">(</span><span class="op" id="7198673">)</span><span class="op" id="7198674">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7198678">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198719">r</span>&nbsp;<span class="op" id="7198721">:=</span>&nbsp;<span class="ident" id="7198724">bytes</span><span class="op" id="7198729">.</span><span class="ident" id="7198730">NewReader</span><span class="op" id="7198739">(</span><span class="ident" id="7198740">buf</span><span class="op" id="7198743">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7198747">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198771">sp</span><span class="op" id="7198773">,</span>&nbsp;<span class="ident" id="7198775">err</span>&nbsp;<span class="op" id="7198779">:=</span>&nbsp;<span class="ident" id="7198782">readGNUSparseMap1x0</span><span class="op" id="7198801">(</span><span class="ident" id="7198802">r</span><span class="op" id="7198803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7198806">if</span>&nbsp;<span class="ident" id="7198809">err</span>&nbsp;<span class="op" id="7198813">!=</span>&nbsp;<span class="ident" id="7198816">nil</span>&nbsp;<span class="op" id="7198820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198824">t</span><span class="op" id="7198825">.</span><span class="ident" id="7198826">Errorf</span><span class="op" id="7198832">(</span><span class="string" id="7198833">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7198855">,</span>&nbsp;<span class="ident" id="7198857">err</span><span class="op" id="7198860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7198863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7198866">if</span>&nbsp;<span class="op" id="7198869">!</span><span class="ident" id="7198870">reflect</span><span class="op" id="7198877">.</span><span class="ident" id="7198878">DeepEqual</span><span class="op" id="7198887">(</span><span class="ident" id="7198888">sp</span><span class="op" id="7198890">,</span>&nbsp;<span class="ident" id="7198892">expected</span><span class="op" id="7198900">)</span>&nbsp;<span class="op" id="7198902">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7198906">t</span><span class="op" id="7198907">.</span><span class="ident" id="7198908">Errorf</span><span class="op" id="7198914">(</span><span class="string" id="7198915">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7198956">,</span>&nbsp;<span class="ident" id="7198958">sp</span><span class="op" id="7198960">,</span>&nbsp;<span class="ident" id="7198962">expected</span><span class="op" id="7198970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7198973">}</span><br>
<span class="lineno"></span><span class="op" id="7198975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7198978">func</span>&nbsp;<span class="ident" id="7198983">TestUninitializedRead</span><span class="op" id="7199004">(</span><span class="ident" id="7199005">t</span>&nbsp;<span class="op" id="7199007">*</span><span class="ident" id="7199008">testing</span><span class="op" id="7199015">.</span><span class="ident" id="7199016">T</span><span class="op" id="7199017">)</span>&nbsp;<span class="op" id="7199019">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199022">test</span>&nbsp;<span class="op" id="7199027">:=</span>&nbsp;<span class="ident" id="7199030">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199042">f</span><span class="op" id="7199043">,</span>&nbsp;<span class="ident" id="7199045">err</span>&nbsp;<span class="op" id="7199049">:=</span>&nbsp;<span class="ident" id="7199052">os</span><span class="op" id="7199054">.</span><span class="ident" id="7199055">Open</span><span class="op" id="7199059">(</span><span class="ident" id="7199060">test</span><span class="op" id="7199064">.</span><span class="ident" id="7199065">file</span><span class="op" id="7199069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7199072">if</span>&nbsp;<span class="ident" id="7199075">err</span>&nbsp;<span class="op" id="7199079">!=</span>&nbsp;<span class="ident" id="7199082">nil</span>&nbsp;<span class="op" id="7199086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199090">t</span><span class="op" id="7199091">.</span><span class="ident" id="7199092">Fatalf</span><span class="op" id="7199098">(</span><span class="string" id="7199099">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7199121">,</span>&nbsp;<span class="ident" id="7199123">err</span><span class="op" id="7199126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7199129">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7199132">defer</span>&nbsp;<span class="ident" id="7199138">f</span><span class="op" id="7199139">.</span><span class="ident" id="7199140">Close</span><span class="op" id="7199145">(</span><span class="op" id="7199146">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199150">tr</span>&nbsp;<span class="op" id="7199153">:=</span>&nbsp;<span class="ident" id="7199156">NewReader</span><span class="op" id="7199165">(</span><span class="ident" id="7199166">f</span><span class="op" id="7199167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199170">_</span><span class="op" id="7199171">,</span>&nbsp;<span class="ident" id="7199173">err</span>&nbsp;<span class="op" id="7199177">=</span>&nbsp;<span class="ident" id="7199179">tr</span><span class="op" id="7199181">.</span><span class="ident" id="7199182">Read</span><span class="op" id="7199186">(</span><span class="op" id="7199187">[</span><span class="op" id="7199188">]</span><span class="builtintype" id="7199189">byte</span><span class="op" id="7199193">{</span><span class="op" id="7199194">}</span><span class="op" id="7199195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7199198">if</span>&nbsp;<span class="ident" id="7199201">err</span>&nbsp;<span class="op" id="7199205">==</span>&nbsp;<span class="ident" id="7199208">nil</span>&nbsp;<span class="op" id="7199212">||</span>&nbsp;<span class="ident" id="7199215">err</span>&nbsp;<span class="op" id="7199219">!=</span>&nbsp;<span class="ident" id="7199222">io</span><span class="op" id="7199224">.</span><span class="ident" id="7199225">EOF</span>&nbsp;<span class="op" id="7199229">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199233">t</span><span class="op" id="7199234">.</span><span class="ident" id="7199235">Errorf</span><span class="op" id="7199241">(</span><span class="string" id="7199242">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7199275">,</span>&nbsp;<span class="ident" id="7199277">err</span><span class="op" id="7199280">,</span>&nbsp;<span class="ident" id="7199282">io</span><span class="op" id="7199284">.</span><span class="ident" id="7199285">EOF</span><span class="op" id="7199288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7199291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="7199294">}</span>
</div>
</body>
</html>
