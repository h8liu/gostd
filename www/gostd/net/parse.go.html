<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3261172">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3261227">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3261281">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3261332">//&nbsp;Simple&nbsp;file&nbsp;i/o&nbsp;and&nbsp;string&nbsp;manipulation,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno"></span><span class="comment" id="3261385">//&nbsp;depending&nbsp;on&nbsp;strconv&nbsp;and&nbsp;bufio&nbsp;and&nbsp;strings.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3261433">package</span>&nbsp;<span class="ident" id="3261441">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3261446">import</span>&nbsp;<span class="op" id="3261453">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3261456">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3261462">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3261467">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3261470">type</span>&nbsp;<span class="ident" id="3261475">file</span>&nbsp;<span class="keyword" id="3261480">struct</span>&nbsp;<span class="op" id="3261487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261490">file</span>&nbsp;&nbsp;<span class="op" id="3261496">*</span><span class="ident" id="3261497">os</span><span class="op" id="3261499">.</span><span class="ident" id="3261500">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261506">data</span>&nbsp;&nbsp;<span class="op" id="3261512">[</span><span class="op" id="3261513">]</span><span class="builtintype" id="3261514">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261520">atEOF</span>&nbsp;<span class="builtintype" id="3261526">bool</span><br>
<span class="lineno"></span><span class="op" id="3261531">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3261534">func</span>&nbsp;<span class="op" id="3261539">(</span><span class="ident" id="3261540">f</span>&nbsp;<span class="op" id="3261542">*</span><span class="ident" id="3261543">file</span><span class="op" id="3261547">)</span>&nbsp;<span class="builtinfunc" id="3261549">close</span><span class="op" id="3261554">(</span><span class="op" id="3261555">)</span>&nbsp;<span class="op" id="3261557">{</span>&nbsp;<span class="ident" id="3261559">f</span><span class="op" id="3261560">.</span><span class="ident" id="3261561">file</span><span class="op" id="3261565">.</span><span class="ident" id="3261566">Close</span><span class="op" id="3261571">(</span><span class="op" id="3261572">)</span>&nbsp;<span class="op" id="3261574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3261577">func</span>&nbsp;<span class="op" id="3261582">(</span><span class="ident" id="3261583">f</span>&nbsp;<span class="op" id="3261585">*</span><span class="ident" id="3261586">file</span><span class="op" id="3261590">)</span>&nbsp;<span class="ident" id="3261592">getLineFromData</span><span class="op" id="3261607">(</span><span class="op" id="3261608">)</span>&nbsp;<span class="op" id="3261610">(</span><span class="ident" id="3261611">s</span>&nbsp;<span class="builtintype" id="3261613">string</span><span class="op" id="3261619">,</span>&nbsp;<span class="ident" id="3261621">ok</span>&nbsp;<span class="builtintype" id="3261624">bool</span><span class="op" id="3261628">)</span>&nbsp;<span class="op" id="3261630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261633">data</span>&nbsp;<span class="op" id="3261638">:=</span>&nbsp;<span class="ident" id="3261641">f</span><span class="op" id="3261642">.</span><span class="ident" id="3261643">data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261649">i</span>&nbsp;<span class="op" id="3261651">:=</span>&nbsp;<span class="num" id="3261654">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261657">for</span>&nbsp;<span class="ident" id="3261661">i</span>&nbsp;<span class="op" id="3261663">=</span>&nbsp;<span class="num" id="3261665">0</span><span class="op" id="3261666">;</span>&nbsp;<span class="ident" id="3261668">i</span>&nbsp;<span class="op" id="3261670">&lt;</span>&nbsp;<span class="builtinfunc" id="3261672">len</span><span class="op" id="3261675">(</span><span class="ident" id="3261676">data</span><span class="op" id="3261680">)</span><span class="op" id="3261681">;</span>&nbsp;<span class="ident" id="3261683">i</span><span class="op" id="3261684">++</span>&nbsp;<span class="op" id="3261687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261691">if</span>&nbsp;<span class="ident" id="3261694">data</span><span class="op" id="3261698">[</span><span class="ident" id="3261699">i</span><span class="op" id="3261700">]</span>&nbsp;<span class="op" id="3261702">==</span>&nbsp;<span class="string" id="3261705">&#39;\n&#39;</span>&nbsp;<span class="op" id="3261710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261715">s</span>&nbsp;<span class="op" id="3261717">=</span>&nbsp;<span class="builtintype" id="3261719">string</span><span class="op" id="3261725">(</span><span class="ident" id="3261726">data</span><span class="op" id="3261730">[</span><span class="num" id="3261731">0</span><span class="op" id="3261732">:</span><span class="ident" id="3261733">i</span><span class="op" id="3261734">]</span><span class="op" id="3261735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261740">ok</span>&nbsp;<span class="op" id="3261743">=</span>&nbsp;<span class="builtintype" id="3261745">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261753">//&nbsp;move&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261769">i</span><span class="op" id="3261770">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261776">n</span>&nbsp;<span class="op" id="3261778">:=</span>&nbsp;<span class="builtinfunc" id="3261781">len</span><span class="op" id="3261784">(</span><span class="ident" id="3261785">data</span><span class="op" id="3261789">)</span>&nbsp;<span class="op" id="3261791">-</span>&nbsp;<span class="ident" id="3261793">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3261798">copy</span><span class="op" id="3261802">(</span><span class="ident" id="3261803">data</span><span class="op" id="3261807">[</span><span class="num" id="3261808">0</span><span class="op" id="3261809">:</span><span class="op" id="3261810">]</span><span class="op" id="3261811">,</span>&nbsp;<span class="ident" id="3261813">data</span><span class="op" id="3261817">[</span><span class="ident" id="3261818">i</span><span class="op" id="3261819">:</span><span class="op" id="3261820">]</span><span class="op" id="3261821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261826">f</span><span class="op" id="3261827">.</span><span class="ident" id="3261828">data</span>&nbsp;<span class="op" id="3261833">=</span>&nbsp;<span class="ident" id="3261835">data</span><span class="op" id="3261839">[</span><span class="num" id="3261840">0</span><span class="op" id="3261841">:</span><span class="ident" id="3261842">n</span><span class="op" id="3261843">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261848">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261863">if</span>&nbsp;<span class="ident" id="3261866">f</span><span class="op" id="3261867">.</span><span class="ident" id="3261868">atEOF</span>&nbsp;<span class="op" id="3261874">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3261877">len</span><span class="op" id="3261880">(</span><span class="ident" id="3261881">f</span><span class="op" id="3261882">.</span><span class="ident" id="3261883">data</span><span class="op" id="3261887">)</span>&nbsp;<span class="op" id="3261889">&gt;</span>&nbsp;<span class="num" id="3261891">0</span>&nbsp;<span class="op" id="3261893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261897">//&nbsp;EOF,&nbsp;return&nbsp;all&nbsp;we&nbsp;have</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261926">s</span>&nbsp;<span class="op" id="3261928">=</span>&nbsp;<span class="builtintype" id="3261930">string</span><span class="op" id="3261936">(</span><span class="ident" id="3261937">data</span><span class="op" id="3261941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261945">f</span><span class="op" id="3261946">.</span><span class="ident" id="3261947">data</span>&nbsp;<span class="op" id="3261952">=</span>&nbsp;<span class="ident" id="3261954">f</span><span class="op" id="3261955">.</span><span class="ident" id="3261956">data</span><span class="op" id="3261960">[</span><span class="num" id="3261961">0</span><span class="op" id="3261962">:</span><span class="num" id="3261963">0</span><span class="op" id="3261964">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261968">ok</span>&nbsp;<span class="op" id="3261971">=</span>&nbsp;<span class="builtintype" id="3261973">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261982">return</span><br>
<span class="lineno">45</span><span class="op" id="3261989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3261992">func</span>&nbsp;<span class="op" id="3261997">(</span><span class="ident" id="3261998">f</span>&nbsp;<span class="op" id="3262000">*</span><span class="ident" id="3262001">file</span><span class="op" id="3262005">)</span>&nbsp;<span class="ident" id="3262007">readLine</span><span class="op" id="3262015">(</span><span class="op" id="3262016">)</span>&nbsp;<span class="op" id="3262018">(</span><span class="ident" id="3262019">s</span>&nbsp;<span class="builtintype" id="3262021">string</span><span class="op" id="3262027">,</span>&nbsp;<span class="ident" id="3262029">ok</span>&nbsp;<span class="builtintype" id="3262032">bool</span><span class="op" id="3262036">)</span>&nbsp;<span class="op" id="3262038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262041">if</span>&nbsp;<span class="ident" id="3262044">s</span><span class="op" id="3262045">,</span>&nbsp;<span class="ident" id="3262047">ok</span>&nbsp;<span class="op" id="3262050">=</span>&nbsp;<span class="ident" id="3262052">f</span><span class="op" id="3262053">.</span><span class="ident" id="3262054">getLineFromData</span><span class="op" id="3262069">(</span><span class="op" id="3262070">)</span><span class="op" id="3262071">;</span>&nbsp;<span class="ident" id="3262073">ok</span>&nbsp;<span class="op" id="3262076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262080">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262091">if</span>&nbsp;<span class="builtinfunc" id="3262094">len</span><span class="op" id="3262097">(</span><span class="ident" id="3262098">f</span><span class="op" id="3262099">.</span><span class="ident" id="3262100">data</span><span class="op" id="3262104">)</span>&nbsp;<span class="op" id="3262106">&lt;</span>&nbsp;<span class="builtinfunc" id="3262108">cap</span><span class="op" id="3262111">(</span><span class="ident" id="3262112">f</span><span class="op" id="3262113">.</span><span class="ident" id="3262114">data</span><span class="op" id="3262118">)</span>&nbsp;<span class="op" id="3262120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262124">ln</span>&nbsp;<span class="op" id="3262127">:=</span>&nbsp;<span class="builtinfunc" id="3262130">len</span><span class="op" id="3262133">(</span><span class="ident" id="3262134">f</span><span class="op" id="3262135">.</span><span class="ident" id="3262136">data</span><span class="op" id="3262140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262144">n</span><span class="op" id="3262145">,</span>&nbsp;<span class="ident" id="3262147">err</span>&nbsp;<span class="op" id="3262151">:=</span>&nbsp;<span class="ident" id="3262154">io</span><span class="op" id="3262156">.</span><span class="ident" id="3262157">ReadFull</span><span class="op" id="3262165">(</span><span class="ident" id="3262166">f</span><span class="op" id="3262167">.</span><span class="ident" id="3262168">file</span><span class="op" id="3262172">,</span>&nbsp;<span class="ident" id="3262174">f</span><span class="op" id="3262175">.</span><span class="ident" id="3262176">data</span><span class="op" id="3262180">[</span><span class="ident" id="3262181">ln</span><span class="op" id="3262183">:</span><span class="builtinfunc" id="3262184">cap</span><span class="op" id="3262187">(</span><span class="ident" id="3262188">f</span><span class="op" id="3262189">.</span><span class="ident" id="3262190">data</span><span class="op" id="3262194">)</span><span class="op" id="3262195">]</span><span class="op" id="3262196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262200">if</span>&nbsp;<span class="ident" id="3262203">n</span>&nbsp;<span class="op" id="3262205">&gt;=</span>&nbsp;<span class="num" id="3262208">0</span>&nbsp;<span class="op" id="3262210">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262215">f</span><span class="op" id="3262216">.</span><span class="ident" id="3262217">data</span>&nbsp;<span class="op" id="3262222">=</span>&nbsp;<span class="ident" id="3262224">f</span><span class="op" id="3262225">.</span><span class="ident" id="3262226">data</span><span class="op" id="3262230">[</span><span class="num" id="3262231">0</span>&nbsp;<span class="op" id="3262233">:</span>&nbsp;<span class="ident" id="3262235">ln</span><span class="op" id="3262237">+</span><span class="ident" id="3262238">n</span><span class="op" id="3262239">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262247">if</span>&nbsp;<span class="ident" id="3262250">err</span>&nbsp;<span class="op" id="3262254">==</span>&nbsp;<span class="ident" id="3262257">io</span><span class="op" id="3262259">.</span><span class="ident" id="3262260">EOF</span>&nbsp;<span class="op" id="3262264">||</span>&nbsp;<span class="ident" id="3262267">err</span>&nbsp;<span class="op" id="3262271">==</span>&nbsp;<span class="ident" id="3262274">io</span><span class="op" id="3262276">.</span><span class="ident" id="3262277">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="3262294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262299">f</span><span class="op" id="3262300">.</span><span class="ident" id="3262301">atEOF</span>&nbsp;<span class="op" id="3262307">=</span>&nbsp;<span class="builtintype" id="3262309">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262316">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262322">s</span><span class="op" id="3262323">,</span>&nbsp;<span class="ident" id="3262325">ok</span>&nbsp;<span class="op" id="3262328">=</span>&nbsp;<span class="ident" id="3262330">f</span><span class="op" id="3262331">.</span><span class="ident" id="3262332">getLineFromData</span><span class="op" id="3262347">(</span><span class="op" id="3262348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262351">return</span><br>
<span class="lineno"></span><span class="op" id="3262358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="3262361">func</span>&nbsp;<span class="ident" id="3262366">open</span><span class="op" id="3262370">(</span><span class="ident" id="3262371">name</span>&nbsp;<span class="builtintype" id="3262376">string</span><span class="op" id="3262382">)</span>&nbsp;<span class="op" id="3262384">(</span><span class="op" id="3262385">*</span><span class="ident" id="3262386">file</span><span class="op" id="3262390">,</span>&nbsp;<span class="builtintype" id="3262392">error</span><span class="op" id="3262397">)</span>&nbsp;<span class="op" id="3262399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262402">fd</span><span class="op" id="3262404">,</span>&nbsp;<span class="ident" id="3262406">err</span>&nbsp;<span class="op" id="3262410">:=</span>&nbsp;<span class="ident" id="3262413">os</span><span class="op" id="3262415">.</span><span class="ident" id="3262416">Open</span><span class="op" id="3262420">(</span><span class="ident" id="3262421">name</span><span class="op" id="3262425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262428">if</span>&nbsp;<span class="ident" id="3262431">err</span>&nbsp;<span class="op" id="3262435">!=</span>&nbsp;<span class="ident" id="3262438">nil</span>&nbsp;<span class="op" id="3262442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262446">return</span>&nbsp;<span class="ident" id="3262453">nil</span><span class="op" id="3262456">,</span>&nbsp;<span class="ident" id="3262458">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262463">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262466">return</span>&nbsp;<span class="op" id="3262473">&amp;</span><span class="ident" id="3262474">file</span><span class="op" id="3262478">{</span><span class="ident" id="3262479">fd</span><span class="op" id="3262481">,</span>&nbsp;<span class="builtinfunc" id="3262483">make</span><span class="op" id="3262487">(</span><span class="op" id="3262488">[</span><span class="op" id="3262489">]</span><span class="builtintype" id="3262490">byte</span><span class="op" id="3262494">,</span>&nbsp;<span class="num" id="3262496">0</span><span class="op" id="3262497">,</span>&nbsp;<span class="ident" id="3262499">os</span><span class="op" id="3262501">.</span><span class="ident" id="3262502">Getpagesize</span><span class="op" id="3262513">(</span><span class="op" id="3262514">)</span><span class="op" id="3262515">)</span><span class="op" id="3262516">,</span>&nbsp;<span class="builtintype" id="3262518">false</span><span class="op" id="3262523">}</span><span class="op" id="3262524">,</span>&nbsp;<span class="ident" id="3262526">nil</span><br>
<span class="lineno"></span><span class="op" id="3262530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3262533">func</span>&nbsp;<span class="ident" id="3262538">byteIndex</span><span class="op" id="3262547">(</span><span class="ident" id="3262548">s</span>&nbsp;<span class="builtintype" id="3262550">string</span><span class="op" id="3262556">,</span>&nbsp;<span class="ident" id="3262558">c</span>&nbsp;<span class="builtintype" id="3262560">byte</span><span class="op" id="3262564">)</span>&nbsp;<span class="builtintype" id="3262566">int</span>&nbsp;<span class="op" id="3262570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262573">for</span>&nbsp;<span class="ident" id="3262577">i</span>&nbsp;<span class="op" id="3262579">:=</span>&nbsp;<span class="num" id="3262582">0</span><span class="op" id="3262583">;</span>&nbsp;<span class="ident" id="3262585">i</span>&nbsp;<span class="op" id="3262587">&lt;</span>&nbsp;<span class="builtinfunc" id="3262589">len</span><span class="op" id="3262592">(</span><span class="ident" id="3262593">s</span><span class="op" id="3262594">)</span><span class="op" id="3262595">;</span>&nbsp;<span class="ident" id="3262597">i</span><span class="op" id="3262598">++</span>&nbsp;<span class="op" id="3262601">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262605">if</span>&nbsp;<span class="ident" id="3262608">s</span><span class="op" id="3262609">[</span><span class="ident" id="3262610">i</span><span class="op" id="3262611">]</span>&nbsp;<span class="op" id="3262613">==</span>&nbsp;<span class="ident" id="3262616">c</span>&nbsp;<span class="op" id="3262618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262623">return</span>&nbsp;<span class="ident" id="3262630">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262640">return</span>&nbsp;<span class="op" id="3262647">-</span><span class="num" id="3262648">1</span><br>
<span class="lineno">80</span><span class="op" id="3262650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3262653">//&nbsp;Count&nbsp;occurrences&nbsp;in&nbsp;s&nbsp;of&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3262698">func</span>&nbsp;<span class="ident" id="3262703">countAnyByte</span><span class="op" id="3262715">(</span><span class="ident" id="3262716">s</span>&nbsp;<span class="builtintype" id="3262718">string</span><span class="op" id="3262724">,</span>&nbsp;<span class="ident" id="3262726">t</span>&nbsp;<span class="builtintype" id="3262728">string</span><span class="op" id="3262734">)</span>&nbsp;<span class="builtintype" id="3262736">int</span>&nbsp;<span class="op" id="3262740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262743">n</span>&nbsp;<span class="op" id="3262745">:=</span>&nbsp;<span class="num" id="3262748">0</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262751">for</span>&nbsp;<span class="ident" id="3262755">i</span>&nbsp;<span class="op" id="3262757">:=</span>&nbsp;<span class="num" id="3262760">0</span><span class="op" id="3262761">;</span>&nbsp;<span class="ident" id="3262763">i</span>&nbsp;<span class="op" id="3262765">&lt;</span>&nbsp;<span class="builtinfunc" id="3262767">len</span><span class="op" id="3262770">(</span><span class="ident" id="3262771">s</span><span class="op" id="3262772">)</span><span class="op" id="3262773">;</span>&nbsp;<span class="ident" id="3262775">i</span><span class="op" id="3262776">++</span>&nbsp;<span class="op" id="3262779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262783">if</span>&nbsp;<span class="ident" id="3262786">byteIndex</span><span class="op" id="3262795">(</span><span class="ident" id="3262796">t</span><span class="op" id="3262797">,</span>&nbsp;<span class="ident" id="3262799">s</span><span class="op" id="3262800">[</span><span class="ident" id="3262801">i</span><span class="op" id="3262802">]</span><span class="op" id="3262803">)</span>&nbsp;<span class="op" id="3262805">&gt;=</span>&nbsp;<span class="num" id="3262808">0</span>&nbsp;<span class="op" id="3262810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262815">n</span><span class="op" id="3262816">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262824">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262827">return</span>&nbsp;<span class="ident" id="3262834">n</span><br>
<span class="lineno"></span><span class="op" id="3262836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3262839">//&nbsp;Split&nbsp;s&nbsp;at&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3262869">func</span>&nbsp;<span class="ident" id="3262874">splitAtBytes</span><span class="op" id="3262886">(</span><span class="ident" id="3262887">s</span>&nbsp;<span class="builtintype" id="3262889">string</span><span class="op" id="3262895">,</span>&nbsp;<span class="ident" id="3262897">t</span>&nbsp;<span class="builtintype" id="3262899">string</span><span class="op" id="3262905">)</span>&nbsp;<span class="op" id="3262907">[</span><span class="op" id="3262908">]</span><span class="builtintype" id="3262909">string</span>&nbsp;<span class="op" id="3262916">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262919">a</span>&nbsp;<span class="op" id="3262921">:=</span>&nbsp;<span class="builtinfunc" id="3262924">make</span><span class="op" id="3262928">(</span><span class="op" id="3262929">[</span><span class="op" id="3262930">]</span><span class="builtintype" id="3262931">string</span><span class="op" id="3262937">,</span>&nbsp;<span class="num" id="3262939">1</span><span class="op" id="3262940">+</span><span class="ident" id="3262941">countAnyByte</span><span class="op" id="3262953">(</span><span class="ident" id="3262954">s</span><span class="op" id="3262955">,</span>&nbsp;<span class="ident" id="3262957">t</span><span class="op" id="3262958">)</span><span class="op" id="3262959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262962">n</span>&nbsp;<span class="op" id="3262964">:=</span>&nbsp;<span class="num" id="3262967">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262970">last</span>&nbsp;<span class="op" id="3262975">:=</span>&nbsp;<span class="num" id="3262978">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262981">for</span>&nbsp;<span class="ident" id="3262985">i</span>&nbsp;<span class="op" id="3262987">:=</span>&nbsp;<span class="num" id="3262990">0</span><span class="op" id="3262991">;</span>&nbsp;<span class="ident" id="3262993">i</span>&nbsp;<span class="op" id="3262995">&lt;</span>&nbsp;<span class="builtinfunc" id="3262997">len</span><span class="op" id="3263000">(</span><span class="ident" id="3263001">s</span><span class="op" id="3263002">)</span><span class="op" id="3263003">;</span>&nbsp;<span class="ident" id="3263005">i</span><span class="op" id="3263006">++</span>&nbsp;<span class="op" id="3263009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263013">if</span>&nbsp;<span class="ident" id="3263016">byteIndex</span><span class="op" id="3263025">(</span><span class="ident" id="3263026">t</span><span class="op" id="3263027">,</span>&nbsp;<span class="ident" id="3263029">s</span><span class="op" id="3263030">[</span><span class="ident" id="3263031">i</span><span class="op" id="3263032">]</span><span class="op" id="3263033">)</span>&nbsp;<span class="op" id="3263035">&gt;=</span>&nbsp;<span class="num" id="3263038">0</span>&nbsp;<span class="op" id="3263040">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263045">if</span>&nbsp;<span class="ident" id="3263048">last</span>&nbsp;<span class="op" id="3263053">&lt;</span>&nbsp;<span class="ident" id="3263055">i</span>&nbsp;<span class="op" id="3263057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263063">a</span><span class="op" id="3263064">[</span><span class="ident" id="3263065">n</span><span class="op" id="3263066">]</span>&nbsp;<span class="op" id="3263068">=</span>&nbsp;<span class="builtintype" id="3263070">string</span><span class="op" id="3263076">(</span><span class="ident" id="3263077">s</span><span class="op" id="3263078">[</span><span class="ident" id="3263079">last</span><span class="op" id="3263083">:</span><span class="ident" id="3263084">i</span><span class="op" id="3263085">]</span><span class="op" id="3263086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263092">n</span><span class="op" id="3263093">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263104">last</span>&nbsp;<span class="op" id="3263109">=</span>&nbsp;<span class="ident" id="3263111">i</span>&nbsp;<span class="op" id="3263113">+</span>&nbsp;<span class="num" id="3263115">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263125">if</span>&nbsp;<span class="ident" id="3263128">last</span>&nbsp;<span class="op" id="3263133">&lt;</span>&nbsp;<span class="builtinfunc" id="3263135">len</span><span class="op" id="3263138">(</span><span class="ident" id="3263139">s</span><span class="op" id="3263140">)</span>&nbsp;<span class="op" id="3263142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263146">a</span><span class="op" id="3263147">[</span><span class="ident" id="3263148">n</span><span class="op" id="3263149">]</span>&nbsp;<span class="op" id="3263151">=</span>&nbsp;<span class="builtintype" id="3263153">string</span><span class="op" id="3263159">(</span><span class="ident" id="3263160">s</span><span class="op" id="3263161">[</span><span class="ident" id="3263162">last</span><span class="op" id="3263166">:</span><span class="op" id="3263167">]</span><span class="op" id="3263168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263172">n</span><span class="op" id="3263173">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263180">return</span>&nbsp;<span class="ident" id="3263187">a</span><span class="op" id="3263188">[</span><span class="num" id="3263189">0</span><span class="op" id="3263190">:</span><span class="ident" id="3263191">n</span><span class="op" id="3263192">]</span><br>
<span class="lineno"></span><span class="op" id="3263194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3263197">func</span>&nbsp;<span class="ident" id="3263202">getFields</span><span class="op" id="3263211">(</span><span class="ident" id="3263212">s</span>&nbsp;<span class="builtintype" id="3263214">string</span><span class="op" id="3263220">)</span>&nbsp;<span class="op" id="3263222">[</span><span class="op" id="3263223">]</span><span class="builtintype" id="3263224">string</span>&nbsp;<span class="op" id="3263231">{</span>&nbsp;<span class="keyword" id="3263233">return</span>&nbsp;<span class="ident" id="3263240">splitAtBytes</span><span class="op" id="3263252">(</span><span class="ident" id="3263253">s</span><span class="op" id="3263254">,</span>&nbsp;<span class="string" id="3263256">&#34;&nbsp;\r\t\n&#34;</span><span class="op" id="3263265">)</span>&nbsp;<span class="op" id="3263267">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3263270">//&nbsp;Bigger&nbsp;than&nbsp;we&nbsp;need,&nbsp;not&nbsp;too&nbsp;big&nbsp;to&nbsp;worry&nbsp;about&nbsp;overflow</span><br>
<span class="lineno"></span><span class="keyword" id="3263330">const</span>&nbsp;<span class="ident" id="3263336">big</span>&nbsp;<span class="op" id="3263340">=</span>&nbsp;<span class="num" id="3263342">0xFFFFFF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3263352">//&nbsp;Decimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno">120</span><span class="comment" id="3263394">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3263434">func</span>&nbsp;<span class="ident" id="3263439">dtoi</span><span class="op" id="3263443">(</span><span class="ident" id="3263444">s</span>&nbsp;<span class="builtintype" id="3263446">string</span><span class="op" id="3263452">,</span>&nbsp;<span class="ident" id="3263454">i0</span>&nbsp;<span class="builtintype" id="3263457">int</span><span class="op" id="3263460">)</span>&nbsp;<span class="op" id="3263462">(</span><span class="ident" id="3263463">n</span>&nbsp;<span class="builtintype" id="3263465">int</span><span class="op" id="3263468">,</span>&nbsp;<span class="ident" id="3263470">i</span>&nbsp;<span class="builtintype" id="3263472">int</span><span class="op" id="3263475">,</span>&nbsp;<span class="ident" id="3263477">ok</span>&nbsp;<span class="builtintype" id="3263480">bool</span><span class="op" id="3263484">)</span>&nbsp;<span class="op" id="3263486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263489">n</span>&nbsp;<span class="op" id="3263491">=</span>&nbsp;<span class="num" id="3263493">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263496">for</span>&nbsp;<span class="ident" id="3263500">i</span>&nbsp;<span class="op" id="3263502">=</span>&nbsp;<span class="ident" id="3263504">i0</span><span class="op" id="3263506">;</span>&nbsp;<span class="ident" id="3263508">i</span>&nbsp;<span class="op" id="3263510">&lt;</span>&nbsp;<span class="builtinfunc" id="3263512">len</span><span class="op" id="3263515">(</span><span class="ident" id="3263516">s</span><span class="op" id="3263517">)</span>&nbsp;<span class="op" id="3263519">&amp;&amp;</span>&nbsp;<span class="string" id="3263522">&#39;0&#39;</span>&nbsp;<span class="op" id="3263526">&lt;=</span>&nbsp;<span class="ident" id="3263529">s</span><span class="op" id="3263530">[</span><span class="ident" id="3263531">i</span><span class="op" id="3263532">]</span>&nbsp;<span class="op" id="3263534">&amp;&amp;</span>&nbsp;<span class="ident" id="3263537">s</span><span class="op" id="3263538">[</span><span class="ident" id="3263539">i</span><span class="op" id="3263540">]</span>&nbsp;<span class="op" id="3263542">&lt;=</span>&nbsp;<span class="string" id="3263545">&#39;9&#39;</span><span class="op" id="3263548">;</span>&nbsp;<span class="ident" id="3263550">i</span><span class="op" id="3263551">++</span>&nbsp;<span class="op" id="3263554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263558">n</span>&nbsp;<span class="op" id="3263560">=</span>&nbsp;<span class="ident" id="3263562">n</span><span class="op" id="3263563">*</span><span class="num" id="3263564">10</span>&nbsp;<span class="op" id="3263567">+</span>&nbsp;<span class="builtintype" id="3263569">int</span><span class="op" id="3263572">(</span><span class="ident" id="3263573">s</span><span class="op" id="3263574">[</span><span class="ident" id="3263575">i</span><span class="op" id="3263576">]</span><span class="op" id="3263577">-</span><span class="string" id="3263578">&#39;0&#39;</span><span class="op" id="3263581">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263585">if</span>&nbsp;<span class="ident" id="3263588">n</span>&nbsp;<span class="op" id="3263590">&gt;=</span>&nbsp;<span class="ident" id="3263593">big</span>&nbsp;<span class="op" id="3263597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263602">return</span>&nbsp;<span class="num" id="3263609">0</span><span class="op" id="3263610">,</span>&nbsp;<span class="ident" id="3263612">i</span><span class="op" id="3263613">,</span>&nbsp;<span class="builtintype" id="3263615">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263629">if</span>&nbsp;<span class="ident" id="3263632">i</span>&nbsp;<span class="op" id="3263634">==</span>&nbsp;<span class="ident" id="3263637">i0</span>&nbsp;<span class="op" id="3263640">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263644">return</span>&nbsp;<span class="num" id="3263651">0</span><span class="op" id="3263652">,</span>&nbsp;<span class="ident" id="3263654">i</span><span class="op" id="3263655">,</span>&nbsp;<span class="builtintype" id="3263657">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263667">return</span>&nbsp;<span class="ident" id="3263674">n</span><span class="op" id="3263675">,</span>&nbsp;<span class="ident" id="3263677">i</span><span class="op" id="3263678">,</span>&nbsp;<span class="builtintype" id="3263680">true</span><br>
<span class="lineno"></span><span class="op" id="3263685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="3263688">//&nbsp;Hexadecimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno"></span><span class="comment" id="3263734">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3263774">func</span>&nbsp;<span class="ident" id="3263779">xtoi</span><span class="op" id="3263783">(</span><span class="ident" id="3263784">s</span>&nbsp;<span class="builtintype" id="3263786">string</span><span class="op" id="3263792">,</span>&nbsp;<span class="ident" id="3263794">i0</span>&nbsp;<span class="builtintype" id="3263797">int</span><span class="op" id="3263800">)</span>&nbsp;<span class="op" id="3263802">(</span><span class="ident" id="3263803">n</span>&nbsp;<span class="builtintype" id="3263805">int</span><span class="op" id="3263808">,</span>&nbsp;<span class="ident" id="3263810">i</span>&nbsp;<span class="builtintype" id="3263812">int</span><span class="op" id="3263815">,</span>&nbsp;<span class="ident" id="3263817">ok</span>&nbsp;<span class="builtintype" id="3263820">bool</span><span class="op" id="3263824">)</span>&nbsp;<span class="op" id="3263826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263829">n</span>&nbsp;<span class="op" id="3263831">=</span>&nbsp;<span class="num" id="3263833">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263836">for</span>&nbsp;<span class="ident" id="3263840">i</span>&nbsp;<span class="op" id="3263842">=</span>&nbsp;<span class="ident" id="3263844">i0</span><span class="op" id="3263846">;</span>&nbsp;<span class="ident" id="3263848">i</span>&nbsp;<span class="op" id="3263850">&lt;</span>&nbsp;<span class="builtinfunc" id="3263852">len</span><span class="op" id="3263855">(</span><span class="ident" id="3263856">s</span><span class="op" id="3263857">)</span><span class="op" id="3263858">;</span>&nbsp;<span class="ident" id="3263860">i</span><span class="op" id="3263861">++</span>&nbsp;<span class="op" id="3263864">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263868">if</span>&nbsp;<span class="string" id="3263871">&#39;0&#39;</span>&nbsp;<span class="op" id="3263875">&lt;=</span>&nbsp;<span class="ident" id="3263878">s</span><span class="op" id="3263879">[</span><span class="ident" id="3263880">i</span><span class="op" id="3263881">]</span>&nbsp;<span class="op" id="3263883">&amp;&amp;</span>&nbsp;<span class="ident" id="3263886">s</span><span class="op" id="3263887">[</span><span class="ident" id="3263888">i</span><span class="op" id="3263889">]</span>&nbsp;<span class="op" id="3263891">&lt;=</span>&nbsp;<span class="string" id="3263894">&#39;9&#39;</span>&nbsp;<span class="op" id="3263898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263903">n</span>&nbsp;<span class="op" id="3263905">*=</span>&nbsp;<span class="num" id="3263908">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263914">n</span>&nbsp;<span class="op" id="3263916">+=</span>&nbsp;<span class="builtintype" id="3263919">int</span><span class="op" id="3263922">(</span><span class="ident" id="3263923">s</span><span class="op" id="3263924">[</span><span class="ident" id="3263925">i</span><span class="op" id="3263926">]</span>&nbsp;<span class="op" id="3263928">-</span>&nbsp;<span class="string" id="3263930">&#39;0&#39;</span><span class="op" id="3263933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263937">}</span>&nbsp;<span class="keyword" id="3263939">else</span>&nbsp;<span class="keyword" id="3263944">if</span>&nbsp;<span class="string" id="3263947">&#39;a&#39;</span>&nbsp;<span class="op" id="3263951">&lt;=</span>&nbsp;<span class="ident" id="3263954">s</span><span class="op" id="3263955">[</span><span class="ident" id="3263956">i</span><span class="op" id="3263957">]</span>&nbsp;<span class="op" id="3263959">&amp;&amp;</span>&nbsp;<span class="ident" id="3263962">s</span><span class="op" id="3263963">[</span><span class="ident" id="3263964">i</span><span class="op" id="3263965">]</span>&nbsp;<span class="op" id="3263967">&lt;=</span>&nbsp;<span class="string" id="3263970">&#39;f&#39;</span>&nbsp;<span class="op" id="3263974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263979">n</span>&nbsp;<span class="op" id="3263981">*=</span>&nbsp;<span class="num" id="3263984">16</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263990">n</span>&nbsp;<span class="op" id="3263992">+=</span>&nbsp;<span class="builtintype" id="3263995">int</span><span class="op" id="3263998">(</span><span class="ident" id="3263999">s</span><span class="op" id="3264000">[</span><span class="ident" id="3264001">i</span><span class="op" id="3264002">]</span><span class="op" id="3264003">-</span><span class="string" id="3264004">&#39;a&#39;</span><span class="op" id="3264007">)</span>&nbsp;<span class="op" id="3264009">+</span>&nbsp;<span class="num" id="3264011">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264016">}</span>&nbsp;<span class="keyword" id="3264018">else</span>&nbsp;<span class="keyword" id="3264023">if</span>&nbsp;<span class="string" id="3264026">&#39;A&#39;</span>&nbsp;<span class="op" id="3264030">&lt;=</span>&nbsp;<span class="ident" id="3264033">s</span><span class="op" id="3264034">[</span><span class="ident" id="3264035">i</span><span class="op" id="3264036">]</span>&nbsp;<span class="op" id="3264038">&amp;&amp;</span>&nbsp;<span class="ident" id="3264041">s</span><span class="op" id="3264042">[</span><span class="ident" id="3264043">i</span><span class="op" id="3264044">]</span>&nbsp;<span class="op" id="3264046">&lt;=</span>&nbsp;<span class="string" id="3264049">&#39;F&#39;</span>&nbsp;<span class="op" id="3264053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264058">n</span>&nbsp;<span class="op" id="3264060">*=</span>&nbsp;<span class="num" id="3264063">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264069">n</span>&nbsp;<span class="op" id="3264071">+=</span>&nbsp;<span class="builtintype" id="3264074">int</span><span class="op" id="3264077">(</span><span class="ident" id="3264078">s</span><span class="op" id="3264079">[</span><span class="ident" id="3264080">i</span><span class="op" id="3264081">]</span><span class="op" id="3264082">-</span><span class="string" id="3264083">&#39;A&#39;</span><span class="op" id="3264086">)</span>&nbsp;<span class="op" id="3264088">+</span>&nbsp;<span class="num" id="3264090">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264095">}</span>&nbsp;<span class="keyword" id="3264097">else</span>&nbsp;<span class="op" id="3264102">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264107">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264119">if</span>&nbsp;<span class="ident" id="3264122">n</span>&nbsp;<span class="op" id="3264124">&gt;=</span>&nbsp;<span class="ident" id="3264127">big</span>&nbsp;<span class="op" id="3264131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264136">return</span>&nbsp;<span class="num" id="3264143">0</span><span class="op" id="3264144">,</span>&nbsp;<span class="ident" id="3264146">i</span><span class="op" id="3264147">,</span>&nbsp;<span class="builtintype" id="3264149">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264157">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264163">if</span>&nbsp;<span class="ident" id="3264166">i</span>&nbsp;<span class="op" id="3264168">==</span>&nbsp;<span class="ident" id="3264171">i0</span>&nbsp;<span class="op" id="3264174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264178">return</span>&nbsp;<span class="num" id="3264185">0</span><span class="op" id="3264186">,</span>&nbsp;<span class="ident" id="3264188">i</span><span class="op" id="3264189">,</span>&nbsp;<span class="builtintype" id="3264191">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264201">return</span>&nbsp;<span class="ident" id="3264208">n</span><span class="op" id="3264209">,</span>&nbsp;<span class="ident" id="3264211">i</span><span class="op" id="3264212">,</span>&nbsp;<span class="builtintype" id="3264214">true</span><br>
<span class="lineno">160</span><span class="op" id="3264219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3264222">//&nbsp;xtoi2&nbsp;converts&nbsp;the&nbsp;next&nbsp;two&nbsp;hex&nbsp;digits&nbsp;of&nbsp;s&nbsp;into&nbsp;a&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="3264282">//&nbsp;If&nbsp;s&nbsp;is&nbsp;longer&nbsp;than&nbsp;2&nbsp;bytes&nbsp;then&nbsp;the&nbsp;third&nbsp;byte&nbsp;must&nbsp;be&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="3264344">//&nbsp;If&nbsp;the&nbsp;first&nbsp;two&nbsp;bytes&nbsp;of&nbsp;s&nbsp;are&nbsp;not&nbsp;hex&nbsp;digits&nbsp;or&nbsp;the&nbsp;third&nbsp;byte</span><br>
<span class="lineno">165</span><span class="comment" id="3264412">//&nbsp;does&nbsp;not&nbsp;match&nbsp;e,&nbsp;false&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="3264452">func</span>&nbsp;<span class="ident" id="3264457">xtoi2</span><span class="op" id="3264462">(</span><span class="ident" id="3264463">s</span>&nbsp;<span class="builtintype" id="3264465">string</span><span class="op" id="3264471">,</span>&nbsp;<span class="ident" id="3264473">e</span>&nbsp;<span class="builtintype" id="3264475">byte</span><span class="op" id="3264479">)</span>&nbsp;<span class="op" id="3264481">(</span><span class="builtintype" id="3264482">byte</span><span class="op" id="3264486">,</span>&nbsp;<span class="builtintype" id="3264488">bool</span><span class="op" id="3264492">)</span>&nbsp;<span class="op" id="3264494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264497">if</span>&nbsp;<span class="builtinfunc" id="3264500">len</span><span class="op" id="3264503">(</span><span class="ident" id="3264504">s</span><span class="op" id="3264505">)</span>&nbsp;<span class="op" id="3264507">&gt;</span>&nbsp;<span class="num" id="3264509">2</span>&nbsp;<span class="op" id="3264511">&amp;&amp;</span>&nbsp;<span class="ident" id="3264514">s</span><span class="op" id="3264515">[</span><span class="num" id="3264516">2</span><span class="op" id="3264517">]</span>&nbsp;<span class="op" id="3264519">!=</span>&nbsp;<span class="ident" id="3264522">e</span>&nbsp;<span class="op" id="3264524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264528">return</span>&nbsp;<span class="num" id="3264535">0</span><span class="op" id="3264536">,</span>&nbsp;<span class="builtintype" id="3264538">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264545">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264548">n</span><span class="op" id="3264549">,</span>&nbsp;<span class="ident" id="3264551">ei</span><span class="op" id="3264553">,</span>&nbsp;<span class="ident" id="3264555">ok</span>&nbsp;<span class="op" id="3264558">:=</span>&nbsp;<span class="ident" id="3264561">xtoi</span><span class="op" id="3264565">(</span><span class="ident" id="3264566">s</span><span class="op" id="3264567">[</span><span class="op" id="3264568">:</span><span class="num" id="3264569">2</span><span class="op" id="3264570">]</span><span class="op" id="3264571">,</span>&nbsp;<span class="num" id="3264573">0</span><span class="op" id="3264574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264577">return</span>&nbsp;<span class="builtintype" id="3264584">byte</span><span class="op" id="3264588">(</span><span class="ident" id="3264589">n</span><span class="op" id="3264590">)</span><span class="op" id="3264591">,</span>&nbsp;<span class="ident" id="3264593">ok</span>&nbsp;<span class="op" id="3264596">&amp;&amp;</span>&nbsp;<span class="ident" id="3264599">ei</span>&nbsp;<span class="op" id="3264602">==</span>&nbsp;<span class="num" id="3264605">2</span><br>
<span class="lineno"></span><span class="op" id="3264607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3264610">//&nbsp;Integer&nbsp;to&nbsp;decimal.</span><br>
<span class="lineno">175</span><span class="keyword" id="3264633">func</span>&nbsp;<span class="ident" id="3264638">itoa</span><span class="op" id="3264642">(</span><span class="ident" id="3264643">i</span>&nbsp;<span class="builtintype" id="3264645">int</span><span class="op" id="3264648">)</span>&nbsp;<span class="builtintype" id="3264650">string</span>&nbsp;<span class="op" id="3264657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264660">var</span>&nbsp;<span class="ident" id="3264664">buf</span>&nbsp;<span class="op" id="3264668">[</span><span class="num" id="3264669">30</span><span class="op" id="3264671">]</span><span class="builtintype" id="3264672">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264678">n</span>&nbsp;<span class="op" id="3264680">:=</span>&nbsp;<span class="builtinfunc" id="3264683">len</span><span class="op" id="3264686">(</span><span class="ident" id="3264687">buf</span><span class="op" id="3264690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264693">neg</span>&nbsp;<span class="op" id="3264697">:=</span>&nbsp;<span class="builtintype" id="3264700">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264707">if</span>&nbsp;<span class="ident" id="3264710">i</span>&nbsp;<span class="op" id="3264712">&lt;</span>&nbsp;<span class="num" id="3264714">0</span>&nbsp;<span class="op" id="3264716">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264720">i</span>&nbsp;<span class="op" id="3264722">=</span>&nbsp;<span class="op" id="3264724">-</span><span class="ident" id="3264725">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264729">neg</span>&nbsp;<span class="op" id="3264733">=</span>&nbsp;<span class="builtintype" id="3264735">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264744">ui</span>&nbsp;<span class="op" id="3264747">:=</span>&nbsp;<span class="builtintype" id="3264750">uint</span><span class="op" id="3264754">(</span><span class="ident" id="3264755">i</span><span class="op" id="3264756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264759">for</span>&nbsp;<span class="ident" id="3264763">ui</span>&nbsp;<span class="op" id="3264766">&gt;</span>&nbsp;<span class="num" id="3264768">0</span>&nbsp;<span class="op" id="3264770">||</span>&nbsp;<span class="ident" id="3264773">n</span>&nbsp;<span class="op" id="3264775">==</span>&nbsp;<span class="builtinfunc" id="3264778">len</span><span class="op" id="3264781">(</span><span class="ident" id="3264782">buf</span><span class="op" id="3264785">)</span>&nbsp;<span class="op" id="3264787">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264791">n</span><span class="op" id="3264792">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264797">buf</span><span class="op" id="3264800">[</span><span class="ident" id="3264801">n</span><span class="op" id="3264802">]</span>&nbsp;<span class="op" id="3264804">=</span>&nbsp;<span class="builtintype" id="3264806">byte</span><span class="op" id="3264810">(</span><span class="string" id="3264811">&#39;0&#39;</span>&nbsp;<span class="op" id="3264815">+</span>&nbsp;<span class="ident" id="3264817">ui</span><span class="op" id="3264819">%</span><span class="num" id="3264820">10</span><span class="op" id="3264822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264826">ui</span>&nbsp;<span class="op" id="3264829">/=</span>&nbsp;<span class="num" id="3264832">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264839">if</span>&nbsp;<span class="ident" id="3264842">neg</span>&nbsp;<span class="op" id="3264846">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264850">n</span><span class="op" id="3264851">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264856">buf</span><span class="op" id="3264859">[</span><span class="ident" id="3264860">n</span><span class="op" id="3264861">]</span>&nbsp;<span class="op" id="3264863">=</span>&nbsp;<span class="string" id="3264865">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264873">return</span>&nbsp;<span class="builtintype" id="3264880">string</span><span class="op" id="3264886">(</span><span class="ident" id="3264887">buf</span><span class="op" id="3264890">[</span><span class="ident" id="3264891">n</span><span class="op" id="3264892">:</span><span class="op" id="3264893">]</span><span class="op" id="3264894">)</span><br>
<span class="lineno"></span><span class="op" id="3264896">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3264899">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3264931">func</span>&nbsp;<span class="ident" id="3264936">itod</span><span class="op" id="3264940">(</span><span class="ident" id="3264941">i</span>&nbsp;<span class="builtintype" id="3264943">uint</span><span class="op" id="3264947">)</span>&nbsp;<span class="builtintype" id="3264949">string</span>&nbsp;<span class="op" id="3264956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264959">if</span>&nbsp;<span class="ident" id="3264962">i</span>&nbsp;<span class="op" id="3264964">==</span>&nbsp;<span class="num" id="3264967">0</span>&nbsp;<span class="op" id="3264969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264973">return</span>&nbsp;<span class="string" id="3264980">&#34;0&#34;</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264989">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265028">var</span>&nbsp;<span class="ident" id="3265032">b</span>&nbsp;<span class="op" id="3265034">[</span><span class="num" id="3265035">32</span><span class="op" id="3265037">]</span><span class="builtintype" id="3265038">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265044">bp</span>&nbsp;<span class="op" id="3265047">:=</span>&nbsp;<span class="builtinfunc" id="3265050">len</span><span class="op" id="3265053">(</span><span class="ident" id="3265054">b</span><span class="op" id="3265055">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265058">for</span>&nbsp;<span class="op" id="3265062">;</span>&nbsp;<span class="ident" id="3265064">i</span>&nbsp;<span class="op" id="3265066">&gt;</span>&nbsp;<span class="num" id="3265068">0</span><span class="op" id="3265069">;</span>&nbsp;<span class="ident" id="3265071">i</span>&nbsp;<span class="op" id="3265073">/=</span>&nbsp;<span class="num" id="3265076">10</span>&nbsp;<span class="op" id="3265079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265083">bp</span><span class="op" id="3265085">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265090">b</span><span class="op" id="3265091">[</span><span class="ident" id="3265092">bp</span><span class="op" id="3265094">]</span>&nbsp;<span class="op" id="3265096">=</span>&nbsp;<span class="builtintype" id="3265098">byte</span><span class="op" id="3265102">(</span><span class="ident" id="3265103">i</span><span class="op" id="3265104">%</span><span class="num" id="3265105">10</span><span class="op" id="3265107">)</span>&nbsp;<span class="op" id="3265109">+</span>&nbsp;<span class="string" id="3265111">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3265116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265120">return</span>&nbsp;<span class="builtintype" id="3265127">string</span><span class="op" id="3265133">(</span><span class="ident" id="3265134">b</span><span class="op" id="3265135">[</span><span class="ident" id="3265136">bp</span><span class="op" id="3265138">:</span><span class="op" id="3265139">]</span><span class="op" id="3265140">)</span><br>
<span class="lineno"></span><span class="op" id="3265142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3265145">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;a&nbsp;hexadecimal&nbsp;string.&nbsp;Leading&nbsp;zeros&nbsp;are&nbsp;not&nbsp;printed.</span><br>
<span class="lineno"></span><span class="keyword" id="3265214">func</span>&nbsp;<span class="ident" id="3265219">appendHex</span><span class="op" id="3265228">(</span><span class="ident" id="3265229">dst</span>&nbsp;<span class="op" id="3265233">[</span><span class="op" id="3265234">]</span><span class="builtintype" id="3265235">byte</span><span class="op" id="3265239">,</span>&nbsp;<span class="ident" id="3265241">i</span>&nbsp;<span class="builtintype" id="3265243">uint32</span><span class="op" id="3265249">)</span>&nbsp;<span class="op" id="3265251">[</span><span class="op" id="3265252">]</span><span class="builtintype" id="3265253">byte</span>&nbsp;<span class="op" id="3265258">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265261">if</span>&nbsp;<span class="ident" id="3265264">i</span>&nbsp;<span class="op" id="3265266">==</span>&nbsp;<span class="num" id="3265269">0</span>&nbsp;<span class="op" id="3265271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265275">return</span>&nbsp;<span class="builtinfunc" id="3265282">append</span><span class="op" id="3265288">(</span><span class="ident" id="3265289">dst</span><span class="op" id="3265292">,</span>&nbsp;<span class="string" id="3265294">&#39;0&#39;</span><span class="op" id="3265297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3265300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265303">for</span>&nbsp;<span class="ident" id="3265307">j</span>&nbsp;<span class="op" id="3265309">:=</span>&nbsp;<span class="num" id="3265312">7</span><span class="op" id="3265313">;</span>&nbsp;<span class="ident" id="3265315">j</span>&nbsp;<span class="op" id="3265317">&gt;=</span>&nbsp;<span class="num" id="3265320">0</span><span class="op" id="3265321">;</span>&nbsp;<span class="ident" id="3265323">j</span><span class="op" id="3265324">--</span>&nbsp;<span class="op" id="3265327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265331">v</span>&nbsp;<span class="op" id="3265333">:=</span>&nbsp;<span class="ident" id="3265336">i</span>&nbsp;<span class="op" id="3265338">&gt;&gt;</span>&nbsp;<span class="builtintype" id="3265341">uint</span><span class="op" id="3265345">(</span><span class="ident" id="3265346">j</span><span class="op" id="3265347">*</span><span class="num" id="3265348">4</span><span class="op" id="3265349">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265353">if</span>&nbsp;<span class="ident" id="3265356">v</span>&nbsp;<span class="op" id="3265358">&gt;</span>&nbsp;<span class="num" id="3265360">0</span>&nbsp;<span class="op" id="3265362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265367">dst</span>&nbsp;<span class="op" id="3265371">=</span>&nbsp;<span class="builtinfunc" id="3265373">append</span><span class="op" id="3265379">(</span><span class="ident" id="3265380">dst</span><span class="op" id="3265383">,</span>&nbsp;<span class="ident" id="3265385">hexDigit</span><span class="op" id="3265393">[</span><span class="ident" id="3265394">v</span><span class="op" id="3265395">&amp;</span><span class="num" id="3265396">0xf</span><span class="op" id="3265399">]</span><span class="op" id="3265400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3265404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3265407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265410">return</span>&nbsp;<span class="ident" id="3265417">dst</span><br>
<span class="lineno">225</span><span class="op" id="3265421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3265424">//&nbsp;Number&nbsp;of&nbsp;occurrences&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3265460">func</span>&nbsp;<span class="ident" id="3265465">count</span><span class="op" id="3265470">(</span><span class="ident" id="3265471">s</span>&nbsp;<span class="builtintype" id="3265473">string</span><span class="op" id="3265479">,</span>&nbsp;<span class="ident" id="3265481">b</span>&nbsp;<span class="builtintype" id="3265483">byte</span><span class="op" id="3265487">)</span>&nbsp;<span class="builtintype" id="3265489">int</span>&nbsp;<span class="op" id="3265493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265496">n</span>&nbsp;<span class="op" id="3265498">:=</span>&nbsp;<span class="num" id="3265501">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265504">for</span>&nbsp;<span class="ident" id="3265508">i</span>&nbsp;<span class="op" id="3265510">:=</span>&nbsp;<span class="num" id="3265513">0</span><span class="op" id="3265514">;</span>&nbsp;<span class="ident" id="3265516">i</span>&nbsp;<span class="op" id="3265518">&lt;</span>&nbsp;<span class="builtinfunc" id="3265520">len</span><span class="op" id="3265523">(</span><span class="ident" id="3265524">s</span><span class="op" id="3265525">)</span><span class="op" id="3265526">;</span>&nbsp;<span class="ident" id="3265528">i</span><span class="op" id="3265529">++</span>&nbsp;<span class="op" id="3265532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265536">if</span>&nbsp;<span class="ident" id="3265539">s</span><span class="op" id="3265540">[</span><span class="ident" id="3265541">i</span><span class="op" id="3265542">]</span>&nbsp;<span class="op" id="3265544">==</span>&nbsp;<span class="ident" id="3265547">b</span>&nbsp;<span class="op" id="3265549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265554">n</span><span class="op" id="3265555">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3265560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3265563">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265566">return</span>&nbsp;<span class="ident" id="3265573">n</span><br>
<span class="lineno"></span><span class="op" id="3265575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3265578">//&nbsp;Index&nbsp;of&nbsp;rightmost&nbsp;occurrence&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3265622">func</span>&nbsp;<span class="ident" id="3265627">last</span><span class="op" id="3265631">(</span><span class="ident" id="3265632">s</span>&nbsp;<span class="builtintype" id="3265634">string</span><span class="op" id="3265640">,</span>&nbsp;<span class="ident" id="3265642">b</span>&nbsp;<span class="builtintype" id="3265644">byte</span><span class="op" id="3265648">)</span>&nbsp;<span class="builtintype" id="3265650">int</span>&nbsp;<span class="op" id="3265654">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265657">i</span>&nbsp;<span class="op" id="3265659">:=</span>&nbsp;<span class="builtinfunc" id="3265662">len</span><span class="op" id="3265665">(</span><span class="ident" id="3265666">s</span><span class="op" id="3265667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265670">for</span>&nbsp;<span class="ident" id="3265674">i</span><span class="op" id="3265675">--</span><span class="op" id="3265677">;</span>&nbsp;<span class="ident" id="3265679">i</span>&nbsp;<span class="op" id="3265681">&gt;=</span>&nbsp;<span class="num" id="3265684">0</span><span class="op" id="3265685">;</span>&nbsp;<span class="ident" id="3265687">i</span><span class="op" id="3265688">--</span>&nbsp;<span class="op" id="3265691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265695">if</span>&nbsp;<span class="ident" id="3265698">s</span><span class="op" id="3265699">[</span><span class="ident" id="3265700">i</span><span class="op" id="3265701">]</span>&nbsp;<span class="op" id="3265703">==</span>&nbsp;<span class="ident" id="3265706">b</span>&nbsp;<span class="op" id="3265708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265713">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3265721">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3265724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265727">return</span>&nbsp;<span class="ident" id="3265734">i</span><br>
<span class="lineno"></span><span class="op" id="3265736">}</span>
</div>
</body>
</html>
