<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2074194">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2074249">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2074303">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2074354">package</span>&nbsp;<span class="ident" id="2074362">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2074368">func</span>&nbsp;<span class="ident" id="2074373">isOddInt</span><span class="op" id="2074381">(</span><span class="ident" id="2074382">x</span>&nbsp;<span class="builtintype" id="2074384">float64</span><span class="op" id="2074391">)</span>&nbsp;<span class="builtintype" id="2074393">bool</span>&nbsp;<span class="op" id="2074398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2074401">xi</span><span class="op" id="2074403">,</span>&nbsp;<span class="ident" id="2074405">xf</span>&nbsp;<span class="op" id="2074408">:=</span>&nbsp;<span class="ident" id="2074411">Modf</span><span class="op" id="2074415">(</span><span class="ident" id="2074416">x</span><span class="op" id="2074417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2074420">return</span>&nbsp;<span class="ident" id="2074427">xf</span>&nbsp;<span class="op" id="2074430">==</span>&nbsp;<span class="num" id="2074433">0</span>&nbsp;<span class="op" id="2074435">&amp;&amp;</span>&nbsp;<span class="ident" id="2074438">int64</span><span class="op" id="2074443">(</span><span class="ident" id="2074444">xi</span><span class="op" id="2074446">)</span><span class="op" id="2074447">&amp;</span><span class="num" id="2074448">1</span>&nbsp;<span class="op" id="2074450">==</span>&nbsp;<span class="num" id="2074453">1</span><br>
<span class="lineno">10</span><span class="op" id="2074455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2074458">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="2074526">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2074592">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="2074642">//</span><br>
<span class="lineno"></span><span class="comment" id="2074645">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="2074678">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2074707">//&nbsp;&nbsp;&nbsp;&nbspPow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="2074734">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2074761">//&nbsp;&nbsp;&nbsp;&nbspPow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2074782">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2074803">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2074851">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="2074876">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="2074899">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2074961">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2075007">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2075067">//&nbsp;&nbsp;&nbsp;&nbspPow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="2075089">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2075124">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2075157">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2075190">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2075225">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="2075258">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2075289">//&nbsp;&nbsp;&nbsp;&nbspPow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="2075319">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="2075380">func</span>&nbsp;<span class="ident" id="2075385">Pow</span><span class="op" id="2075388">(</span><span class="ident" id="2075389">x</span><span class="op" id="2075390">,</span>&nbsp;<span class="ident" id="2075392">y</span>&nbsp;<span class="builtintype" id="2075394">float64</span><span class="op" id="2075401">)</span>&nbsp;<span class="builtintype" id="2075403">float64</span>&nbsp;<span class="op" id="2075411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075414">switch</span>&nbsp;<span class="op" id="2075421">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075424">case</span>&nbsp;<span class="ident" id="2075429">y</span>&nbsp;<span class="op" id="2075431">==</span>&nbsp;<span class="num" id="2075434">0</span>&nbsp;<span class="op" id="2075436">||</span>&nbsp;<span class="ident" id="2075439">x</span>&nbsp;<span class="op" id="2075441">==</span>&nbsp;<span class="num" id="2075444">1</span><span class="op" id="2075445">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075449">return</span>&nbsp;<span class="num" id="2075456">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075459">case</span>&nbsp;<span class="ident" id="2075464">y</span>&nbsp;<span class="op" id="2075466">==</span>&nbsp;<span class="num" id="2075469">1</span><span class="op" id="2075470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075474">return</span>&nbsp;<span class="ident" id="2075481">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075484">case</span>&nbsp;<span class="ident" id="2075489">y</span>&nbsp;<span class="op" id="2075491">==</span>&nbsp;<span class="num" id="2075494">0.5</span><span class="op" id="2075497">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075501">return</span>&nbsp;<span class="ident" id="2075508">Sqrt</span><span class="op" id="2075512">(</span><span class="ident" id="2075513">x</span><span class="op" id="2075514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075517">case</span>&nbsp;<span class="ident" id="2075522">y</span>&nbsp;<span class="op" id="2075524">==</span>&nbsp;<span class="op" id="2075527">-</span><span class="num" id="2075528">0.5</span><span class="op" id="2075531">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075535">return</span>&nbsp;<span class="num" id="2075542">1</span>&nbsp;<span class="op" id="2075544">/</span>&nbsp;<span class="ident" id="2075546">Sqrt</span><span class="op" id="2075550">(</span><span class="ident" id="2075551">x</span><span class="op" id="2075552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075555">case</span>&nbsp;<span class="ident" id="2075560">IsNaN</span><span class="op" id="2075565">(</span><span class="ident" id="2075566">x</span><span class="op" id="2075567">)</span>&nbsp;<span class="op" id="2075569">||</span>&nbsp;<span class="ident" id="2075572">IsNaN</span><span class="op" id="2075577">(</span><span class="ident" id="2075578">y</span><span class="op" id="2075579">)</span><span class="op" id="2075580">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075584">return</span>&nbsp;<span class="ident" id="2075591">NaN</span><span class="op" id="2075594">(</span><span class="op" id="2075595">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075598">case</span>&nbsp;<span class="ident" id="2075603">x</span>&nbsp;<span class="op" id="2075605">==</span>&nbsp;<span class="num" id="2075608">0</span><span class="op" id="2075609">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075613">switch</span>&nbsp;<span class="op" id="2075620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075624">case</span>&nbsp;<span class="ident" id="2075629">y</span>&nbsp;<span class="op" id="2075631">&lt;</span>&nbsp;<span class="num" id="2075633">0</span><span class="op" id="2075634">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075639">if</span>&nbsp;<span class="ident" id="2075642">isOddInt</span><span class="op" id="2075650">(</span><span class="ident" id="2075651">y</span><span class="op" id="2075652">)</span>&nbsp;<span class="op" id="2075654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075660">return</span>&nbsp;<span class="ident" id="2075667">Copysign</span><span class="op" id="2075675">(</span><span class="ident" id="2075676">Inf</span><span class="op" id="2075679">(</span><span class="num" id="2075680">1</span><span class="op" id="2075681">)</span><span class="op" id="2075682">,</span>&nbsp;<span class="ident" id="2075684">x</span><span class="op" id="2075685">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2075690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075695">return</span>&nbsp;<span class="ident" id="2075702">Inf</span><span class="op" id="2075705">(</span><span class="num" id="2075706">1</span><span class="op" id="2075707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075711">case</span>&nbsp;<span class="ident" id="2075716">y</span>&nbsp;<span class="op" id="2075718">&gt;</span>&nbsp;<span class="num" id="2075720">0</span><span class="op" id="2075721">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075726">if</span>&nbsp;<span class="ident" id="2075729">isOddInt</span><span class="op" id="2075737">(</span><span class="ident" id="2075738">y</span><span class="op" id="2075739">)</span>&nbsp;<span class="op" id="2075741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075747">return</span>&nbsp;<span class="ident" id="2075754">x</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2075759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075764">return</span>&nbsp;<span class="num" id="2075771">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2075775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075778">case</span>&nbsp;<span class="ident" id="2075783">IsInf</span><span class="op" id="2075788">(</span><span class="ident" id="2075789">y</span><span class="op" id="2075790">,</span>&nbsp;<span class="num" id="2075792">0</span><span class="op" id="2075793">)</span><span class="op" id="2075794">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075798">switch</span>&nbsp;<span class="op" id="2075805">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075809">case</span>&nbsp;<span class="ident" id="2075814">x</span>&nbsp;<span class="op" id="2075816">==</span>&nbsp;<span class="op" id="2075819">-</span><span class="num" id="2075820">1</span><span class="op" id="2075821">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075826">return</span>&nbsp;<span class="num" id="2075833">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075837">case</span>&nbsp;<span class="op" id="2075842">(</span><span class="ident" id="2075843">Abs</span><span class="op" id="2075846">(</span><span class="ident" id="2075847">x</span><span class="op" id="2075848">)</span>&nbsp;<span class="op" id="2075850">&lt;</span>&nbsp;<span class="num" id="2075852">1</span><span class="op" id="2075853">)</span>&nbsp;<span class="op" id="2075855">==</span>&nbsp;<span class="ident" id="2075858">IsInf</span><span class="op" id="2075863">(</span><span class="ident" id="2075864">y</span><span class="op" id="2075865">,</span>&nbsp;<span class="num" id="2075867">1</span><span class="op" id="2075868">)</span><span class="op" id="2075869">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075874">return</span>&nbsp;<span class="num" id="2075881">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075885">default</span><span class="op" id="2075892">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075897">return</span>&nbsp;<span class="ident" id="2075904">Inf</span><span class="op" id="2075907">(</span><span class="num" id="2075908">1</span><span class="op" id="2075909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2075913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075916">case</span>&nbsp;<span class="ident" id="2075921">IsInf</span><span class="op" id="2075926">(</span><span class="ident" id="2075927">x</span><span class="op" id="2075928">,</span>&nbsp;<span class="num" id="2075930">0</span><span class="op" id="2075931">)</span><span class="op" id="2075932">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075936">if</span>&nbsp;<span class="ident" id="2075939">IsInf</span><span class="op" id="2075944">(</span><span class="ident" id="2075945">x</span><span class="op" id="2075946">,</span>&nbsp;<span class="op" id="2075948">-</span><span class="num" id="2075949">1</span><span class="op" id="2075950">)</span>&nbsp;<span class="op" id="2075952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075957">return</span>&nbsp;<span class="ident" id="2075964">Pow</span><span class="op" id="2075967">(</span><span class="num" id="2075968">1</span><span class="op" id="2075969">/</span><span class="ident" id="2075970">x</span><span class="op" id="2075971">,</span>&nbsp;<span class="op" id="2075973">-</span><span class="ident" id="2075974">y</span><span class="op" id="2075975">)</span>&nbsp;<span class="comment" id="2075977">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2075994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2075998">switch</span>&nbsp;<span class="op" id="2076005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076009">case</span>&nbsp;<span class="ident" id="2076014">y</span>&nbsp;<span class="op" id="2076016">&lt;</span>&nbsp;<span class="num" id="2076018">0</span><span class="op" id="2076019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076024">return</span>&nbsp;<span class="num" id="2076031">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076035">case</span>&nbsp;<span class="ident" id="2076040">y</span>&nbsp;<span class="op" id="2076042">&gt;</span>&nbsp;<span class="num" id="2076044">0</span><span class="op" id="2076045">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076050">return</span>&nbsp;<span class="ident" id="2076057">Inf</span><span class="op" id="2076060">(</span><span class="num" id="2076061">1</span><span class="op" id="2076062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076073">absy</span>&nbsp;<span class="op" id="2076078">:=</span>&nbsp;<span class="ident" id="2076081">y</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076084">flip</span>&nbsp;<span class="op" id="2076089">:=</span>&nbsp;<span class="ident" id="2076092">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076099">if</span>&nbsp;<span class="ident" id="2076102">absy</span>&nbsp;<span class="op" id="2076107">&lt;</span>&nbsp;<span class="num" id="2076109">0</span>&nbsp;<span class="op" id="2076111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076115">absy</span>&nbsp;<span class="op" id="2076120">=</span>&nbsp;<span class="op" id="2076122">-</span><span class="ident" id="2076123">absy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076130">flip</span>&nbsp;<span class="op" id="2076135">=</span>&nbsp;<span class="ident" id="2076137">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076143">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076146">yi</span><span class="op" id="2076148">,</span>&nbsp;<span class="ident" id="2076150">yf</span>&nbsp;<span class="op" id="2076153">:=</span>&nbsp;<span class="ident" id="2076156">Modf</span><span class="op" id="2076160">(</span><span class="ident" id="2076161">absy</span><span class="op" id="2076165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076168">if</span>&nbsp;<span class="ident" id="2076171">yf</span>&nbsp;<span class="op" id="2076174">!=</span>&nbsp;<span class="num" id="2076177">0</span>&nbsp;<span class="op" id="2076179">&amp;&amp;</span>&nbsp;<span class="ident" id="2076182">x</span>&nbsp;<span class="op" id="2076184">&lt;</span>&nbsp;<span class="num" id="2076186">0</span>&nbsp;<span class="op" id="2076188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076192">return</span>&nbsp;<span class="ident" id="2076199">NaN</span><span class="op" id="2076202">(</span><span class="op" id="2076203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076209">if</span>&nbsp;<span class="ident" id="2076212">yi</span>&nbsp;<span class="op" id="2076215">&gt;=</span>&nbsp;<span class="num" id="2076218">1</span><span class="op" id="2076219">&lt;&lt;</span><span class="num" id="2076221">63</span>&nbsp;<span class="op" id="2076224">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076228">return</span>&nbsp;<span class="ident" id="2076235">Exp</span><span class="op" id="2076238">(</span><span class="ident" id="2076239">y</span>&nbsp;<span class="op" id="2076241">*</span>&nbsp;<span class="ident" id="2076243">Log</span><span class="op" id="2076246">(</span><span class="ident" id="2076247">x</span><span class="op" id="2076248">)</span><span class="op" id="2076249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2076256">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076292">a1</span>&nbsp;<span class="op" id="2076295">:=</span>&nbsp;<span class="num" id="2076298">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076303">ae</span>&nbsp;<span class="op" id="2076306">:=</span>&nbsp;<span class="num" id="2076309">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2076313">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076330">if</span>&nbsp;<span class="ident" id="2076333">yf</span>&nbsp;<span class="op" id="2076336">!=</span>&nbsp;<span class="num" id="2076339">0</span>&nbsp;<span class="op" id="2076341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076345">if</span>&nbsp;<span class="ident" id="2076348">yf</span>&nbsp;<span class="op" id="2076351">&gt;</span>&nbsp;<span class="num" id="2076353">0.5</span>&nbsp;<span class="op" id="2076357">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076362">yf</span><span class="op" id="2076364">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076370">yi</span><span class="op" id="2076372">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076381">a1</span>&nbsp;<span class="op" id="2076384">=</span>&nbsp;<span class="ident" id="2076386">Exp</span><span class="op" id="2076389">(</span><span class="ident" id="2076390">yf</span>&nbsp;<span class="op" id="2076393">*</span>&nbsp;<span class="ident" id="2076395">Log</span><span class="op" id="2076398">(</span><span class="ident" id="2076399">x</span><span class="op" id="2076400">)</span><span class="op" id="2076401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076404">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2076408">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2076425">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2076468">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2076502">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076541">x1</span><span class="op" id="2076543">,</span>&nbsp;<span class="ident" id="2076545">xe</span>&nbsp;<span class="op" id="2076548">:=</span>&nbsp;<span class="ident" id="2076551">Frexp</span><span class="op" id="2076556">(</span><span class="ident" id="2076557">x</span><span class="op" id="2076558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076561">for</span>&nbsp;<span class="ident" id="2076565">i</span>&nbsp;<span class="op" id="2076567">:=</span>&nbsp;<span class="ident" id="2076570">int64</span><span class="op" id="2076575">(</span><span class="ident" id="2076576">yi</span><span class="op" id="2076578">)</span><span class="op" id="2076579">;</span>&nbsp;<span class="ident" id="2076581">i</span>&nbsp;<span class="op" id="2076583">!=</span>&nbsp;<span class="num" id="2076586">0</span><span class="op" id="2076587">;</span>&nbsp;<span class="ident" id="2076589">i</span>&nbsp;<span class="op" id="2076591">&gt;&gt;=</span>&nbsp;<span class="num" id="2076595">1</span>&nbsp;<span class="op" id="2076597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076601">if</span>&nbsp;<span class="ident" id="2076604">i</span><span class="op" id="2076605">&amp;</span><span class="num" id="2076606">1</span>&nbsp;<span class="op" id="2076608">==</span>&nbsp;<span class="num" id="2076611">1</span>&nbsp;<span class="op" id="2076613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076618">a1</span>&nbsp;<span class="op" id="2076621">*=</span>&nbsp;<span class="ident" id="2076624">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076630">ae</span>&nbsp;<span class="op" id="2076633">+=</span>&nbsp;<span class="ident" id="2076636">xe</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076645">x1</span>&nbsp;<span class="op" id="2076648">*=</span>&nbsp;<span class="ident" id="2076651">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076656">xe</span>&nbsp;<span class="op" id="2076659">&lt;&lt;=</span>&nbsp;<span class="num" id="2076663">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076667">if</span>&nbsp;<span class="ident" id="2076670">x1</span>&nbsp;<span class="op" id="2076673">&lt;</span>&nbsp;<span class="num" id="2076675">.5</span>&nbsp;<span class="op" id="2076678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076683">x1</span>&nbsp;<span class="op" id="2076686">+=</span>&nbsp;<span class="ident" id="2076689">x1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076695">xe</span><span class="op" id="2076697">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2076709">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2076728">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2076758">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076788">if</span>&nbsp;<span class="ident" id="2076791">flip</span>&nbsp;<span class="op" id="2076796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076800">a1</span>&nbsp;<span class="op" id="2076803">=</span>&nbsp;<span class="num" id="2076805">1</span>&nbsp;<span class="op" id="2076807">/</span>&nbsp;<span class="ident" id="2076809">a1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2076814">ae</span>&nbsp;<span class="op" id="2076817">=</span>&nbsp;<span class="op" id="2076819">-</span><span class="ident" id="2076820">ae</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2076824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2076827">return</span>&nbsp;<span class="ident" id="2076834">Ldexp</span><span class="op" id="2076839">(</span><span class="ident" id="2076840">a1</span><span class="op" id="2076842">,</span>&nbsp;<span class="ident" id="2076844">ae</span><span class="op" id="2076846">)</span><br>
<span class="lineno"></span><span class="op" id="2076848">}</span>
</div>
</body>
</html>
