<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4402118">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4402173">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4402227">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4402278">package</span>&nbsp;<span class="ident" id="4402286">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4402296">import</span>&nbsp;<span class="op" id="4402303">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4402306">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4402315">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4402322">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4402333">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4402348">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4402351">//&nbsp;endsWithCSSKeyword&nbsp;reports&nbsp;whether&nbsp;b&nbsp;ends&nbsp;with&nbsp;an&nbsp;ident&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="4402415">//&nbsp;case-insensitively&nbsp;matches&nbsp;the&nbsp;lower-case&nbsp;kw.</span><br>
<span class="lineno"></span><span class="keyword" id="4402464">func</span>&nbsp;<span class="ident" id="4402469">endsWithCSSKeyword</span><span class="op" id="4402487">(</span><span class="ident" id="4402488">b</span>&nbsp;<span class="op" id="4402490">[</span><span class="op" id="4402491">]</span><span class="builtintype" id="4402492">byte</span><span class="op" id="4402496">,</span>&nbsp;<span class="ident" id="4402498">kw</span>&nbsp;<span class="builtintype" id="4402501">string</span><span class="op" id="4402507">)</span>&nbsp;<span class="builtintype" id="4402509">bool</span>&nbsp;<span class="op" id="4402514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4402517">i</span>&nbsp;<span class="op" id="4402519">:=</span>&nbsp;<span class="builtinfunc" id="4402522">len</span><span class="op" id="4402525">(</span><span class="ident" id="4402526"><a href="/html/template/css.go.html#4402488">b</a></span><span class="op" id="4402527">)</span>&nbsp;<span class="op" id="4402529">-</span>&nbsp;<span class="builtinfunc" id="4402531">len</span><span class="op" id="4402534">(</span><span class="ident" id="4402535"><a href="/html/template/css.go.html#4402498">kw</a></span><span class="op" id="4402537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4402540">if</span>&nbsp;<span class="ident" id="4402543"><a href="/html/template/css.go.html#4402517">i</a></span>&nbsp;<span class="op" id="4402545">&lt;</span>&nbsp;<span class="num" id="4402547">0</span>&nbsp;<span class="op" id="4402549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4402553">//&nbsp;Too&nbsp;short.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4402569">return</span>&nbsp;<span class="builtintype" id="4402576">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4402583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4402586">if</span>&nbsp;<span class="ident" id="4402589"><a href="/html/template/css.go.html#4402517">i</a></span>&nbsp;<span class="op" id="4402591">!=</span>&nbsp;<span class="num" id="4402594">0</span>&nbsp;<span class="op" id="4402596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4402600">r</span><span class="op" id="4402601">,</span>&nbsp;<span class="ident" id="4402603">_</span>&nbsp;<span class="op" id="4402605">:=</span>&nbsp;<span class="ident" id="4402608"><a href="/html/template/css.go.html#4402333">utf8</a></span><span class="op" id="4402612">.</span><span class="ident" id="4402613">DecodeLastRune</span><span class="op" id="4402627">(</span><span class="ident" id="4402628"><a href="/html/template/css.go.html#4402488">b</a></span><span class="op" id="4402629">[</span><span class="op" id="4402630">:</span><span class="ident" id="4402631"><a href="/html/template/css.go.html#4402517">i</a></span><span class="op" id="4402632">]</span><span class="op" id="4402633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4402637">if</span>&nbsp;<span class="ident" id="4402640"><a href="/html/template/css.go.html#4403124">isCSSNmchar</a></span><span class="op" id="4402651">(</span><span class="ident" id="4402652"><a href="/html/template/css.go.html#4402600">r</a></span><span class="op" id="4402653">)</span>&nbsp;<span class="op" id="4402655">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4402660">//&nbsp;Too&nbsp;long.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4402676">return</span>&nbsp;<span class="builtintype" id="4402683">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4402691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4402694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4402697">//&nbsp;Many&nbsp;CSS&nbsp;keywords,&nbsp;such&nbsp;as&nbsp;&#34;!important&#34;&nbsp;can&nbsp;have&nbsp;characters&nbsp;encoded,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4402770">//&nbsp;but&nbsp;the&nbsp;URI&nbsp;production&nbsp;does&nbsp;not&nbsp;allow&nbsp;that&nbsp;according&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4402830">//&nbsp;http://www.w3.org/TR/css3-syntax/#TOK-URI</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4402876">//&nbsp;This&nbsp;does&nbsp;not&nbsp;attempt&nbsp;to&nbsp;recognize&nbsp;encoded&nbsp;keywords.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4402946">//&nbsp;given&nbsp;&#34;\75\72\6c&#34;&nbsp;and&nbsp;&#34;url&#34;&nbsp;this&nbsp;return&nbsp;false.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4402997">return</span>&nbsp;<span class="builtintype" id="4403004">string</span><span class="op" id="4403010">(</span><span class="ident" id="4403011"><a href="/html/template/css.go.html#4402306">bytes</a></span><span class="op" id="4403016">.</span><span class="ident" id="4403017">ToLower</span><span class="op" id="4403024">(</span><span class="ident" id="4403025"><a href="/html/template/css.go.html#4402488">b</a></span><span class="op" id="4403026">[</span><span class="ident" id="4403027"><a href="/html/template/css.go.html#4402517">i</a></span><span class="op" id="4403028">:</span><span class="op" id="4403029">]</span><span class="op" id="4403030">)</span><span class="op" id="4403031">)</span>&nbsp;<span class="op" id="4403033">==</span>&nbsp;<span class="ident" id="4403036"><a href="/html/template/css.go.html#4402498">kw</a></span><br>
<span class="lineno">35</span><span class="op" id="4403039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4403042">//&nbsp;isCSSNmchar&nbsp;reports&nbsp;whether&nbsp;rune&nbsp;is&nbsp;allowed&nbsp;anywhere&nbsp;in&nbsp;a&nbsp;CSS&nbsp;identifier.</span><br>
<span class="lineno"></span><span class="keyword" id="4403119">func</span>&nbsp;<span class="ident" id="4403124">isCSSNmchar</span><span class="op" id="4403135">(</span><span class="ident" id="4403136">r</span>&nbsp;<span class="builtintype" id="4403138">rune</span><span class="op" id="4403142">)</span>&nbsp;<span class="builtintype" id="4403144">bool</span>&nbsp;<span class="op" id="4403149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4403152">//&nbsp;Based&nbsp;on&nbsp;the&nbsp;CSS3&nbsp;nmchar&nbsp;production&nbsp;but&nbsp;ignores&nbsp;multi-rune&nbsp;escape</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4403222">//&nbsp;sequences.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4403237">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-nmchar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4403289">return</span>&nbsp;<span class="string" id="4403296">&#39;a&#39;</span>&nbsp;<span class="op" id="4403300">&lt;=</span>&nbsp;<span class="ident" id="4403303"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403305">&amp;&amp;</span>&nbsp;<span class="ident" id="4403308"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403310">&lt;=</span>&nbsp;<span class="string" id="4403313">&#39;z&#39;</span>&nbsp;<span class="op" id="4403317">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4403322">&#39;A&#39;</span>&nbsp;<span class="op" id="4403326">&lt;=</span>&nbsp;<span class="ident" id="4403329"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403331">&amp;&amp;</span>&nbsp;<span class="ident" id="4403334"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403336">&lt;=</span>&nbsp;<span class="string" id="4403339">&#39;Z&#39;</span>&nbsp;<span class="op" id="4403343">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4403348">&#39;0&#39;</span>&nbsp;<span class="op" id="4403352">&lt;=</span>&nbsp;<span class="ident" id="4403355"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403357">&amp;&amp;</span>&nbsp;<span class="ident" id="4403360"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403362">&lt;=</span>&nbsp;<span class="string" id="4403365">&#39;9&#39;</span>&nbsp;<span class="op" id="4403369">||</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4403374"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403376">==</span>&nbsp;<span class="string" id="4403379">&#39;-&#39;</span>&nbsp;<span class="op" id="4403383">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4403388"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403390">==</span>&nbsp;<span class="string" id="4403393">&#39;_&#39;</span>&nbsp;<span class="op" id="4403397">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4403402">//&nbsp;Non-ASCII&nbsp;cases&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4403430">0x80</span>&nbsp;<span class="op" id="4403435">&lt;=</span>&nbsp;<span class="ident" id="4403438"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403440">&amp;&amp;</span>&nbsp;<span class="ident" id="4403443"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403445">&lt;=</span>&nbsp;<span class="num" id="4403448">0xd7ff</span>&nbsp;<span class="op" id="4403455">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4403460">0xe000</span>&nbsp;<span class="op" id="4403467">&lt;=</span>&nbsp;<span class="ident" id="4403470"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403472">&amp;&amp;</span>&nbsp;<span class="ident" id="4403475"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403477">&lt;=</span>&nbsp;<span class="num" id="4403480">0xfffd</span>&nbsp;<span class="op" id="4403487">||</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4403492">0x10000</span>&nbsp;<span class="op" id="4403500">&lt;=</span>&nbsp;<span class="ident" id="4403503"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403505">&amp;&amp;</span>&nbsp;<span class="ident" id="4403508"><a href="/html/template/css.go.html#4403136">r</a></span>&nbsp;<span class="op" id="4403510">&lt;=</span>&nbsp;<span class="num" id="4403513">0x10ffff</span><br>
<span class="lineno"></span><span class="op" id="4403522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4403525">//&nbsp;decodeCSS&nbsp;decodes&nbsp;CSS3&nbsp;escapes&nbsp;given&nbsp;a&nbsp;sequence&nbsp;of&nbsp;stringchars.</span><br>
<span class="lineno"></span><span class="comment" id="4403592">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;change,&nbsp;it&nbsp;returns&nbsp;the&nbsp;input,&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice</span><br>
<span class="lineno">55</span><span class="comment" id="4403669">//&nbsp;backed&nbsp;by&nbsp;a&nbsp;new&nbsp;array.</span><br>
<span class="lineno"></span><span class="comment" id="4403695">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-stringchar&nbsp;defines&nbsp;stringchar.</span><br>
<span class="lineno"></span><span class="keyword" id="4403770">func</span>&nbsp;<span class="ident" id="4403775">decodeCSS</span><span class="op" id="4403784">(</span><span class="ident" id="4403785">s</span>&nbsp;<span class="op" id="4403787">[</span><span class="op" id="4403788">]</span><span class="builtintype" id="4403789">byte</span><span class="op" id="4403793">)</span>&nbsp;<span class="op" id="4403795">[</span><span class="op" id="4403796">]</span><span class="builtintype" id="4403797">byte</span>&nbsp;<span class="op" id="4403802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4403805">i</span>&nbsp;<span class="op" id="4403807">:=</span>&nbsp;<span class="ident" id="4403810"><a href="/html/template/css.go.html#4402306">bytes</a></span><span class="op" id="4403815">.</span><span class="ident" id="4403816">IndexByte</span><span class="op" id="4403825">(</span><span class="ident" id="4403826"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4403827">,</span>&nbsp;<span class="string" id="4403829">&#39;\\&#39;</span><span class="op" id="4403833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4403836">if</span>&nbsp;<span class="ident" id="4403839"><a href="/html/template/css.go.html#4403805">i</a></span>&nbsp;<span class="op" id="4403841">==</span>&nbsp;<span class="op" id="4403844">-</span><span class="num" id="4403845">1</span>&nbsp;<span class="op" id="4403847">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4403851">return</span>&nbsp;<span class="ident" id="4403858"><a href="/html/template/css.go.html#4403785">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4403861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4403864">//&nbsp;The&nbsp;UTF-8&nbsp;sequence&nbsp;for&nbsp;a&nbsp;codepoint&nbsp;is&nbsp;never&nbsp;longer&nbsp;than&nbsp;1&nbsp;+&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4403932">//&nbsp;number&nbsp;hex&nbsp;digits&nbsp;need&nbsp;to&nbsp;represent&nbsp;that&nbsp;codepoint,&nbsp;so&nbsp;len(s)&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4404004">//&nbsp;upper&nbsp;bound&nbsp;on&nbsp;the&nbsp;output&nbsp;length.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404042">b</span>&nbsp;<span class="op" id="4404044">:=</span>&nbsp;<span class="builtinfunc" id="4404047">make</span><span class="op" id="4404051">(</span><span class="op" id="4404052">[</span><span class="op" id="4404053">]</span><span class="builtintype" id="4404054">byte</span><span class="op" id="4404058">,</span>&nbsp;<span class="num" id="4404060">0</span><span class="op" id="4404061">,</span>&nbsp;<span class="builtinfunc" id="4404063">len</span><span class="op" id="4404066">(</span><span class="ident" id="4404067"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404068">)</span><span class="op" id="4404069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4404072">for</span>&nbsp;<span class="builtinfunc" id="4404076">len</span><span class="op" id="4404079">(</span><span class="ident" id="4404080"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404081">)</span>&nbsp;<span class="op" id="4404083">!=</span>&nbsp;<span class="num" id="4404086">0</span>&nbsp;<span class="op" id="4404088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404092">i</span>&nbsp;<span class="op" id="4404094">:=</span>&nbsp;<span class="ident" id="4404097"><a href="/html/template/css.go.html#4402306">bytes</a></span><span class="op" id="4404102">.</span><span class="ident" id="4404103">IndexByte</span><span class="op" id="4404112">(</span><span class="ident" id="4404113"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404114">,</span>&nbsp;<span class="string" id="4404116">&#39;\\&#39;</span><span class="op" id="4404120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4404124">if</span>&nbsp;<span class="ident" id="4404127"><a href="/html/template/css.go.html#4404092">i</a></span>&nbsp;<span class="op" id="4404129">==</span>&nbsp;<span class="op" id="4404132">-</span><span class="num" id="4404133">1</span>&nbsp;<span class="op" id="4404135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404140"><a href="/html/template/css.go.html#4404092">i</a></span>&nbsp;<span class="op" id="4404142">=</span>&nbsp;<span class="builtinfunc" id="4404144">len</span><span class="op" id="4404147">(</span><span class="ident" id="4404148"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404149">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4404153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404157"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404158">,</span>&nbsp;<span class="ident" id="4404160"><a href="/html/template/css.go.html#4403785">s</a></span>&nbsp;<span class="op" id="4404162">=</span>&nbsp;<span class="builtinfunc" id="4404164">append</span><span class="op" id="4404170">(</span><span class="ident" id="4404171"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404172">,</span>&nbsp;<span class="ident" id="4404174"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404175">[</span><span class="op" id="4404176">:</span><span class="ident" id="4404177"><a href="/html/template/css.go.html#4404092">i</a></span><span class="op" id="4404178">]</span><span class="op" id="4404179">...</span><span class="op" id="4404182">)</span><span class="op" id="4404183">,</span>&nbsp;<span class="ident" id="4404185"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404186">[</span><span class="ident" id="4404187"><a href="/html/template/css.go.html#4404092">i</a></span><span class="op" id="4404188">:</span><span class="op" id="4404189">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4404193">if</span>&nbsp;<span class="builtinfunc" id="4404196">len</span><span class="op" id="4404199">(</span><span class="ident" id="4404200"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404201">)</span>&nbsp;<span class="op" id="4404203">&lt;</span>&nbsp;<span class="num" id="4404205">2</span>&nbsp;<span class="op" id="4404207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4404212">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4404220">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4404224">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4404277">//&nbsp;escape&nbsp;::=&nbsp;unicode&nbsp;|&nbsp;&#39;\&#39;&nbsp;[#x20-#x7E#x80-#xD7FF#xE000-#xFFFD#x10000-#x10FFFF]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4404359">if</span>&nbsp;<span class="ident" id="4404362"><a href="/html/template/css.go.html#4405074">isHex</a></span><span class="op" id="4404367">(</span><span class="ident" id="4404368"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404369">[</span><span class="num" id="4404370">1</span><span class="op" id="4404371">]</span><span class="op" id="4404372">)</span>&nbsp;<span class="op" id="4404374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4404379">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-unicode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4404434">//&nbsp;&nbsp;&nbsp;unicode&nbsp;::=&nbsp;&#39;\&#39;&nbsp;[0-9a-fA-F]{1,6}&nbsp;wc?</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404479">j</span>&nbsp;<span class="op" id="4404481">:=</span>&nbsp;<span class="num" id="4404484">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4404489">for</span>&nbsp;<span class="ident" id="4404493"><a href="/html/template/css.go.html#4404479">j</a></span>&nbsp;<span class="op" id="4404495">&lt;</span>&nbsp;<span class="builtinfunc" id="4404497">len</span><span class="op" id="4404500">(</span><span class="ident" id="4404501"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404502">)</span>&nbsp;<span class="op" id="4404504">&amp;&amp;</span>&nbsp;<span class="ident" id="4404507"><a href="/html/template/css.go.html#4404479">j</a></span>&nbsp;<span class="op" id="4404509">&lt;</span>&nbsp;<span class="num" id="4404511">7</span>&nbsp;<span class="op" id="4404513">&amp;&amp;</span>&nbsp;<span class="ident" id="4404516"><a href="/html/template/css.go.html#4405074">isHex</a></span><span class="op" id="4404521">(</span><span class="ident" id="4404522"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404523">[</span><span class="ident" id="4404524"><a href="/html/template/css.go.html#4404479">j</a></span><span class="op" id="4404525">]</span><span class="op" id="4404526">)</span>&nbsp;<span class="op" id="4404528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404534"><a href="/html/template/css.go.html#4404479">j</a></span><span class="op" id="4404535">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4404541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404546">r</span>&nbsp;<span class="op" id="4404548">:=</span>&nbsp;<span class="ident" id="4404551"><a href="/html/template/css.go.html#4405241">hexDecode</a></span><span class="op" id="4404560">(</span><span class="ident" id="4404561"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404562">[</span><span class="num" id="4404563">1</span><span class="op" id="4404564">:</span><span class="ident" id="4404565"><a href="/html/template/css.go.html#4404479">j</a></span><span class="op" id="4404566">]</span><span class="op" id="4404567">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4404572">if</span>&nbsp;<span class="ident" id="4404575"><a href="/html/template/css.go.html#4404546">r</a></span>&nbsp;<span class="op" id="4404577">&gt;</span>&nbsp;<span class="ident" id="4404579"><a href="/html/template/css.go.html#4402322">unicode</a></span><span class="op" id="4404586">.</span><span class="ident" id="4404587">MaxRune</span>&nbsp;<span class="op" id="4404595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404601"><a href="/html/template/css.go.html#4404546">r</a></span><span class="op" id="4404602">,</span>&nbsp;<span class="ident" id="4404604"><a href="/html/template/css.go.html#4404479">j</a></span>&nbsp;<span class="op" id="4404606">=</span>&nbsp;<span class="ident" id="4404608"><a href="/html/template/css.go.html#4404546">r</a></span><span class="op" id="4404609">/</span><span class="num" id="4404610">16</span><span class="op" id="4404612">,</span>&nbsp;<span class="ident" id="4404614"><a href="/html/template/css.go.html#4404479">j</a></span><span class="op" id="4404615">-</span><span class="num" id="4404616">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4404621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404626">n</span>&nbsp;<span class="op" id="4404628">:=</span>&nbsp;<span class="ident" id="4404631"><a href="/html/template/css.go.html#4402333">utf8</a></span><span class="op" id="4404635">.</span><span class="ident" id="4404636">EncodeRune</span><span class="op" id="4404646">(</span><span class="ident" id="4404647"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404648">[</span><span class="builtinfunc" id="4404649">len</span><span class="op" id="4404652">(</span><span class="ident" id="4404653"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404654">)</span><span class="op" id="4404655">:</span><span class="builtinfunc" id="4404656">cap</span><span class="op" id="4404659">(</span><span class="ident" id="4404660"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404661">)</span><span class="op" id="4404662">]</span><span class="op" id="4404663">,</span>&nbsp;<span class="ident" id="4404665"><a href="/html/template/css.go.html#4404546">r</a></span><span class="op" id="4404666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4404671">//&nbsp;The&nbsp;optional&nbsp;space&nbsp;at&nbsp;the&nbsp;end&nbsp;allows&nbsp;a&nbsp;hex</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4404720">//&nbsp;sequence&nbsp;to&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;literal&nbsp;hex.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4404768">//&nbsp;string(decodeCSS([]byte(`\A&nbsp;B`)))&nbsp;==&nbsp;&#34;\nB&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404817"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404818">,</span>&nbsp;<span class="ident" id="4404820"><a href="/html/template/css.go.html#4403785">s</a></span>&nbsp;<span class="op" id="4404822">=</span>&nbsp;<span class="ident" id="4404824"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404825">[</span><span class="op" id="4404826">:</span><span class="builtinfunc" id="4404827">len</span><span class="op" id="4404830">(</span><span class="ident" id="4404831"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404832">)</span><span class="op" id="4404833">+</span><span class="ident" id="4404834"><a href="/html/template/css.go.html#4404626">n</a></span><span class="op" id="4404835">]</span><span class="op" id="4404836">,</span>&nbsp;<span class="ident" id="4404838"><a href="/html/template/css.go.html#4405637">skipCSSSpace</a></span><span class="op" id="4404850">(</span><span class="ident" id="4404851"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404852">[</span><span class="ident" id="4404853"><a href="/html/template/css.go.html#4404479">j</a></span><span class="op" id="4404854">:</span><span class="op" id="4404855">]</span><span class="op" id="4404856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4404860">}</span>&nbsp;<span class="keyword" id="4404862">else</span>&nbsp;<span class="op" id="4404867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4404872">//&nbsp;`\\`&nbsp;decodes&nbsp;to&nbsp;`\`&nbsp;and&nbsp;`\&#34;`&nbsp;to&nbsp;`&#34;`.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404915">_</span><span class="op" id="4404916">,</span>&nbsp;<span class="ident" id="4404918">n</span>&nbsp;<span class="op" id="4404920">:=</span>&nbsp;<span class="ident" id="4404923"><a href="/html/template/css.go.html#4402333">utf8</a></span><span class="op" id="4404927">.</span><span class="ident" id="4404928">DecodeRune</span><span class="op" id="4404938">(</span><span class="ident" id="4404939"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404940">[</span><span class="num" id="4404941">1</span><span class="op" id="4404942">:</span><span class="op" id="4404943">]</span><span class="op" id="4404944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4404949"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404950">,</span>&nbsp;<span class="ident" id="4404952"><a href="/html/template/css.go.html#4403785">s</a></span>&nbsp;<span class="op" id="4404954">=</span>&nbsp;<span class="builtinfunc" id="4404956">append</span><span class="op" id="4404962">(</span><span class="ident" id="4404963"><a href="/html/template/css.go.html#4404042">b</a></span><span class="op" id="4404964">,</span>&nbsp;<span class="ident" id="4404966"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404967">[</span><span class="num" id="4404968">1</span><span class="op" id="4404969">:</span><span class="num" id="4404970">1</span><span class="op" id="4404971">+</span><span class="ident" id="4404972"><a href="/html/template/css.go.html#4404918">n</a></span><span class="op" id="4404973">]</span><span class="op" id="4404974">...</span><span class="op" id="4404977">)</span><span class="op" id="4404978">,</span>&nbsp;<span class="ident" id="4404980"><a href="/html/template/css.go.html#4403785">s</a></span><span class="op" id="4404981">[</span><span class="num" id="4404982">1</span><span class="op" id="4404983">+</span><span class="ident" id="4404984"><a href="/html/template/css.go.html#4404918">n</a></span><span class="op" id="4404985">:</span><span class="op" id="4404986">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4404990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4404993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4404996">return</span>&nbsp;<span class="ident" id="4405003"><a href="/html/template/css.go.html#4404042">b</a></span><br>
<span class="lineno">100</span><span class="op" id="4405005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4405008">//&nbsp;isHex&nbsp;reports&nbsp;whether&nbsp;the&nbsp;given&nbsp;character&nbsp;is&nbsp;a&nbsp;hex&nbsp;digit.</span><br>
<span class="lineno"></span><span class="keyword" id="4405069">func</span>&nbsp;<span class="ident" id="4405074">isHex</span><span class="op" id="4405079">(</span><span class="ident" id="4405080">c</span>&nbsp;<span class="builtintype" id="4405082">byte</span><span class="op" id="4405086">)</span>&nbsp;<span class="builtintype" id="4405088">bool</span>&nbsp;<span class="op" id="4405093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405096">return</span>&nbsp;<span class="string" id="4405103">&#39;0&#39;</span>&nbsp;<span class="op" id="4405107">&lt;=</span>&nbsp;<span class="ident" id="4405110"><a href="/html/template/css.go.html#4405080">c</a></span>&nbsp;<span class="op" id="4405112">&amp;&amp;</span>&nbsp;<span class="ident" id="4405115"><a href="/html/template/css.go.html#4405080">c</a></span>&nbsp;<span class="op" id="4405117">&lt;=</span>&nbsp;<span class="string" id="4405120">&#39;9&#39;</span>&nbsp;<span class="op" id="4405124">||</span>&nbsp;<span class="string" id="4405127">&#39;a&#39;</span>&nbsp;<span class="op" id="4405131">&lt;=</span>&nbsp;<span class="ident" id="4405134"><a href="/html/template/css.go.html#4405080">c</a></span>&nbsp;<span class="op" id="4405136">&amp;&amp;</span>&nbsp;<span class="ident" id="4405139"><a href="/html/template/css.go.html#4405080">c</a></span>&nbsp;<span class="op" id="4405141">&lt;=</span>&nbsp;<span class="string" id="4405144">&#39;f&#39;</span>&nbsp;<span class="op" id="4405148">||</span>&nbsp;<span class="string" id="4405151">&#39;A&#39;</span>&nbsp;<span class="op" id="4405155">&lt;=</span>&nbsp;<span class="ident" id="4405158"><a href="/html/template/css.go.html#4405080">c</a></span>&nbsp;<span class="op" id="4405160">&amp;&amp;</span>&nbsp;<span class="ident" id="4405163"><a href="/html/template/css.go.html#4405080">c</a></span>&nbsp;<span class="op" id="4405165">&lt;=</span>&nbsp;<span class="string" id="4405168">&#39;F&#39;</span><br>
<span class="lineno">105</span><span class="op" id="4405172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4405175">//&nbsp;hexDecode&nbsp;decodes&nbsp;a&nbsp;short&nbsp;hex&nbsp;digit&nbsp;sequence:&nbsp;&#34;10&#34;&nbsp;-&gt;&nbsp;16.</span><br>
<span class="lineno"></span><span class="keyword" id="4405236">func</span>&nbsp;<span class="ident" id="4405241">hexDecode</span><span class="op" id="4405250">(</span><span class="ident" id="4405251">s</span>&nbsp;<span class="op" id="4405253">[</span><span class="op" id="4405254">]</span><span class="builtintype" id="4405255">byte</span><span class="op" id="4405259">)</span>&nbsp;<span class="builtintype" id="4405261">rune</span>&nbsp;<span class="op" id="4405266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4405269">n</span>&nbsp;<span class="op" id="4405271">:=</span>&nbsp;<span class="string" id="4405274">&#39;\x00&#39;</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405282">for</span>&nbsp;<span class="ident" id="4405286">_</span><span class="op" id="4405287">,</span>&nbsp;<span class="ident" id="4405289">c</span>&nbsp;<span class="op" id="4405291">:=</span>&nbsp;<span class="keyword" id="4405294">range</span>&nbsp;<span class="ident" id="4405300"><a href="/html/template/css.go.html#4405251">s</a></span>&nbsp;<span class="op" id="4405302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4405306"><a href="/html/template/css.go.html#4405269">n</a></span>&nbsp;<span class="op" id="4405308">&lt;&lt;=</span>&nbsp;<span class="num" id="4405312">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405316">switch</span>&nbsp;<span class="op" id="4405323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405327">case</span>&nbsp;<span class="string" id="4405332">&#39;0&#39;</span>&nbsp;<span class="op" id="4405336">&lt;=</span>&nbsp;<span class="ident" id="4405339"><a href="/html/template/css.go.html#4405289">c</a></span>&nbsp;<span class="op" id="4405341">&amp;&amp;</span>&nbsp;<span class="ident" id="4405344"><a href="/html/template/css.go.html#4405289">c</a></span>&nbsp;<span class="op" id="4405346">&lt;=</span>&nbsp;<span class="string" id="4405349">&#39;9&#39;</span><span class="op" id="4405352">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4405357"><a href="/html/template/css.go.html#4405269">n</a></span>&nbsp;<span class="op" id="4405359">|=</span>&nbsp;<span class="builtintype" id="4405362">rune</span><span class="op" id="4405366">(</span><span class="ident" id="4405367"><a href="/html/template/css.go.html#4405289">c</a></span>&nbsp;<span class="op" id="4405369">-</span>&nbsp;<span class="string" id="4405371">&#39;0&#39;</span><span class="op" id="4405374">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405378">case</span>&nbsp;<span class="string" id="4405383">&#39;a&#39;</span>&nbsp;<span class="op" id="4405387">&lt;=</span>&nbsp;<span class="ident" id="4405390"><a href="/html/template/css.go.html#4405289">c</a></span>&nbsp;<span class="op" id="4405392">&amp;&amp;</span>&nbsp;<span class="ident" id="4405395"><a href="/html/template/css.go.html#4405289">c</a></span>&nbsp;<span class="op" id="4405397">&lt;=</span>&nbsp;<span class="string" id="4405400">&#39;f&#39;</span><span class="op" id="4405403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4405408"><a href="/html/template/css.go.html#4405269">n</a></span>&nbsp;<span class="op" id="4405410">|=</span>&nbsp;<span class="builtintype" id="4405413">rune</span><span class="op" id="4405417">(</span><span class="ident" id="4405418"><a href="/html/template/css.go.html#4405289">c</a></span><span class="op" id="4405419">-</span><span class="string" id="4405420">&#39;a&#39;</span><span class="op" id="4405423">)</span>&nbsp;<span class="op" id="4405425">+</span>&nbsp;<span class="num" id="4405427">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405432">case</span>&nbsp;<span class="string" id="4405437">&#39;A&#39;</span>&nbsp;<span class="op" id="4405441">&lt;=</span>&nbsp;<span class="ident" id="4405444"><a href="/html/template/css.go.html#4405289">c</a></span>&nbsp;<span class="op" id="4405446">&amp;&amp;</span>&nbsp;<span class="ident" id="4405449"><a href="/html/template/css.go.html#4405289">c</a></span>&nbsp;<span class="op" id="4405451">&lt;=</span>&nbsp;<span class="string" id="4405454">&#39;F&#39;</span><span class="op" id="4405457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4405462"><a href="/html/template/css.go.html#4405269">n</a></span>&nbsp;<span class="op" id="4405464">|=</span>&nbsp;<span class="builtintype" id="4405467">rune</span><span class="op" id="4405471">(</span><span class="ident" id="4405472"><a href="/html/template/css.go.html#4405289">c</a></span><span class="op" id="4405473">-</span><span class="string" id="4405474">&#39;A&#39;</span><span class="op" id="4405477">)</span>&nbsp;<span class="op" id="4405479">+</span>&nbsp;<span class="num" id="4405481">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405486">default</span><span class="op" id="4405493">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4405498">panic</span><span class="op" id="4405503">(</span><span class="ident" id="4405504"><a href="/html/template/css.go.html#4402315">fmt</a></span><span class="op" id="4405507">.</span><span class="ident" id="4405508">Sprintf</span><span class="op" id="4405515">(</span><span class="string" id="4405516">&#34;Bad&nbsp;hex&nbsp;digit&nbsp;in&nbsp;%q&#34;</span><span class="op" id="4405537">,</span>&nbsp;<span class="ident" id="4405539"><a href="/html/template/css.go.html#4405251">s</a></span><span class="op" id="4405540">)</span><span class="op" id="4405541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4405545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4405548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405551">return</span>&nbsp;<span class="ident" id="4405558"><a href="/html/template/css.go.html#4405269">n</a></span><br>
<span class="lineno"></span><span class="op" id="4405560">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="4405563">//&nbsp;skipCSSSpace&nbsp;returns&nbsp;a&nbsp;suffix&nbsp;of&nbsp;c,&nbsp;skipping&nbsp;over&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="4405632">func</span>&nbsp;<span class="ident" id="4405637">skipCSSSpace</span><span class="op" id="4405649">(</span><span class="ident" id="4405650">c</span>&nbsp;<span class="op" id="4405652">[</span><span class="op" id="4405653">]</span><span class="builtintype" id="4405654">byte</span><span class="op" id="4405658">)</span>&nbsp;<span class="op" id="4405660">[</span><span class="op" id="4405661">]</span><span class="builtintype" id="4405662">byte</span>&nbsp;<span class="op" id="4405667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405670">if</span>&nbsp;<span class="builtinfunc" id="4405673">len</span><span class="op" id="4405676">(</span><span class="ident" id="4405677"><a href="/html/template/css.go.html#4405650">c</a></span><span class="op" id="4405678">)</span>&nbsp;<span class="op" id="4405680">==</span>&nbsp;<span class="num" id="4405683">0</span>&nbsp;<span class="op" id="4405685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405689">return</span>&nbsp;<span class="ident" id="4405696"><a href="/html/template/css.go.html#4405650">c</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4405699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4405702">//&nbsp;wc&nbsp;::=&nbsp;#x9&nbsp;|&nbsp;#xA&nbsp;|&nbsp;#xC&nbsp;|&nbsp;#xD&nbsp;|&nbsp;#x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405742">switch</span>&nbsp;<span class="ident" id="4405749"><a href="/html/template/css.go.html#4405650">c</a></span><span class="op" id="4405750">[</span><span class="num" id="4405751">0</span><span class="op" id="4405752">]</span>&nbsp;<span class="op" id="4405754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405757">case</span>&nbsp;<span class="string" id="4405762">&#39;\t&#39;</span><span class="op" id="4405766">,</span>&nbsp;<span class="string" id="4405768">&#39;\n&#39;</span><span class="op" id="4405772">,</span>&nbsp;<span class="string" id="4405774">&#39;\f&#39;</span><span class="op" id="4405778">,</span>&nbsp;<span class="string" id="4405780">&#39;&nbsp;&#39;</span><span class="op" id="4405783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405787">return</span>&nbsp;<span class="ident" id="4405794"><a href="/html/template/css.go.html#4405650">c</a></span><span class="op" id="4405795">[</span><span class="num" id="4405796">1</span><span class="op" id="4405797">:</span><span class="op" id="4405798">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405801">case</span>&nbsp;<span class="string" id="4405806">&#39;\r&#39;</span><span class="op" id="4405810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4405814">//&nbsp;This&nbsp;differs&nbsp;from&nbsp;CSS3&#39;s&nbsp;wc&nbsp;production&nbsp;because&nbsp;it&nbsp;contains&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4405880">//&nbsp;probable&nbsp;spec&nbsp;error&nbsp;whereby&nbsp;wc&nbsp;contains&nbsp;all&nbsp;the&nbsp;single&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4405945">//&nbsp;sequences&nbsp;in&nbsp;nl&nbsp;(newline)&nbsp;but&nbsp;not&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4405990">if</span>&nbsp;<span class="builtinfunc" id="4405993">len</span><span class="op" id="4405996">(</span><span class="ident" id="4405997"><a href="/html/template/css.go.html#4405650">c</a></span><span class="op" id="4405998">)</span>&nbsp;<span class="op" id="4406000">&gt;=</span>&nbsp;<span class="num" id="4406003">2</span>&nbsp;<span class="op" id="4406005">&amp;&amp;</span>&nbsp;<span class="ident" id="4406008"><a href="/html/template/css.go.html#4405650">c</a></span><span class="op" id="4406009">[</span><span class="num" id="4406010">1</span><span class="op" id="4406011">]</span>&nbsp;<span class="op" id="4406013">==</span>&nbsp;<span class="string" id="4406016">&#39;\n&#39;</span>&nbsp;<span class="op" id="4406021">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406026">return</span>&nbsp;<span class="ident" id="4406033"><a href="/html/template/css.go.html#4405650">c</a></span><span class="op" id="4406034">[</span><span class="num" id="4406035">2</span><span class="op" id="4406036">:</span><span class="op" id="4406037">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4406041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406045">return</span>&nbsp;<span class="ident" id="4406052"><a href="/html/template/css.go.html#4405650">c</a></span><span class="op" id="4406053">[</span><span class="num" id="4406054">1</span><span class="op" id="4406055">:</span><span class="op" id="4406056">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4406059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406062">return</span>&nbsp;<span class="ident" id="4406069"><a href="/html/template/css.go.html#4405650">c</a></span><br>
<span class="lineno">145</span><span class="op" id="4406071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4406074">//&nbsp;isCSSSpace&nbsp;reports&nbsp;whether&nbsp;b&nbsp;is&nbsp;a&nbsp;CSS&nbsp;space&nbsp;char&nbsp;as&nbsp;defined&nbsp;in&nbsp;wc.</span><br>
<span class="lineno"></span><span class="keyword" id="4406144">func</span>&nbsp;<span class="ident" id="4406149">isCSSSpace</span><span class="op" id="4406159">(</span><span class="ident" id="4406160">b</span>&nbsp;<span class="builtintype" id="4406162">byte</span><span class="op" id="4406166">)</span>&nbsp;<span class="builtintype" id="4406168">bool</span>&nbsp;<span class="op" id="4406173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406176">switch</span>&nbsp;<span class="ident" id="4406183"><a href="/html/template/css.go.html#4406160">b</a></span>&nbsp;<span class="op" id="4406185">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406188">case</span>&nbsp;<span class="string" id="4406193">&#39;\t&#39;</span><span class="op" id="4406197">,</span>&nbsp;<span class="string" id="4406199">&#39;\n&#39;</span><span class="op" id="4406203">,</span>&nbsp;<span class="string" id="4406205">&#39;\f&#39;</span><span class="op" id="4406209">,</span>&nbsp;<span class="string" id="4406211">&#39;\r&#39;</span><span class="op" id="4406215">,</span>&nbsp;<span class="string" id="4406217">&#39;&nbsp;&#39;</span><span class="op" id="4406220">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406224">return</span>&nbsp;<span class="builtintype" id="4406231">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4406237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406240">return</span>&nbsp;<span class="builtintype" id="4406247">false</span><br>
<span class="lineno"></span><span class="op" id="4406253">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="4406256">//&nbsp;cssEscaper&nbsp;escapes&nbsp;HTML&nbsp;and&nbsp;CSS&nbsp;special&nbsp;characters&nbsp;using&nbsp;\&lt;hex&gt;+&nbsp;escapes.</span><br>
<span class="lineno"></span><span class="keyword" id="4406333">func</span>&nbsp;<span class="ident" id="4406338">cssEscaper</span><span class="op" id="4406348">(</span><span class="ident" id="4406349">args</span>&nbsp;<span class="op" id="4406354">...</span><span class="keyword" id="4406357">interface</span><span class="op" id="4406366">{</span><span class="op" id="4406367">}</span><span class="op" id="4406368">)</span>&nbsp;<span class="builtintype" id="4406370">string</span>&nbsp;<span class="op" id="4406377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406380">s</span><span class="op" id="4406381">,</span>&nbsp;<span class="ident" id="4406383">_</span>&nbsp;<span class="op" id="4406385">:=</span>&nbsp;<span class="ident" id="4406388"><a href="/html/template/content.go.html#4391261">stringify</a></span><span class="op" id="4406397">(</span><span class="ident" id="4406398"><a href="/html/template/css.go.html#4406349">args</a></span><span class="op" id="4406402">...</span><span class="op" id="4406405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406408">var</span>&nbsp;<span class="ident" id="4406412">b</span>&nbsp;<span class="ident" id="4406414"><a href="/html/template/css.go.html#4402306">bytes</a></span><span class="op" id="4406419">.</span><span class="ident" id="4406420">Buffer</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406428">written</span>&nbsp;<span class="op" id="4406436">:=</span>&nbsp;<span class="num" id="4406439">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406442">for</span>&nbsp;<span class="ident" id="4406446">i</span><span class="op" id="4406447">,</span>&nbsp;<span class="ident" id="4406449">r</span>&nbsp;<span class="op" id="4406451">:=</span>&nbsp;<span class="keyword" id="4406454">range</span>&nbsp;<span class="ident" id="4406460"><a href="/html/template/css.go.html#4406380">s</a></span>&nbsp;<span class="op" id="4406462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406466">var</span>&nbsp;<span class="ident" id="4406470">repl</span>&nbsp;<span class="builtintype" id="4406475">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406484">switch</span>&nbsp;<span class="ident" id="4406491"><a href="/html/template/css.go.html#4406449">r</a></span>&nbsp;<span class="op" id="4406493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406497">case</span>&nbsp;<span class="num" id="4406502">0</span><span class="op" id="4406503">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406508"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406513">=</span>&nbsp;<span class="string" id="4406515">`\0`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406522">case</span>&nbsp;<span class="string" id="4406527">&#39;\t&#39;</span><span class="op" id="4406531">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406536"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406541">=</span>&nbsp;<span class="string" id="4406543">`\9`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406550">case</span>&nbsp;<span class="string" id="4406555">&#39;\n&#39;</span><span class="op" id="4406559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406564"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406569">=</span>&nbsp;<span class="string" id="4406571">`\a`</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406578">case</span>&nbsp;<span class="string" id="4406583">&#39;\f&#39;</span><span class="op" id="4406587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406592"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406597">=</span>&nbsp;<span class="string" id="4406599">`\c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406606">case</span>&nbsp;<span class="string" id="4406611">&#39;\r&#39;</span><span class="op" id="4406615">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406620"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406625">=</span>&nbsp;<span class="string" id="4406627">`\d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4406634">//&nbsp;Encode&nbsp;HTML&nbsp;specials&nbsp;as&nbsp;hex&nbsp;so&nbsp;the&nbsp;output&nbsp;can&nbsp;be&nbsp;embedded</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4406697">//&nbsp;in&nbsp;HTML&nbsp;attributes&nbsp;without&nbsp;further&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406747">case</span>&nbsp;<span class="string" id="4406752">&#39;&#34;&#39;</span><span class="op" id="4406755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406760"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406765">=</span>&nbsp;<span class="string" id="4406767">`\22`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406775">case</span>&nbsp;<span class="string" id="4406780">&#39;&amp;&#39;</span><span class="op" id="4406783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406788"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406793">=</span>&nbsp;<span class="string" id="4406795">`\26`</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406803">case</span>&nbsp;<span class="string" id="4406808">&#39;\&#39;&#39;</span><span class="op" id="4406812">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406817"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406822">=</span>&nbsp;<span class="string" id="4406824">`\27`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406832">case</span>&nbsp;<span class="string" id="4406837">&#39;(&#39;</span><span class="op" id="4406840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406845"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406850">=</span>&nbsp;<span class="string" id="4406852">`\28`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406860">case</span>&nbsp;<span class="string" id="4406865">&#39;)&#39;</span><span class="op" id="4406868">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406873"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406878">=</span>&nbsp;<span class="string" id="4406880">`\29`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406888">case</span>&nbsp;<span class="string" id="4406893">&#39;+&#39;</span><span class="op" id="4406896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406901"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406906">=</span>&nbsp;<span class="string" id="4406908">`\2b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406916">case</span>&nbsp;<span class="string" id="4406921">&#39;/&#39;</span><span class="op" id="4406924">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406929"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406934">=</span>&nbsp;<span class="string" id="4406936">`\2f`</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406944">case</span>&nbsp;<span class="string" id="4406949">&#39;:&#39;</span><span class="op" id="4406952">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406957"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406962">=</span>&nbsp;<span class="string" id="4406964">`\3a`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4406972">case</span>&nbsp;<span class="string" id="4406977">&#39;;&#39;</span><span class="op" id="4406980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4406985"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4406990">=</span>&nbsp;<span class="string" id="4406992">`\3b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407000">case</span>&nbsp;<span class="string" id="4407005">&#39;&lt;&#39;</span><span class="op" id="4407008">:</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407013"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4407018">=</span>&nbsp;<span class="string" id="4407020">`\3c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407028">case</span>&nbsp;<span class="string" id="4407033">&#39;&gt;&#39;</span><span class="op" id="4407036">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407041"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4407046">=</span>&nbsp;<span class="string" id="4407048">`\3e`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407056">case</span>&nbsp;<span class="string" id="4407061">&#39;\\&#39;</span><span class="op" id="4407065">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407070"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4407075">=</span>&nbsp;<span class="string" id="4407077">`\\`</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407084">case</span>&nbsp;<span class="string" id="4407089">&#39;{&#39;</span><span class="op" id="4407092">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407097"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4407102">=</span>&nbsp;<span class="string" id="4407104">`\7b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407112">case</span>&nbsp;<span class="string" id="4407117">&#39;}&#39;</span><span class="op" id="4407120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407125"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4407130">=</span>&nbsp;<span class="string" id="4407132">`\7d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407140">default</span><span class="op" id="4407147">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407152">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4407163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407167"><a href="/html/template/css.go.html#4406412">b</a></span><span class="op" id="4407168">.</span><span class="ident" id="4407169">WriteString</span><span class="op" id="4407180">(</span><span class="ident" id="4407181"><a href="/html/template/css.go.html#4406380">s</a></span><span class="op" id="4407182">[</span><span class="ident" id="4407183"><a href="/html/template/css.go.html#4406428">written</a></span><span class="op" id="4407190">:</span><span class="ident" id="4407191"><a href="/html/template/css.go.html#4406446">i</a></span><span class="op" id="4407192">]</span><span class="op" id="4407193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407197"><a href="/html/template/css.go.html#4406412">b</a></span><span class="op" id="4407198">.</span><span class="ident" id="4407199">WriteString</span><span class="op" id="4407210">(</span><span class="ident" id="4407211"><a href="/html/template/css.go.html#4406470">repl</a></span><span class="op" id="4407215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407219"><a href="/html/template/css.go.html#4406428">written</a></span>&nbsp;<span class="op" id="4407227">=</span>&nbsp;<span class="ident" id="4407229"><a href="/html/template/css.go.html#4406446">i</a></span>&nbsp;<span class="op" id="4407231">+</span>&nbsp;<span class="ident" id="4407233"><a href="/html/template/css.go.html#4402333">utf8</a></span><span class="op" id="4407237">.</span><span class="ident" id="4407238">RuneLen</span><span class="op" id="4407245">(</span><span class="ident" id="4407246"><a href="/html/template/css.go.html#4406449">r</a></span><span class="op" id="4407247">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407251">if</span>&nbsp;<span class="ident" id="4407254"><a href="/html/template/css.go.html#4406470">repl</a></span>&nbsp;<span class="op" id="4407259">!=</span>&nbsp;<span class="string" id="4407262">`\\`</span>&nbsp;<span class="op" id="4407267">&amp;&amp;</span>&nbsp;<span class="op" id="4407270">(</span><span class="ident" id="4407271"><a href="/html/template/css.go.html#4406428">written</a></span>&nbsp;<span class="op" id="4407279">==</span>&nbsp;<span class="builtinfunc" id="4407282">len</span><span class="op" id="4407285">(</span><span class="ident" id="4407286"><a href="/html/template/css.go.html#4406380">s</a></span><span class="op" id="4407287">)</span>&nbsp;<span class="op" id="4407289">||</span>&nbsp;<span class="ident" id="4407292"><a href="/html/template/css.go.html#4405074">isHex</a></span><span class="op" id="4407297">(</span><span class="ident" id="4407298"><a href="/html/template/css.go.html#4406380">s</a></span><span class="op" id="4407299">[</span><span class="ident" id="4407300"><a href="/html/template/css.go.html#4406428">written</a></span><span class="op" id="4407307">]</span><span class="op" id="4407308">)</span>&nbsp;<span class="op" id="4407310">||</span>&nbsp;<span class="ident" id="4407313"><a href="/html/template/css.go.html#4406149">isCSSSpace</a></span><span class="op" id="4407323">(</span><span class="ident" id="4407324"><a href="/html/template/css.go.html#4406380">s</a></span><span class="op" id="4407325">[</span><span class="ident" id="4407326"><a href="/html/template/css.go.html#4406428">written</a></span><span class="op" id="4407333">]</span><span class="op" id="4407334">)</span><span class="op" id="4407335">)</span>&nbsp;<span class="op" id="4407337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407342"><a href="/html/template/css.go.html#4406412">b</a></span><span class="op" id="4407343">.</span><span class="ident" id="4407344">WriteByte</span><span class="op" id="4407353">(</span><span class="string" id="4407354">&#39;&nbsp;&#39;</span><span class="op" id="4407357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4407361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4407364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407367">if</span>&nbsp;<span class="ident" id="4407370"><a href="/html/template/css.go.html#4406428">written</a></span>&nbsp;<span class="op" id="4407378">==</span>&nbsp;<span class="num" id="4407381">0</span>&nbsp;<span class="op" id="4407383">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407387">return</span>&nbsp;<span class="ident" id="4407394"><a href="/html/template/css.go.html#4406380">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4407397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407400"><a href="/html/template/css.go.html#4406412">b</a></span><span class="op" id="4407401">.</span><span class="ident" id="4407402">WriteString</span><span class="op" id="4407413">(</span><span class="ident" id="4407414"><a href="/html/template/css.go.html#4406380">s</a></span><span class="op" id="4407415">[</span><span class="ident" id="4407416"><a href="/html/template/css.go.html#4406428">written</a></span><span class="op" id="4407423">:</span><span class="op" id="4407424">]</span><span class="op" id="4407425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407428">return</span>&nbsp;<span class="ident" id="4407435"><a href="/html/template/css.go.html#4406412">b</a></span><span class="op" id="4407436">.</span><span class="ident" id="4407437">String</span><span class="op" id="4407443">(</span><span class="op" id="4407444">)</span><br>
<span class="lineno"></span><span class="op" id="4407446">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="4407449">var</span>&nbsp;<span class="ident" id="4407453">expressionBytes</span>&nbsp;<span class="op" id="4407469">=</span>&nbsp;<span class="op" id="4407471">[</span><span class="op" id="4407472">]</span><span class="builtintype" id="4407473">byte</span><span class="op" id="4407477">(</span><span class="string" id="4407478">&#34;expression&#34;</span><span class="op" id="4407490">)</span><br>
<span class="lineno"></span><span class="keyword" id="4407492">var</span>&nbsp;<span class="ident" id="4407496">mozBindingBytes</span>&nbsp;<span class="op" id="4407512">=</span>&nbsp;<span class="op" id="4407514">[</span><span class="op" id="4407515">]</span><span class="builtintype" id="4407516">byte</span><span class="op" id="4407520">(</span><span class="string" id="4407521">&#34;mozbinding&#34;</span><span class="op" id="4407533">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4407536">//&nbsp;cssValueFilter&nbsp;allows&nbsp;innocuous&nbsp;CSS&nbsp;values&nbsp;in&nbsp;the&nbsp;output&nbsp;including&nbsp;CSS</span><br>
<span class="lineno">225</span><span class="comment" id="4407610">//&nbsp;quantities&nbsp;(10px&nbsp;or&nbsp;25%),&nbsp;ID&nbsp;or&nbsp;class&nbsp;literals&nbsp;(#foo,&nbsp;.bar),&nbsp;keyword&nbsp;values</span><br>
<span class="lineno"></span><span class="comment" id="4407689">//&nbsp;(inherit,&nbsp;blue),&nbsp;and&nbsp;colors&nbsp;(#888).</span><br>
<span class="lineno"></span><span class="comment" id="4407728">//&nbsp;It&nbsp;filters&nbsp;out&nbsp;unsafe&nbsp;values,&nbsp;such&nbsp;as&nbsp;those&nbsp;that&nbsp;affect&nbsp;token&nbsp;boundaries,</span><br>
<span class="lineno"></span><span class="comment" id="4407805">//&nbsp;and&nbsp;anything&nbsp;that&nbsp;might&nbsp;execute&nbsp;scripts.</span><br>
<span class="lineno"></span><span class="keyword" id="4407849">func</span>&nbsp;<span class="ident" id="4407854">cssValueFilter</span><span class="op" id="4407868">(</span><span class="ident" id="4407869">args</span>&nbsp;<span class="op" id="4407874">...</span><span class="keyword" id="4407877">interface</span><span class="op" id="4407886">{</span><span class="op" id="4407887">}</span><span class="op" id="4407888">)</span>&nbsp;<span class="builtintype" id="4407890">string</span>&nbsp;<span class="op" id="4407897">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407900">s</span><span class="op" id="4407901">,</span>&nbsp;<span class="ident" id="4407903">t</span>&nbsp;<span class="op" id="4407905">:=</span>&nbsp;<span class="ident" id="4407908"><a href="/html/template/content.go.html#4391261">stringify</a></span><span class="op" id="4407917">(</span><span class="ident" id="4407918"><a href="/html/template/css.go.html#4407869">args</a></span><span class="op" id="4407922">...</span><span class="op" id="4407925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407928">if</span>&nbsp;<span class="ident" id="4407931"><a href="/html/template/css.go.html#4407903">t</a></span>&nbsp;<span class="op" id="4407933">==</span>&nbsp;<span class="ident" id="4407936"><a href="/html/template/content.go.html#4389777">contentTypeCSS</a></span>&nbsp;<span class="op" id="4407951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4407955">return</span>&nbsp;<span class="ident" id="4407962"><a href="/html/template/css.go.html#4407900">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4407965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4407968">b</span><span class="op" id="4407969">,</span>&nbsp;<span class="ident" id="4407971">id</span>&nbsp;<span class="op" id="4407974">:=</span>&nbsp;<span class="ident" id="4407977"><a href="/html/template/css.go.html#4403775">decodeCSS</a></span><span class="op" id="4407986">(</span><span class="op" id="4407987">[</span><span class="op" id="4407988">]</span><span class="builtintype" id="4407989">byte</span><span class="op" id="4407993">(</span><span class="ident" id="4407994"><a href="/html/template/css.go.html#4407900">s</a></span><span class="op" id="4407995">)</span><span class="op" id="4407996">)</span><span class="op" id="4407997">,</span>&nbsp;<span class="builtinfunc" id="4407999">make</span><span class="op" id="4408003">(</span><span class="op" id="4408004">[</span><span class="op" id="4408005">]</span><span class="builtintype" id="4408006">byte</span><span class="op" id="4408010">,</span>&nbsp;<span class="num" id="4408012">0</span><span class="op" id="4408013">,</span>&nbsp;<span class="num" id="4408015">64</span><span class="op" id="4408017">)</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408021">//&nbsp;CSS3&nbsp;error&nbsp;handling&nbsp;is&nbsp;specified&nbsp;as&nbsp;honoring&nbsp;string&nbsp;boundaries&nbsp;per</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408092">//&nbsp;http://www.w3.org/TR/css3-syntax/#error-handling&nbsp;:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408147">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Malformed&nbsp;declarations.&nbsp;User&nbsp;agents&nbsp;must&nbsp;handle&nbsp;unexpected</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408214">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tokens&nbsp;encountered&nbsp;while&nbsp;parsing&nbsp;a&nbsp;declaration&nbsp;by&nbsp;reading&nbsp;until</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408286">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;declaration,&nbsp;while&nbsp;observing&nbsp;the&nbsp;rules&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408352">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matching&nbsp;pairs&nbsp;of&nbsp;(),&nbsp;[],&nbsp;{},&nbsp;&#34;&#34;,&nbsp;and&nbsp;&#39;&#39;,&nbsp;and&nbsp;correctly&nbsp;handling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408425">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escapes.&nbsp;For&nbsp;example,&nbsp;a&nbsp;malformed&nbsp;declaration&nbsp;may&nbsp;be&nbsp;missing&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408496">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;property,&nbsp;colon&nbsp;(:)&nbsp;or&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408534">//&nbsp;So&nbsp;we&nbsp;need&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;values&nbsp;do&nbsp;not&nbsp;have&nbsp;mismatched&nbsp;bracket</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408605">//&nbsp;or&nbsp;quote&nbsp;characters&nbsp;to&nbsp;prevent&nbsp;the&nbsp;browser&nbsp;from&nbsp;restarting&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408676">//&nbsp;inside&nbsp;a&nbsp;string&nbsp;that&nbsp;might&nbsp;embed&nbsp;JavaScript&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4408732">for</span>&nbsp;<span class="ident" id="4408736">i</span><span class="op" id="4408737">,</span>&nbsp;<span class="ident" id="4408739">c</span>&nbsp;<span class="op" id="4408741">:=</span>&nbsp;<span class="keyword" id="4408744">range</span>&nbsp;<span class="ident" id="4408750"><a href="/html/template/css.go.html#4407968">b</a></span>&nbsp;<span class="op" id="4408752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4408756">switch</span>&nbsp;<span class="ident" id="4408763"><a href="/html/template/css.go.html#4408739">c</a></span>&nbsp;<span class="op" id="4408765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4408769">case</span>&nbsp;<span class="num" id="4408774">0</span><span class="op" id="4408775">,</span>&nbsp;<span class="string" id="4408777">&#39;&#34;&#39;</span><span class="op" id="4408780">,</span>&nbsp;<span class="string" id="4408782">&#39;\&#39;&#39;</span><span class="op" id="4408786">,</span>&nbsp;<span class="string" id="4408788">&#39;(&#39;</span><span class="op" id="4408791">,</span>&nbsp;<span class="string" id="4408793">&#39;)&#39;</span><span class="op" id="4408796">,</span>&nbsp;<span class="string" id="4408798">&#39;/&#39;</span><span class="op" id="4408801">,</span>&nbsp;<span class="string" id="4408803">&#39;;&#39;</span><span class="op" id="4408806">,</span>&nbsp;<span class="string" id="4408808">&#39;@&#39;</span><span class="op" id="4408811">,</span>&nbsp;<span class="string" id="4408813">&#39;[&#39;</span><span class="op" id="4408816">,</span>&nbsp;<span class="string" id="4408818">&#39;\\&#39;</span><span class="op" id="4408822">,</span>&nbsp;<span class="string" id="4408824">&#39;]&#39;</span><span class="op" id="4408827">,</span>&nbsp;<span class="string" id="4408829">&#39;`&#39;</span><span class="op" id="4408832">,</span>&nbsp;<span class="string" id="4408834">&#39;{&#39;</span><span class="op" id="4408837">,</span>&nbsp;<span class="string" id="4408839">&#39;}&#39;</span><span class="op" id="4408842">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4408847">return</span>&nbsp;<span class="ident" id="4408854"><a href="/html/template/escape.go.html#4427036">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4408871">case</span>&nbsp;<span class="string" id="4408876">&#39;-&#39;</span><span class="op" id="4408879">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408884">//&nbsp;Disallow&nbsp;&lt;!--&nbsp;or&nbsp;--&gt;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4408912">//&nbsp;--&nbsp;should&nbsp;not&nbsp;appear&nbsp;in&nbsp;valid&nbsp;identifiers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4408961">if</span>&nbsp;<span class="ident" id="4408964"><a href="/html/template/css.go.html#4408736">i</a></span>&nbsp;<span class="op" id="4408966">!=</span>&nbsp;<span class="num" id="4408969">0</span>&nbsp;<span class="op" id="4408971">&amp;&amp;</span>&nbsp;<span class="ident" id="4408974"><a href="/html/template/css.go.html#4407968">b</a></span><span class="op" id="4408975">[</span><span class="ident" id="4408976"><a href="/html/template/css.go.html#4408736">i</a></span><span class="op" id="4408977">-</span><span class="num" id="4408978">1</span><span class="op" id="4408979">]</span>&nbsp;<span class="op" id="4408981">==</span>&nbsp;<span class="string" id="4408984">&#39;-&#39;</span>&nbsp;<span class="op" id="4408988">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4408994">return</span>&nbsp;<span class="ident" id="4409001"><a href="/html/template/escape.go.html#4427036">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4409019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4409023">default</span><span class="op" id="4409030">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4409035">if</span>&nbsp;<span class="ident" id="4409038"><a href="/html/template/css.go.html#4408739">c</a></span>&nbsp;<span class="op" id="4409040">&lt;</span>&nbsp;<span class="num" id="4409042">0x80</span>&nbsp;<span class="op" id="4409047">&amp;&amp;</span>&nbsp;<span class="ident" id="4409050"><a href="/html/template/css.go.html#4403124">isCSSNmchar</a></span><span class="op" id="4409061">(</span><span class="builtintype" id="4409062">rune</span><span class="op" id="4409066">(</span><span class="ident" id="4409067"><a href="/html/template/css.go.html#4408739">c</a></span><span class="op" id="4409068">)</span><span class="op" id="4409069">)</span>&nbsp;<span class="op" id="4409071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4409077"><a href="/html/template/css.go.html#4407971">id</a></span>&nbsp;<span class="op" id="4409080">=</span>&nbsp;<span class="builtinfunc" id="4409082">append</span><span class="op" id="4409088">(</span><span class="ident" id="4409089"><a href="/html/template/css.go.html#4407971">id</a></span><span class="op" id="4409091">,</span>&nbsp;<span class="ident" id="4409093"><a href="/html/template/css.go.html#4408739">c</a></span><span class="op" id="4409094">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4409099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4409103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4409106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4409109"><a href="/html/template/css.go.html#4407971">id</a></span>&nbsp;<span class="op" id="4409112">=</span>&nbsp;<span class="ident" id="4409114"><a href="/html/template/css.go.html#4402306">bytes</a></span><span class="op" id="4409119">.</span><span class="ident" id="4409120">ToLower</span><span class="op" id="4409127">(</span><span class="ident" id="4409128"><a href="/html/template/css.go.html#4407971">id</a></span><span class="op" id="4409130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4409133">if</span>&nbsp;<span class="ident" id="4409136"><a href="/html/template/css.go.html#4402306">bytes</a></span><span class="op" id="4409141">.</span><span class="ident" id="4409142">Index</span><span class="op" id="4409147">(</span><span class="ident" id="4409148"><a href="/html/template/css.go.html#4407971">id</a></span><span class="op" id="4409150">,</span>&nbsp;<span class="ident" id="4409152"><a href="/html/template/css.go.html#4407453">expressionBytes</a></span><span class="op" id="4409167">)</span>&nbsp;<span class="op" id="4409169">!=</span>&nbsp;<span class="op" id="4409172">-</span><span class="num" id="4409173">1</span>&nbsp;<span class="op" id="4409175">||</span>&nbsp;<span class="ident" id="4409178"><a href="/html/template/css.go.html#4402306">bytes</a></span><span class="op" id="4409183">.</span><span class="ident" id="4409184">Index</span><span class="op" id="4409189">(</span><span class="ident" id="4409190"><a href="/html/template/css.go.html#4407971">id</a></span><span class="op" id="4409192">,</span>&nbsp;<span class="ident" id="4409194"><a href="/html/template/css.go.html#4407496">mozBindingBytes</a></span><span class="op" id="4409209">)</span>&nbsp;<span class="op" id="4409211">!=</span>&nbsp;<span class="op" id="4409214">-</span><span class="num" id="4409215">1</span>&nbsp;<span class="op" id="4409217">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4409221">return</span>&nbsp;<span class="ident" id="4409228"><a href="/html/template/escape.go.html#4427036">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4409244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4409247">return</span>&nbsp;<span class="builtintype" id="4409254">string</span><span class="op" id="4409260">(</span><span class="ident" id="4409261"><a href="/html/template/css.go.html#4407968">b</a></span><span class="op" id="4409262">)</span><br>
<span class="lineno"></span><span class="op" id="4409264">}</span>
</div>
</body>
</html>
