<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/asn1</h2>
<ul>
<li><a href="/gostd/encoding/asn1/asn1.go.html">asn1.go</a></li>
<li><a href="/gostd/encoding/asn1/asn1_test.go.html">asn1_test.go</a></li>
<li><a href="/gostd/encoding/asn1/common.go.html">common.go</a></li>
<li><a href="/gostd/encoding/asn1/marshal.go.html" class="current">marshal.go</a></li>
<li><a href="/gostd/encoding/asn1/marshal_test.go.html">marshal_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4214391">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4214446">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4214500">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4214551">package</span>&nbsp;<span class="ident" id="4214559">asn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4214565">import</span>&nbsp;<span class="op" id="4214572">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4214575">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4214584">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4214594">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4214601">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4214607">&#34;math/big&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4214619">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4214630">&#34;time&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4214638">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4214653">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4214656">//&nbsp;A&nbsp;forkableWriter&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;buffer&nbsp;that&nbsp;can&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="4214711">//&nbsp;&#39;forked&#39;&nbsp;to&nbsp;create&nbsp;new&nbsp;forkableWriters&nbsp;that&nbsp;bracket&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="4214770">//&nbsp;original.&nbsp;&nbsp;After</span><br>
<span class="lineno"></span><span class="comment" id="4214790">//&nbsp;&nbsp;&nbsp;&nbsp;pre,&nbsp;post&nbsp;:=&nbsp;w.fork();</span><br>
<span class="lineno"></span><span class="comment" id="4214819">//&nbsp;the&nbsp;overall&nbsp;sequence&nbsp;of&nbsp;bytes&nbsp;represented&nbsp;is&nbsp;logically&nbsp;w+pre+post.</span><br>
<span class="lineno"></span><span class="keyword" id="4214889">type</span>&nbsp;<span class="ident" id="4214894">forkableWriter</span>&nbsp;<span class="keyword" id="4214909">struct</span>&nbsp;<span class="op" id="4214916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4214919">*</span><span class="ident" id="4214920">bytes</span><span class="op" id="4214925">.</span><span class="ident" id="4214926">Buffer</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4214934">pre</span><span class="op" id="4214937">,</span>&nbsp;<span class="ident" id="4214939">post</span>&nbsp;<span class="op" id="4214944">*</span><span class="ident" id="4214945">forkableWriter</span><br>
<span class="lineno"></span><span class="op" id="4214960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4214963">func</span>&nbsp;<span class="ident" id="4214968">newForkableWriter</span><span class="op" id="4214985">(</span><span class="op" id="4214986">)</span>&nbsp;<span class="op" id="4214988">*</span><span class="ident" id="4214989">forkableWriter</span>&nbsp;<span class="op" id="4215004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215007">return</span>&nbsp;<span class="op" id="4215014">&amp;</span><span class="ident" id="4215015">forkableWriter</span><span class="op" id="4215029">{</span><span class="builtinfunc" id="4215030">new</span><span class="op" id="4215033">(</span><span class="ident" id="4215034">bytes</span><span class="op" id="4215039">.</span><span class="ident" id="4215040">Buffer</span><span class="op" id="4215046">)</span><span class="op" id="4215047">,</span>&nbsp;<span class="ident" id="4215049">nil</span><span class="op" id="4215052">,</span>&nbsp;<span class="ident" id="4215054">nil</span><span class="op" id="4215057">}</span><br>
<span class="lineno">30</span><span class="op" id="4215059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4215062">func</span>&nbsp;<span class="op" id="4215067">(</span><span class="ident" id="4215068">f</span>&nbsp;<span class="op" id="4215070">*</span><span class="ident" id="4215071">forkableWriter</span><span class="op" id="4215085">)</span>&nbsp;<span class="ident" id="4215087">fork</span><span class="op" id="4215091">(</span><span class="op" id="4215092">)</span>&nbsp;<span class="op" id="4215094">(</span><span class="ident" id="4215095">pre</span><span class="op" id="4215098">,</span>&nbsp;<span class="ident" id="4215100">post</span>&nbsp;<span class="op" id="4215105">*</span><span class="ident" id="4215106">forkableWriter</span><span class="op" id="4215120">)</span>&nbsp;<span class="op" id="4215122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215125">if</span>&nbsp;<span class="ident" id="4215128">f</span><span class="op" id="4215129">.</span><span class="ident" id="4215130">pre</span>&nbsp;<span class="op" id="4215134">!=</span>&nbsp;<span class="ident" id="4215137">nil</span>&nbsp;<span class="op" id="4215141">||</span>&nbsp;<span class="ident" id="4215144">f</span><span class="op" id="4215145">.</span><span class="ident" id="4215146">post</span>&nbsp;<span class="op" id="4215151">!=</span>&nbsp;<span class="ident" id="4215154">nil</span>&nbsp;<span class="op" id="4215158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4215162">panic</span><span class="op" id="4215167">(</span><span class="string" id="4215168">&#34;have&nbsp;already&nbsp;forked&#34;</span><span class="op" id="4215189">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4215192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215195">f</span><span class="op" id="4215196">.</span><span class="ident" id="4215197">pre</span>&nbsp;<span class="op" id="4215201">=</span>&nbsp;<span class="ident" id="4215203">newForkableWriter</span><span class="op" id="4215220">(</span><span class="op" id="4215221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215224">f</span><span class="op" id="4215225">.</span><span class="ident" id="4215226">post</span>&nbsp;<span class="op" id="4215231">=</span>&nbsp;<span class="ident" id="4215233">newForkableWriter</span><span class="op" id="4215250">(</span><span class="op" id="4215251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215254">return</span>&nbsp;<span class="ident" id="4215261">f</span><span class="op" id="4215262">.</span><span class="ident" id="4215263">pre</span><span class="op" id="4215266">,</span>&nbsp;<span class="ident" id="4215268">f</span><span class="op" id="4215269">.</span><span class="ident" id="4215270">post</span><br>
<span class="lineno"></span><span class="op" id="4215275">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="4215278">func</span>&nbsp;<span class="op" id="4215283">(</span><span class="ident" id="4215284">f</span>&nbsp;<span class="op" id="4215286">*</span><span class="ident" id="4215287">forkableWriter</span><span class="op" id="4215301">)</span>&nbsp;<span class="ident" id="4215303">Len</span><span class="op" id="4215306">(</span><span class="op" id="4215307">)</span>&nbsp;<span class="op" id="4215309">(</span><span class="ident" id="4215310">l</span>&nbsp;<span class="builtintype" id="4215312">int</span><span class="op" id="4215315">)</span>&nbsp;<span class="op" id="4215317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215320">l</span>&nbsp;<span class="op" id="4215322">+=</span>&nbsp;<span class="ident" id="4215325">f</span><span class="op" id="4215326">.</span><span class="ident" id="4215327">Buffer</span><span class="op" id="4215333">.</span><span class="ident" id="4215334">Len</span><span class="op" id="4215337">(</span><span class="op" id="4215338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215341">if</span>&nbsp;<span class="ident" id="4215344">f</span><span class="op" id="4215345">.</span><span class="ident" id="4215346">pre</span>&nbsp;<span class="op" id="4215350">!=</span>&nbsp;<span class="ident" id="4215353">nil</span>&nbsp;<span class="op" id="4215357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215361">l</span>&nbsp;<span class="op" id="4215363">+=</span>&nbsp;<span class="ident" id="4215366">f</span><span class="op" id="4215367">.</span><span class="ident" id="4215368">pre</span><span class="op" id="4215371">.</span><span class="ident" id="4215372">Len</span><span class="op" id="4215375">(</span><span class="op" id="4215376">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4215379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215382">if</span>&nbsp;<span class="ident" id="4215385">f</span><span class="op" id="4215386">.</span><span class="ident" id="4215387">post</span>&nbsp;<span class="op" id="4215392">!=</span>&nbsp;<span class="ident" id="4215395">nil</span>&nbsp;<span class="op" id="4215399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215403">l</span>&nbsp;<span class="op" id="4215405">+=</span>&nbsp;<span class="ident" id="4215408">f</span><span class="op" id="4215409">.</span><span class="ident" id="4215410">post</span><span class="op" id="4215414">.</span><span class="ident" id="4215415">Len</span><span class="op" id="4215418">(</span><span class="op" id="4215419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4215422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215425">return</span><br>
<span class="lineno">50</span><span class="op" id="4215432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4215435">func</span>&nbsp;<span class="op" id="4215440">(</span><span class="ident" id="4215441">f</span>&nbsp;<span class="op" id="4215443">*</span><span class="ident" id="4215444">forkableWriter</span><span class="op" id="4215458">)</span>&nbsp;<span class="ident" id="4215460">writeTo</span><span class="op" id="4215467">(</span><span class="ident" id="4215468">out</span>&nbsp;<span class="ident" id="4215472">io</span><span class="op" id="4215474">.</span><span class="ident" id="4215475">Writer</span><span class="op" id="4215481">)</span>&nbsp;<span class="op" id="4215483">(</span><span class="ident" id="4215484">n</span>&nbsp;<span class="builtintype" id="4215486">int</span><span class="op" id="4215489">,</span>&nbsp;<span class="ident" id="4215491">err</span>&nbsp;<span class="builtintype" id="4215495">error</span><span class="op" id="4215500">)</span>&nbsp;<span class="op" id="4215502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215505">n</span><span class="op" id="4215506">,</span>&nbsp;<span class="ident" id="4215508">err</span>&nbsp;<span class="op" id="4215512">=</span>&nbsp;<span class="ident" id="4215514">out</span><span class="op" id="4215517">.</span><span class="ident" id="4215518">Write</span><span class="op" id="4215523">(</span><span class="ident" id="4215524">f</span><span class="op" id="4215525">.</span><span class="ident" id="4215526">Bytes</span><span class="op" id="4215531">(</span><span class="op" id="4215532">)</span><span class="op" id="4215533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215536">if</span>&nbsp;<span class="ident" id="4215539">err</span>&nbsp;<span class="op" id="4215543">!=</span>&nbsp;<span class="ident" id="4215546">nil</span>&nbsp;<span class="op" id="4215550">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215554">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4215562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215566">var</span>&nbsp;<span class="ident" id="4215570">nn</span>&nbsp;<span class="builtintype" id="4215573">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215579">if</span>&nbsp;<span class="ident" id="4215582">f</span><span class="op" id="4215583">.</span><span class="ident" id="4215584">pre</span>&nbsp;<span class="op" id="4215588">!=</span>&nbsp;<span class="ident" id="4215591">nil</span>&nbsp;<span class="op" id="4215595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215599">nn</span><span class="op" id="4215601">,</span>&nbsp;<span class="ident" id="4215603">err</span>&nbsp;<span class="op" id="4215607">=</span>&nbsp;<span class="ident" id="4215609">f</span><span class="op" id="4215610">.</span><span class="ident" id="4215611">pre</span><span class="op" id="4215614">.</span><span class="ident" id="4215615">writeTo</span><span class="op" id="4215622">(</span><span class="ident" id="4215623">out</span><span class="op" id="4215626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215630">n</span>&nbsp;<span class="op" id="4215632">+=</span>&nbsp;<span class="ident" id="4215635">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215640">if</span>&nbsp;<span class="ident" id="4215643">err</span>&nbsp;<span class="op" id="4215647">!=</span>&nbsp;<span class="ident" id="4215650">nil</span>&nbsp;<span class="op" id="4215654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215659">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4215668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4215671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215675">if</span>&nbsp;<span class="ident" id="4215678">f</span><span class="op" id="4215679">.</span><span class="ident" id="4215680">post</span>&nbsp;<span class="op" id="4215685">!=</span>&nbsp;<span class="ident" id="4215688">nil</span>&nbsp;<span class="op" id="4215692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215696">nn</span><span class="op" id="4215698">,</span>&nbsp;<span class="ident" id="4215700">err</span>&nbsp;<span class="op" id="4215704">=</span>&nbsp;<span class="ident" id="4215706">f</span><span class="op" id="4215707">.</span><span class="ident" id="4215708">post</span><span class="op" id="4215712">.</span><span class="ident" id="4215713">writeTo</span><span class="op" id="4215720">(</span><span class="ident" id="4215721">out</span><span class="op" id="4215724">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215728">n</span>&nbsp;<span class="op" id="4215730">+=</span>&nbsp;<span class="ident" id="4215733">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4215737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215740">return</span><br>
<span class="lineno"></span><span class="op" id="4215747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="4215750">func</span>&nbsp;<span class="ident" id="4215755">marshalBase128Int</span><span class="op" id="4215772">(</span><span class="ident" id="4215773">out</span>&nbsp;<span class="op" id="4215777">*</span><span class="ident" id="4215778">forkableWriter</span><span class="op" id="4215792">,</span>&nbsp;<span class="ident" id="4215794">n</span>&nbsp;<span class="ident" id="4215796">int64</span><span class="op" id="4215801">)</span>&nbsp;<span class="op" id="4215803">(</span><span class="ident" id="4215804">err</span>&nbsp;<span class="builtintype" id="4215808">error</span><span class="op" id="4215813">)</span>&nbsp;<span class="op" id="4215815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215818">if</span>&nbsp;<span class="ident" id="4215821">n</span>&nbsp;<span class="op" id="4215823">==</span>&nbsp;<span class="num" id="4215826">0</span>&nbsp;<span class="op" id="4215828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215832">err</span>&nbsp;<span class="op" id="4215836">=</span>&nbsp;<span class="ident" id="4215838">out</span><span class="op" id="4215841">.</span><span class="ident" id="4215842">WriteByte</span><span class="op" id="4215851">(</span><span class="num" id="4215852">0</span><span class="op" id="4215853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215857">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4215865">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215869">l</span>&nbsp;<span class="op" id="4215871">:=</span>&nbsp;<span class="num" id="4215874">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215877">for</span>&nbsp;<span class="ident" id="4215881">i</span>&nbsp;<span class="op" id="4215883">:=</span>&nbsp;<span class="ident" id="4215886">n</span><span class="op" id="4215887">;</span>&nbsp;<span class="ident" id="4215889">i</span>&nbsp;<span class="op" id="4215891">&gt;</span>&nbsp;<span class="num" id="4215893">0</span><span class="op" id="4215894">;</span>&nbsp;<span class="ident" id="4215896">i</span>&nbsp;<span class="op" id="4215898">&gt;&gt;=</span>&nbsp;<span class="num" id="4215902">7</span>&nbsp;<span class="op" id="4215904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215908">l</span><span class="op" id="4215909">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4215913">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215917">for</span>&nbsp;<span class="ident" id="4215921">i</span>&nbsp;<span class="op" id="4215923">:=</span>&nbsp;<span class="ident" id="4215926">l</span>&nbsp;<span class="op" id="4215928">-</span>&nbsp;<span class="num" id="4215930">1</span><span class="op" id="4215931">;</span>&nbsp;<span class="ident" id="4215933">i</span>&nbsp;<span class="op" id="4215935">&gt;=</span>&nbsp;<span class="num" id="4215938">0</span><span class="op" id="4215939">;</span>&nbsp;<span class="ident" id="4215941">i</span><span class="op" id="4215942">--</span>&nbsp;<span class="op" id="4215945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215949">o</span>&nbsp;<span class="op" id="4215951">:=</span>&nbsp;<span class="builtintype" id="4215954">byte</span><span class="op" id="4215958">(</span><span class="ident" id="4215959">n</span>&nbsp;<span class="op" id="4215961">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4215964">uint</span><span class="op" id="4215968">(</span><span class="ident" id="4215969">i</span><span class="op" id="4215970">*</span><span class="num" id="4215971">7</span><span class="op" id="4215972">)</span><span class="op" id="4215973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4215977">o</span>&nbsp;<span class="op" id="4215979">&amp;=</span>&nbsp;<span class="num" id="4215982">0x7f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4215989">if</span>&nbsp;<span class="ident" id="4215992">i</span>&nbsp;<span class="op" id="4215994">!=</span>&nbsp;<span class="num" id="4215997">0</span>&nbsp;<span class="op" id="4215999">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216004">o</span>&nbsp;<span class="op" id="4216006">|=</span>&nbsp;<span class="num" id="4216009">0x80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4216016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216020">err</span>&nbsp;<span class="op" id="4216024">=</span>&nbsp;<span class="ident" id="4216026">out</span><span class="op" id="4216029">.</span><span class="ident" id="4216030">WriteByte</span><span class="op" id="4216039">(</span><span class="ident" id="4216040">o</span><span class="op" id="4216041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216045">if</span>&nbsp;<span class="ident" id="4216048">err</span>&nbsp;<span class="op" id="4216052">!=</span>&nbsp;<span class="ident" id="4216055">nil</span>&nbsp;<span class="op" id="4216059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216064">return</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4216073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4216076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216080">return</span>&nbsp;<span class="ident" id="4216087">nil</span><br>
<span class="lineno"></span><span class="op" id="4216091">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="4216094">func</span>&nbsp;<span class="ident" id="4216099">marshalInt64</span><span class="op" id="4216111">(</span><span class="ident" id="4216112">out</span>&nbsp;<span class="op" id="4216116">*</span><span class="ident" id="4216117">forkableWriter</span><span class="op" id="4216131">,</span>&nbsp;<span class="ident" id="4216133">i</span>&nbsp;<span class="ident" id="4216135">int64</span><span class="op" id="4216140">)</span>&nbsp;<span class="op" id="4216142">(</span><span class="ident" id="4216143">err</span>&nbsp;<span class="builtintype" id="4216147">error</span><span class="op" id="4216152">)</span>&nbsp;<span class="op" id="4216154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216157">n</span>&nbsp;<span class="op" id="4216159">:=</span>&nbsp;<span class="ident" id="4216162">int64Length</span><span class="op" id="4216173">(</span><span class="ident" id="4216174">i</span><span class="op" id="4216175">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216179">for</span>&nbsp;<span class="op" id="4216183">;</span>&nbsp;<span class="ident" id="4216185">n</span>&nbsp;<span class="op" id="4216187">&gt;</span>&nbsp;<span class="num" id="4216189">0</span><span class="op" id="4216190">;</span>&nbsp;<span class="ident" id="4216192">n</span><span class="op" id="4216193">--</span>&nbsp;<span class="op" id="4216196">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216200">err</span>&nbsp;<span class="op" id="4216204">=</span>&nbsp;<span class="ident" id="4216206">out</span><span class="op" id="4216209">.</span><span class="ident" id="4216210">WriteByte</span><span class="op" id="4216219">(</span><span class="builtintype" id="4216220">byte</span><span class="op" id="4216224">(</span><span class="ident" id="4216225">i</span>&nbsp;<span class="op" id="4216227">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4216230">uint</span><span class="op" id="4216234">(</span><span class="op" id="4216235">(</span><span class="ident" id="4216236">n</span><span class="op" id="4216237">-</span><span class="num" id="4216238">1</span><span class="op" id="4216239">)</span><span class="op" id="4216240">*</span><span class="num" id="4216241">8</span><span class="op" id="4216242">)</span><span class="op" id="4216243">)</span><span class="op" id="4216244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216248">if</span>&nbsp;<span class="ident" id="4216251">err</span>&nbsp;<span class="op" id="4216255">!=</span>&nbsp;<span class="ident" id="4216258">nil</span>&nbsp;<span class="op" id="4216262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216267">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4216276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4216279">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216283">return</span>&nbsp;<span class="ident" id="4216290">nil</span><br>
<span class="lineno"></span><span class="op" id="4216294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4216297">func</span>&nbsp;<span class="ident" id="4216302">int64Length</span><span class="op" id="4216313">(</span><span class="ident" id="4216314">i</span>&nbsp;<span class="ident" id="4216316">int64</span><span class="op" id="4216321">)</span>&nbsp;<span class="op" id="4216323">(</span><span class="ident" id="4216324">numBytes</span>&nbsp;<span class="builtintype" id="4216333">int</span><span class="op" id="4216336">)</span>&nbsp;<span class="op" id="4216338">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216341">numBytes</span>&nbsp;<span class="op" id="4216350">=</span>&nbsp;<span class="num" id="4216352">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216356">for</span>&nbsp;<span class="ident" id="4216360">i</span>&nbsp;<span class="op" id="4216362">&gt;</span>&nbsp;<span class="num" id="4216364">127</span>&nbsp;<span class="op" id="4216368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216372">numBytes</span><span class="op" id="4216380">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216385">i</span>&nbsp;<span class="op" id="4216387">&gt;&gt;=</span>&nbsp;<span class="num" id="4216391">8</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4216394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216398">for</span>&nbsp;<span class="ident" id="4216402">i</span>&nbsp;<span class="op" id="4216404">&lt;</span>&nbsp;<span class="op" id="4216406">-</span><span class="num" id="4216407">128</span>&nbsp;<span class="op" id="4216411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216415">numBytes</span><span class="op" id="4216423">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216428">i</span>&nbsp;<span class="op" id="4216430">&gt;&gt;=</span>&nbsp;<span class="num" id="4216434">8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4216437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216441">return</span><br>
<span class="lineno"></span><span class="op" id="4216448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="4216451">func</span>&nbsp;<span class="ident" id="4216456">marshalBigInt</span><span class="op" id="4216469">(</span><span class="ident" id="4216470">out</span>&nbsp;<span class="op" id="4216474">*</span><span class="ident" id="4216475">forkableWriter</span><span class="op" id="4216489">,</span>&nbsp;<span class="ident" id="4216491">n</span>&nbsp;<span class="op" id="4216493">*</span><span class="ident" id="4216494">big</span><span class="op" id="4216497">.</span><span class="ident" id="4216498">Int</span><span class="op" id="4216501">)</span>&nbsp;<span class="op" id="4216503">(</span><span class="ident" id="4216504">err</span>&nbsp;<span class="builtintype" id="4216508">error</span><span class="op" id="4216513">)</span>&nbsp;<span class="op" id="4216515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216518">if</span>&nbsp;<span class="ident" id="4216521">n</span><span class="op" id="4216522">.</span><span class="ident" id="4216523">Sign</span><span class="op" id="4216527">(</span><span class="op" id="4216528">)</span>&nbsp;<span class="op" id="4216530">&lt;</span>&nbsp;<span class="num" id="4216532">0</span>&nbsp;<span class="op" id="4216534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4216538">//&nbsp;A&nbsp;negative&nbsp;number&nbsp;has&nbsp;to&nbsp;be&nbsp;converted&nbsp;to&nbsp;two&#39;s-complement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4216601">//&nbsp;form.&nbsp;So&nbsp;we&#39;ll&nbsp;subtract&nbsp;1&nbsp;and&nbsp;invert.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4216651">//&nbsp;most-significant-bit&nbsp;isn&#39;t&nbsp;set&nbsp;then&nbsp;we&#39;ll&nbsp;need&nbsp;to&nbsp;pad&nbsp;the</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4216714">//&nbsp;beginning&nbsp;with&nbsp;0xff&nbsp;in&nbsp;order&nbsp;to&nbsp;keep&nbsp;the&nbsp;number&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216777">nMinus1</span>&nbsp;<span class="op" id="4216785">:=</span>&nbsp;<span class="builtinfunc" id="4216788">new</span><span class="op" id="4216791">(</span><span class="ident" id="4216792">big</span><span class="op" id="4216795">.</span><span class="ident" id="4216796">Int</span><span class="op" id="4216799">)</span><span class="op" id="4216800">.</span><span class="ident" id="4216801">Neg</span><span class="op" id="4216804">(</span><span class="ident" id="4216805">n</span><span class="op" id="4216806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216810">nMinus1</span><span class="op" id="4216817">.</span><span class="ident" id="4216818">Sub</span><span class="op" id="4216821">(</span><span class="ident" id="4216822">nMinus1</span><span class="op" id="4216829">,</span>&nbsp;<span class="ident" id="4216831">bigOne</span><span class="op" id="4216837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216841">bytes</span>&nbsp;<span class="op" id="4216847">:=</span>&nbsp;<span class="ident" id="4216850">nMinus1</span><span class="op" id="4216857">.</span><span class="ident" id="4216858">Bytes</span><span class="op" id="4216863">(</span><span class="op" id="4216864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216868">for</span>&nbsp;<span class="ident" id="4216872">i</span>&nbsp;<span class="op" id="4216874">:=</span>&nbsp;<span class="keyword" id="4216877">range</span>&nbsp;<span class="ident" id="4216883">bytes</span>&nbsp;<span class="op" id="4216889">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216894">bytes</span><span class="op" id="4216899">[</span><span class="ident" id="4216900">i</span><span class="op" id="4216901">]</span>&nbsp;<span class="op" id="4216903">^=</span>&nbsp;<span class="num" id="4216906">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4216913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216917">if</span>&nbsp;<span class="builtinfunc" id="4216920">len</span><span class="op" id="4216923">(</span><span class="ident" id="4216924">bytes</span><span class="op" id="4216929">)</span>&nbsp;<span class="op" id="4216931">==</span>&nbsp;<span class="num" id="4216934">0</span>&nbsp;<span class="op" id="4216936">||</span>&nbsp;<span class="ident" id="4216939">bytes</span><span class="op" id="4216944">[</span><span class="num" id="4216945">0</span><span class="op" id="4216946">]</span><span class="op" id="4216947">&amp;</span><span class="num" id="4216948">0x80</span>&nbsp;<span class="op" id="4216953">==</span>&nbsp;<span class="num" id="4216956">0</span>&nbsp;<span class="op" id="4216958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4216963">err</span>&nbsp;<span class="op" id="4216967">=</span>&nbsp;<span class="ident" id="4216969">out</span><span class="op" id="4216972">.</span><span class="ident" id="4216973">WriteByte</span><span class="op" id="4216982">(</span><span class="num" id="4216983">0xff</span><span class="op" id="4216987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4216992">if</span>&nbsp;<span class="ident" id="4216995">err</span>&nbsp;<span class="op" id="4216999">!=</span>&nbsp;<span class="ident" id="4217002">nil</span>&nbsp;<span class="op" id="4217006">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217012">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217030">_</span><span class="op" id="4217031">,</span>&nbsp;<span class="ident" id="4217033">err</span>&nbsp;<span class="op" id="4217037">=</span>&nbsp;<span class="ident" id="4217039">out</span><span class="op" id="4217042">.</span><span class="ident" id="4217043">Write</span><span class="op" id="4217048">(</span><span class="ident" id="4217049">bytes</span><span class="op" id="4217054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217057">}</span>&nbsp;<span class="keyword" id="4217059">else</span>&nbsp;<span class="keyword" id="4217064">if</span>&nbsp;<span class="ident" id="4217067">n</span><span class="op" id="4217068">.</span><span class="ident" id="4217069">Sign</span><span class="op" id="4217073">(</span><span class="op" id="4217074">)</span>&nbsp;<span class="op" id="4217076">==</span>&nbsp;<span class="num" id="4217079">0</span>&nbsp;<span class="op" id="4217081">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4217085">//&nbsp;Zero&nbsp;is&nbsp;written&nbsp;as&nbsp;a&nbsp;single&nbsp;0&nbsp;zero&nbsp;rather&nbsp;than&nbsp;no&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217147">err</span>&nbsp;<span class="op" id="4217151">=</span>&nbsp;<span class="ident" id="4217153">out</span><span class="op" id="4217156">.</span><span class="ident" id="4217157">WriteByte</span><span class="op" id="4217166">(</span><span class="num" id="4217167">0x00</span><span class="op" id="4217171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217174">}</span>&nbsp;<span class="keyword" id="4217176">else</span>&nbsp;<span class="op" id="4217181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217185">bytes</span>&nbsp;<span class="op" id="4217191">:=</span>&nbsp;<span class="ident" id="4217194">n</span><span class="op" id="4217195">.</span><span class="ident" id="4217196">Bytes</span><span class="op" id="4217201">(</span><span class="op" id="4217202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217206">if</span>&nbsp;<span class="builtinfunc" id="4217209">len</span><span class="op" id="4217212">(</span><span class="ident" id="4217213">bytes</span><span class="op" id="4217218">)</span>&nbsp;<span class="op" id="4217220">&gt;</span>&nbsp;<span class="num" id="4217222">0</span>&nbsp;<span class="op" id="4217224">&amp;&amp;</span>&nbsp;<span class="ident" id="4217227">bytes</span><span class="op" id="4217232">[</span><span class="num" id="4217233">0</span><span class="op" id="4217234">]</span><span class="op" id="4217235">&amp;</span><span class="num" id="4217236">0x80</span>&nbsp;<span class="op" id="4217241">!=</span>&nbsp;<span class="num" id="4217244">0</span>&nbsp;<span class="op" id="4217246">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4217251">//&nbsp;We&#39;ll&nbsp;have&nbsp;to&nbsp;pad&nbsp;this&nbsp;with&nbsp;0x00&nbsp;in&nbsp;order&nbsp;to&nbsp;stop&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4217310">//&nbsp;looking&nbsp;like&nbsp;a&nbsp;negative&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217348">err</span>&nbsp;<span class="op" id="4217352">=</span>&nbsp;<span class="ident" id="4217354">out</span><span class="op" id="4217357">.</span><span class="ident" id="4217358">WriteByte</span><span class="op" id="4217367">(</span><span class="num" id="4217368">0</span><span class="op" id="4217369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217374">if</span>&nbsp;<span class="ident" id="4217377">err</span>&nbsp;<span class="op" id="4217381">!=</span>&nbsp;<span class="ident" id="4217384">nil</span>&nbsp;<span class="op" id="4217388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217394">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217412">_</span><span class="op" id="4217413">,</span>&nbsp;<span class="ident" id="4217415">err</span>&nbsp;<span class="op" id="4217419">=</span>&nbsp;<span class="ident" id="4217421">out</span><span class="op" id="4217424">.</span><span class="ident" id="4217425">Write</span><span class="op" id="4217430">(</span><span class="ident" id="4217431">bytes</span><span class="op" id="4217436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217442">return</span><br>
<span class="lineno">165</span><span class="op" id="4217449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4217452">func</span>&nbsp;<span class="ident" id="4217457">marshalLength</span><span class="op" id="4217470">(</span><span class="ident" id="4217471">out</span>&nbsp;<span class="op" id="4217475">*</span><span class="ident" id="4217476">forkableWriter</span><span class="op" id="4217490">,</span>&nbsp;<span class="ident" id="4217492">i</span>&nbsp;<span class="builtintype" id="4217494">int</span><span class="op" id="4217497">)</span>&nbsp;<span class="op" id="4217499">(</span><span class="ident" id="4217500">err</span>&nbsp;<span class="builtintype" id="4217504">error</span><span class="op" id="4217509">)</span>&nbsp;<span class="op" id="4217511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217514">n</span>&nbsp;<span class="op" id="4217516">:=</span>&nbsp;<span class="ident" id="4217519">lengthLength</span><span class="op" id="4217531">(</span><span class="ident" id="4217532">i</span><span class="op" id="4217533">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217537">for</span>&nbsp;<span class="op" id="4217541">;</span>&nbsp;<span class="ident" id="4217543">n</span>&nbsp;<span class="op" id="4217545">&gt;</span>&nbsp;<span class="num" id="4217547">0</span><span class="op" id="4217548">;</span>&nbsp;<span class="ident" id="4217550">n</span><span class="op" id="4217551">--</span>&nbsp;<span class="op" id="4217554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217558">err</span>&nbsp;<span class="op" id="4217562">=</span>&nbsp;<span class="ident" id="4217564">out</span><span class="op" id="4217567">.</span><span class="ident" id="4217568">WriteByte</span><span class="op" id="4217577">(</span><span class="builtintype" id="4217578">byte</span><span class="op" id="4217582">(</span><span class="ident" id="4217583">i</span>&nbsp;<span class="op" id="4217585">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4217588">uint</span><span class="op" id="4217592">(</span><span class="op" id="4217593">(</span><span class="ident" id="4217594">n</span><span class="op" id="4217595">-</span><span class="num" id="4217596">1</span><span class="op" id="4217597">)</span><span class="op" id="4217598">*</span><span class="num" id="4217599">8</span><span class="op" id="4217600">)</span><span class="op" id="4217601">)</span><span class="op" id="4217602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217606">if</span>&nbsp;<span class="ident" id="4217609">err</span>&nbsp;<span class="op" id="4217613">!=</span>&nbsp;<span class="ident" id="4217616">nil</span>&nbsp;<span class="op" id="4217620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217625">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217634">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217641">return</span>&nbsp;<span class="ident" id="4217648">nil</span><br>
<span class="lineno"></span><span class="op" id="4217652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="4217655">func</span>&nbsp;<span class="ident" id="4217660">lengthLength</span><span class="op" id="4217672">(</span><span class="ident" id="4217673">i</span>&nbsp;<span class="builtintype" id="4217675">int</span><span class="op" id="4217678">)</span>&nbsp;<span class="op" id="4217680">(</span><span class="ident" id="4217681">numBytes</span>&nbsp;<span class="builtintype" id="4217690">int</span><span class="op" id="4217693">)</span>&nbsp;<span class="op" id="4217695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217698">numBytes</span>&nbsp;<span class="op" id="4217707">=</span>&nbsp;<span class="num" id="4217709">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217712">for</span>&nbsp;<span class="ident" id="4217716">i</span>&nbsp;<span class="op" id="4217718">&gt;</span>&nbsp;<span class="num" id="4217720">255</span>&nbsp;<span class="op" id="4217724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217728">numBytes</span><span class="op" id="4217736">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217741">i</span>&nbsp;<span class="op" id="4217743">&gt;&gt;=</span>&nbsp;<span class="num" id="4217747">8</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217753">return</span><br>
<span class="lineno"></span><span class="op" id="4217760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4217763">func</span>&nbsp;<span class="ident" id="4217768">marshalTagAndLength</span><span class="op" id="4217787">(</span><span class="ident" id="4217788">out</span>&nbsp;<span class="op" id="4217792">*</span><span class="ident" id="4217793">forkableWriter</span><span class="op" id="4217807">,</span>&nbsp;<span class="ident" id="4217809">t</span>&nbsp;<span class="ident" id="4217811">tagAndLength</span><span class="op" id="4217823">)</span>&nbsp;<span class="op" id="4217825">(</span><span class="ident" id="4217826">err</span>&nbsp;<span class="builtintype" id="4217830">error</span><span class="op" id="4217835">)</span>&nbsp;<span class="op" id="4217837">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217840">b</span>&nbsp;<span class="op" id="4217842">:=</span>&nbsp;<span class="builtintype" id="4217845">uint8</span><span class="op" id="4217850">(</span><span class="ident" id="4217851">t</span><span class="op" id="4217852">.</span><span class="ident" id="4217853">class</span><span class="op" id="4217858">)</span>&nbsp;<span class="op" id="4217860">&lt;&lt;</span>&nbsp;<span class="num" id="4217863">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217866">if</span>&nbsp;<span class="ident" id="4217869">t</span><span class="op" id="4217870">.</span><span class="ident" id="4217871">isCompound</span>&nbsp;<span class="op" id="4217882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217886">b</span>&nbsp;<span class="op" id="4217888">|=</span>&nbsp;<span class="num" id="4217891">0x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217900">if</span>&nbsp;<span class="ident" id="4217903">t</span><span class="op" id="4217904">.</span><span class="ident" id="4217905">tag</span>&nbsp;<span class="op" id="4217909">&gt;=</span>&nbsp;<span class="num" id="4217912">31</span>&nbsp;<span class="op" id="4217915">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217919">b</span>&nbsp;<span class="op" id="4217921">|=</span>&nbsp;<span class="num" id="4217924">0x1f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217931">err</span>&nbsp;<span class="op" id="4217935">=</span>&nbsp;<span class="ident" id="4217937">out</span><span class="op" id="4217940">.</span><span class="ident" id="4217941">WriteByte</span><span class="op" id="4217950">(</span><span class="ident" id="4217951">b</span><span class="op" id="4217952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217956">if</span>&nbsp;<span class="ident" id="4217959">err</span>&nbsp;<span class="op" id="4217963">!=</span>&nbsp;<span class="ident" id="4217966">nil</span>&nbsp;<span class="op" id="4217970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4217975">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4217984">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4217988">err</span>&nbsp;<span class="op" id="4217992">=</span>&nbsp;<span class="ident" id="4217994">marshalBase128Int</span><span class="op" id="4218011">(</span><span class="ident" id="4218012">out</span><span class="op" id="4218015">,</span>&nbsp;<span class="ident" id="4218017">int64</span><span class="op" id="4218022">(</span><span class="ident" id="4218023">t</span><span class="op" id="4218024">.</span><span class="ident" id="4218025">tag</span><span class="op" id="4218028">)</span><span class="op" id="4218029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218033">if</span>&nbsp;<span class="ident" id="4218036">err</span>&nbsp;<span class="op" id="4218040">!=</span>&nbsp;<span class="ident" id="4218043">nil</span>&nbsp;<span class="op" id="4218047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218052">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218064">}</span>&nbsp;<span class="keyword" id="4218066">else</span>&nbsp;<span class="op" id="4218071">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218075">b</span>&nbsp;<span class="op" id="4218077">|=</span>&nbsp;<span class="builtintype" id="4218080">uint8</span><span class="op" id="4218085">(</span><span class="ident" id="4218086">t</span><span class="op" id="4218087">.</span><span class="ident" id="4218088">tag</span><span class="op" id="4218091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218095">err</span>&nbsp;<span class="op" id="4218099">=</span>&nbsp;<span class="ident" id="4218101">out</span><span class="op" id="4218104">.</span><span class="ident" id="4218105">WriteByte</span><span class="op" id="4218114">(</span><span class="ident" id="4218115">b</span><span class="op" id="4218116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218120">if</span>&nbsp;<span class="ident" id="4218123">err</span>&nbsp;<span class="op" id="4218127">!=</span>&nbsp;<span class="ident" id="4218130">nil</span>&nbsp;<span class="op" id="4218134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218139">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218148">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218155">if</span>&nbsp;<span class="ident" id="4218158">t</span><span class="op" id="4218159">.</span><span class="ident" id="4218160">length</span>&nbsp;<span class="op" id="4218167">&gt;=</span>&nbsp;<span class="num" id="4218170">128</span>&nbsp;<span class="op" id="4218174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218178">l</span>&nbsp;<span class="op" id="4218180">:=</span>&nbsp;<span class="ident" id="4218183">lengthLength</span><span class="op" id="4218195">(</span><span class="ident" id="4218196">t</span><span class="op" id="4218197">.</span><span class="ident" id="4218198">length</span><span class="op" id="4218204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218208">err</span>&nbsp;<span class="op" id="4218212">=</span>&nbsp;<span class="ident" id="4218214">out</span><span class="op" id="4218217">.</span><span class="ident" id="4218218">WriteByte</span><span class="op" id="4218227">(</span><span class="num" id="4218228">0x80</span>&nbsp;<span class="op" id="4218233">|</span>&nbsp;<span class="builtintype" id="4218235">byte</span><span class="op" id="4218239">(</span><span class="ident" id="4218240">l</span><span class="op" id="4218241">)</span><span class="op" id="4218242">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218246">if</span>&nbsp;<span class="ident" id="4218249">err</span>&nbsp;<span class="op" id="4218253">!=</span>&nbsp;<span class="ident" id="4218256">nil</span>&nbsp;<span class="op" id="4218260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218265">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218278">err</span>&nbsp;<span class="op" id="4218282">=</span>&nbsp;<span class="ident" id="4218284">marshalLength</span><span class="op" id="4218297">(</span><span class="ident" id="4218298">out</span><span class="op" id="4218301">,</span>&nbsp;<span class="ident" id="4218303">t</span><span class="op" id="4218304">.</span><span class="ident" id="4218305">length</span><span class="op" id="4218311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218315">if</span>&nbsp;<span class="ident" id="4218318">err</span>&nbsp;<span class="op" id="4218322">!=</span>&nbsp;<span class="ident" id="4218325">nil</span>&nbsp;<span class="op" id="4218329">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218334">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218346">}</span>&nbsp;<span class="keyword" id="4218348">else</span>&nbsp;<span class="op" id="4218353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218357">err</span>&nbsp;<span class="op" id="4218361">=</span>&nbsp;<span class="ident" id="4218363">out</span><span class="op" id="4218366">.</span><span class="ident" id="4218367">WriteByte</span><span class="op" id="4218376">(</span><span class="builtintype" id="4218377">byte</span><span class="op" id="4218381">(</span><span class="ident" id="4218382">t</span><span class="op" id="4218383">.</span><span class="ident" id="4218384">length</span><span class="op" id="4218390">)</span><span class="op" id="4218391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218395">if</span>&nbsp;<span class="ident" id="4218398">err</span>&nbsp;<span class="op" id="4218402">!=</span>&nbsp;<span class="ident" id="4218405">nil</span>&nbsp;<span class="op" id="4218409">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218414">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218430">return</span>&nbsp;<span class="ident" id="4218437">nil</span><br>
<span class="lineno">230</span><span class="op" id="4218441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4218444">func</span>&nbsp;<span class="ident" id="4218449">marshalBitString</span><span class="op" id="4218465">(</span><span class="ident" id="4218466">out</span>&nbsp;<span class="op" id="4218470">*</span><span class="ident" id="4218471">forkableWriter</span><span class="op" id="4218485">,</span>&nbsp;<span class="ident" id="4218487">b</span>&nbsp;<span class="ident" id="4218489">BitString</span><span class="op" id="4218498">)</span>&nbsp;<span class="op" id="4218500">(</span><span class="ident" id="4218501">err</span>&nbsp;<span class="builtintype" id="4218505">error</span><span class="op" id="4218510">)</span>&nbsp;<span class="op" id="4218512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218515">paddingBits</span>&nbsp;<span class="op" id="4218527">:=</span>&nbsp;<span class="builtintype" id="4218530">byte</span><span class="op" id="4218534">(</span><span class="op" id="4218535">(</span><span class="num" id="4218536">8</span>&nbsp;<span class="op" id="4218538">-</span>&nbsp;<span class="ident" id="4218540">b</span><span class="op" id="4218541">.</span><span class="ident" id="4218542">BitLength</span><span class="op" id="4218551">%</span><span class="num" id="4218552">8</span><span class="op" id="4218553">)</span>&nbsp;<span class="op" id="4218555">%</span>&nbsp;<span class="num" id="4218557">8</span><span class="op" id="4218558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218561">err</span>&nbsp;<span class="op" id="4218565">=</span>&nbsp;<span class="ident" id="4218567">out</span><span class="op" id="4218570">.</span><span class="ident" id="4218571">WriteByte</span><span class="op" id="4218580">(</span><span class="ident" id="4218581">paddingBits</span><span class="op" id="4218592">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218595">if</span>&nbsp;<span class="ident" id="4218598">err</span>&nbsp;<span class="op" id="4218602">!=</span>&nbsp;<span class="ident" id="4218605">nil</span>&nbsp;<span class="op" id="4218609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218613">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218624">_</span><span class="op" id="4218625">,</span>&nbsp;<span class="ident" id="4218627">err</span>&nbsp;<span class="op" id="4218631">=</span>&nbsp;<span class="ident" id="4218633">out</span><span class="op" id="4218636">.</span><span class="ident" id="4218637">Write</span><span class="op" id="4218642">(</span><span class="ident" id="4218643">b</span><span class="op" id="4218644">.</span><span class="ident" id="4218645">Bytes</span><span class="op" id="4218650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218653">return</span><br>
<span class="lineno">240</span><span class="op" id="4218660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4218663">func</span>&nbsp;<span class="ident" id="4218668">marshalObjectIdentifier</span><span class="op" id="4218691">(</span><span class="ident" id="4218692">out</span>&nbsp;<span class="op" id="4218696">*</span><span class="ident" id="4218697">forkableWriter</span><span class="op" id="4218711">,</span>&nbsp;<span class="ident" id="4218713">oid</span>&nbsp;<span class="op" id="4218717">[</span><span class="op" id="4218718">]</span><span class="builtintype" id="4218719">int</span><span class="op" id="4218722">)</span>&nbsp;<span class="op" id="4218724">(</span><span class="ident" id="4218725">err</span>&nbsp;<span class="builtintype" id="4218729">error</span><span class="op" id="4218734">)</span>&nbsp;<span class="op" id="4218736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218739">if</span>&nbsp;<span class="builtinfunc" id="4218742">len</span><span class="op" id="4218745">(</span><span class="ident" id="4218746">oid</span><span class="op" id="4218749">)</span>&nbsp;<span class="op" id="4218751">&lt;</span>&nbsp;<span class="num" id="4218753">2</span>&nbsp;<span class="op" id="4218755">||</span>&nbsp;<span class="ident" id="4218758">oid</span><span class="op" id="4218761">[</span><span class="num" id="4218762">0</span><span class="op" id="4218763">]</span>&nbsp;<span class="op" id="4218765">&gt;</span>&nbsp;<span class="num" id="4218767">2</span>&nbsp;<span class="op" id="4218769">||</span>&nbsp;<span class="op" id="4218772">(</span><span class="ident" id="4218773">oid</span><span class="op" id="4218776">[</span><span class="num" id="4218777">0</span><span class="op" id="4218778">]</span>&nbsp;<span class="op" id="4218780">&lt;</span>&nbsp;<span class="num" id="4218782">2</span>&nbsp;<span class="op" id="4218784">&amp;&amp;</span>&nbsp;<span class="ident" id="4218787">oid</span><span class="op" id="4218790">[</span><span class="num" id="4218791">1</span><span class="op" id="4218792">]</span>&nbsp;<span class="op" id="4218794">&gt;=</span>&nbsp;<span class="num" id="4218797">40</span><span class="op" id="4218799">)</span>&nbsp;<span class="op" id="4218801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218805">return</span>&nbsp;<span class="ident" id="4218812">StructuralError</span><span class="op" id="4218827">{</span><span class="string" id="4218828">&#34;invalid&nbsp;object&nbsp;identifier&#34;</span><span class="op" id="4218855">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218862">err</span>&nbsp;<span class="op" id="4218866">=</span>&nbsp;<span class="ident" id="4218868">marshalBase128Int</span><span class="op" id="4218885">(</span><span class="ident" id="4218886">out</span><span class="op" id="4218889">,</span>&nbsp;<span class="ident" id="4218891">int64</span><span class="op" id="4218896">(</span><span class="ident" id="4218897">oid</span><span class="op" id="4218900">[</span><span class="num" id="4218901">0</span><span class="op" id="4218902">]</span><span class="op" id="4218903">*</span><span class="num" id="4218904">40</span><span class="op" id="4218906">+</span><span class="ident" id="4218907">oid</span><span class="op" id="4218910">[</span><span class="num" id="4218911">1</span><span class="op" id="4218912">]</span><span class="op" id="4218913">)</span><span class="op" id="4218914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218917">if</span>&nbsp;<span class="ident" id="4218920">err</span>&nbsp;<span class="op" id="4218924">!=</span>&nbsp;<span class="ident" id="4218927">nil</span>&nbsp;<span class="op" id="4218931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218935">return</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4218943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4218946">for</span>&nbsp;<span class="ident" id="4218950">i</span>&nbsp;<span class="op" id="4218952">:=</span>&nbsp;<span class="num" id="4218955">2</span><span class="op" id="4218956">;</span>&nbsp;<span class="ident" id="4218958">i</span>&nbsp;<span class="op" id="4218960">&lt;</span>&nbsp;<span class="builtinfunc" id="4218962">len</span><span class="op" id="4218965">(</span><span class="ident" id="4218966">oid</span><span class="op" id="4218969">)</span><span class="op" id="4218970">;</span>&nbsp;<span class="ident" id="4218972">i</span><span class="op" id="4218973">++</span>&nbsp;<span class="op" id="4218976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4218980">err</span>&nbsp;<span class="op" id="4218984">=</span>&nbsp;<span class="ident" id="4218986">marshalBase128Int</span><span class="op" id="4219003">(</span><span class="ident" id="4219004">out</span><span class="op" id="4219007">,</span>&nbsp;<span class="ident" id="4219009">int64</span><span class="op" id="4219014">(</span><span class="ident" id="4219015">oid</span><span class="op" id="4219018">[</span><span class="ident" id="4219019">i</span><span class="op" id="4219020">]</span><span class="op" id="4219021">)</span><span class="op" id="4219022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219026">if</span>&nbsp;<span class="ident" id="4219029">err</span>&nbsp;<span class="op" id="4219033">!=</span>&nbsp;<span class="ident" id="4219036">nil</span>&nbsp;<span class="op" id="4219040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219045">return</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4219054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4219057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219061">return</span><br>
<span class="lineno"></span><span class="op" id="4219068">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4219071">func</span>&nbsp;<span class="ident" id="4219076">marshalPrintableString</span><span class="op" id="4219098">(</span><span class="ident" id="4219099">out</span>&nbsp;<span class="op" id="4219103">*</span><span class="ident" id="4219104">forkableWriter</span><span class="op" id="4219118">,</span>&nbsp;<span class="ident" id="4219120">s</span>&nbsp;<span class="builtintype" id="4219122">string</span><span class="op" id="4219128">)</span>&nbsp;<span class="op" id="4219130">(</span><span class="ident" id="4219131">err</span>&nbsp;<span class="builtintype" id="4219135">error</span><span class="op" id="4219140">)</span>&nbsp;<span class="op" id="4219142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4219145">b</span>&nbsp;<span class="op" id="4219147">:=</span>&nbsp;<span class="op" id="4219150">[</span><span class="op" id="4219151">]</span><span class="builtintype" id="4219152">byte</span><span class="op" id="4219156">(</span><span class="ident" id="4219157">s</span><span class="op" id="4219158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219161">for</span>&nbsp;<span class="ident" id="4219165">_</span><span class="op" id="4219166">,</span>&nbsp;<span class="ident" id="4219168">c</span>&nbsp;<span class="op" id="4219170">:=</span>&nbsp;<span class="keyword" id="4219173">range</span>&nbsp;<span class="ident" id="4219179">b</span>&nbsp;<span class="op" id="4219181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219185">if</span>&nbsp;<span class="op" id="4219188">!</span><span class="ident" id="4219189">isPrintable</span><span class="op" id="4219200">(</span><span class="ident" id="4219201">c</span><span class="op" id="4219202">)</span>&nbsp;<span class="op" id="4219204">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219209">return</span>&nbsp;<span class="ident" id="4219216">StructuralError</span><span class="op" id="4219231">{</span><span class="string" id="4219232">&#34;PrintableString&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4219276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4219280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4219283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4219287">_</span><span class="op" id="4219288">,</span>&nbsp;<span class="ident" id="4219290">err</span>&nbsp;<span class="op" id="4219294">=</span>&nbsp;<span class="ident" id="4219296">out</span><span class="op" id="4219299">.</span><span class="ident" id="4219300">Write</span><span class="op" id="4219305">(</span><span class="ident" id="4219306">b</span><span class="op" id="4219307">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219310">return</span><br>
<span class="lineno"></span><span class="op" id="4219317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4219320">func</span>&nbsp;<span class="ident" id="4219325">marshalIA5String</span><span class="op" id="4219341">(</span><span class="ident" id="4219342">out</span>&nbsp;<span class="op" id="4219346">*</span><span class="ident" id="4219347">forkableWriter</span><span class="op" id="4219361">,</span>&nbsp;<span class="ident" id="4219363">s</span>&nbsp;<span class="builtintype" id="4219365">string</span><span class="op" id="4219371">)</span>&nbsp;<span class="op" id="4219373">(</span><span class="ident" id="4219374">err</span>&nbsp;<span class="builtintype" id="4219378">error</span><span class="op" id="4219383">)</span>&nbsp;<span class="op" id="4219385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4219388">b</span>&nbsp;<span class="op" id="4219390">:=</span>&nbsp;<span class="op" id="4219393">[</span><span class="op" id="4219394">]</span><span class="builtintype" id="4219395">byte</span><span class="op" id="4219399">(</span><span class="ident" id="4219400">s</span><span class="op" id="4219401">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219404">for</span>&nbsp;<span class="ident" id="4219408">_</span><span class="op" id="4219409">,</span>&nbsp;<span class="ident" id="4219411">c</span>&nbsp;<span class="op" id="4219413">:=</span>&nbsp;<span class="keyword" id="4219416">range</span>&nbsp;<span class="ident" id="4219422">b</span>&nbsp;<span class="op" id="4219424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219428">if</span>&nbsp;<span class="ident" id="4219431">c</span>&nbsp;<span class="op" id="4219433">&gt;</span>&nbsp;<span class="num" id="4219435">127</span>&nbsp;<span class="op" id="4219439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219444">return</span>&nbsp;<span class="ident" id="4219451">StructuralError</span><span class="op" id="4219466">{</span><span class="string" id="4219467">&#34;IA5String&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4219505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4219509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4219512">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4219516">_</span><span class="op" id="4219517">,</span>&nbsp;<span class="ident" id="4219519">err</span>&nbsp;<span class="op" id="4219523">=</span>&nbsp;<span class="ident" id="4219525">out</span><span class="op" id="4219528">.</span><span class="ident" id="4219529">Write</span><span class="op" id="4219534">(</span><span class="ident" id="4219535">b</span><span class="op" id="4219536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219539">return</span><br>
<span class="lineno"></span><span class="op" id="4219546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4219549">func</span>&nbsp;<span class="ident" id="4219554">marshalUTF8String</span><span class="op" id="4219571">(</span><span class="ident" id="4219572">out</span>&nbsp;<span class="op" id="4219576">*</span><span class="ident" id="4219577">forkableWriter</span><span class="op" id="4219591">,</span>&nbsp;<span class="ident" id="4219593">s</span>&nbsp;<span class="builtintype" id="4219595">string</span><span class="op" id="4219601">)</span>&nbsp;<span class="op" id="4219603">(</span><span class="ident" id="4219604">err</span>&nbsp;<span class="builtintype" id="4219608">error</span><span class="op" id="4219613">)</span>&nbsp;<span class="op" id="4219615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4219618">_</span><span class="op" id="4219619">,</span>&nbsp;<span class="ident" id="4219621">err</span>&nbsp;<span class="op" id="4219625">=</span>&nbsp;<span class="ident" id="4219627">out</span><span class="op" id="4219630">.</span><span class="ident" id="4219631">Write</span><span class="op" id="4219636">(</span><span class="op" id="4219637">[</span><span class="op" id="4219638">]</span><span class="builtintype" id="4219639">byte</span><span class="op" id="4219643">(</span><span class="ident" id="4219644">s</span><span class="op" id="4219645">)</span><span class="op" id="4219646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219649">return</span><br>
<span class="lineno"></span><span class="op" id="4219656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="4219659">func</span>&nbsp;<span class="ident" id="4219664">marshalTwoDigits</span><span class="op" id="4219680">(</span><span class="ident" id="4219681">out</span>&nbsp;<span class="op" id="4219685">*</span><span class="ident" id="4219686">forkableWriter</span><span class="op" id="4219700">,</span>&nbsp;<span class="ident" id="4219702">v</span>&nbsp;<span class="builtintype" id="4219704">int</span><span class="op" id="4219707">)</span>&nbsp;<span class="op" id="4219709">(</span><span class="ident" id="4219710">err</span>&nbsp;<span class="builtintype" id="4219714">error</span><span class="op" id="4219719">)</span>&nbsp;<span class="op" id="4219721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4219724">err</span>&nbsp;<span class="op" id="4219728">=</span>&nbsp;<span class="ident" id="4219730">out</span><span class="op" id="4219733">.</span><span class="ident" id="4219734">WriteByte</span><span class="op" id="4219743">(</span><span class="builtintype" id="4219744">byte</span><span class="op" id="4219748">(</span><span class="string" id="4219749">&#39;0&#39;</span>&nbsp;<span class="op" id="4219753">+</span>&nbsp;<span class="op" id="4219755">(</span><span class="ident" id="4219756">v</span><span class="op" id="4219757">/</span><span class="num" id="4219758">10</span><span class="op" id="4219760">)</span><span class="op" id="4219761">%</span><span class="num" id="4219762">10</span><span class="op" id="4219764">)</span><span class="op" id="4219765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219768">if</span>&nbsp;<span class="ident" id="4219771">err</span>&nbsp;<span class="op" id="4219775">!=</span>&nbsp;<span class="ident" id="4219778">nil</span>&nbsp;<span class="op" id="4219782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219786">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4219794">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219797">return</span>&nbsp;<span class="ident" id="4219804">out</span><span class="op" id="4219807">.</span><span class="ident" id="4219808">WriteByte</span><span class="op" id="4219817">(</span><span class="builtintype" id="4219818">byte</span><span class="op" id="4219822">(</span><span class="string" id="4219823">&#39;0&#39;</span>&nbsp;<span class="op" id="4219827">+</span>&nbsp;<span class="ident" id="4219829">v</span><span class="op" id="4219830">%</span><span class="num" id="4219831">10</span><span class="op" id="4219833">)</span><span class="op" id="4219834">)</span><br>
<span class="lineno"></span><span class="op" id="4219836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4219839">func</span>&nbsp;<span class="ident" id="4219844">marshalFourDigits</span><span class="op" id="4219861">(</span><span class="ident" id="4219862">out</span>&nbsp;<span class="op" id="4219866">*</span><span class="ident" id="4219867">forkableWriter</span><span class="op" id="4219881">,</span>&nbsp;<span class="ident" id="4219883">v</span>&nbsp;<span class="builtintype" id="4219885">int</span><span class="op" id="4219888">)</span>&nbsp;<span class="op" id="4219890">(</span><span class="ident" id="4219891">err</span>&nbsp;<span class="builtintype" id="4219895">error</span><span class="op" id="4219900">)</span>&nbsp;<span class="op" id="4219902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219905">var</span>&nbsp;<span class="ident" id="4219909">bytes</span>&nbsp;<span class="op" id="4219915">[</span><span class="num" id="4219916">4</span><span class="op" id="4219917">]</span><span class="builtintype" id="4219918">byte</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4219924">for</span>&nbsp;<span class="ident" id="4219928">i</span>&nbsp;<span class="op" id="4219930">:=</span>&nbsp;<span class="keyword" id="4219933">range</span>&nbsp;<span class="ident" id="4219939">bytes</span>&nbsp;<span class="op" id="4219945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4219949">bytes</span><span class="op" id="4219954">[</span><span class="num" id="4219955">3</span><span class="op" id="4219956">-</span><span class="ident" id="4219957">i</span><span class="op" id="4219958">]</span>&nbsp;<span class="op" id="4219960">=</span>&nbsp;<span class="string" id="4219962">&#39;0&#39;</span>&nbsp;<span class="op" id="4219966">+</span>&nbsp;<span class="builtintype" id="4219968">byte</span><span class="op" id="4219972">(</span><span class="ident" id="4219973">v</span><span class="op" id="4219974">%</span><span class="num" id="4219975">10</span><span class="op" id="4219977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4219981">v</span>&nbsp;<span class="op" id="4219983">/=</span>&nbsp;<span class="num" id="4219986">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4219990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4219993">_</span><span class="op" id="4219994">,</span>&nbsp;<span class="ident" id="4219996">err</span>&nbsp;<span class="op" id="4220000">=</span>&nbsp;<span class="ident" id="4220002">out</span><span class="op" id="4220005">.</span><span class="ident" id="4220006">Write</span><span class="op" id="4220011">(</span><span class="ident" id="4220012">bytes</span><span class="op" id="4220017">[</span><span class="op" id="4220018">:</span><span class="op" id="4220019">]</span><span class="op" id="4220020">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220023">return</span><br>
<span class="lineno"></span><span class="op" id="4220030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4220033">func</span>&nbsp;<span class="ident" id="4220038">outsideUTCRange</span><span class="op" id="4220053">(</span><span class="ident" id="4220054">t</span>&nbsp;<span class="ident" id="4220056">time</span><span class="op" id="4220060">.</span><span class="ident" id="4220061">Time</span><span class="op" id="4220065">)</span>&nbsp;<span class="builtintype" id="4220067">bool</span>&nbsp;<span class="op" id="4220072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4220075">year</span>&nbsp;<span class="op" id="4220080">:=</span>&nbsp;<span class="ident" id="4220083">t</span><span class="op" id="4220084">.</span><span class="ident" id="4220085">Year</span><span class="op" id="4220089">(</span><span class="op" id="4220090">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220093">return</span>&nbsp;<span class="ident" id="4220100">year</span>&nbsp;<span class="op" id="4220105">&lt;</span>&nbsp;<span class="num" id="4220107">1950</span>&nbsp;<span class="op" id="4220112">||</span>&nbsp;<span class="ident" id="4220115">year</span>&nbsp;<span class="op" id="4220120">&gt;=</span>&nbsp;<span class="num" id="4220123">2050</span><br>
<span class="lineno"></span><span class="op" id="4220128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4220131">func</span>&nbsp;<span class="ident" id="4220136">marshalUTCTime</span><span class="op" id="4220150">(</span><span class="ident" id="4220151">out</span>&nbsp;<span class="op" id="4220155">*</span><span class="ident" id="4220156">forkableWriter</span><span class="op" id="4220170">,</span>&nbsp;<span class="ident" id="4220172">t</span>&nbsp;<span class="ident" id="4220174">time</span><span class="op" id="4220178">.</span><span class="ident" id="4220179">Time</span><span class="op" id="4220183">)</span>&nbsp;<span class="op" id="4220185">(</span><span class="ident" id="4220186">err</span>&nbsp;<span class="builtintype" id="4220190">error</span><span class="op" id="4220195">)</span>&nbsp;<span class="op" id="4220197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4220200">year</span>&nbsp;<span class="op" id="4220205">:=</span>&nbsp;<span class="ident" id="4220208">t</span><span class="op" id="4220209">.</span><span class="ident" id="4220210">Year</span><span class="op" id="4220214">(</span><span class="op" id="4220215">)</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220219">switch</span>&nbsp;<span class="op" id="4220226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220229">case</span>&nbsp;<span class="num" id="4220234">1950</span>&nbsp;<span class="op" id="4220239">&lt;=</span>&nbsp;<span class="ident" id="4220242">year</span>&nbsp;<span class="op" id="4220247">&amp;&amp;</span>&nbsp;<span class="ident" id="4220250">year</span>&nbsp;<span class="op" id="4220255">&lt;</span>&nbsp;<span class="num" id="4220257">2000</span><span class="op" id="4220261">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4220265">err</span>&nbsp;<span class="op" id="4220269">=</span>&nbsp;<span class="ident" id="4220271">marshalTwoDigits</span><span class="op" id="4220287">(</span><span class="ident" id="4220288">out</span><span class="op" id="4220291">,</span>&nbsp;<span class="builtintype" id="4220293">int</span><span class="op" id="4220296">(</span><span class="ident" id="4220297">year</span><span class="op" id="4220301">-</span><span class="num" id="4220302">1900</span><span class="op" id="4220306">)</span><span class="op" id="4220307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220310">case</span>&nbsp;<span class="num" id="4220315">2000</span>&nbsp;<span class="op" id="4220320">&lt;=</span>&nbsp;<span class="ident" id="4220323">year</span>&nbsp;<span class="op" id="4220328">&amp;&amp;</span>&nbsp;<span class="ident" id="4220331">year</span>&nbsp;<span class="op" id="4220336">&lt;</span>&nbsp;<span class="num" id="4220338">2050</span><span class="op" id="4220342">:</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4220346">err</span>&nbsp;<span class="op" id="4220350">=</span>&nbsp;<span class="ident" id="4220352">marshalTwoDigits</span><span class="op" id="4220368">(</span><span class="ident" id="4220369">out</span><span class="op" id="4220372">,</span>&nbsp;<span class="builtintype" id="4220374">int</span><span class="op" id="4220377">(</span><span class="ident" id="4220378">year</span><span class="op" id="4220382">-</span><span class="num" id="4220383">2000</span><span class="op" id="4220387">)</span><span class="op" id="4220388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220391">default</span><span class="op" id="4220398">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220402">return</span>&nbsp;<span class="ident" id="4220409">StructuralError</span><span class="op" id="4220424">{</span><span class="string" id="4220425">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;UTCTime&#34;</span><span class="op" id="4220459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4220462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220465">if</span>&nbsp;<span class="ident" id="4220468">err</span>&nbsp;<span class="op" id="4220472">!=</span>&nbsp;<span class="ident" id="4220475">nil</span>&nbsp;<span class="op" id="4220479">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220483">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4220491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220495">return</span>&nbsp;<span class="ident" id="4220502">marshalTimeCommon</span><span class="op" id="4220519">(</span><span class="ident" id="4220520">out</span><span class="op" id="4220523">,</span>&nbsp;<span class="ident" id="4220525">t</span><span class="op" id="4220526">)</span><br>
<span class="lineno"></span><span class="op" id="4220528">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="4220531">func</span>&nbsp;<span class="ident" id="4220536">marshalGeneralizedTime</span><span class="op" id="4220558">(</span><span class="ident" id="4220559">out</span>&nbsp;<span class="op" id="4220563">*</span><span class="ident" id="4220564">forkableWriter</span><span class="op" id="4220578">,</span>&nbsp;<span class="ident" id="4220580">t</span>&nbsp;<span class="ident" id="4220582">time</span><span class="op" id="4220586">.</span><span class="ident" id="4220587">Time</span><span class="op" id="4220591">)</span>&nbsp;<span class="op" id="4220593">(</span><span class="ident" id="4220594">err</span>&nbsp;<span class="builtintype" id="4220598">error</span><span class="op" id="4220603">)</span>&nbsp;<span class="op" id="4220605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4220608">year</span>&nbsp;<span class="op" id="4220613">:=</span>&nbsp;<span class="ident" id="4220616">t</span><span class="op" id="4220617">.</span><span class="ident" id="4220618">Year</span><span class="op" id="4220622">(</span><span class="op" id="4220623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220626">if</span>&nbsp;<span class="ident" id="4220629">year</span>&nbsp;<span class="op" id="4220634">&lt;</span>&nbsp;<span class="num" id="4220636">0</span>&nbsp;<span class="op" id="4220638">||</span>&nbsp;<span class="ident" id="4220641">year</span>&nbsp;<span class="op" id="4220646">&gt;</span>&nbsp;<span class="num" id="4220648">9999</span>&nbsp;<span class="op" id="4220653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220657">return</span>&nbsp;<span class="ident" id="4220664">StructuralError</span><span class="op" id="4220679">{</span><span class="string" id="4220680">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;GeneralizedTime&#34;</span><span class="op" id="4220722">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4220725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220728">if</span>&nbsp;<span class="ident" id="4220731">err</span>&nbsp;<span class="op" id="4220735">=</span>&nbsp;<span class="ident" id="4220737">marshalFourDigits</span><span class="op" id="4220754">(</span><span class="ident" id="4220755">out</span><span class="op" id="4220758">,</span>&nbsp;<span class="ident" id="4220760">year</span><span class="op" id="4220764">)</span><span class="op" id="4220765">;</span>&nbsp;<span class="ident" id="4220767">err</span>&nbsp;<span class="op" id="4220771">!=</span>&nbsp;<span class="ident" id="4220774">nil</span>&nbsp;<span class="op" id="4220778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220782">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4220790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220794">return</span>&nbsp;<span class="ident" id="4220801">marshalTimeCommon</span><span class="op" id="4220818">(</span><span class="ident" id="4220819">out</span><span class="op" id="4220822">,</span>&nbsp;<span class="ident" id="4220824">t</span><span class="op" id="4220825">)</span><br>
<span class="lineno"></span><span class="op" id="4220827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4220830">func</span>&nbsp;<span class="ident" id="4220835">marshalTimeCommon</span><span class="op" id="4220852">(</span><span class="ident" id="4220853">out</span>&nbsp;<span class="op" id="4220857">*</span><span class="ident" id="4220858">forkableWriter</span><span class="op" id="4220872">,</span>&nbsp;<span class="ident" id="4220874">t</span>&nbsp;<span class="ident" id="4220876">time</span><span class="op" id="4220880">.</span><span class="ident" id="4220881">Time</span><span class="op" id="4220885">)</span>&nbsp;<span class="op" id="4220887">(</span><span class="ident" id="4220888">err</span>&nbsp;<span class="builtintype" id="4220892">error</span><span class="op" id="4220897">)</span>&nbsp;<span class="op" id="4220899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4220902">_</span><span class="op" id="4220903">,</span>&nbsp;<span class="ident" id="4220905">month</span><span class="op" id="4220910">,</span>&nbsp;<span class="ident" id="4220912">day</span>&nbsp;<span class="op" id="4220916">:=</span>&nbsp;<span class="ident" id="4220919">t</span><span class="op" id="4220920">.</span><span class="ident" id="4220921">Date</span><span class="op" id="4220925">(</span><span class="op" id="4220926">)</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4220930">err</span>&nbsp;<span class="op" id="4220934">=</span>&nbsp;<span class="ident" id="4220936">marshalTwoDigits</span><span class="op" id="4220952">(</span><span class="ident" id="4220953">out</span><span class="op" id="4220956">,</span>&nbsp;<span class="builtintype" id="4220958">int</span><span class="op" id="4220961">(</span><span class="ident" id="4220962">month</span><span class="op" id="4220967">)</span><span class="op" id="4220968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220971">if</span>&nbsp;<span class="ident" id="4220974">err</span>&nbsp;<span class="op" id="4220978">!=</span>&nbsp;<span class="ident" id="4220981">nil</span>&nbsp;<span class="op" id="4220985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4220989">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4220997">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221001">err</span>&nbsp;<span class="op" id="4221005">=</span>&nbsp;<span class="ident" id="4221007">marshalTwoDigits</span><span class="op" id="4221023">(</span><span class="ident" id="4221024">out</span><span class="op" id="4221027">,</span>&nbsp;<span class="ident" id="4221029">day</span><span class="op" id="4221032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221035">if</span>&nbsp;<span class="ident" id="4221038">err</span>&nbsp;<span class="op" id="4221042">!=</span>&nbsp;<span class="ident" id="4221045">nil</span>&nbsp;<span class="op" id="4221049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221053">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4221061">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221065">hour</span><span class="op" id="4221069">,</span>&nbsp;<span class="ident" id="4221071">min</span><span class="op" id="4221074">,</span>&nbsp;<span class="ident" id="4221076">sec</span>&nbsp;<span class="op" id="4221080">:=</span>&nbsp;<span class="ident" id="4221083">t</span><span class="op" id="4221084">.</span><span class="ident" id="4221085">Clock</span><span class="op" id="4221090">(</span><span class="op" id="4221091">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221095">err</span>&nbsp;<span class="op" id="4221099">=</span>&nbsp;<span class="ident" id="4221101">marshalTwoDigits</span><span class="op" id="4221117">(</span><span class="ident" id="4221118">out</span><span class="op" id="4221121">,</span>&nbsp;<span class="ident" id="4221123">hour</span><span class="op" id="4221127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221130">if</span>&nbsp;<span class="ident" id="4221133">err</span>&nbsp;<span class="op" id="4221137">!=</span>&nbsp;<span class="ident" id="4221140">nil</span>&nbsp;<span class="op" id="4221144">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221148">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4221156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221160">err</span>&nbsp;<span class="op" id="4221164">=</span>&nbsp;<span class="ident" id="4221166">marshalTwoDigits</span><span class="op" id="4221182">(</span><span class="ident" id="4221183">out</span><span class="op" id="4221186">,</span>&nbsp;<span class="ident" id="4221188">min</span><span class="op" id="4221191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221194">if</span>&nbsp;<span class="ident" id="4221197">err</span>&nbsp;<span class="op" id="4221201">!=</span>&nbsp;<span class="ident" id="4221204">nil</span>&nbsp;<span class="op" id="4221208">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221212">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4221220">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221224">err</span>&nbsp;<span class="op" id="4221228">=</span>&nbsp;<span class="ident" id="4221230">marshalTwoDigits</span><span class="op" id="4221246">(</span><span class="ident" id="4221247">out</span><span class="op" id="4221250">,</span>&nbsp;<span class="ident" id="4221252">sec</span><span class="op" id="4221255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221258">if</span>&nbsp;<span class="ident" id="4221261">err</span>&nbsp;<span class="op" id="4221265">!=</span>&nbsp;<span class="ident" id="4221268">nil</span>&nbsp;<span class="op" id="4221272">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221276">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4221284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221288">_</span><span class="op" id="4221289">,</span>&nbsp;<span class="ident" id="4221291">offset</span>&nbsp;<span class="op" id="4221298">:=</span>&nbsp;<span class="ident" id="4221301">t</span><span class="op" id="4221302">.</span><span class="ident" id="4221303">Zone</span><span class="op" id="4221307">(</span><span class="op" id="4221308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221312">switch</span>&nbsp;<span class="op" id="4221319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221322">case</span>&nbsp;<span class="ident" id="4221327">offset</span><span class="op" id="4221333">/</span><span class="num" id="4221334">60</span>&nbsp;<span class="op" id="4221337">==</span>&nbsp;<span class="num" id="4221340">0</span><span class="op" id="4221341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221345">err</span>&nbsp;<span class="op" id="4221349">=</span>&nbsp;<span class="ident" id="4221351">out</span><span class="op" id="4221354">.</span><span class="ident" id="4221355">WriteByte</span><span class="op" id="4221364">(</span><span class="string" id="4221365">&#39;Z&#39;</span><span class="op" id="4221368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221372">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221380">case</span>&nbsp;<span class="ident" id="4221385">offset</span>&nbsp;<span class="op" id="4221392">&gt;</span>&nbsp;<span class="num" id="4221394">0</span><span class="op" id="4221395">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221399">err</span>&nbsp;<span class="op" id="4221403">=</span>&nbsp;<span class="ident" id="4221405">out</span><span class="op" id="4221408">.</span><span class="ident" id="4221409">WriteByte</span><span class="op" id="4221418">(</span><span class="string" id="4221419">&#39;+&#39;</span><span class="op" id="4221422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221425">case</span>&nbsp;<span class="ident" id="4221430">offset</span>&nbsp;<span class="op" id="4221437">&lt;</span>&nbsp;<span class="num" id="4221439">0</span><span class="op" id="4221440">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221444">err</span>&nbsp;<span class="op" id="4221448">=</span>&nbsp;<span class="ident" id="4221450">out</span><span class="op" id="4221453">.</span><span class="ident" id="4221454">WriteByte</span><span class="op" id="4221463">(</span><span class="string" id="4221464">&#39;-&#39;</span><span class="op" id="4221467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4221470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221474">if</span>&nbsp;<span class="ident" id="4221477">err</span>&nbsp;<span class="op" id="4221481">!=</span>&nbsp;<span class="ident" id="4221484">nil</span>&nbsp;<span class="op" id="4221488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221492">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4221500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221504">offsetMinutes</span>&nbsp;<span class="op" id="4221518">:=</span>&nbsp;<span class="ident" id="4221521">offset</span>&nbsp;<span class="op" id="4221528">/</span>&nbsp;<span class="num" id="4221530">60</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221534">if</span>&nbsp;<span class="ident" id="4221537">offsetMinutes</span>&nbsp;<span class="op" id="4221551">&lt;</span>&nbsp;<span class="num" id="4221553">0</span>&nbsp;<span class="op" id="4221555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221559">offsetMinutes</span>&nbsp;<span class="op" id="4221573">=</span>&nbsp;<span class="op" id="4221575">-</span><span class="ident" id="4221576">offsetMinutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4221591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221595">err</span>&nbsp;<span class="op" id="4221599">=</span>&nbsp;<span class="ident" id="4221601">marshalTwoDigits</span><span class="op" id="4221617">(</span><span class="ident" id="4221618">out</span><span class="op" id="4221621">,</span>&nbsp;<span class="ident" id="4221623">offsetMinutes</span><span class="op" id="4221636">/</span><span class="num" id="4221637">60</span><span class="op" id="4221639">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221642">if</span>&nbsp;<span class="ident" id="4221645">err</span>&nbsp;<span class="op" id="4221649">!=</span>&nbsp;<span class="ident" id="4221652">nil</span>&nbsp;<span class="op" id="4221656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221660">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4221668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221672">err</span>&nbsp;<span class="op" id="4221676">=</span>&nbsp;<span class="ident" id="4221678">marshalTwoDigits</span><span class="op" id="4221694">(</span><span class="ident" id="4221695">out</span><span class="op" id="4221698">,</span>&nbsp;<span class="ident" id="4221700">offsetMinutes</span><span class="op" id="4221713">%</span><span class="num" id="4221714">60</span><span class="op" id="4221716">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221719">return</span><br>
<span class="lineno"></span><span class="op" id="4221726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4221729">func</span>&nbsp;<span class="ident" id="4221734">stripTagAndLength</span><span class="op" id="4221751">(</span><span class="ident" id="4221752">in</span>&nbsp;<span class="op" id="4221755">[</span><span class="op" id="4221756">]</span><span class="builtintype" id="4221757">byte</span><span class="op" id="4221761">)</span>&nbsp;<span class="op" id="4221763">[</span><span class="op" id="4221764">]</span><span class="builtintype" id="4221765">byte</span>&nbsp;<span class="op" id="4221770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4221773">_</span><span class="op" id="4221774">,</span>&nbsp;<span class="ident" id="4221776">offset</span><span class="op" id="4221782">,</span>&nbsp;<span class="ident" id="4221784">err</span>&nbsp;<span class="op" id="4221788">:=</span>&nbsp;<span class="ident" id="4221791">parseTagAndLength</span><span class="op" id="4221808">(</span><span class="ident" id="4221809">in</span><span class="op" id="4221811">,</span>&nbsp;<span class="num" id="4221813">0</span><span class="op" id="4221814">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221817">if</span>&nbsp;<span class="ident" id="4221820">err</span>&nbsp;<span class="op" id="4221824">!=</span>&nbsp;<span class="ident" id="4221827">nil</span>&nbsp;<span class="op" id="4221831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221835">return</span>&nbsp;<span class="ident" id="4221842">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4221846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221849">return</span>&nbsp;<span class="ident" id="4221856">in</span><span class="op" id="4221858">[</span><span class="ident" id="4221859">offset</span><span class="op" id="4221865">:</span><span class="op" id="4221866">]</span><br>
<span class="lineno"></span><span class="op" id="4221868">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span><span class="keyword" id="4221871">func</span>&nbsp;<span class="ident" id="4221876">marshalBody</span><span class="op" id="4221887">(</span><span class="ident" id="4221888">out</span>&nbsp;<span class="op" id="4221892">*</span><span class="ident" id="4221893">forkableWriter</span><span class="op" id="4221907">,</span>&nbsp;<span class="ident" id="4221909">value</span>&nbsp;<span class="ident" id="4221915">reflect</span><span class="op" id="4221922">.</span><span class="ident" id="4221923">Value</span><span class="op" id="4221928">,</span>&nbsp;<span class="ident" id="4221930">params</span>&nbsp;<span class="ident" id="4221937">fieldParameters</span><span class="op" id="4221952">)</span>&nbsp;<span class="op" id="4221954">(</span><span class="ident" id="4221955">err</span>&nbsp;<span class="builtintype" id="4221959">error</span><span class="op" id="4221964">)</span>&nbsp;<span class="op" id="4221966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221969">switch</span>&nbsp;<span class="ident" id="4221976">value</span><span class="op" id="4221981">.</span><span class="ident" id="4221982">Type</span><span class="op" id="4221986">(</span><span class="op" id="4221987">)</span>&nbsp;<span class="op" id="4221989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4221992">case</span>&nbsp;<span class="ident" id="4221997">timeType</span><span class="op" id="4222005">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4222009">t</span>&nbsp;<span class="op" id="4222011">:=</span>&nbsp;<span class="ident" id="4222014">value</span><span class="op" id="4222019">.</span><span class="ident" id="4222020">Interface</span><span class="op" id="4222029">(</span><span class="op" id="4222030">)</span><span class="op" id="4222031">.</span><span class="op" id="4222032">(</span><span class="ident" id="4222033">time</span><span class="op" id="4222037">.</span><span class="ident" id="4222038">Time</span><span class="op" id="4222042">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222046">if</span>&nbsp;<span class="ident" id="4222049">outsideUTCRange</span><span class="op" id="4222064">(</span><span class="ident" id="4222065">t</span><span class="op" id="4222066">)</span>&nbsp;<span class="op" id="4222068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222073">return</span>&nbsp;<span class="ident" id="4222080">marshalGeneralizedTime</span><span class="op" id="4222102">(</span><span class="ident" id="4222103">out</span><span class="op" id="4222106">,</span>&nbsp;<span class="ident" id="4222108">t</span><span class="op" id="4222109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4222113">}</span>&nbsp;<span class="keyword" id="4222115">else</span>&nbsp;<span class="op" id="4222120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222125">return</span>&nbsp;<span class="ident" id="4222132">marshalUTCTime</span><span class="op" id="4222146">(</span><span class="ident" id="4222147">out</span><span class="op" id="4222150">,</span>&nbsp;<span class="ident" id="4222152">t</span><span class="op" id="4222153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4222157">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222160">case</span>&nbsp;<span class="ident" id="4222165">bitStringType</span><span class="op" id="4222178">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222182">return</span>&nbsp;<span class="ident" id="4222189">marshalBitString</span><span class="op" id="4222205">(</span><span class="ident" id="4222206">out</span><span class="op" id="4222209">,</span>&nbsp;<span class="ident" id="4222211">value</span><span class="op" id="4222216">.</span><span class="ident" id="4222217">Interface</span><span class="op" id="4222226">(</span><span class="op" id="4222227">)</span><span class="op" id="4222228">.</span><span class="op" id="4222229">(</span><span class="ident" id="4222230">BitString</span><span class="op" id="4222239">)</span><span class="op" id="4222240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222243">case</span>&nbsp;<span class="ident" id="4222248">objectIdentifierType</span><span class="op" id="4222268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222272">return</span>&nbsp;<span class="ident" id="4222279">marshalObjectIdentifier</span><span class="op" id="4222302">(</span><span class="ident" id="4222303">out</span><span class="op" id="4222306">,</span>&nbsp;<span class="ident" id="4222308">value</span><span class="op" id="4222313">.</span><span class="ident" id="4222314">Interface</span><span class="op" id="4222323">(</span><span class="op" id="4222324">)</span><span class="op" id="4222325">.</span><span class="op" id="4222326">(</span><span class="ident" id="4222327">ObjectIdentifier</span><span class="op" id="4222343">)</span><span class="op" id="4222344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222347">case</span>&nbsp;<span class="ident" id="4222352">bigIntType</span><span class="op" id="4222362">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222366">return</span>&nbsp;<span class="ident" id="4222373">marshalBigInt</span><span class="op" id="4222386">(</span><span class="ident" id="4222387">out</span><span class="op" id="4222390">,</span>&nbsp;<span class="ident" id="4222392">value</span><span class="op" id="4222397">.</span><span class="ident" id="4222398">Interface</span><span class="op" id="4222407">(</span><span class="op" id="4222408">)</span><span class="op" id="4222409">.</span><span class="op" id="4222410">(</span><span class="op" id="4222411">*</span><span class="ident" id="4222412">big</span><span class="op" id="4222415">.</span><span class="ident" id="4222416">Int</span><span class="op" id="4222419">)</span><span class="op" id="4222420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4222423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222427">switch</span>&nbsp;<span class="ident" id="4222434">v</span>&nbsp;<span class="op" id="4222436">:=</span>&nbsp;<span class="ident" id="4222439">value</span><span class="op" id="4222444">;</span>&nbsp;<span class="ident" id="4222446">v</span><span class="op" id="4222447">.</span><span class="ident" id="4222448">Kind</span><span class="op" id="4222452">(</span><span class="op" id="4222453">)</span>&nbsp;<span class="op" id="4222455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222458">case</span>&nbsp;<span class="ident" id="4222463">reflect</span><span class="op" id="4222470">.</span><span class="ident" id="4222471">Bool</span><span class="op" id="4222475">:</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222479">if</span>&nbsp;<span class="ident" id="4222482">v</span><span class="op" id="4222483">.</span><span class="ident" id="4222484">Bool</span><span class="op" id="4222488">(</span><span class="op" id="4222489">)</span>&nbsp;<span class="op" id="4222491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222496">return</span>&nbsp;<span class="ident" id="4222503">out</span><span class="op" id="4222506">.</span><span class="ident" id="4222507">WriteByte</span><span class="op" id="4222516">(</span><span class="num" id="4222517">255</span><span class="op" id="4222520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4222524">}</span>&nbsp;<span class="keyword" id="4222526">else</span>&nbsp;<span class="op" id="4222531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222536">return</span>&nbsp;<span class="ident" id="4222543">out</span><span class="op" id="4222546">.</span><span class="ident" id="4222547">WriteByte</span><span class="op" id="4222556">(</span><span class="num" id="4222557">0</span><span class="op" id="4222558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4222562">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222565">case</span>&nbsp;<span class="ident" id="4222570">reflect</span><span class="op" id="4222577">.</span><span class="ident" id="4222578">Int</span><span class="op" id="4222581">,</span>&nbsp;<span class="ident" id="4222583">reflect</span><span class="op" id="4222590">.</span><span class="ident" id="4222591">Int8</span><span class="op" id="4222595">,</span>&nbsp;<span class="ident" id="4222597">reflect</span><span class="op" id="4222604">.</span><span class="ident" id="4222605">Int16</span><span class="op" id="4222610">,</span>&nbsp;<span class="ident" id="4222612">reflect</span><span class="op" id="4222619">.</span><span class="ident" id="4222620">Int32</span><span class="op" id="4222625">,</span>&nbsp;<span class="ident" id="4222627">reflect</span><span class="op" id="4222634">.</span><span class="ident" id="4222635">Int64</span><span class="op" id="4222640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222644">return</span>&nbsp;<span class="ident" id="4222651">marshalInt64</span><span class="op" id="4222663">(</span><span class="ident" id="4222664">out</span><span class="op" id="4222667">,</span>&nbsp;<span class="ident" id="4222669">int64</span><span class="op" id="4222674">(</span><span class="ident" id="4222675">v</span><span class="op" id="4222676">.</span><span class="ident" id="4222677">Int</span><span class="op" id="4222680">(</span><span class="op" id="4222681">)</span><span class="op" id="4222682">)</span><span class="op" id="4222683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222686">case</span>&nbsp;<span class="ident" id="4222691">reflect</span><span class="op" id="4222698">.</span><span class="ident" id="4222699">Struct</span><span class="op" id="4222705">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4222709">t</span>&nbsp;<span class="op" id="4222711">:=</span>&nbsp;<span class="ident" id="4222714">v</span><span class="op" id="4222715">.</span><span class="ident" id="4222716">Type</span><span class="op" id="4222720">(</span><span class="op" id="4222721">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4222726">startingField</span>&nbsp;<span class="op" id="4222740">:=</span>&nbsp;<span class="num" id="4222743">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4222748">//&nbsp;If&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;the&nbsp;structure&nbsp;is&nbsp;a&nbsp;non-empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4222806">//&nbsp;RawContents,&nbsp;then&nbsp;we&nbsp;don&#39;t&nbsp;bother&nbsp;serializing&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222867">if</span>&nbsp;<span class="ident" id="4222870">t</span><span class="op" id="4222871">.</span><span class="ident" id="4222872">NumField</span><span class="op" id="4222880">(</span><span class="op" id="4222881">)</span>&nbsp;<span class="op" id="4222883">&gt;</span>&nbsp;<span class="num" id="4222885">0</span>&nbsp;<span class="op" id="4222887">&amp;&amp;</span>&nbsp;<span class="ident" id="4222890">t</span><span class="op" id="4222891">.</span><span class="ident" id="4222892">Field</span><span class="op" id="4222897">(</span><span class="num" id="4222898">0</span><span class="op" id="4222899">)</span><span class="op" id="4222900">.</span><span class="ident" id="4222901">Type</span>&nbsp;<span class="op" id="4222906">==</span>&nbsp;<span class="ident" id="4222909">rawContentsType</span>&nbsp;<span class="op" id="4222925">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4222930">s</span>&nbsp;<span class="op" id="4222932">:=</span>&nbsp;<span class="ident" id="4222935">v</span><span class="op" id="4222936">.</span><span class="ident" id="4222937">Field</span><span class="op" id="4222942">(</span><span class="num" id="4222943">0</span><span class="op" id="4222944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4222949">if</span>&nbsp;<span class="ident" id="4222952">s</span><span class="op" id="4222953">.</span><span class="ident" id="4222954">Len</span><span class="op" id="4222957">(</span><span class="op" id="4222958">)</span>&nbsp;<span class="op" id="4222960">&gt;</span>&nbsp;<span class="num" id="4222962">0</span>&nbsp;<span class="op" id="4222964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4222970">bytes</span>&nbsp;<span class="op" id="4222976">:=</span>&nbsp;<span class="builtinfunc" id="4222979">make</span><span class="op" id="4222983">(</span><span class="op" id="4222984">[</span><span class="op" id="4222985">]</span><span class="builtintype" id="4222986">byte</span><span class="op" id="4222990">,</span>&nbsp;<span class="ident" id="4222992">s</span><span class="op" id="4222993">.</span><span class="ident" id="4222994">Len</span><span class="op" id="4222997">(</span><span class="op" id="4222998">)</span><span class="op" id="4222999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223005">for</span>&nbsp;<span class="ident" id="4223009">i</span>&nbsp;<span class="op" id="4223011">:=</span>&nbsp;<span class="num" id="4223014">0</span><span class="op" id="4223015">;</span>&nbsp;<span class="ident" id="4223017">i</span>&nbsp;<span class="op" id="4223019">&lt;</span>&nbsp;<span class="ident" id="4223021">s</span><span class="op" id="4223022">.</span><span class="ident" id="4223023">Len</span><span class="op" id="4223026">(</span><span class="op" id="4223027">)</span><span class="op" id="4223028">;</span>&nbsp;<span class="ident" id="4223030">i</span><span class="op" id="4223031">++</span>&nbsp;<span class="op" id="4223034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223041">bytes</span><span class="op" id="4223046">[</span><span class="ident" id="4223047">i</span><span class="op" id="4223048">]</span>&nbsp;<span class="op" id="4223050">=</span>&nbsp;<span class="builtintype" id="4223052">uint8</span><span class="op" id="4223057">(</span><span class="ident" id="4223058">s</span><span class="op" id="4223059">.</span><span class="ident" id="4223060">Index</span><span class="op" id="4223065">(</span><span class="ident" id="4223066">i</span><span class="op" id="4223067">)</span><span class="op" id="4223068">.</span><span class="ident" id="4223069">Uint</span><span class="op" id="4223073">(</span><span class="op" id="4223074">)</span><span class="op" id="4223075">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4223081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4223087">/*&nbsp;The&nbsp;RawContents&nbsp;will&nbsp;contain&nbsp;the&nbsp;tag&nbsp;and<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;length&nbsp;fields&nbsp;but&nbsp;we&#39;ll&nbsp;also&nbsp;be&nbsp;writing<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;those&nbsp;ourselves,&nbsp;so&nbsp;we&nbsp;strip&nbsp;them&nbsp;out&nbsp;of<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;bytes&nbsp;*/</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223246">_</span><span class="op" id="4223247">,</span>&nbsp;<span class="ident" id="4223249">err</span>&nbsp;<span class="op" id="4223253">=</span>&nbsp;<span class="ident" id="4223255">out</span><span class="op" id="4223258">.</span><span class="ident" id="4223259">Write</span><span class="op" id="4223264">(</span><span class="ident" id="4223265">stripTagAndLength</span><span class="op" id="4223282">(</span><span class="ident" id="4223283">bytes</span><span class="op" id="4223288">)</span><span class="op" id="4223289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223295">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4223305">}</span>&nbsp;<span class="keyword" id="4223307">else</span>&nbsp;<span class="op" id="4223312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223318">startingField</span>&nbsp;<span class="op" id="4223332">=</span>&nbsp;<span class="num" id="4223334">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4223339">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4223343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223348">for</span>&nbsp;<span class="ident" id="4223352">i</span>&nbsp;<span class="op" id="4223354">:=</span>&nbsp;<span class="ident" id="4223357">startingField</span><span class="op" id="4223370">;</span>&nbsp;<span class="ident" id="4223372">i</span>&nbsp;<span class="op" id="4223374">&lt;</span>&nbsp;<span class="ident" id="4223376">t</span><span class="op" id="4223377">.</span><span class="ident" id="4223378">NumField</span><span class="op" id="4223386">(</span><span class="op" id="4223387">)</span><span class="op" id="4223388">;</span>&nbsp;<span class="ident" id="4223390">i</span><span class="op" id="4223391">++</span>&nbsp;<span class="op" id="4223394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223399">var</span>&nbsp;<span class="ident" id="4223403">pre</span>&nbsp;<span class="op" id="4223407">*</span><span class="ident" id="4223408">forkableWriter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223426">pre</span><span class="op" id="4223429">,</span>&nbsp;<span class="ident" id="4223431">out</span>&nbsp;<span class="op" id="4223435">=</span>&nbsp;<span class="ident" id="4223437">out</span><span class="op" id="4223440">.</span><span class="ident" id="4223441">fork</span><span class="op" id="4223445">(</span><span class="op" id="4223446">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223451">err</span>&nbsp;<span class="op" id="4223455">=</span>&nbsp;<span class="ident" id="4223457">marshalField</span><span class="op" id="4223469">(</span><span class="ident" id="4223470">pre</span><span class="op" id="4223473">,</span>&nbsp;<span class="ident" id="4223475">v</span><span class="op" id="4223476">.</span><span class="ident" id="4223477">Field</span><span class="op" id="4223482">(</span><span class="ident" id="4223483">i</span><span class="op" id="4223484">)</span><span class="op" id="4223485">,</span>&nbsp;<span class="ident" id="4223487">parseFieldParameters</span><span class="op" id="4223507">(</span><span class="ident" id="4223508">t</span><span class="op" id="4223509">.</span><span class="ident" id="4223510">Field</span><span class="op" id="4223515">(</span><span class="ident" id="4223516">i</span><span class="op" id="4223517">)</span><span class="op" id="4223518">.</span><span class="ident" id="4223519">Tag</span><span class="op" id="4223522">.</span><span class="ident" id="4223523">Get</span><span class="op" id="4223526">(</span><span class="string" id="4223527">&#34;asn1&#34;</span><span class="op" id="4223533">)</span><span class="op" id="4223534">)</span><span class="op" id="4223535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223540">if</span>&nbsp;<span class="ident" id="4223543">err</span>&nbsp;<span class="op" id="4223547">!=</span>&nbsp;<span class="ident" id="4223550">nil</span>&nbsp;<span class="op" id="4223554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223560">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4223570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4223574">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223578">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223586">case</span>&nbsp;<span class="ident" id="4223591">reflect</span><span class="op" id="4223598">.</span><span class="ident" id="4223599">Slice</span><span class="op" id="4223604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223608">sliceType</span>&nbsp;<span class="op" id="4223618">:=</span>&nbsp;<span class="ident" id="4223621">v</span><span class="op" id="4223622">.</span><span class="ident" id="4223623">Type</span><span class="op" id="4223627">(</span><span class="op" id="4223628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223632">if</span>&nbsp;<span class="ident" id="4223635">sliceType</span><span class="op" id="4223644">.</span><span class="ident" id="4223645">Elem</span><span class="op" id="4223649">(</span><span class="op" id="4223650">)</span><span class="op" id="4223651">.</span><span class="ident" id="4223652">Kind</span><span class="op" id="4223656">(</span><span class="op" id="4223657">)</span>&nbsp;<span class="op" id="4223659">==</span>&nbsp;<span class="ident" id="4223662">reflect</span><span class="op" id="4223669">.</span><span class="ident" id="4223670">Uint8</span>&nbsp;<span class="op" id="4223676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223681">bytes</span>&nbsp;<span class="op" id="4223687">:=</span>&nbsp;<span class="builtinfunc" id="4223690">make</span><span class="op" id="4223694">(</span><span class="op" id="4223695">[</span><span class="op" id="4223696">]</span><span class="builtintype" id="4223697">byte</span><span class="op" id="4223701">,</span>&nbsp;<span class="ident" id="4223703">v</span><span class="op" id="4223704">.</span><span class="ident" id="4223705">Len</span><span class="op" id="4223708">(</span><span class="op" id="4223709">)</span><span class="op" id="4223710">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223715">for</span>&nbsp;<span class="ident" id="4223719">i</span>&nbsp;<span class="op" id="4223721">:=</span>&nbsp;<span class="num" id="4223724">0</span><span class="op" id="4223725">;</span>&nbsp;<span class="ident" id="4223727">i</span>&nbsp;<span class="op" id="4223729">&lt;</span>&nbsp;<span class="ident" id="4223731">v</span><span class="op" id="4223732">.</span><span class="ident" id="4223733">Len</span><span class="op" id="4223736">(</span><span class="op" id="4223737">)</span><span class="op" id="4223738">;</span>&nbsp;<span class="ident" id="4223740">i</span><span class="op" id="4223741">++</span>&nbsp;<span class="op" id="4223744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223750">bytes</span><span class="op" id="4223755">[</span><span class="ident" id="4223756">i</span><span class="op" id="4223757">]</span>&nbsp;<span class="op" id="4223759">=</span>&nbsp;<span class="builtintype" id="4223761">uint8</span><span class="op" id="4223766">(</span><span class="ident" id="4223767">v</span><span class="op" id="4223768">.</span><span class="ident" id="4223769">Index</span><span class="op" id="4223774">(</span><span class="ident" id="4223775">i</span><span class="op" id="4223776">)</span><span class="op" id="4223777">.</span><span class="ident" id="4223778">Uint</span><span class="op" id="4223782">(</span><span class="op" id="4223783">)</span><span class="op" id="4223784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4223789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223794">_</span><span class="op" id="4223795">,</span>&nbsp;<span class="ident" id="4223797">err</span>&nbsp;<span class="op" id="4223801">=</span>&nbsp;<span class="ident" id="4223803">out</span><span class="op" id="4223806">.</span><span class="ident" id="4223807">Write</span><span class="op" id="4223812">(</span><span class="ident" id="4223813">bytes</span><span class="op" id="4223818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223823">return</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4223832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223837">var</span>&nbsp;<span class="ident" id="4223841">fp</span>&nbsp;<span class="ident" id="4223844">fieldParameters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223862">for</span>&nbsp;<span class="ident" id="4223866">i</span>&nbsp;<span class="op" id="4223868">:=</span>&nbsp;<span class="num" id="4223871">0</span><span class="op" id="4223872">;</span>&nbsp;<span class="ident" id="4223874">i</span>&nbsp;<span class="op" id="4223876">&lt;</span>&nbsp;<span class="ident" id="4223878">v</span><span class="op" id="4223879">.</span><span class="ident" id="4223880">Len</span><span class="op" id="4223883">(</span><span class="op" id="4223884">)</span><span class="op" id="4223885">;</span>&nbsp;<span class="ident" id="4223887">i</span><span class="op" id="4223888">++</span>&nbsp;<span class="op" id="4223891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223896">var</span>&nbsp;<span class="ident" id="4223900">pre</span>&nbsp;<span class="op" id="4223904">*</span><span class="ident" id="4223905">forkableWriter</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223923">pre</span><span class="op" id="4223926">,</span>&nbsp;<span class="ident" id="4223928">out</span>&nbsp;<span class="op" id="4223932">=</span>&nbsp;<span class="ident" id="4223934">out</span><span class="op" id="4223937">.</span><span class="ident" id="4223938">fork</span><span class="op" id="4223942">(</span><span class="op" id="4223943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4223948">err</span>&nbsp;<span class="op" id="4223952">=</span>&nbsp;<span class="ident" id="4223954">marshalField</span><span class="op" id="4223966">(</span><span class="ident" id="4223967">pre</span><span class="op" id="4223970">,</span>&nbsp;<span class="ident" id="4223972">v</span><span class="op" id="4223973">.</span><span class="ident" id="4223974">Index</span><span class="op" id="4223979">(</span><span class="ident" id="4223980">i</span><span class="op" id="4223981">)</span><span class="op" id="4223982">,</span>&nbsp;<span class="ident" id="4223984">fp</span><span class="op" id="4223986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4223991">if</span>&nbsp;<span class="ident" id="4223994">err</span>&nbsp;<span class="op" id="4223998">!=</span>&nbsp;<span class="ident" id="4224001">nil</span>&nbsp;<span class="op" id="4224005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224011">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4224021">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4224025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224029">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224037">case</span>&nbsp;<span class="ident" id="4224042">reflect</span><span class="op" id="4224049">.</span><span class="ident" id="4224050">String</span><span class="op" id="4224056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224060">switch</span>&nbsp;<span class="ident" id="4224067">params</span><span class="op" id="4224073">.</span><span class="ident" id="4224074">stringType</span>&nbsp;<span class="op" id="4224085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224089">case</span>&nbsp;<span class="ident" id="4224094">tagIA5String</span><span class="op" id="4224106">:</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224111">return</span>&nbsp;<span class="ident" id="4224118">marshalIA5String</span><span class="op" id="4224134">(</span><span class="ident" id="4224135">out</span><span class="op" id="4224138">,</span>&nbsp;<span class="ident" id="4224140">v</span><span class="op" id="4224141">.</span><span class="ident" id="4224142">String</span><span class="op" id="4224148">(</span><span class="op" id="4224149">)</span><span class="op" id="4224150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224154">case</span>&nbsp;<span class="ident" id="4224159">tagPrintableString</span><span class="op" id="4224177">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224182">return</span>&nbsp;<span class="ident" id="4224189">marshalPrintableString</span><span class="op" id="4224211">(</span><span class="ident" id="4224212">out</span><span class="op" id="4224215">,</span>&nbsp;<span class="ident" id="4224217">v</span><span class="op" id="4224218">.</span><span class="ident" id="4224219">String</span><span class="op" id="4224225">(</span><span class="op" id="4224226">)</span><span class="op" id="4224227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224231">default</span><span class="op" id="4224238">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224243">return</span>&nbsp;<span class="ident" id="4224250">marshalUTF8String</span><span class="op" id="4224267">(</span><span class="ident" id="4224268">out</span><span class="op" id="4224271">,</span>&nbsp;<span class="ident" id="4224273">v</span><span class="op" id="4224274">.</span><span class="ident" id="4224275">String</span><span class="op" id="4224281">(</span><span class="op" id="4224282">)</span><span class="op" id="4224283">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4224287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4224290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224294">return</span>&nbsp;<span class="ident" id="4224301">StructuralError</span><span class="op" id="4224316">{</span><span class="string" id="4224317">&#34;unknown&nbsp;Go&nbsp;type&#34;</span><span class="op" id="4224334">}</span><br>
<span class="lineno"></span><span class="op" id="4224336">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="keyword" id="4224339">func</span>&nbsp;<span class="ident" id="4224344">marshalField</span><span class="op" id="4224356">(</span><span class="ident" id="4224357">out</span>&nbsp;<span class="op" id="4224361">*</span><span class="ident" id="4224362">forkableWriter</span><span class="op" id="4224376">,</span>&nbsp;<span class="ident" id="4224378">v</span>&nbsp;<span class="ident" id="4224380">reflect</span><span class="op" id="4224387">.</span><span class="ident" id="4224388">Value</span><span class="op" id="4224393">,</span>&nbsp;<span class="ident" id="4224395">params</span>&nbsp;<span class="ident" id="4224402">fieldParameters</span><span class="op" id="4224417">)</span>&nbsp;<span class="op" id="4224419">(</span><span class="ident" id="4224420">err</span>&nbsp;<span class="builtintype" id="4224424">error</span><span class="op" id="4224429">)</span>&nbsp;<span class="op" id="4224431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4224434">//&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;an&nbsp;interface{}&nbsp;then&nbsp;recurse&nbsp;into&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224491">if</span>&nbsp;<span class="ident" id="4224494">v</span><span class="op" id="4224495">.</span><span class="ident" id="4224496">Kind</span><span class="op" id="4224500">(</span><span class="op" id="4224501">)</span>&nbsp;<span class="op" id="4224503">==</span>&nbsp;<span class="ident" id="4224506">reflect</span><span class="op" id="4224513">.</span><span class="ident" id="4224514">Interface</span>&nbsp;<span class="op" id="4224524">&amp;&amp;</span>&nbsp;<span class="ident" id="4224527">v</span><span class="op" id="4224528">.</span><span class="ident" id="4224529">Type</span><span class="op" id="4224533">(</span><span class="op" id="4224534">)</span><span class="op" id="4224535">.</span><span class="ident" id="4224536">NumMethod</span><span class="op" id="4224545">(</span><span class="op" id="4224546">)</span>&nbsp;<span class="op" id="4224548">==</span>&nbsp;<span class="num" id="4224551">0</span>&nbsp;<span class="op" id="4224553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224557">return</span>&nbsp;<span class="ident" id="4224564">marshalField</span><span class="op" id="4224576">(</span><span class="ident" id="4224577">out</span><span class="op" id="4224580">,</span>&nbsp;<span class="ident" id="4224582">v</span><span class="op" id="4224583">.</span><span class="ident" id="4224584">Elem</span><span class="op" id="4224588">(</span><span class="op" id="4224589">)</span><span class="op" id="4224590">,</span>&nbsp;<span class="ident" id="4224592">params</span><span class="op" id="4224598">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4224601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224605">if</span>&nbsp;<span class="ident" id="4224608">v</span><span class="op" id="4224609">.</span><span class="ident" id="4224610">Kind</span><span class="op" id="4224614">(</span><span class="op" id="4224615">)</span>&nbsp;<span class="op" id="4224617">==</span>&nbsp;<span class="ident" id="4224620">reflect</span><span class="op" id="4224627">.</span><span class="ident" id="4224628">Slice</span>&nbsp;<span class="op" id="4224634">&amp;&amp;</span>&nbsp;<span class="ident" id="4224637">v</span><span class="op" id="4224638">.</span><span class="ident" id="4224639">Len</span><span class="op" id="4224642">(</span><span class="op" id="4224643">)</span>&nbsp;<span class="op" id="4224645">==</span>&nbsp;<span class="num" id="4224648">0</span>&nbsp;<span class="op" id="4224650">&amp;&amp;</span>&nbsp;<span class="ident" id="4224653">params</span><span class="op" id="4224659">.</span><span class="ident" id="4224660">omitEmpty</span>&nbsp;<span class="op" id="4224670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224674">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4224682">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224686">if</span>&nbsp;<span class="ident" id="4224689">params</span><span class="op" id="4224695">.</span><span class="ident" id="4224696">optional</span>&nbsp;<span class="op" id="4224705">&amp;&amp;</span>&nbsp;<span class="ident" id="4224708">params</span><span class="op" id="4224714">.</span><span class="ident" id="4224715">defaultValue</span>&nbsp;<span class="op" id="4224728">!=</span>&nbsp;<span class="ident" id="4224731">nil</span>&nbsp;<span class="op" id="4224735">&amp;&amp;</span>&nbsp;<span class="ident" id="4224738">canHaveDefaultValue</span><span class="op" id="4224757">(</span><span class="ident" id="4224758">v</span><span class="op" id="4224759">.</span><span class="ident" id="4224760">Kind</span><span class="op" id="4224764">(</span><span class="op" id="4224765">)</span><span class="op" id="4224766">)</span>&nbsp;<span class="op" id="4224768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4224772">defaultValue</span>&nbsp;<span class="op" id="4224785">:=</span>&nbsp;<span class="ident" id="4224788">reflect</span><span class="op" id="4224795">.</span><span class="ident" id="4224796">New</span><span class="op" id="4224799">(</span><span class="ident" id="4224800">v</span><span class="op" id="4224801">.</span><span class="ident" id="4224802">Type</span><span class="op" id="4224806">(</span><span class="op" id="4224807">)</span><span class="op" id="4224808">)</span><span class="op" id="4224809">.</span><span class="ident" id="4224810">Elem</span><span class="op" id="4224814">(</span><span class="op" id="4224815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4224819">defaultValue</span><span class="op" id="4224831">.</span><span class="ident" id="4224832">SetInt</span><span class="op" id="4224838">(</span><span class="op" id="4224839">*</span><span class="ident" id="4224840">params</span><span class="op" id="4224846">.</span><span class="ident" id="4224847">defaultValue</span><span class="op" id="4224859">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224864">if</span>&nbsp;<span class="ident" id="4224867">reflect</span><span class="op" id="4224874">.</span><span class="ident" id="4224875">DeepEqual</span><span class="op" id="4224884">(</span><span class="ident" id="4224885">v</span><span class="op" id="4224886">.</span><span class="ident" id="4224887">Interface</span><span class="op" id="4224896">(</span><span class="op" id="4224897">)</span><span class="op" id="4224898">,</span>&nbsp;<span class="ident" id="4224900">defaultValue</span><span class="op" id="4224912">.</span><span class="ident" id="4224913">Interface</span><span class="op" id="4224922">(</span><span class="op" id="4224923">)</span><span class="op" id="4224924">)</span>&nbsp;<span class="op" id="4224926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4224931">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4224940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4224943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4224947">//&nbsp;If&nbsp;no&nbsp;default&nbsp;value&nbsp;is&nbsp;given&nbsp;then&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;type&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4225016">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;the&nbsp;default&nbsp;value.&nbsp;This&nbsp;isn&#39;t&nbsp;obviously&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4225086">//&nbsp;behaviour,&nbsp;but&nbsp;it&#39;s&nbsp;what&nbsp;Go&nbsp;has&nbsp;traditionally&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225142">if</span>&nbsp;<span class="ident" id="4225145">params</span><span class="op" id="4225151">.</span><span class="ident" id="4225152">optional</span>&nbsp;<span class="op" id="4225161">&amp;&amp;</span>&nbsp;<span class="ident" id="4225164">params</span><span class="op" id="4225170">.</span><span class="ident" id="4225171">defaultValue</span>&nbsp;<span class="op" id="4225184">==</span>&nbsp;<span class="ident" id="4225187">nil</span>&nbsp;<span class="op" id="4225191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225195">if</span>&nbsp;<span class="ident" id="4225198">reflect</span><span class="op" id="4225205">.</span><span class="ident" id="4225206">DeepEqual</span><span class="op" id="4225215">(</span><span class="ident" id="4225216">v</span><span class="op" id="4225217">.</span><span class="ident" id="4225218">Interface</span><span class="op" id="4225227">(</span><span class="op" id="4225228">)</span><span class="op" id="4225229">,</span>&nbsp;<span class="ident" id="4225231">reflect</span><span class="op" id="4225238">.</span><span class="ident" id="4225239">Zero</span><span class="op" id="4225243">(</span><span class="ident" id="4225244">v</span><span class="op" id="4225245">.</span><span class="ident" id="4225246">Type</span><span class="op" id="4225250">(</span><span class="op" id="4225251">)</span><span class="op" id="4225252">)</span><span class="op" id="4225253">.</span><span class="ident" id="4225254">Interface</span><span class="op" id="4225263">(</span><span class="op" id="4225264">)</span><span class="op" id="4225265">)</span>&nbsp;<span class="op" id="4225267">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225272">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4225281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4225284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225288">if</span>&nbsp;<span class="ident" id="4225291">v</span><span class="op" id="4225292">.</span><span class="ident" id="4225293">Type</span><span class="op" id="4225297">(</span><span class="op" id="4225298">)</span>&nbsp;<span class="op" id="4225300">==</span>&nbsp;<span class="ident" id="4225303">rawValueType</span>&nbsp;<span class="op" id="4225316">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4225320">rv</span>&nbsp;<span class="op" id="4225323">:=</span>&nbsp;<span class="ident" id="4225326">v</span><span class="op" id="4225327">.</span><span class="ident" id="4225328">Interface</span><span class="op" id="4225337">(</span><span class="op" id="4225338">)</span><span class="op" id="4225339">.</span><span class="op" id="4225340">(</span><span class="ident" id="4225341">RawValue</span><span class="op" id="4225349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225353">if</span>&nbsp;<span class="builtinfunc" id="4225356">len</span><span class="op" id="4225359">(</span><span class="ident" id="4225360">rv</span><span class="op" id="4225362">.</span><span class="ident" id="4225363">FullBytes</span><span class="op" id="4225372">)</span>&nbsp;<span class="op" id="4225374">!=</span>&nbsp;<span class="num" id="4225377">0</span>&nbsp;<span class="op" id="4225379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4225384">_</span><span class="op" id="4225385">,</span>&nbsp;<span class="ident" id="4225387">err</span>&nbsp;<span class="op" id="4225391">=</span>&nbsp;<span class="ident" id="4225393">out</span><span class="op" id="4225396">.</span><span class="ident" id="4225397">Write</span><span class="op" id="4225402">(</span><span class="ident" id="4225403">rv</span><span class="op" id="4225405">.</span><span class="ident" id="4225406">FullBytes</span><span class="op" id="4225415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4225419">}</span>&nbsp;<span class="keyword" id="4225421">else</span>&nbsp;<span class="op" id="4225426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4225431">err</span>&nbsp;<span class="op" id="4225435">=</span>&nbsp;<span class="ident" id="4225437">marshalTagAndLength</span><span class="op" id="4225456">(</span><span class="ident" id="4225457">out</span><span class="op" id="4225460">,</span>&nbsp;<span class="ident" id="4225462">tagAndLength</span><span class="op" id="4225474">{</span><span class="ident" id="4225475">rv</span><span class="op" id="4225477">.</span><span class="ident" id="4225478">Class</span><span class="op" id="4225483">,</span>&nbsp;<span class="ident" id="4225485">rv</span><span class="op" id="4225487">.</span><span class="ident" id="4225488">Tag</span><span class="op" id="4225491">,</span>&nbsp;<span class="builtinfunc" id="4225493">len</span><span class="op" id="4225496">(</span><span class="ident" id="4225497">rv</span><span class="op" id="4225499">.</span><span class="ident" id="4225500">Bytes</span><span class="op" id="4225505">)</span><span class="op" id="4225506">,</span>&nbsp;<span class="ident" id="4225508">rv</span><span class="op" id="4225510">.</span><span class="ident" id="4225511">IsCompound</span><span class="op" id="4225521">}</span><span class="op" id="4225522">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225527">if</span>&nbsp;<span class="ident" id="4225530">err</span>&nbsp;<span class="op" id="4225534">!=</span>&nbsp;<span class="ident" id="4225537">nil</span>&nbsp;<span class="op" id="4225541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225547">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4225557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4225562">_</span><span class="op" id="4225563">,</span>&nbsp;<span class="ident" id="4225565">err</span>&nbsp;<span class="op" id="4225569">=</span>&nbsp;<span class="ident" id="4225571">out</span><span class="op" id="4225574">.</span><span class="ident" id="4225575">Write</span><span class="op" id="4225580">(</span><span class="ident" id="4225581">rv</span><span class="op" id="4225583">.</span><span class="ident" id="4225584">Bytes</span><span class="op" id="4225589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4225593">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225597">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4225605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4225609">tag</span><span class="op" id="4225612">,</span>&nbsp;<span class="ident" id="4225614">isCompound</span><span class="op" id="4225624">,</span>&nbsp;<span class="ident" id="4225626">ok</span>&nbsp;<span class="op" id="4225629">:=</span>&nbsp;<span class="ident" id="4225632">getUniversalType</span><span class="op" id="4225648">(</span><span class="ident" id="4225649">v</span><span class="op" id="4225650">.</span><span class="ident" id="4225651">Type</span><span class="op" id="4225655">(</span><span class="op" id="4225656">)</span><span class="op" id="4225657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225660">if</span>&nbsp;<span class="op" id="4225663">!</span><span class="ident" id="4225664">ok</span>&nbsp;<span class="op" id="4225667">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4225671">err</span>&nbsp;<span class="op" id="4225675">=</span>&nbsp;<span class="ident" id="4225677">StructuralError</span><span class="op" id="4225692">{</span><span class="ident" id="4225693">fmt</span><span class="op" id="4225696">.</span><span class="ident" id="4225697">Sprintf</span><span class="op" id="4225704">(</span><span class="string" id="4225705">&#34;unknown&nbsp;Go&nbsp;type:&nbsp;%v&#34;</span><span class="op" id="4225726">,</span>&nbsp;<span class="ident" id="4225728">v</span><span class="op" id="4225729">.</span><span class="ident" id="4225730">Type</span><span class="op" id="4225734">(</span><span class="op" id="4225735">)</span><span class="op" id="4225736">)</span><span class="op" id="4225737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225741">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4225749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4225752">class</span>&nbsp;<span class="op" id="4225758">:=</span>&nbsp;<span class="ident" id="4225761">classUniversal</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225778">if</span>&nbsp;<span class="ident" id="4225781">params</span><span class="op" id="4225787">.</span><span class="ident" id="4225788">stringType</span>&nbsp;<span class="op" id="4225799">!=</span>&nbsp;<span class="num" id="4225802">0</span>&nbsp;<span class="op" id="4225804">&amp;&amp;</span>&nbsp;<span class="ident" id="4225807">tag</span>&nbsp;<span class="op" id="4225811">!=</span>&nbsp;<span class="ident" id="4225814">tagPrintableString</span>&nbsp;<span class="op" id="4225833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225837">return</span>&nbsp;<span class="ident" id="4225844">StructuralError</span><span class="op" id="4225859">{</span><span class="string" id="4225860">&#34;explicit&nbsp;string&nbsp;type&nbsp;given&nbsp;to&nbsp;non-string&nbsp;member&#34;</span><span class="op" id="4225909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4225912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225916">switch</span>&nbsp;<span class="ident" id="4225923">tag</span>&nbsp;<span class="op" id="4225927">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225930">case</span>&nbsp;<span class="ident" id="4225935">tagPrintableString</span><span class="op" id="4225953">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4225957">if</span>&nbsp;<span class="ident" id="4225960">params</span><span class="op" id="4225966">.</span><span class="ident" id="4225967">stringType</span>&nbsp;<span class="op" id="4225978">==</span>&nbsp;<span class="num" id="4225981">0</span>&nbsp;<span class="op" id="4225983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4225988">//&nbsp;This&nbsp;is&nbsp;a&nbsp;string&nbsp;without&nbsp;an&nbsp;explicit&nbsp;string&nbsp;type.&nbsp;We&#39;ll&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4226054">//&nbsp;a&nbsp;PrintableString&nbsp;if&nbsp;the&nbsp;character&nbsp;set&nbsp;in&nbsp;the&nbsp;string&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4226116">//&nbsp;sufficiently&nbsp;limited,&nbsp;otherwise&nbsp;we&#39;ll&nbsp;use&nbsp;a&nbsp;UTF8String.</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226178">for</span>&nbsp;<span class="ident" id="4226182">_</span><span class="op" id="4226183">,</span>&nbsp;<span class="ident" id="4226185">r</span>&nbsp;<span class="op" id="4226187">:=</span>&nbsp;<span class="keyword" id="4226190">range</span>&nbsp;<span class="ident" id="4226196">v</span><span class="op" id="4226197">.</span><span class="ident" id="4226198">String</span><span class="op" id="4226204">(</span><span class="op" id="4226205">)</span>&nbsp;<span class="op" id="4226207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226213">if</span>&nbsp;<span class="ident" id="4226216">r</span>&nbsp;<span class="op" id="4226218">&gt;=</span>&nbsp;<span class="ident" id="4226221">utf8</span><span class="op" id="4226225">.</span><span class="ident" id="4226226">RuneSelf</span>&nbsp;<span class="op" id="4226235">||</span>&nbsp;<span class="op" id="4226238">!</span><span class="ident" id="4226239">isPrintable</span><span class="op" id="4226250">(</span><span class="builtintype" id="4226251">byte</span><span class="op" id="4226255">(</span><span class="ident" id="4226256">r</span><span class="op" id="4226257">)</span><span class="op" id="4226258">)</span>&nbsp;<span class="op" id="4226260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226267">if</span>&nbsp;<span class="op" id="4226270">!</span><span class="ident" id="4226271">utf8</span><span class="op" id="4226275">.</span><span class="ident" id="4226276">ValidString</span><span class="op" id="4226287">(</span><span class="ident" id="4226288">v</span><span class="op" id="4226289">.</span><span class="ident" id="4226290">String</span><span class="op" id="4226296">(</span><span class="op" id="4226297">)</span><span class="op" id="4226298">)</span>&nbsp;<span class="op" id="4226300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226308">return</span>&nbsp;<span class="ident" id="4226315">errors</span><span class="op" id="4226321">.</span><span class="ident" id="4226322">New</span><span class="op" id="4226325">(</span><span class="string" id="4226326">&#34;asn1:&nbsp;string&nbsp;not&nbsp;valid&nbsp;UTF-8&#34;</span><span class="op" id="4226356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226363">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226370">tag</span>&nbsp;<span class="op" id="4226374">=</span>&nbsp;<span class="ident" id="4226376">tagUTF8String</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226395">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226414">}</span>&nbsp;<span class="keyword" id="4226416">else</span>&nbsp;<span class="op" id="4226421">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226426">tag</span>&nbsp;<span class="op" id="4226430">=</span>&nbsp;<span class="ident" id="4226432">params</span><span class="op" id="4226438">.</span><span class="ident" id="4226439">stringType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226455">case</span>&nbsp;<span class="ident" id="4226460">tagUTCTime</span><span class="op" id="4226470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226474">if</span>&nbsp;<span class="ident" id="4226477">outsideUTCRange</span><span class="op" id="4226492">(</span><span class="ident" id="4226493">v</span><span class="op" id="4226494">.</span><span class="ident" id="4226495">Interface</span><span class="op" id="4226504">(</span><span class="op" id="4226505">)</span><span class="op" id="4226506">.</span><span class="op" id="4226507">(</span><span class="ident" id="4226508">time</span><span class="op" id="4226512">.</span><span class="ident" id="4226513">Time</span><span class="op" id="4226517">)</span><span class="op" id="4226518">)</span>&nbsp;<span class="op" id="4226520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226525">tag</span>&nbsp;<span class="op" id="4226529">=</span>&nbsp;<span class="ident" id="4226531">tagGeneralizedTime</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226559">if</span>&nbsp;<span class="ident" id="4226562">params</span><span class="op" id="4226568">.</span><span class="ident" id="4226569">set</span>&nbsp;<span class="op" id="4226573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226577">if</span>&nbsp;<span class="ident" id="4226580">tag</span>&nbsp;<span class="op" id="4226584">!=</span>&nbsp;<span class="ident" id="4226587">tagSequence</span>&nbsp;<span class="op" id="4226599">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226604">return</span>&nbsp;<span class="ident" id="4226611">StructuralError</span><span class="op" id="4226626">{</span><span class="string" id="4226627">&#34;non&nbsp;sequence&nbsp;tagged&nbsp;as&nbsp;set&#34;</span><span class="op" id="4226655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226663">tag</span>&nbsp;<span class="op" id="4226667">=</span>&nbsp;<span class="ident" id="4226669">tagSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226681">tags</span><span class="op" id="4226685">,</span>&nbsp;<span class="ident" id="4226687">body</span>&nbsp;<span class="op" id="4226692">:=</span>&nbsp;<span class="ident" id="4226695">out</span><span class="op" id="4226698">.</span><span class="ident" id="4226699">fork</span><span class="op" id="4226703">(</span><span class="op" id="4226704">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226708">err</span>&nbsp;<span class="op" id="4226712">=</span>&nbsp;<span class="ident" id="4226714">marshalBody</span><span class="op" id="4226725">(</span><span class="ident" id="4226726">body</span><span class="op" id="4226730">,</span>&nbsp;<span class="ident" id="4226732">v</span><span class="op" id="4226733">,</span>&nbsp;<span class="ident" id="4226735">params</span><span class="op" id="4226741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226744">if</span>&nbsp;<span class="ident" id="4226747">err</span>&nbsp;<span class="op" id="4226751">!=</span>&nbsp;<span class="ident" id="4226754">nil</span>&nbsp;<span class="op" id="4226758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226762">return</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226774">bodyLen</span>&nbsp;<span class="op" id="4226782">:=</span>&nbsp;<span class="ident" id="4226785">body</span><span class="op" id="4226789">.</span><span class="ident" id="4226790">Len</span><span class="op" id="4226793">(</span><span class="op" id="4226794">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226798">var</span>&nbsp;<span class="ident" id="4226802">explicitTag</span>&nbsp;<span class="op" id="4226814">*</span><span class="ident" id="4226815">forkableWriter</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226831">if</span>&nbsp;<span class="ident" id="4226834">params</span><span class="op" id="4226840">.</span><span class="ident" id="4226841">explicit</span>&nbsp;<span class="op" id="4226850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226854">explicitTag</span><span class="op" id="4226865">,</span>&nbsp;<span class="ident" id="4226867">tags</span>&nbsp;<span class="op" id="4226872">=</span>&nbsp;<span class="ident" id="4226874">tags</span><span class="op" id="4226878">.</span><span class="ident" id="4226879">fork</span><span class="op" id="4226883">(</span><span class="op" id="4226884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4226887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4226891">if</span>&nbsp;<span class="op" id="4226894">!</span><span class="ident" id="4226895">params</span><span class="op" id="4226901">.</span><span class="ident" id="4226902">explicit</span>&nbsp;<span class="op" id="4226911">&amp;&amp;</span>&nbsp;<span class="ident" id="4226914">params</span><span class="op" id="4226920">.</span><span class="ident" id="4226921">tag</span>&nbsp;<span class="op" id="4226925">!=</span>&nbsp;<span class="ident" id="4226928">nil</span>&nbsp;<span class="op" id="4226932">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4226936">//&nbsp;implicit&nbsp;tag.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226955">tag</span>&nbsp;<span class="op" id="4226959">=</span>&nbsp;<span class="op" id="4226961">*</span><span class="ident" id="4226962">params</span><span class="op" id="4226968">.</span><span class="ident" id="4226969">tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4226975">class</span>&nbsp;<span class="op" id="4226981">=</span>&nbsp;<span class="ident" id="4226983">classContextSpecific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4227005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227009">err</span>&nbsp;<span class="op" id="4227013">=</span>&nbsp;<span class="ident" id="4227015">marshalTagAndLength</span><span class="op" id="4227034">(</span><span class="ident" id="4227035">tags</span><span class="op" id="4227039">,</span>&nbsp;<span class="ident" id="4227041">tagAndLength</span><span class="op" id="4227053">{</span><span class="ident" id="4227054">class</span><span class="op" id="4227059">,</span>&nbsp;<span class="ident" id="4227061">tag</span><span class="op" id="4227064">,</span>&nbsp;<span class="ident" id="4227066">bodyLen</span><span class="op" id="4227073">,</span>&nbsp;<span class="ident" id="4227075">isCompound</span><span class="op" id="4227085">}</span><span class="op" id="4227086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4227089">if</span>&nbsp;<span class="ident" id="4227092">err</span>&nbsp;<span class="op" id="4227096">!=</span>&nbsp;<span class="ident" id="4227099">nil</span>&nbsp;<span class="op" id="4227103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4227107">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4227115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4227119">if</span>&nbsp;<span class="ident" id="4227122">params</span><span class="op" id="4227128">.</span><span class="ident" id="4227129">explicit</span>&nbsp;<span class="op" id="4227138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227142">err</span>&nbsp;<span class="op" id="4227146">=</span>&nbsp;<span class="ident" id="4227148">marshalTagAndLength</span><span class="op" id="4227167">(</span><span class="ident" id="4227168">explicitTag</span><span class="op" id="4227179">,</span>&nbsp;<span class="ident" id="4227181">tagAndLength</span><span class="op" id="4227193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227198">class</span><span class="op" id="4227203">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227210">classContextSpecific</span><span class="op" id="4227230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227235">tag</span><span class="op" id="4227238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4227247">*</span><span class="ident" id="4227248">params</span><span class="op" id="4227254">.</span><span class="ident" id="4227255">tag</span><span class="op" id="4227258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227263">length</span><span class="op" id="4227269">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227275">bodyLen</span>&nbsp;<span class="op" id="4227283">+</span>&nbsp;<span class="ident" id="4227285">tags</span><span class="op" id="4227289">.</span><span class="ident" id="4227290">Len</span><span class="op" id="4227293">(</span><span class="op" id="4227294">)</span><span class="op" id="4227295">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227300">isCompound</span><span class="op" id="4227310">:</span>&nbsp;<span class="builtintype" id="4227312">true</span><span class="op" id="4227316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4227320">}</span><span class="op" id="4227321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4227324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4227328">return</span>&nbsp;<span class="ident" id="4227335">nil</span><br>
<span class="lineno">625</span><span class="op" id="4227339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4227342">//&nbsp;Marshal&nbsp;returns&nbsp;the&nbsp;ASN.1&nbsp;encoding&nbsp;of&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="4227388">//</span><br>
<span class="lineno"></span><span class="comment" id="4227391">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;struct&nbsp;tags&nbsp;recognised&nbsp;by&nbsp;Unmarshal,&nbsp;the&nbsp;following&nbsp;can&nbsp;be</span><br>
<span class="lineno">630</span><span class="comment" id="4227471">//&nbsp;used:</span><br>
<span class="lineno"></span><span class="comment" id="4227480">//</span><br>
<span class="lineno"></span><span class="comment" id="4227483">//&nbsp;&nbsp;&nbsp;&nbsp;ia5:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;IA5&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="4227545">//&nbsp;&nbsp;&nbsp;&nbsp;omitempty:&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;empty&nbsp;slices&nbsp;to&nbsp;be&nbsp;skipped</span><br>
<span class="lineno"></span><span class="comment" id="4227593">//&nbsp;&nbsp;&nbsp;&nbsp;printable:&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;PrintableString&nbsp;strings.</span><br>
<span class="lineno">635</span><span class="comment" id="4227673">//&nbsp;&nbsp;&nbsp;&nbsp;utf8:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;UTF8&nbsp;strings</span><br>
<span class="lineno"></span><span class="keyword" id="4227737">func</span>&nbsp;<span class="ident" id="4227742">Marshal</span><span class="op" id="4227749">(</span><span class="ident" id="4227750">val</span>&nbsp;<span class="keyword" id="4227754">interface</span><span class="op" id="4227763">{</span><span class="op" id="4227764">}</span><span class="op" id="4227765">)</span>&nbsp;<span class="op" id="4227767">(</span><span class="op" id="4227768">[</span><span class="op" id="4227769">]</span><span class="builtintype" id="4227770">byte</span><span class="op" id="4227774">,</span>&nbsp;<span class="builtintype" id="4227776">error</span><span class="op" id="4227781">)</span>&nbsp;<span class="op" id="4227783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4227786">var</span>&nbsp;<span class="ident" id="4227790">out</span>&nbsp;<span class="ident" id="4227794">bytes</span><span class="op" id="4227799">.</span><span class="ident" id="4227800">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227808">v</span>&nbsp;<span class="op" id="4227810">:=</span>&nbsp;<span class="ident" id="4227813">reflect</span><span class="op" id="4227820">.</span><span class="ident" id="4227821">ValueOf</span><span class="op" id="4227828">(</span><span class="ident" id="4227829">val</span><span class="op" id="4227832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227835">f</span>&nbsp;<span class="op" id="4227837">:=</span>&nbsp;<span class="ident" id="4227840">newForkableWriter</span><span class="op" id="4227857">(</span><span class="op" id="4227858">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227861">err</span>&nbsp;<span class="op" id="4227865">:=</span>&nbsp;<span class="ident" id="4227868">marshalField</span><span class="op" id="4227880">(</span><span class="ident" id="4227881">f</span><span class="op" id="4227882">,</span>&nbsp;<span class="ident" id="4227884">v</span><span class="op" id="4227885">,</span>&nbsp;<span class="ident" id="4227887">fieldParameters</span><span class="op" id="4227902">{</span><span class="op" id="4227903">}</span><span class="op" id="4227904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4227907">if</span>&nbsp;<span class="ident" id="4227910">err</span>&nbsp;<span class="op" id="4227914">!=</span>&nbsp;<span class="ident" id="4227917">nil</span>&nbsp;<span class="op" id="4227921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4227925">return</span>&nbsp;<span class="ident" id="4227932">nil</span><span class="op" id="4227935">,</span>&nbsp;<span class="ident" id="4227937">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4227942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4227945">_</span><span class="op" id="4227946">,</span>&nbsp;<span class="ident" id="4227948">err</span>&nbsp;<span class="op" id="4227952">=</span>&nbsp;<span class="ident" id="4227954">f</span><span class="op" id="4227955">.</span><span class="ident" id="4227956">writeTo</span><span class="op" id="4227963">(</span><span class="op" id="4227964">&amp;</span><span class="ident" id="4227965">out</span><span class="op" id="4227968">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4227971">return</span>&nbsp;<span class="ident" id="4227978">out</span><span class="op" id="4227981">.</span><span class="ident" id="4227982">Bytes</span><span class="op" id="4227987">(</span><span class="op" id="4227988">)</span><span class="op" id="4227989">,</span>&nbsp;<span class="ident" id="4227991">nil</span><br>
<span class="lineno"></span><span class="op" id="4227995">}</span>
</div>
</body>
</html>
