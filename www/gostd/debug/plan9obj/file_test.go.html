<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/plan9obj</h2>
<ul>
<li><a href="/gostd/debug/plan9obj/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/plan9obj/file_test.go.html" class="current">file_test.go</a></li>
<li><a href="/gostd/debug/plan9obj/plan9obj.go.html">plan9obj.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8458152">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8458208">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8458262">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8458313">package</span>&nbsp;<span class="ident" id="8458321">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8458331">import</span>&nbsp;<span class="op" id="8458338">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8458341">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8458352">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8458362">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8458365">type</span>&nbsp;<span class="ident" id="8458370">fileTest</span>&nbsp;<span class="keyword" id="8458379">struct</span>&nbsp;<span class="op" id="8458386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8458389">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8458398">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8458406">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8458415">FileHeader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8458427">sections</span>&nbsp;<span class="op" id="8458436">[</span><span class="op" id="8458437">]</span><span class="op" id="8458438">*</span><span class="ident" id="8458439">SectionHeader</span><br>
<span class="lineno"></span><span class="op" id="8458453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8458456">var</span>&nbsp;<span class="ident" id="8458460">fileTests</span>&nbsp;<span class="op" id="8458470">=</span>&nbsp;<span class="op" id="8458472">[</span><span class="op" id="8458473">]</span><span class="ident" id="8458474">fileTest</span><span class="op" id="8458482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458485">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8458489">&#34;testdata/386-plan9-exec&#34;</span><span class="op" id="8458514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8458518">FileHeader</span><span class="op" id="8458528">{</span><span class="ident" id="8458529">Magic386</span><span class="op" id="8458537">,</span>&nbsp;<span class="num" id="8458539">0x324</span><span class="op" id="8458544">,</span>&nbsp;<span class="num" id="8458546">0x14</span><span class="op" id="8458550">,</span>&nbsp;<span class="num" id="8458552">4</span><span class="op" id="8458553">,</span>&nbsp;<span class="num" id="8458555">0x1000</span><span class="op" id="8458561">,</span>&nbsp;<span class="num" id="8458563">32</span><span class="op" id="8458565">}</span><span class="op" id="8458566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458570">[</span><span class="op" id="8458571">]</span><span class="op" id="8458572">*</span><span class="ident" id="8458573">SectionHeader</span><span class="op" id="8458586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458591">{</span><span class="string" id="8458592">&#34;text&#34;</span><span class="op" id="8458598">,</span>&nbsp;<span class="num" id="8458600">0x4c5f</span><span class="op" id="8458606">,</span>&nbsp;<span class="num" id="8458608">0x20</span><span class="op" id="8458612">}</span><span class="op" id="8458613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458618">{</span><span class="string" id="8458619">&#34;data&#34;</span><span class="op" id="8458625">,</span>&nbsp;<span class="num" id="8458627">0x94c</span><span class="op" id="8458632">,</span>&nbsp;<span class="num" id="8458634">0x4c7f</span><span class="op" id="8458640">}</span><span class="op" id="8458641">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458646">{</span><span class="string" id="8458647">&#34;syms&#34;</span><span class="op" id="8458653">,</span>&nbsp;<span class="num" id="8458655">0x2c2b</span><span class="op" id="8458661">,</span>&nbsp;<span class="num" id="8458663">0x55cb</span><span class="op" id="8458669">}</span><span class="op" id="8458670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458675">{</span><span class="string" id="8458676">&#34;spsz&#34;</span><span class="op" id="8458682">,</span>&nbsp;<span class="num" id="8458684">0x0</span><span class="op" id="8458687">,</span>&nbsp;<span class="num" id="8458689">0x81f6</span><span class="op" id="8458695">}</span><span class="op" id="8458696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458701">{</span><span class="string" id="8458702">&#34;pcsz&#34;</span><span class="op" id="8458708">,</span>&nbsp;<span class="num" id="8458710">0xf7a</span><span class="op" id="8458715">,</span>&nbsp;<span class="num" id="8458717">0x81f6</span><span class="op" id="8458723">}</span><span class="op" id="8458724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458728">}</span><span class="op" id="8458729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458732">}</span><span class="op" id="8458733">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8458740">&#34;testdata/amd64-plan9-exec&#34;</span><span class="op" id="8458767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8458771">FileHeader</span><span class="op" id="8458781">{</span><span class="ident" id="8458782">MagicAMD64</span><span class="op" id="8458792">,</span>&nbsp;<span class="num" id="8458794">0x618</span><span class="op" id="8458799">,</span>&nbsp;<span class="num" id="8458801">0x13</span><span class="op" id="8458805">,</span>&nbsp;<span class="num" id="8458807">8</span><span class="op" id="8458808">,</span>&nbsp;<span class="num" id="8458810">0x200000</span><span class="op" id="8458818">,</span>&nbsp;<span class="num" id="8458820">40</span><span class="op" id="8458822">}</span><span class="op" id="8458823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458827">[</span><span class="op" id="8458828">]</span><span class="op" id="8458829">*</span><span class="ident" id="8458830">SectionHeader</span><span class="op" id="8458843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458848">{</span><span class="string" id="8458849">&#34;text&#34;</span><span class="op" id="8458855">,</span>&nbsp;<span class="num" id="8458857">0x4213</span><span class="op" id="8458863">,</span>&nbsp;<span class="num" id="8458865">0x28</span><span class="op" id="8458869">}</span><span class="op" id="8458870">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458875">{</span><span class="string" id="8458876">&#34;data&#34;</span><span class="op" id="8458882">,</span>&nbsp;<span class="num" id="8458884">0xa80</span><span class="op" id="8458889">,</span>&nbsp;<span class="num" id="8458891">0x423b</span><span class="op" id="8458897">}</span><span class="op" id="8458898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458903">{</span><span class="string" id="8458904">&#34;syms&#34;</span><span class="op" id="8458910">,</span>&nbsp;<span class="num" id="8458912">0x2c8c</span><span class="op" id="8458918">,</span>&nbsp;<span class="num" id="8458920">0x4cbb</span><span class="op" id="8458926">}</span><span class="op" id="8458927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458932">{</span><span class="string" id="8458933">&#34;spsz&#34;</span><span class="op" id="8458939">,</span>&nbsp;<span class="num" id="8458941">0x0</span><span class="op" id="8458944">,</span>&nbsp;<span class="num" id="8458946">0x7947</span><span class="op" id="8458952">}</span><span class="op" id="8458953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458958">{</span><span class="string" id="8458959">&#34;pcsz&#34;</span><span class="op" id="8458965">,</span>&nbsp;<span class="num" id="8458967">0xca0</span><span class="op" id="8458972">,</span>&nbsp;<span class="num" id="8458974">0x7947</span><span class="op" id="8458980">}</span><span class="op" id="8458981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458985">}</span><span class="op" id="8458986">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8458989">}</span><span class="op" id="8458990">,</span><br>
<span class="lineno"></span><span class="op" id="8458992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8458995">func</span>&nbsp;<span class="ident" id="8459000">TestOpen</span><span class="op" id="8459008">(</span><span class="ident" id="8459009">t</span>&nbsp;<span class="op" id="8459011">*</span><span class="ident" id="8459012">testing</span><span class="op" id="8459019">.</span><span class="ident" id="8459020">T</span><span class="op" id="8459021">)</span>&nbsp;<span class="op" id="8459023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459026">for</span>&nbsp;<span class="ident" id="8459030">i</span>&nbsp;<span class="op" id="8459032">:=</span>&nbsp;<span class="keyword" id="8459035">range</span>&nbsp;<span class="ident" id="8459041">fileTests</span>&nbsp;<span class="op" id="8459051">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459055">tt</span>&nbsp;<span class="op" id="8459058">:=</span>&nbsp;<span class="op" id="8459061">&amp;</span><span class="ident" id="8459062">fileTests</span><span class="op" id="8459071">[</span><span class="ident" id="8459072">i</span><span class="op" id="8459073">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459078">f</span><span class="op" id="8459079">,</span>&nbsp;<span class="ident" id="8459081">err</span>&nbsp;<span class="op" id="8459085">:=</span>&nbsp;<span class="ident" id="8459088">Open</span><span class="op" id="8459092">(</span><span class="ident" id="8459093">tt</span><span class="op" id="8459095">.</span><span class="ident" id="8459096">file</span><span class="op" id="8459100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459104">if</span>&nbsp;<span class="ident" id="8459107">err</span>&nbsp;<span class="op" id="8459111">!=</span>&nbsp;<span class="builtintype" id="8459114">nil</span>&nbsp;<span class="op" id="8459118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459123">t</span><span class="op" id="8459124">.</span><span class="ident" id="8459125">Error</span><span class="op" id="8459130">(</span><span class="ident" id="8459131">err</span><span class="op" id="8459134">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459139">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8459150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459154">if</span>&nbsp;<span class="op" id="8459157">!</span><span class="ident" id="8459158">reflect</span><span class="op" id="8459165">.</span><span class="ident" id="8459166">DeepEqual</span><span class="op" id="8459175">(</span><span class="ident" id="8459176">f</span><span class="op" id="8459177">.</span><span class="ident" id="8459178">FileHeader</span><span class="op" id="8459188">,</span>&nbsp;<span class="ident" id="8459190">tt</span><span class="op" id="8459192">.</span><span class="ident" id="8459193">hdr</span><span class="op" id="8459196">)</span>&nbsp;<span class="op" id="8459198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459203">t</span><span class="op" id="8459204">.</span><span class="ident" id="8459205">Errorf</span><span class="op" id="8459211">(</span><span class="string" id="8459212">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="8459248">,</span>&nbsp;<span class="ident" id="8459250">tt</span><span class="op" id="8459252">.</span><span class="ident" id="8459253">file</span><span class="op" id="8459257">,</span>&nbsp;<span class="ident" id="8459259">f</span><span class="op" id="8459260">.</span><span class="ident" id="8459261">FileHeader</span><span class="op" id="8459271">,</span>&nbsp;<span class="ident" id="8459273">tt</span><span class="op" id="8459275">.</span><span class="ident" id="8459276">hdr</span><span class="op" id="8459279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459284">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8459295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459300">for</span>&nbsp;<span class="ident" id="8459304">i</span><span class="op" id="8459305">,</span>&nbsp;<span class="ident" id="8459307">sh</span>&nbsp;<span class="op" id="8459310">:=</span>&nbsp;<span class="keyword" id="8459313">range</span>&nbsp;<span class="ident" id="8459319">f</span><span class="op" id="8459320">.</span><span class="ident" id="8459321">Sections</span>&nbsp;<span class="op" id="8459330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459335">if</span>&nbsp;<span class="ident" id="8459338">i</span>&nbsp;<span class="op" id="8459340">&gt;=</span>&nbsp;<span class="builtinfunc" id="8459343">len</span><span class="op" id="8459346">(</span><span class="ident" id="8459347">tt</span><span class="op" id="8459349">.</span><span class="ident" id="8459350">sections</span><span class="op" id="8459358">)</span>&nbsp;<span class="op" id="8459360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459366">break</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8459375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459380">have</span>&nbsp;<span class="op" id="8459385">:=</span>&nbsp;<span class="op" id="8459388">&amp;</span><span class="ident" id="8459389">sh</span><span class="op" id="8459391">.</span><span class="ident" id="8459392">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459409">want</span>&nbsp;<span class="op" id="8459414">:=</span>&nbsp;<span class="ident" id="8459417">tt</span><span class="op" id="8459419">.</span><span class="ident" id="8459420">sections</span><span class="op" id="8459428">[</span><span class="ident" id="8459429">i</span><span class="op" id="8459430">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459435">if</span>&nbsp;<span class="op" id="8459438">!</span><span class="ident" id="8459439">reflect</span><span class="op" id="8459446">.</span><span class="ident" id="8459447">DeepEqual</span><span class="op" id="8459456">(</span><span class="ident" id="8459457">have</span><span class="op" id="8459461">,</span>&nbsp;<span class="ident" id="8459463">want</span><span class="op" id="8459467">)</span>&nbsp;<span class="op" id="8459469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459475">t</span><span class="op" id="8459476">.</span><span class="ident" id="8459477">Errorf</span><span class="op" id="8459483">(</span><span class="string" id="8459484">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="8459532">,</span>&nbsp;<span class="ident" id="8459534">tt</span><span class="op" id="8459536">.</span><span class="ident" id="8459537">file</span><span class="op" id="8459541">,</span>&nbsp;<span class="ident" id="8459543">i</span><span class="op" id="8459544">,</span>&nbsp;<span class="ident" id="8459546">have</span><span class="op" id="8459550">,</span>&nbsp;<span class="ident" id="8459552">want</span><span class="op" id="8459556">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8459561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8459565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459569">tn</span>&nbsp;<span class="op" id="8459572">:=</span>&nbsp;<span class="builtinfunc" id="8459575">len</span><span class="op" id="8459578">(</span><span class="ident" id="8459579">tt</span><span class="op" id="8459581">.</span><span class="ident" id="8459582">sections</span><span class="op" id="8459590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459594">fn</span>&nbsp;<span class="op" id="8459597">:=</span>&nbsp;<span class="builtinfunc" id="8459600">len</span><span class="op" id="8459603">(</span><span class="ident" id="8459604">f</span><span class="op" id="8459605">.</span><span class="ident" id="8459606">Sections</span><span class="op" id="8459614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459618">if</span>&nbsp;<span class="ident" id="8459621">tn</span>&nbsp;<span class="op" id="8459624">!=</span>&nbsp;<span class="ident" id="8459627">fn</span>&nbsp;<span class="op" id="8459630">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459635">t</span><span class="op" id="8459636">.</span><span class="ident" id="8459637">Errorf</span><span class="op" id="8459643">(</span><span class="string" id="8459644">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8459682">,</span>&nbsp;<span class="ident" id="8459684">tt</span><span class="op" id="8459686">.</span><span class="ident" id="8459687">file</span><span class="op" id="8459691">,</span>&nbsp;<span class="ident" id="8459693">fn</span><span class="op" id="8459695">,</span>&nbsp;<span class="ident" id="8459697">tn</span><span class="op" id="8459699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8459703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8459706">}</span><br>
<span class="lineno"></span><span class="op" id="8459708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8459711">func</span>&nbsp;<span class="ident" id="8459716">TestOpenFailure</span><span class="op" id="8459731">(</span><span class="ident" id="8459732">t</span>&nbsp;<span class="op" id="8459734">*</span><span class="ident" id="8459735">testing</span><span class="op" id="8459742">.</span><span class="ident" id="8459743">T</span><span class="op" id="8459744">)</span>&nbsp;<span class="op" id="8459746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459749">filename</span>&nbsp;<span class="op" id="8459758">:=</span>&nbsp;<span class="string" id="8459761">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8459774">//&nbsp;not&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459802">_</span><span class="op" id="8459803">,</span>&nbsp;<span class="ident" id="8459805">err</span>&nbsp;<span class="op" id="8459809">:=</span>&nbsp;<span class="ident" id="8459812">Open</span><span class="op" id="8459816">(</span><span class="ident" id="8459817">filename</span><span class="op" id="8459825">)</span>&nbsp;<span class="comment" id="8459827">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8459843">if</span>&nbsp;<span class="ident" id="8459846">err</span>&nbsp;<span class="op" id="8459850">==</span>&nbsp;<span class="builtintype" id="8459853">nil</span>&nbsp;<span class="op" id="8459857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8459861">t</span><span class="op" id="8459862">.</span><span class="ident" id="8459863">Errorf</span><span class="op" id="8459869">(</span><span class="string" id="8459870">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op" id="8459903">,</span>&nbsp;<span class="ident" id="8459905">filename</span><span class="op" id="8459913">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8459916">}</span><br>
<span class="lineno"></span><span class="op" id="8459918">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
