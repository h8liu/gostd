<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html" class="current">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7310908">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7310963">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7311017">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7311068">package</span>&nbsp;<span class="ident" id="7311076">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7311081">import</span>&nbsp;<span class="op" id="7311088">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7311091">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7311100">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7311111">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7311121">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7311124">type</span>&nbsp;<span class="ident" id="7311129">typeT</span>&nbsp;<span class="keyword" id="7311135">struct</span>&nbsp;<span class="op" id="7311142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7311145">id</span>&nbsp;&nbsp;<span class="ident" id="7311149">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7311157">str</span>&nbsp;<span class="builtintype" id="7311161">string</span><br>
<span class="lineno"></span><span class="op" id="7311168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7311171">var</span>&nbsp;<span class="ident" id="7311175">basicTypes</span>&nbsp;<span class="op" id="7311186">=</span>&nbsp;<span class="op" id="7311188">[</span><span class="op" id="7311189">]</span><span class="ident" id="7311190">typeT</span><span class="op" id="7311195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311198">{</span><span class="ident" id="7311199">tBool</span><span class="op" id="7311204">,</span>&nbsp;<span class="string" id="7311206">&#34;bool&#34;</span><span class="op" id="7311212">}</span><span class="op" id="7311213">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311216">{</span><span class="ident" id="7311217">tInt</span><span class="op" id="7311221">,</span>&nbsp;<span class="string" id="7311223">&#34;int&#34;</span><span class="op" id="7311228">}</span><span class="op" id="7311229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311232">{</span><span class="ident" id="7311233">tUint</span><span class="op" id="7311238">,</span>&nbsp;<span class="string" id="7311240">&#34;uint&#34;</span><span class="op" id="7311246">}</span><span class="op" id="7311247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311250">{</span><span class="ident" id="7311251">tFloat</span><span class="op" id="7311257">,</span>&nbsp;<span class="string" id="7311259">&#34;float&#34;</span><span class="op" id="7311266">}</span><span class="op" id="7311267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311270">{</span><span class="ident" id="7311271">tBytes</span><span class="op" id="7311277">,</span>&nbsp;<span class="string" id="7311279">&#34;bytes&#34;</span><span class="op" id="7311286">}</span><span class="op" id="7311287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311290">{</span><span class="ident" id="7311291">tString</span><span class="op" id="7311298">,</span>&nbsp;<span class="string" id="7311300">&#34;string&#34;</span><span class="op" id="7311308">}</span><span class="op" id="7311309">,</span><br>
<span class="lineno">25</span><span class="op" id="7311311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7311314">func</span>&nbsp;<span class="ident" id="7311319">getTypeUnlocked</span><span class="op" id="7311334">(</span><span class="ident" id="7311335">name</span>&nbsp;<span class="builtintype" id="7311340">string</span><span class="op" id="7311346">,</span>&nbsp;<span class="ident" id="7311348">rt</span>&nbsp;<span class="ident" id="7311351">reflect</span><span class="op" id="7311358">.</span><span class="ident" id="7311359">Type</span><span class="op" id="7311363">)</span>&nbsp;<span class="ident" id="7311365">gobType</span>&nbsp;<span class="op" id="7311373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7311376">typeLock</span><span class="op" id="7311384">.</span><span class="ident" id="7311385">Lock</span><span class="op" id="7311389">(</span><span class="op" id="7311390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7311393">defer</span>&nbsp;<span class="ident" id="7311399">typeLock</span><span class="op" id="7311407">.</span><span class="ident" id="7311408">Unlock</span><span class="op" id="7311414">(</span><span class="op" id="7311415">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7311418">t</span><span class="op" id="7311419">,</span>&nbsp;<span class="ident" id="7311421">err</span>&nbsp;<span class="op" id="7311425">:=</span>&nbsp;<span class="ident" id="7311428">getBaseType</span><span class="op" id="7311439">(</span><span class="ident" id="7311440">name</span><span class="op" id="7311444">,</span>&nbsp;<span class="ident" id="7311446">rt</span><span class="op" id="7311448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7311451">if</span>&nbsp;<span class="ident" id="7311454">err</span>&nbsp;<span class="op" id="7311458">!=</span>&nbsp;<span class="builtintype" id="7311461">nil</span>&nbsp;<span class="op" id="7311465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7311469">panic</span><span class="op" id="7311474">(</span><span class="string" id="7311475">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="7311495">+</span>&nbsp;<span class="ident" id="7311497">err</span><span class="op" id="7311500">.</span><span class="ident" id="7311501">Error</span><span class="op" id="7311506">(</span><span class="op" id="7311507">)</span><span class="op" id="7311508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7311514">return</span>&nbsp;<span class="ident" id="7311521">t</span><br>
<span class="lineno">35</span><span class="op" id="7311523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7311526">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="7311543">func</span>&nbsp;<span class="ident" id="7311548">TestBasic</span><span class="op" id="7311557">(</span><span class="ident" id="7311558">t</span>&nbsp;<span class="op" id="7311560">*</span><span class="ident" id="7311561">testing</span><span class="op" id="7311568">.</span><span class="ident" id="7311569">T</span><span class="op" id="7311570">)</span>&nbsp;<span class="op" id="7311572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7311575">for</span>&nbsp;<span class="ident" id="7311579">_</span><span class="op" id="7311580">,</span>&nbsp;<span class="ident" id="7311582">tt</span>&nbsp;<span class="op" id="7311585">:=</span>&nbsp;<span class="keyword" id="7311588">range</span>&nbsp;<span class="ident" id="7311594">basicTypes</span>&nbsp;<span class="op" id="7311605">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7311609">if</span>&nbsp;<span class="ident" id="7311612">tt</span><span class="op" id="7311614">.</span><span class="ident" id="7311615">id</span><span class="op" id="7311617">.</span><span class="builtintype" id="7311618">string</span><span class="op" id="7311624">(</span><span class="op" id="7311625">)</span>&nbsp;<span class="op" id="7311627">!=</span>&nbsp;<span class="ident" id="7311630">tt</span><span class="op" id="7311632">.</span><span class="ident" id="7311633">str</span>&nbsp;<span class="op" id="7311637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7311642">t</span><span class="op" id="7311643">.</span><span class="ident" id="7311644">Errorf</span><span class="op" id="7311650">(</span><span class="string" id="7311651">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7311682">,</span>&nbsp;<span class="ident" id="7311684">tt</span><span class="op" id="7311686">.</span><span class="ident" id="7311687">str</span><span class="op" id="7311690">,</span>&nbsp;<span class="ident" id="7311692">tt</span><span class="op" id="7311694">.</span><span class="ident" id="7311695">id</span><span class="op" id="7311697">.</span><span class="builtintype" id="7311698">string</span><span class="op" id="7311704">(</span><span class="op" id="7311705">)</span><span class="op" id="7311706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7311714">if</span>&nbsp;<span class="ident" id="7311717">tt</span><span class="op" id="7311719">.</span><span class="ident" id="7311720">id</span>&nbsp;<span class="op" id="7311723">==</span>&nbsp;<span class="num" id="7311726">0</span>&nbsp;<span class="op" id="7311728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7311733">t</span><span class="op" id="7311734">.</span><span class="ident" id="7311735">Errorf</span><span class="op" id="7311741">(</span><span class="string" id="7311742">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="7311761">,</span>&nbsp;<span class="ident" id="7311763">tt</span><span class="op" id="7311765">.</span><span class="ident" id="7311766">str</span><span class="op" id="7311769">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7311776">}</span><br>
<span class="lineno"></span><span class="op" id="7311778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7311781">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="7311849">func</span>&nbsp;<span class="ident" id="7311854">TestReregistration</span><span class="op" id="7311872">(</span><span class="ident" id="7311873">t</span>&nbsp;<span class="op" id="7311875">*</span><span class="ident" id="7311876">testing</span><span class="op" id="7311883">.</span><span class="ident" id="7311884">T</span><span class="op" id="7311885">)</span>&nbsp;<span class="op" id="7311887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7311890">newtyp</span>&nbsp;<span class="op" id="7311897">:=</span>&nbsp;<span class="ident" id="7311900">getTypeUnlocked</span><span class="op" id="7311915">(</span><span class="string" id="7311916">&#34;int&#34;</span><span class="op" id="7311921">,</span>&nbsp;<span class="ident" id="7311923">reflect</span><span class="op" id="7311930">.</span><span class="ident" id="7311931">TypeOf</span><span class="op" id="7311937">(</span><span class="builtintype" id="7311938">int</span><span class="op" id="7311941">(</span><span class="num" id="7311942">0</span><span class="op" id="7311943">)</span><span class="op" id="7311944">)</span><span class="op" id="7311945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7311948">if</span>&nbsp;<span class="ident" id="7311951">newtyp</span>&nbsp;<span class="op" id="7311958">!=</span>&nbsp;<span class="ident" id="7311961">tInt</span><span class="op" id="7311965">.</span><span class="ident" id="7311966">gobType</span><span class="op" id="7311973">(</span><span class="op" id="7311974">)</span>&nbsp;<span class="op" id="7311976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7311980">t</span><span class="op" id="7311981">.</span><span class="ident" id="7311982">Errorf</span><span class="op" id="7311988">(</span><span class="string" id="7311989">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7312024">,</span>&nbsp;<span class="ident" id="7312026">newtyp</span><span class="op" id="7312032">.</span><span class="builtintype" id="7312033">string</span><span class="op" id="7312039">(</span><span class="op" id="7312040">)</span><span class="op" id="7312041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7312044">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312047">newtyp</span>&nbsp;<span class="op" id="7312054">=</span>&nbsp;<span class="ident" id="7312056">getTypeUnlocked</span><span class="op" id="7312071">(</span><span class="string" id="7312072">&#34;uint&#34;</span><span class="op" id="7312078">,</span>&nbsp;<span class="ident" id="7312080">reflect</span><span class="op" id="7312087">.</span><span class="ident" id="7312088">TypeOf</span><span class="op" id="7312094">(</span><span class="builtintype" id="7312095">uint</span><span class="op" id="7312099">(</span><span class="num" id="7312100">0</span><span class="op" id="7312101">)</span><span class="op" id="7312102">)</span><span class="op" id="7312103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7312106">if</span>&nbsp;<span class="ident" id="7312109">newtyp</span>&nbsp;<span class="op" id="7312116">!=</span>&nbsp;<span class="ident" id="7312119">tUint</span><span class="op" id="7312124">.</span><span class="ident" id="7312125">gobType</span><span class="op" id="7312132">(</span><span class="op" id="7312133">)</span>&nbsp;<span class="op" id="7312135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312139">t</span><span class="op" id="7312140">.</span><span class="ident" id="7312141">Errorf</span><span class="op" id="7312147">(</span><span class="string" id="7312148">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7312183">,</span>&nbsp;<span class="ident" id="7312185">newtyp</span><span class="op" id="7312191">.</span><span class="builtintype" id="7312192">string</span><span class="op" id="7312198">(</span><span class="op" id="7312199">)</span><span class="op" id="7312200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7312203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312206">newtyp</span>&nbsp;<span class="op" id="7312213">=</span>&nbsp;<span class="ident" id="7312215">getTypeUnlocked</span><span class="op" id="7312230">(</span><span class="string" id="7312231">&#34;string&#34;</span><span class="op" id="7312239">,</span>&nbsp;<span class="ident" id="7312241">reflect</span><span class="op" id="7312248">.</span><span class="ident" id="7312249">TypeOf</span><span class="op" id="7312255">(</span><span class="string" id="7312256">&#34;hello&#34;</span><span class="op" id="7312263">)</span><span class="op" id="7312264">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7312267">if</span>&nbsp;<span class="ident" id="7312270">newtyp</span>&nbsp;<span class="op" id="7312277">!=</span>&nbsp;<span class="ident" id="7312280">tString</span><span class="op" id="7312287">.</span><span class="ident" id="7312288">gobType</span><span class="op" id="7312295">(</span><span class="op" id="7312296">)</span>&nbsp;<span class="op" id="7312298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312302">t</span><span class="op" id="7312303">.</span><span class="ident" id="7312304">Errorf</span><span class="op" id="7312310">(</span><span class="string" id="7312311">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7312346">,</span>&nbsp;<span class="ident" id="7312348">newtyp</span><span class="op" id="7312354">.</span><span class="builtintype" id="7312355">string</span><span class="op" id="7312361">(</span><span class="op" id="7312362">)</span><span class="op" id="7312363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7312366">}</span><br>
<span class="lineno"></span><span class="op" id="7312368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7312371">func</span>&nbsp;<span class="ident" id="7312376">TestArrayType</span><span class="op" id="7312389">(</span><span class="ident" id="7312390">t</span>&nbsp;<span class="op" id="7312392">*</span><span class="ident" id="7312393">testing</span><span class="op" id="7312400">.</span><span class="ident" id="7312401">T</span><span class="op" id="7312402">)</span>&nbsp;<span class="op" id="7312404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7312407">var</span>&nbsp;<span class="ident" id="7312411">a3</span>&nbsp;<span class="op" id="7312414">[</span><span class="num" id="7312415">3</span><span class="op" id="7312416">]</span><span class="builtintype" id="7312417">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312422">a3int</span>&nbsp;<span class="op" id="7312428">:=</span>&nbsp;<span class="ident" id="7312431">getTypeUnlocked</span><span class="op" id="7312446">(</span><span class="string" id="7312447">&#34;foo&#34;</span><span class="op" id="7312452">,</span>&nbsp;<span class="ident" id="7312454">reflect</span><span class="op" id="7312461">.</span><span class="ident" id="7312462">TypeOf</span><span class="op" id="7312468">(</span><span class="ident" id="7312469">a3</span><span class="op" id="7312471">)</span><span class="op" id="7312472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312475">newa3int</span>&nbsp;<span class="op" id="7312484">:=</span>&nbsp;<span class="ident" id="7312487">getTypeUnlocked</span><span class="op" id="7312502">(</span><span class="string" id="7312503">&#34;bar&#34;</span><span class="op" id="7312508">,</span>&nbsp;<span class="ident" id="7312510">reflect</span><span class="op" id="7312517">.</span><span class="ident" id="7312518">TypeOf</span><span class="op" id="7312524">(</span><span class="ident" id="7312525">a3</span><span class="op" id="7312527">)</span><span class="op" id="7312528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7312531">if</span>&nbsp;<span class="ident" id="7312534">a3int</span>&nbsp;<span class="op" id="7312540">!=</span>&nbsp;<span class="ident" id="7312543">newa3int</span>&nbsp;<span class="op" id="7312552">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312556">t</span><span class="op" id="7312557">.</span><span class="ident" id="7312558">Errorf</span><span class="op" id="7312564">(</span><span class="string" id="7312565">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7312613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7312616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7312619">var</span>&nbsp;<span class="ident" id="7312623">a4</span>&nbsp;<span class="op" id="7312626">[</span><span class="num" id="7312627">4</span><span class="op" id="7312628">]</span><span class="builtintype" id="7312629">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312634">a4int</span>&nbsp;<span class="op" id="7312640">:=</span>&nbsp;<span class="ident" id="7312643">getTypeUnlocked</span><span class="op" id="7312658">(</span><span class="string" id="7312659">&#34;goo&#34;</span><span class="op" id="7312664">,</span>&nbsp;<span class="ident" id="7312666">reflect</span><span class="op" id="7312673">.</span><span class="ident" id="7312674">TypeOf</span><span class="op" id="7312680">(</span><span class="ident" id="7312681">a4</span><span class="op" id="7312683">)</span><span class="op" id="7312684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7312687">if</span>&nbsp;<span class="ident" id="7312690">a3int</span>&nbsp;<span class="op" id="7312696">==</span>&nbsp;<span class="ident" id="7312699">a4int</span>&nbsp;<span class="op" id="7312705">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312709">t</span><span class="op" id="7312710">.</span><span class="ident" id="7312711">Errorf</span><span class="op" id="7312717">(</span><span class="string" id="7312718">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="7312770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7312773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7312776">var</span>&nbsp;<span class="ident" id="7312780">b3</span>&nbsp;<span class="op" id="7312783">[</span><span class="num" id="7312784">3</span><span class="op" id="7312785">]</span><span class="builtintype" id="7312786">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312792">a3bool</span>&nbsp;<span class="op" id="7312799">:=</span>&nbsp;<span class="ident" id="7312802">getTypeUnlocked</span><span class="op" id="7312817">(</span><span class="string" id="7312818">&#34;&#34;</span><span class="op" id="7312820">,</span>&nbsp;<span class="ident" id="7312822">reflect</span><span class="op" id="7312829">.</span><span class="ident" id="7312830">TypeOf</span><span class="op" id="7312836">(</span><span class="ident" id="7312837">b3</span><span class="op" id="7312839">)</span><span class="op" id="7312840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7312843">if</span>&nbsp;<span class="ident" id="7312846">a3int</span>&nbsp;<span class="op" id="7312852">==</span>&nbsp;<span class="ident" id="7312855">a3bool</span>&nbsp;<span class="op" id="7312862">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312866">t</span><span class="op" id="7312867">.</span><span class="ident" id="7312868">Errorf</span><span class="op" id="7312874">(</span><span class="string" id="7312875">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="7312928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7312931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312934">str</span>&nbsp;<span class="op" id="7312938">:=</span>&nbsp;<span class="ident" id="7312941">a3bool</span><span class="op" id="7312947">.</span><span class="builtintype" id="7312948">string</span><span class="op" id="7312954">(</span><span class="op" id="7312955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7312958">expected</span>&nbsp;<span class="op" id="7312967">:=</span>&nbsp;<span class="string" id="7312970">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7312981">if</span>&nbsp;<span class="ident" id="7312984">str</span>&nbsp;<span class="op" id="7312988">!=</span>&nbsp;<span class="ident" id="7312991">expected</span>&nbsp;<span class="op" id="7313000">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313004">t</span><span class="op" id="7313005">.</span><span class="ident" id="7313006">Errorf</span><span class="op" id="7313012">(</span><span class="string" id="7313013">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7313047">,</span>&nbsp;<span class="ident" id="7313049">str</span><span class="op" id="7313052">,</span>&nbsp;<span class="ident" id="7313054">expected</span><span class="op" id="7313062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7313065">}</span><br>
<span class="lineno"></span><span class="op" id="7313067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7313070">func</span>&nbsp;<span class="ident" id="7313075">TestSliceType</span><span class="op" id="7313088">(</span><span class="ident" id="7313089">t</span>&nbsp;<span class="op" id="7313091">*</span><span class="ident" id="7313092">testing</span><span class="op" id="7313099">.</span><span class="ident" id="7313100">T</span><span class="op" id="7313101">)</span>&nbsp;<span class="op" id="7313103">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313106">var</span>&nbsp;<span class="ident" id="7313110">s</span>&nbsp;<span class="op" id="7313112">[</span><span class="op" id="7313113">]</span><span class="builtintype" id="7313114">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313119">sint</span>&nbsp;<span class="op" id="7313124">:=</span>&nbsp;<span class="ident" id="7313127">getTypeUnlocked</span><span class="op" id="7313142">(</span><span class="string" id="7313143">&#34;slice&#34;</span><span class="op" id="7313150">,</span>&nbsp;<span class="ident" id="7313152">reflect</span><span class="op" id="7313159">.</span><span class="ident" id="7313160">TypeOf</span><span class="op" id="7313166">(</span><span class="ident" id="7313167">s</span><span class="op" id="7313168">)</span><span class="op" id="7313169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313172">var</span>&nbsp;<span class="ident" id="7313176">news</span>&nbsp;<span class="op" id="7313181">[</span><span class="op" id="7313182">]</span><span class="builtintype" id="7313183">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313188">newsint</span>&nbsp;<span class="op" id="7313196">:=</span>&nbsp;<span class="ident" id="7313199">getTypeUnlocked</span><span class="op" id="7313214">(</span><span class="string" id="7313215">&#34;slice1&#34;</span><span class="op" id="7313223">,</span>&nbsp;<span class="ident" id="7313225">reflect</span><span class="op" id="7313232">.</span><span class="ident" id="7313233">TypeOf</span><span class="op" id="7313239">(</span><span class="ident" id="7313240">news</span><span class="op" id="7313244">)</span><span class="op" id="7313245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313248">if</span>&nbsp;<span class="ident" id="7313251">sint</span>&nbsp;<span class="op" id="7313256">!=</span>&nbsp;<span class="ident" id="7313259">newsint</span>&nbsp;<span class="op" id="7313267">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313271">t</span><span class="op" id="7313272">.</span><span class="ident" id="7313273">Errorf</span><span class="op" id="7313279">(</span><span class="string" id="7313280">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7313327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7313330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313333">var</span>&nbsp;<span class="ident" id="7313337">b</span>&nbsp;<span class="op" id="7313339">[</span><span class="op" id="7313340">]</span><span class="builtintype" id="7313341">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313347">sbool</span>&nbsp;<span class="op" id="7313353">:=</span>&nbsp;<span class="ident" id="7313356">getTypeUnlocked</span><span class="op" id="7313371">(</span><span class="string" id="7313372">&#34;&#34;</span><span class="op" id="7313374">,</span>&nbsp;<span class="ident" id="7313376">reflect</span><span class="op" id="7313383">.</span><span class="ident" id="7313384">TypeOf</span><span class="op" id="7313390">(</span><span class="ident" id="7313391">b</span><span class="op" id="7313392">)</span><span class="op" id="7313393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313396">if</span>&nbsp;<span class="ident" id="7313399">sbool</span>&nbsp;<span class="op" id="7313405">==</span>&nbsp;<span class="ident" id="7313408">sint</span>&nbsp;<span class="op" id="7313413">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313417">t</span><span class="op" id="7313418">.</span><span class="ident" id="7313419">Errorf</span><span class="op" id="7313425">(</span><span class="string" id="7313426">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="7313477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7313480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313483">str</span>&nbsp;<span class="op" id="7313487">:=</span>&nbsp;<span class="ident" id="7313490">sbool</span><span class="op" id="7313495">.</span><span class="builtintype" id="7313496">string</span><span class="op" id="7313502">(</span><span class="op" id="7313503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313506">expected</span>&nbsp;<span class="op" id="7313515">:=</span>&nbsp;<span class="string" id="7313518">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313528">if</span>&nbsp;<span class="ident" id="7313531">str</span>&nbsp;<span class="op" id="7313535">!=</span>&nbsp;<span class="ident" id="7313538">expected</span>&nbsp;<span class="op" id="7313547">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313551">t</span><span class="op" id="7313552">.</span><span class="ident" id="7313553">Errorf</span><span class="op" id="7313559">(</span><span class="string" id="7313560">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7313594">,</span>&nbsp;<span class="ident" id="7313596">str</span><span class="op" id="7313599">,</span>&nbsp;<span class="ident" id="7313601">expected</span><span class="op" id="7313609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7313612">}</span><br>
<span class="lineno"></span><span class="op" id="7313614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7313617">func</span>&nbsp;<span class="ident" id="7313622">TestMapType</span><span class="op" id="7313633">(</span><span class="ident" id="7313634">t</span>&nbsp;<span class="op" id="7313636">*</span><span class="ident" id="7313637">testing</span><span class="op" id="7313644">.</span><span class="ident" id="7313645">T</span><span class="op" id="7313646">)</span>&nbsp;<span class="op" id="7313648">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313651">var</span>&nbsp;<span class="ident" id="7313655">m</span>&nbsp;<span class="keyword" id="7313657">map</span><span class="op" id="7313660">[</span><span class="builtintype" id="7313661">string</span><span class="op" id="7313667">]</span><span class="builtintype" id="7313668">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313673">mapStringInt</span>&nbsp;<span class="op" id="7313686">:=</span>&nbsp;<span class="ident" id="7313689">getTypeUnlocked</span><span class="op" id="7313704">(</span><span class="string" id="7313705">&#34;map&#34;</span><span class="op" id="7313710">,</span>&nbsp;<span class="ident" id="7313712">reflect</span><span class="op" id="7313719">.</span><span class="ident" id="7313720">TypeOf</span><span class="op" id="7313726">(</span><span class="ident" id="7313727">m</span><span class="op" id="7313728">)</span><span class="op" id="7313729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313732">var</span>&nbsp;<span class="ident" id="7313736">newm</span>&nbsp;<span class="keyword" id="7313741">map</span><span class="op" id="7313744">[</span><span class="builtintype" id="7313745">string</span><span class="op" id="7313751">]</span><span class="builtintype" id="7313752">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313757">newMapStringInt</span>&nbsp;<span class="op" id="7313773">:=</span>&nbsp;<span class="ident" id="7313776">getTypeUnlocked</span><span class="op" id="7313791">(</span><span class="string" id="7313792">&#34;map1&#34;</span><span class="op" id="7313798">,</span>&nbsp;<span class="ident" id="7313800">reflect</span><span class="op" id="7313807">.</span><span class="ident" id="7313808">TypeOf</span><span class="op" id="7313814">(</span><span class="ident" id="7313815">newm</span><span class="op" id="7313819">)</span><span class="op" id="7313820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313823">if</span>&nbsp;<span class="ident" id="7313826">mapStringInt</span>&nbsp;<span class="op" id="7313839">!=</span>&nbsp;<span class="ident" id="7313842">newMapStringInt</span>&nbsp;<span class="op" id="7313858">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313862">t</span><span class="op" id="7313863">.</span><span class="ident" id="7313864">Errorf</span><span class="op" id="7313870">(</span><span class="string" id="7313871">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7313927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7313930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7313933">var</span>&nbsp;<span class="ident" id="7313937">b</span>&nbsp;<span class="keyword" id="7313939">map</span><span class="op" id="7313942">[</span><span class="builtintype" id="7313943">string</span><span class="op" id="7313949">]</span><span class="builtintype" id="7313950">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7313956">mapStringBool</span>&nbsp;<span class="op" id="7313970">:=</span>&nbsp;<span class="ident" id="7313973">getTypeUnlocked</span><span class="op" id="7313988">(</span><span class="string" id="7313989">&#34;&#34;</span><span class="op" id="7313991">,</span>&nbsp;<span class="ident" id="7313993">reflect</span><span class="op" id="7314000">.</span><span class="ident" id="7314001">TypeOf</span><span class="op" id="7314007">(</span><span class="ident" id="7314008">b</span><span class="op" id="7314009">)</span><span class="op" id="7314010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7314013">if</span>&nbsp;<span class="ident" id="7314016">mapStringBool</span>&nbsp;<span class="op" id="7314030">==</span>&nbsp;<span class="ident" id="7314033">mapStringInt</span>&nbsp;<span class="op" id="7314046">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314050">t</span><span class="op" id="7314051">.</span><span class="ident" id="7314052">Errorf</span><span class="op" id="7314058">(</span><span class="string" id="7314059">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="7314128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7314131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314134">str</span>&nbsp;<span class="op" id="7314138">:=</span>&nbsp;<span class="ident" id="7314141">mapStringBool</span><span class="op" id="7314154">.</span><span class="builtintype" id="7314155">string</span><span class="op" id="7314161">(</span><span class="op" id="7314162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314165">expected</span>&nbsp;<span class="op" id="7314174">:=</span>&nbsp;<span class="string" id="7314177">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7314196">if</span>&nbsp;<span class="ident" id="7314199">str</span>&nbsp;<span class="op" id="7314203">!=</span>&nbsp;<span class="ident" id="7314206">expected</span>&nbsp;<span class="op" id="7314215">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314219">t</span><span class="op" id="7314220">.</span><span class="ident" id="7314221">Errorf</span><span class="op" id="7314227">(</span><span class="string" id="7314228">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7314260">,</span>&nbsp;<span class="ident" id="7314262">str</span><span class="op" id="7314265">,</span>&nbsp;<span class="ident" id="7314267">expected</span><span class="op" id="7314275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7314278">}</span><br>
<span class="lineno"></span><span class="op" id="7314280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7314283">type</span>&nbsp;<span class="ident" id="7314288">Bar</span>&nbsp;<span class="keyword" id="7314292">struct</span>&nbsp;<span class="op" id="7314299">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314302">X</span>&nbsp;<span class="builtintype" id="7314304">string</span><br>
<span class="lineno"></span><span class="op" id="7314311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7314314">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="7314395">type</span>&nbsp;<span class="ident" id="7314400">Foo</span>&nbsp;<span class="keyword" id="7314404">struct</span>&nbsp;<span class="op" id="7314411">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314414">A</span>&nbsp;<span class="builtintype" id="7314416">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314421">B</span>&nbsp;<span class="builtintype" id="7314423">int32</span>&nbsp;<span class="comment" id="7314429">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314449">C</span>&nbsp;<span class="builtintype" id="7314451">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314459">D</span>&nbsp;<span class="op" id="7314461">[</span><span class="op" id="7314462">]</span><span class="builtintype" id="7314463">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314469">E</span>&nbsp;<span class="op" id="7314471">*</span><span class="builtintype" id="7314472">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7314483">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314507">F</span>&nbsp;<span class="op" id="7314509">*</span><span class="op" id="7314510">*</span><span class="op" id="7314511">*</span><span class="op" id="7314512">*</span><span class="builtintype" id="7314513">float64</span>&nbsp;<span class="comment" id="7314521">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314545">G</span>&nbsp;<span class="op" id="7314547">*</span><span class="ident" id="7314548">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314553">H</span>&nbsp;<span class="op" id="7314555">*</span><span class="ident" id="7314556">Bar</span>&nbsp;<span class="comment" id="7314560">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314615">I</span>&nbsp;<span class="op" id="7314617">*</span><span class="ident" id="7314618">Foo</span>&nbsp;<span class="comment" id="7314622">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="7314642">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="7314645">func</span>&nbsp;<span class="ident" id="7314650">TestStructType</span><span class="op" id="7314664">(</span><span class="ident" id="7314665">t</span>&nbsp;<span class="op" id="7314667">*</span><span class="ident" id="7314668">testing</span><span class="op" id="7314675">.</span><span class="ident" id="7314676">T</span><span class="op" id="7314677">)</span>&nbsp;<span class="op" id="7314679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314682">sstruct</span>&nbsp;<span class="op" id="7314690">:=</span>&nbsp;<span class="ident" id="7314693">getTypeUnlocked</span><span class="op" id="7314708">(</span><span class="string" id="7314709">&#34;Foo&#34;</span><span class="op" id="7314714">,</span>&nbsp;<span class="ident" id="7314716">reflect</span><span class="op" id="7314723">.</span><span class="ident" id="7314724">TypeOf</span><span class="op" id="7314730">(</span><span class="ident" id="7314731">Foo</span><span class="op" id="7314734">{</span><span class="op" id="7314735">}</span><span class="op" id="7314736">)</span><span class="op" id="7314737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314740">str</span>&nbsp;<span class="op" id="7314744">:=</span>&nbsp;<span class="ident" id="7314747">sstruct</span><span class="op" id="7314754">.</span><span class="builtintype" id="7314755">string</span><span class="op" id="7314761">(</span><span class="op" id="7314762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7314765">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314822">expected</span>&nbsp;<span class="op" id="7314831">:=</span>&nbsp;<span class="string" id="7314834">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7314949">if</span>&nbsp;<span class="ident" id="7314952">str</span>&nbsp;<span class="op" id="7314956">!=</span>&nbsp;<span class="ident" id="7314959">expected</span>&nbsp;<span class="op" id="7314968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7314972">t</span><span class="op" id="7314973">.</span><span class="ident" id="7314974">Errorf</span><span class="op" id="7314980">(</span><span class="string" id="7314981">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7315016">,</span>&nbsp;<span class="ident" id="7315018">str</span><span class="op" id="7315021">,</span>&nbsp;<span class="ident" id="7315023">expected</span><span class="op" id="7315031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315034">}</span><br>
<span class="lineno"></span><span class="op" id="7315036">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="7315039">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="7315116">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="7315153">func</span>&nbsp;<span class="ident" id="7315158">TestRegistration</span><span class="op" id="7315174">(</span><span class="ident" id="7315175">t</span>&nbsp;<span class="op" id="7315177">*</span><span class="ident" id="7315178">testing</span><span class="op" id="7315185">.</span><span class="ident" id="7315186">T</span><span class="op" id="7315187">)</span>&nbsp;<span class="op" id="7315189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315192">type</span>&nbsp;<span class="ident" id="7315197">T</span>&nbsp;<span class="keyword" id="7315199">struct</span><span class="op" id="7315205">{</span>&nbsp;<span class="ident" id="7315207">a</span>&nbsp;<span class="builtintype" id="7315209">int</span>&nbsp;<span class="op" id="7315213">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315216">Register</span><span class="op" id="7315224">(</span><span class="builtinfunc" id="7315225">new</span><span class="op" id="7315228">(</span><span class="ident" id="7315229">T</span><span class="op" id="7315230">)</span><span class="op" id="7315231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315234">Register</span><span class="op" id="7315242">(</span><span class="builtinfunc" id="7315243">new</span><span class="op" id="7315246">(</span><span class="ident" id="7315247">T</span><span class="op" id="7315248">)</span><span class="op" id="7315249">)</span><br>
<span class="lineno"></span><span class="op" id="7315251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7315254">type</span>&nbsp;<span class="ident" id="7315259">N1</span>&nbsp;<span class="keyword" id="7315262">struct</span><span class="op" id="7315268">{</span><span class="op" id="7315269">}</span><br>
<span class="lineno">165</span><span class="keyword" id="7315271">type</span>&nbsp;<span class="ident" id="7315276">N2</span>&nbsp;<span class="keyword" id="7315279">struct</span><span class="op" id="7315285">{</span><span class="op" id="7315286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7315289">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="7315325">func</span>&nbsp;<span class="ident" id="7315330">TestRegistrationNaming</span><span class="op" id="7315352">(</span><span class="ident" id="7315353">t</span>&nbsp;<span class="op" id="7315355">*</span><span class="ident" id="7315356">testing</span><span class="op" id="7315363">.</span><span class="ident" id="7315364">T</span><span class="op" id="7315365">)</span>&nbsp;<span class="op" id="7315367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315370">testCases</span>&nbsp;<span class="op" id="7315380">:=</span>&nbsp;<span class="op" id="7315383">[</span><span class="op" id="7315384">]</span><span class="keyword" id="7315385">struct</span>&nbsp;<span class="op" id="7315392">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315396">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315401">interface</span><span class="op" id="7315410">{</span><span class="op" id="7315411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315415">name</span>&nbsp;<span class="builtintype" id="7315420">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315428">}</span><span class="op" id="7315429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315433">{</span><span class="op" id="7315434">&amp;</span><span class="ident" id="7315435">N1</span><span class="op" id="7315437">{</span><span class="op" id="7315438">}</span><span class="op" id="7315439">,</span>&nbsp;<span class="string" id="7315441">&#34;*gob.N1&#34;</span><span class="op" id="7315450">}</span><span class="op" id="7315451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315455">{</span><span class="ident" id="7315456">N2</span><span class="op" id="7315458">{</span><span class="op" id="7315459">}</span><span class="op" id="7315460">,</span>&nbsp;<span class="string" id="7315462">&#34;encoding/gob.N2&#34;</span><span class="op" id="7315479">}</span><span class="op" id="7315480">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315487">for</span>&nbsp;<span class="ident" id="7315491">_</span><span class="op" id="7315492">,</span>&nbsp;<span class="ident" id="7315494">tc</span>&nbsp;<span class="op" id="7315497">:=</span>&nbsp;<span class="keyword" id="7315500">range</span>&nbsp;<span class="ident" id="7315506">testCases</span>&nbsp;<span class="op" id="7315516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315520">Register</span><span class="op" id="7315528">(</span><span class="ident" id="7315529">tc</span><span class="op" id="7315531">.</span><span class="ident" id="7315532">t</span><span class="op" id="7315533">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315538">tct</span>&nbsp;<span class="op" id="7315542">:=</span>&nbsp;<span class="ident" id="7315545">reflect</span><span class="op" id="7315552">.</span><span class="ident" id="7315553">TypeOf</span><span class="op" id="7315559">(</span><span class="ident" id="7315560">tc</span><span class="op" id="7315562">.</span><span class="ident" id="7315563">t</span><span class="op" id="7315564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315568">registerLock</span><span class="op" id="7315580">.</span><span class="ident" id="7315581">RLock</span><span class="op" id="7315586">(</span><span class="op" id="7315587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315591">ct</span>&nbsp;<span class="op" id="7315594">:=</span>&nbsp;<span class="ident" id="7315597">nameToConcreteType</span><span class="op" id="7315615">[</span><span class="ident" id="7315616">tc</span><span class="op" id="7315618">.</span><span class="ident" id="7315619">name</span><span class="op" id="7315623">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315627">registerLock</span><span class="op" id="7315639">.</span><span class="ident" id="7315640">RUnlock</span><span class="op" id="7315647">(</span><span class="op" id="7315648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315652">if</span>&nbsp;<span class="ident" id="7315655">ct</span>&nbsp;<span class="op" id="7315658">!=</span>&nbsp;<span class="ident" id="7315661">tct</span>&nbsp;<span class="op" id="7315665">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315670">t</span><span class="op" id="7315671">.</span><span class="ident" id="7315672">Errorf</span><span class="op" id="7315678">(</span><span class="string" id="7315679">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7315717">,</span>&nbsp;<span class="ident" id="7315719">tc</span><span class="op" id="7315721">.</span><span class="ident" id="7315722">name</span><span class="op" id="7315726">,</span>&nbsp;<span class="ident" id="7315728">ct</span><span class="op" id="7315730">,</span>&nbsp;<span class="ident" id="7315732">tct</span><span class="op" id="7315735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7315743">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315795">if</span>&nbsp;<span class="ident" id="7315798">tct</span><span class="op" id="7315801">.</span><span class="ident" id="7315802">Kind</span><span class="op" id="7315806">(</span><span class="op" id="7315807">)</span>&nbsp;<span class="op" id="7315809">==</span>&nbsp;<span class="ident" id="7315812">reflect</span><span class="op" id="7315819">.</span><span class="ident" id="7315820">Ptr</span>&nbsp;<span class="op" id="7315824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315829">tct</span>&nbsp;<span class="op" id="7315833">=</span>&nbsp;<span class="ident" id="7315835">tct</span><span class="op" id="7315838">.</span><span class="ident" id="7315839">Elem</span><span class="op" id="7315843">(</span><span class="op" id="7315844">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7315852">if</span>&nbsp;<span class="ident" id="7315855">n</span>&nbsp;<span class="op" id="7315857">:=</span>&nbsp;<span class="ident" id="7315860">concreteTypeToName</span><span class="op" id="7315878">[</span><span class="ident" id="7315879">tct</span><span class="op" id="7315882">]</span><span class="op" id="7315883">;</span>&nbsp;<span class="ident" id="7315885">n</span>&nbsp;<span class="op" id="7315887">!=</span>&nbsp;<span class="ident" id="7315890">tc</span><span class="op" id="7315892">.</span><span class="ident" id="7315893">name</span>&nbsp;<span class="op" id="7315898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315903">t</span><span class="op" id="7315904">.</span><span class="ident" id="7315905">Errorf</span><span class="op" id="7315911">(</span><span class="string" id="7315912">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7315952">,</span>&nbsp;<span class="ident" id="7315954">tct</span><span class="op" id="7315957">,</span>&nbsp;<span class="ident" id="7315959">n</span><span class="op" id="7315960">,</span>&nbsp;<span class="ident" id="7315962">tc</span><span class="op" id="7315964">.</span><span class="ident" id="7315965">name</span><span class="op" id="7315969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315976">}</span><br>
<span class="lineno">195</span><span class="op" id="7315978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7315981">func</span>&nbsp;<span class="ident" id="7315986">TestStressParallel</span><span class="op" id="7316004">(</span><span class="ident" id="7316005">t</span>&nbsp;<span class="op" id="7316007">*</span><span class="ident" id="7316008">testing</span><span class="op" id="7316015">.</span><span class="ident" id="7316016">T</span><span class="op" id="7316017">)</span>&nbsp;<span class="op" id="7316019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7316022">type</span>&nbsp;<span class="ident" id="7316027">T2</span>&nbsp;<span class="keyword" id="7316030">struct</span><span class="op" id="7316036">{</span>&nbsp;<span class="ident" id="7316038">A</span>&nbsp;<span class="builtintype" id="7316040">int</span>&nbsp;<span class="op" id="7316044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316047">c</span>&nbsp;<span class="op" id="7316049">:=</span>&nbsp;<span class="builtinfunc" id="7316052">make</span><span class="op" id="7316056">(</span><span class="keyword" id="7316057">chan</span>&nbsp;<span class="builtintype" id="7316062">bool</span><span class="op" id="7316066">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7316069">const</span>&nbsp;<span class="ident" id="7316075">N</span>&nbsp;<span class="op" id="7316077">=</span>&nbsp;<span class="num" id="7316079">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7316083">for</span>&nbsp;<span class="ident" id="7316087">i</span>&nbsp;<span class="op" id="7316089">:=</span>&nbsp;<span class="num" id="7316092">0</span><span class="op" id="7316093">;</span>&nbsp;<span class="ident" id="7316095">i</span>&nbsp;<span class="op" id="7316097">&lt;</span>&nbsp;<span class="ident" id="7316099">N</span><span class="op" id="7316100">;</span>&nbsp;<span class="ident" id="7316102">i</span><span class="op" id="7316103">++</span>&nbsp;<span class="op" id="7316106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7316110">go</span>&nbsp;<span class="keyword" id="7316113">func</span><span class="op" id="7316117">(</span><span class="op" id="7316118">)</span>&nbsp;<span class="op" id="7316120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316125">p</span>&nbsp;<span class="op" id="7316127">:=</span>&nbsp;<span class="builtinfunc" id="7316130">new</span><span class="op" id="7316133">(</span><span class="ident" id="7316134">T2</span><span class="op" id="7316136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316141">Register</span><span class="op" id="7316149">(</span><span class="ident" id="7316150">p</span><span class="op" id="7316151">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316156">b</span>&nbsp;<span class="op" id="7316158">:=</span>&nbsp;<span class="builtinfunc" id="7316161">new</span><span class="op" id="7316164">(</span><span class="ident" id="7316165">bytes</span><span class="op" id="7316170">.</span><span class="ident" id="7316171">Buffer</span><span class="op" id="7316177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316182">enc</span>&nbsp;<span class="op" id="7316186">:=</span>&nbsp;<span class="ident" id="7316189">NewEncoder</span><span class="op" id="7316199">(</span><span class="ident" id="7316200">b</span><span class="op" id="7316201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316206">err</span>&nbsp;<span class="op" id="7316210">:=</span>&nbsp;<span class="ident" id="7316213">enc</span><span class="op" id="7316216">.</span><span class="ident" id="7316217">Encode</span><span class="op" id="7316223">(</span><span class="ident" id="7316224">p</span><span class="op" id="7316225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7316230">if</span>&nbsp;<span class="ident" id="7316233">err</span>&nbsp;<span class="op" id="7316237">!=</span>&nbsp;<span class="builtintype" id="7316240">nil</span>&nbsp;<span class="op" id="7316244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316250">t</span><span class="op" id="7316251">.</span><span class="ident" id="7316252">Error</span><span class="op" id="7316257">(</span><span class="string" id="7316258">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="7316273">,</span>&nbsp;<span class="ident" id="7316275">err</span><span class="op" id="7316278">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7316283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316288">dec</span>&nbsp;<span class="op" id="7316292">:=</span>&nbsp;<span class="ident" id="7316295">NewDecoder</span><span class="op" id="7316305">(</span><span class="ident" id="7316306">b</span><span class="op" id="7316307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316312">err</span>&nbsp;<span class="op" id="7316316">=</span>&nbsp;<span class="ident" id="7316318">dec</span><span class="op" id="7316321">.</span><span class="ident" id="7316322">Decode</span><span class="op" id="7316328">(</span><span class="ident" id="7316329">p</span><span class="op" id="7316330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7316335">if</span>&nbsp;<span class="ident" id="7316338">err</span>&nbsp;<span class="op" id="7316342">!=</span>&nbsp;<span class="builtintype" id="7316345">nil</span>&nbsp;<span class="op" id="7316349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316355">t</span><span class="op" id="7316356">.</span><span class="ident" id="7316357">Error</span><span class="op" id="7316362">(</span><span class="string" id="7316363">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="7316378">,</span>&nbsp;<span class="ident" id="7316380">err</span><span class="op" id="7316383">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7316388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316393">c</span>&nbsp;<span class="op" id="7316395">&lt;-</span>&nbsp;<span class="builtintype" id="7316398">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7316405">}</span><span class="op" id="7316406">(</span><span class="op" id="7316407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7316410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7316413">for</span>&nbsp;<span class="ident" id="7316417">i</span>&nbsp;<span class="op" id="7316419">:=</span>&nbsp;<span class="num" id="7316422">0</span><span class="op" id="7316423">;</span>&nbsp;<span class="ident" id="7316425">i</span>&nbsp;<span class="op" id="7316427">&lt;</span>&nbsp;<span class="ident" id="7316429">N</span><span class="op" id="7316430">;</span>&nbsp;<span class="ident" id="7316432">i</span><span class="op" id="7316433">++</span>&nbsp;<span class="op" id="7316436">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7316440">&lt;-</span><span class="ident" id="7316442">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7316445">}</span><br>
<span class="lineno"></span><span class="op" id="7316447">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
