<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8069890">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8069945">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8069999">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8070050">package</span>&nbsp;<span class="ident" id="8070058">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8070063">import</span>&nbsp;<span class="op" id="8070070">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8070073">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8070082">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8070095">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8070101">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8070109">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8070120">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8070131">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8070142">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8070149">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8070152">func</span>&nbsp;<span class="ident" id="8070157">TestFileInfoHeader</span><span class="op" id="8070175">(</span><span class="ident" id="8070176">t</span>&nbsp;<span class="op" id="8070178">*</span><span class="ident" id="8070179">testing</span><span class="op" id="8070186">.</span><span class="ident" id="8070187">T</span><span class="op" id="8070188">)</span>&nbsp;<span class="op" id="8070190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070193">fi</span><span class="op" id="8070195">,</span>&nbsp;<span class="ident" id="8070197">err</span>&nbsp;<span class="op" id="8070201">:=</span>&nbsp;<span class="ident" id="8070204">os</span><span class="op" id="8070206">.</span><span class="ident" id="8070207">Stat</span><span class="op" id="8070211">(</span><span class="string" id="8070212">&#34;testdata/small.txt&#34;</span><span class="op" id="8070232">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8070235">if</span>&nbsp;<span class="ident" id="8070238">err</span>&nbsp;<span class="op" id="8070242">!=</span>&nbsp;<span class="ident" id="8070245">nil</span>&nbsp;<span class="op" id="8070249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070253">t</span><span class="op" id="8070254">.</span><span class="ident" id="8070255">Fatal</span><span class="op" id="8070260">(</span><span class="ident" id="8070261">err</span><span class="op" id="8070264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8070267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070270">h</span><span class="op" id="8070271">,</span>&nbsp;<span class="ident" id="8070273">err</span>&nbsp;<span class="op" id="8070277">:=</span>&nbsp;<span class="ident" id="8070280">FileInfoHeader</span><span class="op" id="8070294">(</span><span class="ident" id="8070295">fi</span><span class="op" id="8070297">,</span>&nbsp;<span class="string" id="8070299">&#34;&#34;</span><span class="op" id="8070301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8070304">if</span>&nbsp;<span class="ident" id="8070307">err</span>&nbsp;<span class="op" id="8070311">!=</span>&nbsp;<span class="ident" id="8070314">nil</span>&nbsp;<span class="op" id="8070318">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070322">t</span><span class="op" id="8070323">.</span><span class="ident" id="8070324">Fatalf</span><span class="op" id="8070330">(</span><span class="string" id="8070331">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="8070351">,</span>&nbsp;<span class="ident" id="8070353">err</span><span class="op" id="8070356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8070359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8070362">if</span>&nbsp;<span class="ident" id="8070365">g</span><span class="op" id="8070366">,</span>&nbsp;<span class="ident" id="8070368">e</span>&nbsp;<span class="op" id="8070370">:=</span>&nbsp;<span class="ident" id="8070373">h</span><span class="op" id="8070374">.</span><span class="ident" id="8070375">Name</span><span class="op" id="8070379">,</span>&nbsp;<span class="string" id="8070381">&#34;small.txt&#34;</span><span class="op" id="8070392">;</span>&nbsp;<span class="ident" id="8070394">g</span>&nbsp;<span class="op" id="8070396">!=</span>&nbsp;<span class="ident" id="8070399">e</span>&nbsp;<span class="op" id="8070401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070405">t</span><span class="op" id="8070406">.</span><span class="ident" id="8070407">Errorf</span><span class="op" id="8070413">(</span><span class="string" id="8070414">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8070434">,</span>&nbsp;<span class="ident" id="8070436">g</span><span class="op" id="8070437">,</span>&nbsp;<span class="ident" id="8070439">e</span><span class="op" id="8070440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8070443">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8070446">if</span>&nbsp;<span class="ident" id="8070449">g</span><span class="op" id="8070450">,</span>&nbsp;<span class="ident" id="8070452">e</span>&nbsp;<span class="op" id="8070454">:=</span>&nbsp;<span class="ident" id="8070457">h</span><span class="op" id="8070458">.</span><span class="ident" id="8070459">Mode</span><span class="op" id="8070463">,</span>&nbsp;<span class="ident" id="8070465">int64</span><span class="op" id="8070470">(</span><span class="ident" id="8070471">fi</span><span class="op" id="8070473">.</span><span class="ident" id="8070474">Mode</span><span class="op" id="8070478">(</span><span class="op" id="8070479">)</span><span class="op" id="8070480">.</span><span class="ident" id="8070481">Perm</span><span class="op" id="8070485">(</span><span class="op" id="8070486">)</span><span class="op" id="8070487">)</span><span class="op" id="8070488">|</span><span class="ident" id="8070489">c_ISREG</span><span class="op" id="8070496">;</span>&nbsp;<span class="ident" id="8070498">g</span>&nbsp;<span class="op" id="8070500">!=</span>&nbsp;<span class="ident" id="8070503">e</span>&nbsp;<span class="op" id="8070505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070509">t</span><span class="op" id="8070510">.</span><span class="ident" id="8070511">Errorf</span><span class="op" id="8070517">(</span><span class="string" id="8070518">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="8070540">,</span>&nbsp;<span class="ident" id="8070542">g</span><span class="op" id="8070543">,</span>&nbsp;<span class="ident" id="8070545">e</span><span class="op" id="8070546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8070549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8070552">if</span>&nbsp;<span class="ident" id="8070555">g</span><span class="op" id="8070556">,</span>&nbsp;<span class="ident" id="8070558">e</span>&nbsp;<span class="op" id="8070560">:=</span>&nbsp;<span class="ident" id="8070563">h</span><span class="op" id="8070564">.</span><span class="ident" id="8070565">Size</span><span class="op" id="8070569">,</span>&nbsp;<span class="ident" id="8070571">int64</span><span class="op" id="8070576">(</span><span class="num" id="8070577">5</span><span class="op" id="8070578">)</span><span class="op" id="8070579">;</span>&nbsp;<span class="ident" id="8070581">g</span>&nbsp;<span class="op" id="8070583">!=</span>&nbsp;<span class="ident" id="8070586">e</span>&nbsp;<span class="op" id="8070588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070592">t</span><span class="op" id="8070593">.</span><span class="ident" id="8070594">Errorf</span><span class="op" id="8070600">(</span><span class="string" id="8070601">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8070621">,</span>&nbsp;<span class="ident" id="8070623">g</span><span class="op" id="8070624">,</span>&nbsp;<span class="ident" id="8070626">e</span><span class="op" id="8070627">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8070630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8070633">if</span>&nbsp;<span class="ident" id="8070636">g</span><span class="op" id="8070637">,</span>&nbsp;<span class="ident" id="8070639">e</span>&nbsp;<span class="op" id="8070641">:=</span>&nbsp;<span class="ident" id="8070644">h</span><span class="op" id="8070645">.</span><span class="ident" id="8070646">ModTime</span><span class="op" id="8070653">,</span>&nbsp;<span class="ident" id="8070655">fi</span><span class="op" id="8070657">.</span><span class="ident" id="8070658">ModTime</span><span class="op" id="8070665">(</span><span class="op" id="8070666">)</span><span class="op" id="8070667">;</span>&nbsp;<span class="op" id="8070669">!</span><span class="ident" id="8070670">g</span><span class="op" id="8070671">.</span><span class="ident" id="8070672">Equal</span><span class="op" id="8070677">(</span><span class="ident" id="8070678">e</span><span class="op" id="8070679">)</span>&nbsp;<span class="op" id="8070681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070685">t</span><span class="op" id="8070686">.</span><span class="ident" id="8070687">Errorf</span><span class="op" id="8070693">(</span><span class="string" id="8070694">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8070717">,</span>&nbsp;<span class="ident" id="8070719">g</span><span class="op" id="8070720">,</span>&nbsp;<span class="ident" id="8070722">e</span><span class="op" id="8070723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8070726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8070729">//&nbsp;FileInfoHeader&nbsp;should&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;FileInfo</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8070787">if</span>&nbsp;<span class="ident" id="8070790">_</span><span class="op" id="8070791">,</span>&nbsp;<span class="ident" id="8070793">err</span>&nbsp;<span class="op" id="8070797">:=</span>&nbsp;<span class="ident" id="8070800">FileInfoHeader</span><span class="op" id="8070814">(</span><span class="ident" id="8070815">nil</span><span class="op" id="8070818">,</span>&nbsp;<span class="string" id="8070820">&#34;&#34;</span><span class="op" id="8070822">)</span><span class="op" id="8070823">;</span>&nbsp;<span class="ident" id="8070825">err</span>&nbsp;<span class="op" id="8070829">==</span>&nbsp;<span class="ident" id="8070832">nil</span>&nbsp;<span class="op" id="8070836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070840">t</span><span class="op" id="8070841">.</span><span class="ident" id="8070842">Fatalf</span><span class="op" id="8070848">(</span><span class="string" id="8070849">&#34;Expected&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;to&nbsp;FileInfoHeader&#34;</span><span class="op" id="8070900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8070903">}</span><br>
<span class="lineno"></span><span class="op" id="8070905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8070908">func</span>&nbsp;<span class="ident" id="8070913">TestFileInfoHeaderDir</span><span class="op" id="8070934">(</span><span class="ident" id="8070935">t</span>&nbsp;<span class="op" id="8070937">*</span><span class="ident" id="8070938">testing</span><span class="op" id="8070945">.</span><span class="ident" id="8070946">T</span><span class="op" id="8070947">)</span>&nbsp;<span class="op" id="8070949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8070952">fi</span><span class="op" id="8070954">,</span>&nbsp;<span class="ident" id="8070956">err</span>&nbsp;<span class="op" id="8070960">:=</span>&nbsp;<span class="ident" id="8070963">os</span><span class="op" id="8070965">.</span><span class="ident" id="8070966">Stat</span><span class="op" id="8070970">(</span><span class="string" id="8070971">&#34;testdata&#34;</span><span class="op" id="8070981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8070984">if</span>&nbsp;<span class="ident" id="8070987">err</span>&nbsp;<span class="op" id="8070991">!=</span>&nbsp;<span class="ident" id="8070994">nil</span>&nbsp;<span class="op" id="8070998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071002">t</span><span class="op" id="8071003">.</span><span class="ident" id="8071004">Fatal</span><span class="op" id="8071009">(</span><span class="ident" id="8071010">err</span><span class="op" id="8071013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8071016">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071019">h</span><span class="op" id="8071020">,</span>&nbsp;<span class="ident" id="8071022">err</span>&nbsp;<span class="op" id="8071026">:=</span>&nbsp;<span class="ident" id="8071029">FileInfoHeader</span><span class="op" id="8071043">(</span><span class="ident" id="8071044">fi</span><span class="op" id="8071046">,</span>&nbsp;<span class="string" id="8071048">&#34;&#34;</span><span class="op" id="8071050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8071053">if</span>&nbsp;<span class="ident" id="8071056">err</span>&nbsp;<span class="op" id="8071060">!=</span>&nbsp;<span class="ident" id="8071063">nil</span>&nbsp;<span class="op" id="8071067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071071">t</span><span class="op" id="8071072">.</span><span class="ident" id="8071073">Fatalf</span><span class="op" id="8071079">(</span><span class="string" id="8071080">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="8071100">,</span>&nbsp;<span class="ident" id="8071102">err</span><span class="op" id="8071105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8071108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8071111">if</span>&nbsp;<span class="ident" id="8071114">g</span><span class="op" id="8071115">,</span>&nbsp;<span class="ident" id="8071117">e</span>&nbsp;<span class="op" id="8071119">:=</span>&nbsp;<span class="ident" id="8071122">h</span><span class="op" id="8071123">.</span><span class="ident" id="8071124">Name</span><span class="op" id="8071128">,</span>&nbsp;<span class="string" id="8071130">&#34;testdata/&#34;</span><span class="op" id="8071141">;</span>&nbsp;<span class="ident" id="8071143">g</span>&nbsp;<span class="op" id="8071145">!=</span>&nbsp;<span class="ident" id="8071148">e</span>&nbsp;<span class="op" id="8071150">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071154">t</span><span class="op" id="8071155">.</span><span class="ident" id="8071156">Errorf</span><span class="op" id="8071162">(</span><span class="string" id="8071163">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8071183">,</span>&nbsp;<span class="ident" id="8071185">g</span><span class="op" id="8071186">,</span>&nbsp;<span class="ident" id="8071188">e</span><span class="op" id="8071189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8071192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8071195">//&nbsp;Ignoring&nbsp;c_ISGID&nbsp;for&nbsp;golang.org/issue/4867</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8071242">if</span>&nbsp;<span class="ident" id="8071245">g</span><span class="op" id="8071246">,</span>&nbsp;<span class="ident" id="8071248">e</span>&nbsp;<span class="op" id="8071250">:=</span>&nbsp;<span class="ident" id="8071253">h</span><span class="op" id="8071254">.</span><span class="ident" id="8071255">Mode</span><span class="op" id="8071259">&amp;^</span><span class="ident" id="8071261">c_ISGID</span><span class="op" id="8071268">,</span>&nbsp;<span class="ident" id="8071270">int64</span><span class="op" id="8071275">(</span><span class="ident" id="8071276">fi</span><span class="op" id="8071278">.</span><span class="ident" id="8071279">Mode</span><span class="op" id="8071283">(</span><span class="op" id="8071284">)</span><span class="op" id="8071285">.</span><span class="ident" id="8071286">Perm</span><span class="op" id="8071290">(</span><span class="op" id="8071291">)</span><span class="op" id="8071292">)</span><span class="op" id="8071293">|</span><span class="ident" id="8071294">c_ISDIR</span><span class="op" id="8071301">;</span>&nbsp;<span class="ident" id="8071303">g</span>&nbsp;<span class="op" id="8071305">!=</span>&nbsp;<span class="ident" id="8071308">e</span>&nbsp;<span class="op" id="8071310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071314">t</span><span class="op" id="8071315">.</span><span class="ident" id="8071316">Errorf</span><span class="op" id="8071322">(</span><span class="string" id="8071323">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="8071345">,</span>&nbsp;<span class="ident" id="8071347">g</span><span class="op" id="8071348">,</span>&nbsp;<span class="ident" id="8071350">e</span><span class="op" id="8071351">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8071354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8071357">if</span>&nbsp;<span class="ident" id="8071360">g</span><span class="op" id="8071361">,</span>&nbsp;<span class="ident" id="8071363">e</span>&nbsp;<span class="op" id="8071365">:=</span>&nbsp;<span class="ident" id="8071368">h</span><span class="op" id="8071369">.</span><span class="ident" id="8071370">Size</span><span class="op" id="8071374">,</span>&nbsp;<span class="ident" id="8071376">int64</span><span class="op" id="8071381">(</span><span class="num" id="8071382">0</span><span class="op" id="8071383">)</span><span class="op" id="8071384">;</span>&nbsp;<span class="ident" id="8071386">g</span>&nbsp;<span class="op" id="8071388">!=</span>&nbsp;<span class="ident" id="8071391">e</span>&nbsp;<span class="op" id="8071393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071397">t</span><span class="op" id="8071398">.</span><span class="ident" id="8071399">Errorf</span><span class="op" id="8071405">(</span><span class="string" id="8071406">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8071426">,</span>&nbsp;<span class="ident" id="8071428">g</span><span class="op" id="8071429">,</span>&nbsp;<span class="ident" id="8071431">e</span><span class="op" id="8071432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8071435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8071438">if</span>&nbsp;<span class="ident" id="8071441">g</span><span class="op" id="8071442">,</span>&nbsp;<span class="ident" id="8071444">e</span>&nbsp;<span class="op" id="8071446">:=</span>&nbsp;<span class="ident" id="8071449">h</span><span class="op" id="8071450">.</span><span class="ident" id="8071451">ModTime</span><span class="op" id="8071458">,</span>&nbsp;<span class="ident" id="8071460">fi</span><span class="op" id="8071462">.</span><span class="ident" id="8071463">ModTime</span><span class="op" id="8071470">(</span><span class="op" id="8071471">)</span><span class="op" id="8071472">;</span>&nbsp;<span class="op" id="8071474">!</span><span class="ident" id="8071475">g</span><span class="op" id="8071476">.</span><span class="ident" id="8071477">Equal</span><span class="op" id="8071482">(</span><span class="ident" id="8071483">e</span><span class="op" id="8071484">)</span>&nbsp;<span class="op" id="8071486">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071490">t</span><span class="op" id="8071491">.</span><span class="ident" id="8071492">Errorf</span><span class="op" id="8071498">(</span><span class="string" id="8071499">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8071522">,</span>&nbsp;<span class="ident" id="8071524">g</span><span class="op" id="8071525">,</span>&nbsp;<span class="ident" id="8071527">e</span><span class="op" id="8071528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8071531">}</span><br>
<span class="lineno"></span><span class="op" id="8071533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8071536">func</span>&nbsp;<span class="ident" id="8071541">TestFileInfoHeaderSymlink</span><span class="op" id="8071566">(</span><span class="ident" id="8071567">t</span>&nbsp;<span class="op" id="8071569">*</span><span class="ident" id="8071570">testing</span><span class="op" id="8071577">.</span><span class="ident" id="8071578">T</span><span class="op" id="8071579">)</span>&nbsp;<span class="op" id="8071581">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071584">h</span><span class="op" id="8071585">,</span>&nbsp;<span class="ident" id="8071587">err</span>&nbsp;<span class="op" id="8071591">:=</span>&nbsp;<span class="ident" id="8071594">FileInfoHeader</span><span class="op" id="8071608">(</span><span class="ident" id="8071609">symlink</span><span class="op" id="8071616">{</span><span class="op" id="8071617">}</span><span class="op" id="8071618">,</span>&nbsp;<span class="string" id="8071620">&#34;some-target&#34;</span><span class="op" id="8071633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8071636">if</span>&nbsp;<span class="ident" id="8071639">err</span>&nbsp;<span class="op" id="8071643">!=</span>&nbsp;<span class="ident" id="8071646">nil</span>&nbsp;<span class="op" id="8071650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071654">t</span><span class="op" id="8071655">.</span><span class="ident" id="8071656">Fatal</span><span class="op" id="8071661">(</span><span class="ident" id="8071662">err</span><span class="op" id="8071665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8071668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8071671">if</span>&nbsp;<span class="ident" id="8071674">g</span><span class="op" id="8071675">,</span>&nbsp;<span class="ident" id="8071677">e</span>&nbsp;<span class="op" id="8071679">:=</span>&nbsp;<span class="ident" id="8071682">h</span><span class="op" id="8071683">.</span><span class="ident" id="8071684">Name</span><span class="op" id="8071688">,</span>&nbsp;<span class="string" id="8071690">&#34;some-symlink&#34;</span><span class="op" id="8071704">;</span>&nbsp;<span class="ident" id="8071706">g</span>&nbsp;<span class="op" id="8071708">!=</span>&nbsp;<span class="ident" id="8071711">e</span>&nbsp;<span class="op" id="8071713">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071717">t</span><span class="op" id="8071718">.</span><span class="ident" id="8071719">Errorf</span><span class="op" id="8071725">(</span><span class="string" id="8071726">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8071746">,</span>&nbsp;<span class="ident" id="8071748">g</span><span class="op" id="8071749">,</span>&nbsp;<span class="ident" id="8071751">e</span><span class="op" id="8071752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8071755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8071758">if</span>&nbsp;<span class="ident" id="8071761">g</span><span class="op" id="8071762">,</span>&nbsp;<span class="ident" id="8071764">e</span>&nbsp;<span class="op" id="8071766">:=</span>&nbsp;<span class="ident" id="8071769">h</span><span class="op" id="8071770">.</span><span class="ident" id="8071771">Linkname</span><span class="op" id="8071779">,</span>&nbsp;<span class="string" id="8071781">&#34;some-target&#34;</span><span class="op" id="8071794">;</span>&nbsp;<span class="ident" id="8071796">g</span>&nbsp;<span class="op" id="8071798">!=</span>&nbsp;<span class="ident" id="8071801">e</span>&nbsp;<span class="op" id="8071803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8071807">t</span><span class="op" id="8071808">.</span><span class="ident" id="8071809">Errorf</span><span class="op" id="8071815">(</span><span class="string" id="8071816">&#34;Linkname&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8071840">,</span>&nbsp;<span class="ident" id="8071842">g</span><span class="op" id="8071843">,</span>&nbsp;<span class="ident" id="8071845">e</span><span class="op" id="8071846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8071849">}</span><br>
<span class="lineno">80</span><span class="op" id="8071851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8071854">type</span>&nbsp;<span class="ident" id="8071859">symlink</span>&nbsp;<span class="keyword" id="8071867">struct</span><span class="op" id="8071873">{</span><span class="op" id="8071874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8071877">func</span>&nbsp;<span class="op" id="8071882">(</span><span class="ident" id="8071883">symlink</span><span class="op" id="8071890">)</span>&nbsp;<span class="ident" id="8071892">Name</span><span class="op" id="8071896">(</span><span class="op" id="8071897">)</span>&nbsp;<span class="builtintype" id="8071899">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8071912">{</span>&nbsp;<span class="keyword" id="8071914">return</span>&nbsp;<span class="string" id="8071921">&#34;some-symlink&#34;</span>&nbsp;<span class="op" id="8071936">}</span><br>
<span class="lineno">85</span><span class="keyword" id="8071938">func</span>&nbsp;<span class="op" id="8071943">(</span><span class="ident" id="8071944">symlink</span><span class="op" id="8071951">)</span>&nbsp;<span class="ident" id="8071953">Size</span><span class="op" id="8071957">(</span><span class="op" id="8071958">)</span>&nbsp;<span class="ident" id="8071960">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8071973">{</span>&nbsp;<span class="keyword" id="8071975">return</span>&nbsp;<span class="num" id="8071982">0</span>&nbsp;<span class="op" id="8071984">}</span><br>
<span class="lineno"></span><span class="keyword" id="8071986">func</span>&nbsp;<span class="op" id="8071991">(</span><span class="ident" id="8071992">symlink</span><span class="op" id="8071999">)</span>&nbsp;<span class="ident" id="8072001">Mode</span><span class="op" id="8072005">(</span><span class="op" id="8072006">)</span>&nbsp;<span class="ident" id="8072008">os</span><span class="op" id="8072010">.</span><span class="ident" id="8072011">FileMode</span>&nbsp;&nbsp;<span class="op" id="8072021">{</span>&nbsp;<span class="keyword" id="8072023">return</span>&nbsp;<span class="ident" id="8072030">os</span><span class="op" id="8072032">.</span><span class="ident" id="8072033">ModeSymlink</span>&nbsp;<span class="op" id="8072045">}</span><br>
<span class="lineno"></span><span class="keyword" id="8072047">func</span>&nbsp;<span class="op" id="8072052">(</span><span class="ident" id="8072053">symlink</span><span class="op" id="8072060">)</span>&nbsp;<span class="ident" id="8072062">ModTime</span><span class="op" id="8072069">(</span><span class="op" id="8072070">)</span>&nbsp;<span class="ident" id="8072072">time</span><span class="op" id="8072076">.</span><span class="ident" id="8072077">Time</span>&nbsp;<span class="op" id="8072082">{</span>&nbsp;<span class="keyword" id="8072084">return</span>&nbsp;<span class="ident" id="8072091">time</span><span class="op" id="8072095">.</span><span class="ident" id="8072096">Time</span><span class="op" id="8072100">{</span><span class="op" id="8072101">}</span>&nbsp;<span class="op" id="8072103">}</span><br>
<span class="lineno"></span><span class="keyword" id="8072105">func</span>&nbsp;<span class="op" id="8072110">(</span><span class="ident" id="8072111">symlink</span><span class="op" id="8072118">)</span>&nbsp;<span class="ident" id="8072120">IsDir</span><span class="op" id="8072125">(</span><span class="op" id="8072126">)</span>&nbsp;<span class="builtintype" id="8072128">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8072140">{</span>&nbsp;<span class="keyword" id="8072142">return</span>&nbsp;<span class="builtintype" id="8072149">false</span>&nbsp;<span class="op" id="8072155">}</span><br>
<span class="lineno"></span><span class="keyword" id="8072157">func</span>&nbsp;<span class="op" id="8072162">(</span><span class="ident" id="8072163">symlink</span><span class="op" id="8072170">)</span>&nbsp;<span class="ident" id="8072172">Sys</span><span class="op" id="8072175">(</span><span class="op" id="8072176">)</span>&nbsp;<span class="keyword" id="8072178">interface</span><span class="op" id="8072187">{</span><span class="op" id="8072188">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8072192">{</span>&nbsp;<span class="keyword" id="8072194">return</span>&nbsp;<span class="ident" id="8072201">nil</span>&nbsp;<span class="op" id="8072205">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="8072208">func</span>&nbsp;<span class="ident" id="8072213">TestRoundTrip</span><span class="op" id="8072226">(</span><span class="ident" id="8072227">t</span>&nbsp;<span class="op" id="8072229">*</span><span class="ident" id="8072230">testing</span><span class="op" id="8072237">.</span><span class="ident" id="8072238">T</span><span class="op" id="8072239">)</span>&nbsp;<span class="op" id="8072241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072244">data</span>&nbsp;<span class="op" id="8072249">:=</span>&nbsp;<span class="op" id="8072252">[</span><span class="op" id="8072253">]</span><span class="builtintype" id="8072254">byte</span><span class="op" id="8072258">(</span><span class="string" id="8072259">&#34;some&nbsp;file&nbsp;contents&#34;</span><span class="op" id="8072279">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8072283">var</span>&nbsp;<span class="ident" id="8072287">b</span>&nbsp;<span class="ident" id="8072289">bytes</span><span class="op" id="8072294">.</span><span class="ident" id="8072295">Buffer</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072303">tw</span>&nbsp;<span class="op" id="8072306">:=</span>&nbsp;<span class="ident" id="8072309">NewWriter</span><span class="op" id="8072318">(</span><span class="op" id="8072319">&amp;</span><span class="ident" id="8072320">b</span><span class="op" id="8072321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072324">hdr</span>&nbsp;<span class="op" id="8072328">:=</span>&nbsp;<span class="op" id="8072331">&amp;</span><span class="ident" id="8072332">Header</span><span class="op" id="8072338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072342">Name</span><span class="op" id="8072346">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8072351">&#34;file.txt&#34;</span><span class="op" id="8072361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072365">Uid</span><span class="op" id="8072368">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8072374">1</span>&nbsp;<span class="op" id="8072376">&lt;&lt;</span>&nbsp;<span class="num" id="8072379">21</span><span class="op" id="8072381">,</span>&nbsp;<span class="comment" id="8072383">//&nbsp;too&nbsp;big&nbsp;for&nbsp;8&nbsp;octal&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072415">Size</span><span class="op" id="8072419">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8072424">int64</span><span class="op" id="8072429">(</span><span class="builtinfunc" id="8072430">len</span><span class="op" id="8072433">(</span><span class="ident" id="8072434">data</span><span class="op" id="8072438">)</span><span class="op" id="8072439">)</span><span class="op" id="8072440">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072444">ModTime</span><span class="op" id="8072451">:</span>&nbsp;<span class="ident" id="8072453">time</span><span class="op" id="8072457">.</span><span class="ident" id="8072458">Now</span><span class="op" id="8072461">(</span><span class="op" id="8072462">)</span><span class="op" id="8072463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8072466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8072469">//&nbsp;tar&nbsp;only&nbsp;supports&nbsp;second&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072509">hdr</span><span class="op" id="8072512">.</span><span class="ident" id="8072513">ModTime</span>&nbsp;<span class="op" id="8072521">=</span>&nbsp;<span class="ident" id="8072523">hdr</span><span class="op" id="8072526">.</span><span class="ident" id="8072527">ModTime</span><span class="op" id="8072534">.</span><span class="ident" id="8072535">Add</span><span class="op" id="8072538">(</span><span class="op" id="8072539">-</span><span class="ident" id="8072540">time</span><span class="op" id="8072544">.</span><span class="ident" id="8072545">Duration</span><span class="op" id="8072553">(</span><span class="ident" id="8072554">hdr</span><span class="op" id="8072557">.</span><span class="ident" id="8072558">ModTime</span><span class="op" id="8072565">.</span><span class="ident" id="8072566">Nanosecond</span><span class="op" id="8072576">(</span><span class="op" id="8072577">)</span><span class="op" id="8072578">)</span>&nbsp;<span class="op" id="8072580">*</span>&nbsp;<span class="ident" id="8072582">time</span><span class="op" id="8072586">.</span><span class="ident" id="8072587">Nanosecond</span><span class="op" id="8072597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8072600">if</span>&nbsp;<span class="ident" id="8072603">err</span>&nbsp;<span class="op" id="8072607">:=</span>&nbsp;<span class="ident" id="8072610">tw</span><span class="op" id="8072612">.</span><span class="ident" id="8072613">WriteHeader</span><span class="op" id="8072624">(</span><span class="ident" id="8072625">hdr</span><span class="op" id="8072628">)</span><span class="op" id="8072629">;</span>&nbsp;<span class="ident" id="8072631">err</span>&nbsp;<span class="op" id="8072635">!=</span>&nbsp;<span class="ident" id="8072638">nil</span>&nbsp;<span class="op" id="8072642">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072646">t</span><span class="op" id="8072647">.</span><span class="ident" id="8072648">Fatalf</span><span class="op" id="8072654">(</span><span class="string" id="8072655">&#34;tw.WriteHeader:&nbsp;%v&#34;</span><span class="op" id="8072675">,</span>&nbsp;<span class="ident" id="8072677">err</span><span class="op" id="8072680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8072683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8072686">if</span>&nbsp;<span class="ident" id="8072689">_</span><span class="op" id="8072690">,</span>&nbsp;<span class="ident" id="8072692">err</span>&nbsp;<span class="op" id="8072696">:=</span>&nbsp;<span class="ident" id="8072699">tw</span><span class="op" id="8072701">.</span><span class="ident" id="8072702">Write</span><span class="op" id="8072707">(</span><span class="ident" id="8072708">data</span><span class="op" id="8072712">)</span><span class="op" id="8072713">;</span>&nbsp;<span class="ident" id="8072715">err</span>&nbsp;<span class="op" id="8072719">!=</span>&nbsp;<span class="ident" id="8072722">nil</span>&nbsp;<span class="op" id="8072726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072730">t</span><span class="op" id="8072731">.</span><span class="ident" id="8072732">Fatalf</span><span class="op" id="8072738">(</span><span class="string" id="8072739">&#34;tw.Write:&nbsp;%v&#34;</span><span class="op" id="8072753">,</span>&nbsp;<span class="ident" id="8072755">err</span><span class="op" id="8072758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8072761">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8072764">if</span>&nbsp;<span class="ident" id="8072767">err</span>&nbsp;<span class="op" id="8072771">:=</span>&nbsp;<span class="ident" id="8072774">tw</span><span class="op" id="8072776">.</span><span class="ident" id="8072777">Close</span><span class="op" id="8072782">(</span><span class="op" id="8072783">)</span><span class="op" id="8072784">;</span>&nbsp;<span class="ident" id="8072786">err</span>&nbsp;<span class="op" id="8072790">!=</span>&nbsp;<span class="ident" id="8072793">nil</span>&nbsp;<span class="op" id="8072797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072801">t</span><span class="op" id="8072802">.</span><span class="ident" id="8072803">Fatalf</span><span class="op" id="8072809">(</span><span class="string" id="8072810">&#34;tw.Close:&nbsp;%v&#34;</span><span class="op" id="8072824">,</span>&nbsp;<span class="ident" id="8072826">err</span><span class="op" id="8072829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8072832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8072836">//&nbsp;Read&nbsp;it&nbsp;back.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072854">tr</span>&nbsp;<span class="op" id="8072857">:=</span>&nbsp;<span class="ident" id="8072860">NewReader</span><span class="op" id="8072869">(</span><span class="op" id="8072870">&amp;</span><span class="ident" id="8072871">b</span><span class="op" id="8072872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072875">rHdr</span><span class="op" id="8072879">,</span>&nbsp;<span class="ident" id="8072881">err</span>&nbsp;<span class="op" id="8072885">:=</span>&nbsp;<span class="ident" id="8072888">tr</span><span class="op" id="8072890">.</span><span class="ident" id="8072891">Next</span><span class="op" id="8072895">(</span><span class="op" id="8072896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8072899">if</span>&nbsp;<span class="ident" id="8072902">err</span>&nbsp;<span class="op" id="8072906">!=</span>&nbsp;<span class="ident" id="8072909">nil</span>&nbsp;<span class="op" id="8072913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072917">t</span><span class="op" id="8072918">.</span><span class="ident" id="8072919">Fatalf</span><span class="op" id="8072925">(</span><span class="string" id="8072926">&#34;tr.Next:&nbsp;%v&#34;</span><span class="op" id="8072939">,</span>&nbsp;<span class="ident" id="8072941">err</span><span class="op" id="8072944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8072947">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8072950">if</span>&nbsp;<span class="op" id="8072953">!</span><span class="ident" id="8072954">reflect</span><span class="op" id="8072961">.</span><span class="ident" id="8072962">DeepEqual</span><span class="op" id="8072971">(</span><span class="ident" id="8072972">rHdr</span><span class="op" id="8072976">,</span>&nbsp;<span class="ident" id="8072978">hdr</span><span class="op" id="8072981">)</span>&nbsp;<span class="op" id="8072983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8072987">t</span><span class="op" id="8072988">.</span><span class="ident" id="8072989">Errorf</span><span class="op" id="8072995">(</span><span class="string" id="8072996">&#34;Header&nbsp;mismatch.\n&nbsp;got&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8073034">,</span>&nbsp;<span class="ident" id="8073036">rHdr</span><span class="op" id="8073040">,</span>&nbsp;<span class="ident" id="8073042">hdr</span><span class="op" id="8073045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073051">rData</span><span class="op" id="8073056">,</span>&nbsp;<span class="ident" id="8073058">err</span>&nbsp;<span class="op" id="8073062">:=</span>&nbsp;<span class="ident" id="8073065">ioutil</span><span class="op" id="8073071">.</span><span class="ident" id="8073072">ReadAll</span><span class="op" id="8073079">(</span><span class="ident" id="8073080">tr</span><span class="op" id="8073082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8073085">if</span>&nbsp;<span class="ident" id="8073088">err</span>&nbsp;<span class="op" id="8073092">!=</span>&nbsp;<span class="ident" id="8073095">nil</span>&nbsp;<span class="op" id="8073099">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073103">t</span><span class="op" id="8073104">.</span><span class="ident" id="8073105">Fatalf</span><span class="op" id="8073111">(</span><span class="string" id="8073112">&#34;Read:&nbsp;%v&#34;</span><span class="op" id="8073122">,</span>&nbsp;<span class="ident" id="8073124">err</span><span class="op" id="8073127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8073133">if</span>&nbsp;<span class="op" id="8073136">!</span><span class="ident" id="8073137">bytes</span><span class="op" id="8073142">.</span><span class="ident" id="8073143">Equal</span><span class="op" id="8073148">(</span><span class="ident" id="8073149">rData</span><span class="op" id="8073154">,</span>&nbsp;<span class="ident" id="8073156">data</span><span class="op" id="8073160">)</span>&nbsp;<span class="op" id="8073162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073166">t</span><span class="op" id="8073167">.</span><span class="ident" id="8073168">Errorf</span><span class="op" id="8073174">(</span><span class="string" id="8073175">&#34;Data&nbsp;mismatch.\n&nbsp;got&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="8073209">,</span>&nbsp;<span class="ident" id="8073211">rData</span><span class="op" id="8073216">,</span>&nbsp;<span class="ident" id="8073218">data</span><span class="op" id="8073222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073225">}</span><br>
<span class="lineno">130</span><span class="op" id="8073227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8073230">type</span>&nbsp;<span class="ident" id="8073235">headerRoundTripTest</span>&nbsp;<span class="keyword" id="8073255">struct</span>&nbsp;<span class="op" id="8073262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073265">h</span>&nbsp;&nbsp;<span class="op" id="8073268">*</span><span class="ident" id="8073269">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073277">fm</span>&nbsp;<span class="ident" id="8073280">os</span><span class="op" id="8073282">.</span><span class="ident" id="8073283">FileMode</span><br>
<span class="lineno">135</span><span class="op" id="8073292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8073295">func</span>&nbsp;<span class="ident" id="8073300">TestHeaderRoundTrip</span><span class="op" id="8073319">(</span><span class="ident" id="8073320">t</span>&nbsp;<span class="op" id="8073322">*</span><span class="ident" id="8073323">testing</span><span class="op" id="8073330">.</span><span class="ident" id="8073331">T</span><span class="op" id="8073332">)</span>&nbsp;<span class="op" id="8073334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073337">golden</span>&nbsp;<span class="op" id="8073344">:=</span>&nbsp;<span class="op" id="8073347">[</span><span class="op" id="8073348">]</span><span class="ident" id="8073349">headerRoundTripTest</span><span class="op" id="8073368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8073372">//&nbsp;regular&nbsp;file.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073396">h</span><span class="op" id="8073397">:</span>&nbsp;<span class="op" id="8073399">&amp;</span><span class="ident" id="8073400">Header</span><span class="op" id="8073406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073412">Name</span><span class="op" id="8073416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8073422">&#34;test.txt&#34;</span><span class="op" id="8073432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073438">Mode</span><span class="op" id="8073442">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8073448">0644</span>&nbsp;<span class="op" id="8073453">|</span>&nbsp;<span class="ident" id="8073455">c_ISREG</span><span class="op" id="8073462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073468">Size</span><span class="op" id="8073472">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8073478">12</span><span class="op" id="8073480">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073486">ModTime</span><span class="op" id="8073493">:</span>&nbsp;&nbsp;<span class="ident" id="8073496">time</span><span class="op" id="8073500">.</span><span class="ident" id="8073501">Unix</span><span class="op" id="8073505">(</span><span class="num" id="8073506">1360600916</span><span class="op" id="8073516">,</span>&nbsp;<span class="num" id="8073518">0</span><span class="op" id="8073519">)</span><span class="op" id="8073520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073526">Typeflag</span><span class="op" id="8073534">:</span>&nbsp;<span class="ident" id="8073536">TypeReg</span><span class="op" id="8073543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073548">}</span><span class="op" id="8073549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073554">fm</span><span class="op" id="8073556">:</span>&nbsp;<span class="num" id="8073558">0644</span><span class="op" id="8073562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073566">}</span><span class="op" id="8073567">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8073571">//&nbsp;hard&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073592">h</span><span class="op" id="8073593">:</span>&nbsp;<span class="op" id="8073595">&amp;</span><span class="ident" id="8073596">Header</span><span class="op" id="8073602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073608">Name</span><span class="op" id="8073612">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8073618">&#34;hard.txt&#34;</span><span class="op" id="8073628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073634">Mode</span><span class="op" id="8073638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8073644">0644</span>&nbsp;<span class="op" id="8073649">|</span>&nbsp;<span class="ident" id="8073651">c_ISLNK</span><span class="op" id="8073658">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073664">Size</span><span class="op" id="8073668">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8073674">0</span><span class="op" id="8073675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073681">ModTime</span><span class="op" id="8073688">:</span>&nbsp;&nbsp;<span class="ident" id="8073691">time</span><span class="op" id="8073695">.</span><span class="ident" id="8073696">Unix</span><span class="op" id="8073700">(</span><span class="num" id="8073701">1360600916</span><span class="op" id="8073711">,</span>&nbsp;<span class="num" id="8073713">0</span><span class="op" id="8073714">)</span><span class="op" id="8073715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073721">Typeflag</span><span class="op" id="8073729">:</span>&nbsp;<span class="ident" id="8073731">TypeLink</span><span class="op" id="8073739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073744">}</span><span class="op" id="8073745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073750">fm</span><span class="op" id="8073752">:</span>&nbsp;<span class="num" id="8073754">0644</span>&nbsp;<span class="op" id="8073759">|</span>&nbsp;<span class="ident" id="8073761">os</span><span class="op" id="8073763">.</span><span class="ident" id="8073764">ModeSymlink</span><span class="op" id="8073775">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073779">}</span><span class="op" id="8073780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8073784">//&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073809">h</span><span class="op" id="8073810">:</span>&nbsp;<span class="op" id="8073812">&amp;</span><span class="ident" id="8073813">Header</span><span class="op" id="8073819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073825">Name</span><span class="op" id="8073829">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8073835">&#34;link.txt&#34;</span><span class="op" id="8073845">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073851">Mode</span><span class="op" id="8073855">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8073861">0777</span>&nbsp;<span class="op" id="8073866">|</span>&nbsp;<span class="ident" id="8073868">c_ISLNK</span><span class="op" id="8073875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073881">Size</span><span class="op" id="8073885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8073891">0</span><span class="op" id="8073892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073898">ModTime</span><span class="op" id="8073905">:</span>&nbsp;&nbsp;<span class="ident" id="8073908">time</span><span class="op" id="8073912">.</span><span class="ident" id="8073913">Unix</span><span class="op" id="8073917">(</span><span class="num" id="8073918">1360600852</span><span class="op" id="8073928">,</span>&nbsp;<span class="num" id="8073930">0</span><span class="op" id="8073931">)</span><span class="op" id="8073932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073938">Typeflag</span><span class="op" id="8073946">:</span>&nbsp;<span class="ident" id="8073948">TypeSymlink</span><span class="op" id="8073959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073964">}</span><span class="op" id="8073965">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8073970">fm</span><span class="op" id="8073972">:</span>&nbsp;<span class="num" id="8073974">0777</span>&nbsp;<span class="op" id="8073979">|</span>&nbsp;<span class="ident" id="8073981">os</span><span class="op" id="8073983">.</span><span class="ident" id="8073984">ModeSymlink</span><span class="op" id="8073995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8073999">}</span><span class="op" id="8074000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8074004">//&nbsp;character&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074037">h</span><span class="op" id="8074038">:</span>&nbsp;<span class="op" id="8074040">&amp;</span><span class="ident" id="8074041">Header</span><span class="op" id="8074047">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074053">Name</span><span class="op" id="8074057">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8074063">&#34;dev/null&#34;</span><span class="op" id="8074073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074079">Mode</span><span class="op" id="8074083">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074089">0666</span>&nbsp;<span class="op" id="8074094">|</span>&nbsp;<span class="ident" id="8074096">c_ISCHR</span><span class="op" id="8074103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074109">Size</span><span class="op" id="8074113">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074119">0</span><span class="op" id="8074120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074126">ModTime</span><span class="op" id="8074133">:</span>&nbsp;&nbsp;<span class="ident" id="8074136">time</span><span class="op" id="8074140">.</span><span class="ident" id="8074141">Unix</span><span class="op" id="8074145">(</span><span class="num" id="8074146">1360578951</span><span class="op" id="8074156">,</span>&nbsp;<span class="num" id="8074158">0</span><span class="op" id="8074159">)</span><span class="op" id="8074160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074166">Typeflag</span><span class="op" id="8074174">:</span>&nbsp;<span class="ident" id="8074176">TypeChar</span><span class="op" id="8074184">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074189">}</span><span class="op" id="8074190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074195">fm</span><span class="op" id="8074197">:</span>&nbsp;<span class="num" id="8074199">0666</span>&nbsp;<span class="op" id="8074204">|</span>&nbsp;<span class="ident" id="8074206">os</span><span class="op" id="8074208">.</span><span class="ident" id="8074209">ModeDevice</span>&nbsp;<span class="op" id="8074220">|</span>&nbsp;<span class="ident" id="8074222">os</span><span class="op" id="8074224">.</span><span class="ident" id="8074225">ModeCharDevice</span><span class="op" id="8074239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074243">}</span><span class="op" id="8074244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8074248">//&nbsp;block&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074272">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074277">h</span><span class="op" id="8074278">:</span>&nbsp;<span class="op" id="8074280">&amp;</span><span class="ident" id="8074281">Header</span><span class="op" id="8074287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074293">Name</span><span class="op" id="8074297">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8074303">&#34;dev/sda&#34;</span><span class="op" id="8074312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074318">Mode</span><span class="op" id="8074322">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074328">0660</span>&nbsp;<span class="op" id="8074333">|</span>&nbsp;<span class="ident" id="8074335">c_ISBLK</span><span class="op" id="8074342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074348">Size</span><span class="op" id="8074352">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074358">0</span><span class="op" id="8074359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074365">ModTime</span><span class="op" id="8074372">:</span>&nbsp;&nbsp;<span class="ident" id="8074375">time</span><span class="op" id="8074379">.</span><span class="ident" id="8074380">Unix</span><span class="op" id="8074384">(</span><span class="num" id="8074385">1360578954</span><span class="op" id="8074395">,</span>&nbsp;<span class="num" id="8074397">0</span><span class="op" id="8074398">)</span><span class="op" id="8074399">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074405">Typeflag</span><span class="op" id="8074413">:</span>&nbsp;<span class="ident" id="8074415">TypeBlock</span><span class="op" id="8074424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074429">}</span><span class="op" id="8074430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074435">fm</span><span class="op" id="8074437">:</span>&nbsp;<span class="num" id="8074439">0660</span>&nbsp;<span class="op" id="8074444">|</span>&nbsp;<span class="ident" id="8074446">os</span><span class="op" id="8074448">.</span><span class="ident" id="8074449">ModeDevice</span><span class="op" id="8074459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074463">}</span><span class="op" id="8074464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8074468">//&nbsp;directory.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074489">h</span><span class="op" id="8074490">:</span>&nbsp;<span class="op" id="8074492">&amp;</span><span class="ident" id="8074493">Header</span><span class="op" id="8074499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074505">Name</span><span class="op" id="8074509">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8074515">&#34;dir/&#34;</span><span class="op" id="8074521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074527">Mode</span><span class="op" id="8074531">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074537">0755</span>&nbsp;<span class="op" id="8074542">|</span>&nbsp;<span class="ident" id="8074544">c_ISDIR</span><span class="op" id="8074551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074557">Size</span><span class="op" id="8074561">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074567">0</span><span class="op" id="8074568">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074574">ModTime</span><span class="op" id="8074581">:</span>&nbsp;&nbsp;<span class="ident" id="8074584">time</span><span class="op" id="8074588">.</span><span class="ident" id="8074589">Unix</span><span class="op" id="8074593">(</span><span class="num" id="8074594">1360601116</span><span class="op" id="8074604">,</span>&nbsp;<span class="num" id="8074606">0</span><span class="op" id="8074607">)</span><span class="op" id="8074608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074614">Typeflag</span><span class="op" id="8074622">:</span>&nbsp;<span class="ident" id="8074624">TypeDir</span><span class="op" id="8074631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074636">}</span><span class="op" id="8074637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074642">fm</span><span class="op" id="8074644">:</span>&nbsp;<span class="num" id="8074646">0755</span>&nbsp;<span class="op" id="8074651">|</span>&nbsp;<span class="ident" id="8074653">os</span><span class="op" id="8074655">.</span><span class="ident" id="8074656">ModeDir</span><span class="op" id="8074663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074667">}</span><span class="op" id="8074668">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8074672">//&nbsp;fifo&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074693">h</span><span class="op" id="8074694">:</span>&nbsp;<span class="op" id="8074696">&amp;</span><span class="ident" id="8074697">Header</span><span class="op" id="8074703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074709">Name</span><span class="op" id="8074713">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8074719">&#34;dev/initctl&#34;</span><span class="op" id="8074732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074738">Mode</span><span class="op" id="8074742">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074748">0600</span>&nbsp;<span class="op" id="8074753">|</span>&nbsp;<span class="ident" id="8074755">c_ISFIFO</span><span class="op" id="8074763">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074769">Size</span><span class="op" id="8074773">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074779">0</span><span class="op" id="8074780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074786">ModTime</span><span class="op" id="8074793">:</span>&nbsp;&nbsp;<span class="ident" id="8074796">time</span><span class="op" id="8074800">.</span><span class="ident" id="8074801">Unix</span><span class="op" id="8074805">(</span><span class="num" id="8074806">1360578949</span><span class="op" id="8074816">,</span>&nbsp;<span class="num" id="8074818">0</span><span class="op" id="8074819">)</span><span class="op" id="8074820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074826">Typeflag</span><span class="op" id="8074834">:</span>&nbsp;<span class="ident" id="8074836">TypeFifo</span><span class="op" id="8074844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074849">}</span><span class="op" id="8074850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074855">fm</span><span class="op" id="8074857">:</span>&nbsp;<span class="num" id="8074859">0600</span>&nbsp;<span class="op" id="8074864">|</span>&nbsp;<span class="ident" id="8074866">os</span><span class="op" id="8074868">.</span><span class="ident" id="8074869">ModeNamedPipe</span><span class="op" id="8074882">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074886">}</span><span class="op" id="8074887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8074891">//&nbsp;setuid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8074904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074909">h</span><span class="op" id="8074910">:</span>&nbsp;<span class="op" id="8074912">&amp;</span><span class="ident" id="8074913">Header</span><span class="op" id="8074919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074925">Name</span><span class="op" id="8074929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8074935">&#34;bin/su&#34;</span><span class="op" id="8074943">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074949">Mode</span><span class="op" id="8074953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074959">0755</span>&nbsp;<span class="op" id="8074964">|</span>&nbsp;<span class="ident" id="8074966">c_ISREG</span>&nbsp;<span class="op" id="8074974">|</span>&nbsp;<span class="ident" id="8074976">c_ISUID</span><span class="op" id="8074983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8074989">Size</span><span class="op" id="8074993">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8074999">23232</span><span class="op" id="8075004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075010">ModTime</span><span class="op" id="8075017">:</span>&nbsp;&nbsp;<span class="ident" id="8075020">time</span><span class="op" id="8075024">.</span><span class="ident" id="8075025">Unix</span><span class="op" id="8075029">(</span><span class="num" id="8075030">1355405093</span><span class="op" id="8075040">,</span>&nbsp;<span class="num" id="8075042">0</span><span class="op" id="8075043">)</span><span class="op" id="8075044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075050">Typeflag</span><span class="op" id="8075058">:</span>&nbsp;<span class="ident" id="8075060">TypeReg</span><span class="op" id="8075067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075072">}</span><span class="op" id="8075073">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075078">fm</span><span class="op" id="8075080">:</span>&nbsp;<span class="num" id="8075082">0755</span>&nbsp;<span class="op" id="8075087">|</span>&nbsp;<span class="ident" id="8075089">os</span><span class="op" id="8075091">.</span><span class="ident" id="8075092">ModeSetuid</span><span class="op" id="8075102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075106">}</span><span class="op" id="8075107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8075111">//&nbsp;setguid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075130">h</span><span class="op" id="8075131">:</span>&nbsp;<span class="op" id="8075133">&amp;</span><span class="ident" id="8075134">Header</span><span class="op" id="8075140">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075146">Name</span><span class="op" id="8075150">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8075156">&#34;group.txt&#34;</span><span class="op" id="8075167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075173">Mode</span><span class="op" id="8075177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8075183">0750</span>&nbsp;<span class="op" id="8075188">|</span>&nbsp;<span class="ident" id="8075190">c_ISREG</span>&nbsp;<span class="op" id="8075198">|</span>&nbsp;<span class="ident" id="8075200">c_ISGID</span><span class="op" id="8075207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075213">Size</span><span class="op" id="8075217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8075223">0</span><span class="op" id="8075224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075230">ModTime</span><span class="op" id="8075237">:</span>&nbsp;&nbsp;<span class="ident" id="8075240">time</span><span class="op" id="8075244">.</span><span class="ident" id="8075245">Unix</span><span class="op" id="8075249">(</span><span class="num" id="8075250">1360602346</span><span class="op" id="8075260">,</span>&nbsp;<span class="num" id="8075262">0</span><span class="op" id="8075263">)</span><span class="op" id="8075264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075270">Typeflag</span><span class="op" id="8075278">:</span>&nbsp;<span class="ident" id="8075280">TypeReg</span><span class="op" id="8075287">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075292">}</span><span class="op" id="8075293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075298">fm</span><span class="op" id="8075300">:</span>&nbsp;<span class="num" id="8075302">0750</span>&nbsp;<span class="op" id="8075307">|</span>&nbsp;<span class="ident" id="8075309">os</span><span class="op" id="8075311">.</span><span class="ident" id="8075312">ModeSetgid</span><span class="op" id="8075322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075326">}</span><span class="op" id="8075327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8075331">//&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075344">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075349">h</span><span class="op" id="8075350">:</span>&nbsp;<span class="op" id="8075352">&amp;</span><span class="ident" id="8075353">Header</span><span class="op" id="8075359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075365">Name</span><span class="op" id="8075369">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8075375">&#34;sticky.txt&#34;</span><span class="op" id="8075387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075393">Mode</span><span class="op" id="8075397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8075403">0600</span>&nbsp;<span class="op" id="8075408">|</span>&nbsp;<span class="ident" id="8075410">c_ISREG</span>&nbsp;<span class="op" id="8075418">|</span>&nbsp;<span class="ident" id="8075420">c_ISVTX</span><span class="op" id="8075427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075433">Size</span><span class="op" id="8075437">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8075443">7</span><span class="op" id="8075444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075450">ModTime</span><span class="op" id="8075457">:</span>&nbsp;&nbsp;<span class="ident" id="8075460">time</span><span class="op" id="8075464">.</span><span class="ident" id="8075465">Unix</span><span class="op" id="8075469">(</span><span class="num" id="8075470">1360602540</span><span class="op" id="8075480">,</span>&nbsp;<span class="num" id="8075482">0</span><span class="op" id="8075483">)</span><span class="op" id="8075484">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075490">Typeflag</span><span class="op" id="8075498">:</span>&nbsp;<span class="ident" id="8075500">TypeReg</span><span class="op" id="8075507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075512">}</span><span class="op" id="8075513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075518">fm</span><span class="op" id="8075520">:</span>&nbsp;<span class="num" id="8075522">0600</span>&nbsp;<span class="op" id="8075527">|</span>&nbsp;<span class="ident" id="8075529">os</span><span class="op" id="8075531">.</span><span class="ident" id="8075532">ModeSticky</span><span class="op" id="8075542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075546">}</span><span class="op" id="8075547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075550">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8075554">for</span>&nbsp;<span class="ident" id="8075558">i</span><span class="op" id="8075559">,</span>&nbsp;<span class="ident" id="8075561">g</span>&nbsp;<span class="op" id="8075563">:=</span>&nbsp;<span class="keyword" id="8075566">range</span>&nbsp;<span class="ident" id="8075572">golden</span>&nbsp;<span class="op" id="8075579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075583">fi</span>&nbsp;<span class="op" id="8075586">:=</span>&nbsp;<span class="ident" id="8075589">g</span><span class="op" id="8075590">.</span><span class="ident" id="8075591">h</span><span class="op" id="8075592">.</span><span class="ident" id="8075593">FileInfo</span><span class="op" id="8075601">(</span><span class="op" id="8075602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075606">h2</span><span class="op" id="8075608">,</span>&nbsp;<span class="ident" id="8075610">err</span>&nbsp;<span class="op" id="8075614">:=</span>&nbsp;<span class="ident" id="8075617">FileInfoHeader</span><span class="op" id="8075631">(</span><span class="ident" id="8075632">fi</span><span class="op" id="8075634">,</span>&nbsp;<span class="string" id="8075636">&#34;&#34;</span><span class="op" id="8075638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8075642">if</span>&nbsp;<span class="ident" id="8075645">err</span>&nbsp;<span class="op" id="8075649">!=</span>&nbsp;<span class="ident" id="8075652">nil</span>&nbsp;<span class="op" id="8075656">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075661">t</span><span class="op" id="8075662">.</span><span class="ident" id="8075663">Error</span><span class="op" id="8075668">(</span><span class="ident" id="8075669">err</span><span class="op" id="8075672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8075677">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8075692">if</span>&nbsp;<span class="ident" id="8075695">strings</span><span class="op" id="8075702">.</span><span class="ident" id="8075703">Contains</span><span class="op" id="8075711">(</span><span class="ident" id="8075712">fi</span><span class="op" id="8075714">.</span><span class="ident" id="8075715">Name</span><span class="op" id="8075719">(</span><span class="op" id="8075720">)</span><span class="op" id="8075721">,</span>&nbsp;<span class="string" id="8075723">&#34;/&#34;</span><span class="op" id="8075726">)</span>&nbsp;<span class="op" id="8075728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075733">t</span><span class="op" id="8075734">.</span><span class="ident" id="8075735">Errorf</span><span class="op" id="8075741">(</span><span class="string" id="8075742">&#34;FileInfo&nbsp;of&nbsp;%q&nbsp;contains&nbsp;slash:&nbsp;%q&#34;</span><span class="op" id="8075777">,</span>&nbsp;<span class="ident" id="8075779">g</span><span class="op" id="8075780">.</span><span class="ident" id="8075781">h</span><span class="op" id="8075782">.</span><span class="ident" id="8075783">Name</span><span class="op" id="8075787">,</span>&nbsp;<span class="ident" id="8075789">fi</span><span class="op" id="8075791">.</span><span class="ident" id="8075792">Name</span><span class="op" id="8075796">(</span><span class="op" id="8075797">)</span><span class="op" id="8075798">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075806">name</span>&nbsp;<span class="op" id="8075811">:=</span>&nbsp;<span class="ident" id="8075814">path</span><span class="op" id="8075818">.</span><span class="ident" id="8075819">Base</span><span class="op" id="8075823">(</span><span class="ident" id="8075824">g</span><span class="op" id="8075825">.</span><span class="ident" id="8075826">h</span><span class="op" id="8075827">.</span><span class="ident" id="8075828">Name</span><span class="op" id="8075832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8075836">if</span>&nbsp;<span class="ident" id="8075839">fi</span><span class="op" id="8075841">.</span><span class="ident" id="8075842">IsDir</span><span class="op" id="8075847">(</span><span class="op" id="8075848">)</span>&nbsp;<span class="op" id="8075850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075855">name</span>&nbsp;<span class="op" id="8075860">+=</span>&nbsp;<span class="string" id="8075863">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075869">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8075873">if</span>&nbsp;<span class="ident" id="8075876">got</span><span class="op" id="8075879">,</span>&nbsp;<span class="ident" id="8075881">want</span>&nbsp;<span class="op" id="8075886">:=</span>&nbsp;<span class="ident" id="8075889">h2</span><span class="op" id="8075891">.</span><span class="ident" id="8075892">Name</span><span class="op" id="8075896">,</span>&nbsp;<span class="ident" id="8075898">name</span><span class="op" id="8075902">;</span>&nbsp;<span class="ident" id="8075904">got</span>&nbsp;<span class="op" id="8075908">!=</span>&nbsp;<span class="ident" id="8075911">want</span>&nbsp;<span class="op" id="8075916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8075921">t</span><span class="op" id="8075922">.</span><span class="ident" id="8075923">Errorf</span><span class="op" id="8075929">(</span><span class="string" id="8075930">&#34;i=%d:&nbsp;Name:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8075959">,</span>&nbsp;<span class="ident" id="8075961">i</span><span class="op" id="8075962">,</span>&nbsp;<span class="ident" id="8075964">got</span><span class="op" id="8075967">,</span>&nbsp;<span class="ident" id="8075969">want</span><span class="op" id="8075973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8075977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8075981">if</span>&nbsp;<span class="ident" id="8075984">got</span><span class="op" id="8075987">,</span>&nbsp;<span class="ident" id="8075989">want</span>&nbsp;<span class="op" id="8075994">:=</span>&nbsp;<span class="ident" id="8075997">h2</span><span class="op" id="8075999">.</span><span class="ident" id="8076000">Size</span><span class="op" id="8076004">,</span>&nbsp;<span class="ident" id="8076006">g</span><span class="op" id="8076007">.</span><span class="ident" id="8076008">h</span><span class="op" id="8076009">.</span><span class="ident" id="8076010">Size</span><span class="op" id="8076014">;</span>&nbsp;<span class="ident" id="8076016">got</span>&nbsp;<span class="op" id="8076020">!=</span>&nbsp;<span class="ident" id="8076023">want</span>&nbsp;<span class="op" id="8076028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8076033">t</span><span class="op" id="8076034">.</span><span class="ident" id="8076035">Errorf</span><span class="op" id="8076041">(</span><span class="string" id="8076042">&#34;i=%d:&nbsp;Size:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8076071">,</span>&nbsp;<span class="ident" id="8076073">i</span><span class="op" id="8076074">,</span>&nbsp;<span class="ident" id="8076076">got</span><span class="op" id="8076079">,</span>&nbsp;<span class="ident" id="8076081">want</span><span class="op" id="8076085">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8076089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8076093">if</span>&nbsp;<span class="ident" id="8076096">got</span><span class="op" id="8076099">,</span>&nbsp;<span class="ident" id="8076101">want</span>&nbsp;<span class="op" id="8076106">:=</span>&nbsp;<span class="ident" id="8076109">h2</span><span class="op" id="8076111">.</span><span class="ident" id="8076112">Mode</span><span class="op" id="8076116">,</span>&nbsp;<span class="ident" id="8076118">g</span><span class="op" id="8076119">.</span><span class="ident" id="8076120">h</span><span class="op" id="8076121">.</span><span class="ident" id="8076122">Mode</span><span class="op" id="8076126">;</span>&nbsp;<span class="ident" id="8076128">got</span>&nbsp;<span class="op" id="8076132">!=</span>&nbsp;<span class="ident" id="8076135">want</span>&nbsp;<span class="op" id="8076140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8076145">t</span><span class="op" id="8076146">.</span><span class="ident" id="8076147">Errorf</span><span class="op" id="8076153">(</span><span class="string" id="8076154">&#34;i=%d:&nbsp;Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="8076183">,</span>&nbsp;<span class="ident" id="8076185">i</span><span class="op" id="8076186">,</span>&nbsp;<span class="ident" id="8076188">got</span><span class="op" id="8076191">,</span>&nbsp;<span class="ident" id="8076193">want</span><span class="op" id="8076197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8076201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8076205">if</span>&nbsp;<span class="ident" id="8076208">got</span><span class="op" id="8076211">,</span>&nbsp;<span class="ident" id="8076213">want</span>&nbsp;<span class="op" id="8076218">:=</span>&nbsp;<span class="ident" id="8076221">fi</span><span class="op" id="8076223">.</span><span class="ident" id="8076224">Mode</span><span class="op" id="8076228">(</span><span class="op" id="8076229">)</span><span class="op" id="8076230">,</span>&nbsp;<span class="ident" id="8076232">g</span><span class="op" id="8076233">.</span><span class="ident" id="8076234">fm</span><span class="op" id="8076236">;</span>&nbsp;<span class="ident" id="8076238">got</span>&nbsp;<span class="op" id="8076242">!=</span>&nbsp;<span class="ident" id="8076245">want</span>&nbsp;<span class="op" id="8076250">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8076255">t</span><span class="op" id="8076256">.</span><span class="ident" id="8076257">Errorf</span><span class="op" id="8076263">(</span><span class="string" id="8076264">&#34;i=%d:&nbsp;fi.Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="8076296">,</span>&nbsp;<span class="ident" id="8076298">i</span><span class="op" id="8076299">,</span>&nbsp;<span class="ident" id="8076301">got</span><span class="op" id="8076304">,</span>&nbsp;<span class="ident" id="8076306">want</span><span class="op" id="8076310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8076314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8076318">if</span>&nbsp;<span class="ident" id="8076321">got</span><span class="op" id="8076324">,</span>&nbsp;<span class="ident" id="8076326">want</span>&nbsp;<span class="op" id="8076331">:=</span>&nbsp;<span class="ident" id="8076334">h2</span><span class="op" id="8076336">.</span><span class="ident" id="8076337">ModTime</span><span class="op" id="8076344">,</span>&nbsp;<span class="ident" id="8076346">g</span><span class="op" id="8076347">.</span><span class="ident" id="8076348">h</span><span class="op" id="8076349">.</span><span class="ident" id="8076350">ModTime</span><span class="op" id="8076357">;</span>&nbsp;<span class="ident" id="8076359">got</span>&nbsp;<span class="op" id="8076363">!=</span>&nbsp;<span class="ident" id="8076366">want</span>&nbsp;<span class="op" id="8076371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8076376">t</span><span class="op" id="8076377">.</span><span class="ident" id="8076378">Errorf</span><span class="op" id="8076384">(</span><span class="string" id="8076385">&#34;i=%d:&nbsp;ModTime:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8076417">,</span>&nbsp;<span class="ident" id="8076419">i</span><span class="op" id="8076420">,</span>&nbsp;<span class="ident" id="8076422">got</span><span class="op" id="8076425">,</span>&nbsp;<span class="ident" id="8076427">want</span><span class="op" id="8076431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8076435">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8076439">if</span>&nbsp;<span class="ident" id="8076442">sysh</span><span class="op" id="8076446">,</span>&nbsp;<span class="ident" id="8076448">ok</span>&nbsp;<span class="op" id="8076451">:=</span>&nbsp;<span class="ident" id="8076454">fi</span><span class="op" id="8076456">.</span><span class="ident" id="8076457">Sys</span><span class="op" id="8076460">(</span><span class="op" id="8076461">)</span><span class="op" id="8076462">.</span><span class="op" id="8076463">(</span><span class="op" id="8076464">*</span><span class="ident" id="8076465">Header</span><span class="op" id="8076471">)</span><span class="op" id="8076472">;</span>&nbsp;<span class="op" id="8076474">!</span><span class="ident" id="8076475">ok</span>&nbsp;<span class="op" id="8076478">||</span>&nbsp;<span class="ident" id="8076481">sysh</span>&nbsp;<span class="op" id="8076486">!=</span>&nbsp;<span class="ident" id="8076489">g</span><span class="op" id="8076490">.</span><span class="ident" id="8076491">h</span>&nbsp;<span class="op" id="8076493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8076498">t</span><span class="op" id="8076499">.</span><span class="ident" id="8076500">Errorf</span><span class="op" id="8076506">(</span><span class="string" id="8076507">&#34;i=%d:&nbsp;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*Header&#34;</span><span class="op" id="8076549">,</span>&nbsp;<span class="ident" id="8076551">i</span><span class="op" id="8076552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8076556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8076559">}</span><br>
<span class="lineno"></span><span class="op" id="8076561">}</span>
</div>
</body>
</html>
