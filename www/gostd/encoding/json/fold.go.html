<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5379604">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5379659">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5379713">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5379764">package</span>&nbsp;<span class="ident" id="5379772">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5379778">import</span>&nbsp;<span class="op" id="5379785">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5379788">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5379797">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5379812">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5379815">const</span>&nbsp;<span class="op" id="5379821">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379824">caseMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5379837">=</span>&nbsp;<span class="op" id="5379839">^</span><span class="builtintype" id="5379840">byte</span><span class="op" id="5379844">(</span><span class="num" id="5379845">0x20</span><span class="op" id="5379849">)</span>&nbsp;<span class="comment" id="5379851">//&nbsp;Mask&nbsp;to&nbsp;ignore&nbsp;case&nbsp;in&nbsp;ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379885">kelvin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5379898">=</span>&nbsp;<span class="string" id="5379900">&#39;\u212a&#39;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379910">smallLongEss</span>&nbsp;<span class="op" id="5379923">=</span>&nbsp;<span class="string" id="5379925">&#39;\u017f&#39;</span><br>
<span class="lineno"></span><span class="op" id="5379934">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5379937">//&nbsp;foldFunc&nbsp;returns&nbsp;one&nbsp;of&nbsp;four&nbsp;different&nbsp;case&nbsp;folding&nbsp;equivalence</span><br>
<span class="lineno"></span><span class="comment" id="5380004">//&nbsp;functions,&nbsp;from&nbsp;most&nbsp;general&nbsp;(and&nbsp;slow)&nbsp;to&nbsp;fastest:</span><br>
<span class="lineno">20</span><span class="comment" id="5380059">//</span><br>
<span class="lineno"></span><span class="comment" id="5380062">//&nbsp;1)&nbsp;bytes.EqualFold,&nbsp;if&nbsp;the&nbsp;key&nbsp;s&nbsp;contains&nbsp;any&nbsp;non-ASCII&nbsp;UTF-8</span><br>
<span class="lineno"></span><span class="comment" id="5380127">//&nbsp;2)&nbsp;equalFoldRight,&nbsp;if&nbsp;s&nbsp;contains&nbsp;special&nbsp;folding&nbsp;ASCII&nbsp;(&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;&#39;S&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="5380206">//&nbsp;3)&nbsp;asciiEqualFold,&nbsp;no&nbsp;special,&nbsp;but&nbsp;includes&nbsp;non-letters&nbsp;(including&nbsp;_)</span><br>
<span class="lineno"></span><span class="comment" id="5380279">//&nbsp;4)&nbsp;simpleLetterEqualFold,&nbsp;no&nbsp;specials,&nbsp;no&nbsp;non-letters.</span><br>
<span class="lineno">25</span><span class="comment" id="5380337">//</span><br>
<span class="lineno"></span><span class="comment" id="5380340">//&nbsp;The&nbsp;letters&nbsp;S&nbsp;and&nbsp;K&nbsp;are&nbsp;special&nbsp;because&nbsp;they&nbsp;map&nbsp;to&nbsp;3&nbsp;runes,&nbsp;not&nbsp;just&nbsp;2:</span><br>
<span class="lineno"></span><span class="comment" id="5380416">//&nbsp;&nbsp;*&nbsp;S&nbsp;maps&nbsp;to&nbsp;s&nbsp;and&nbsp;to&nbsp;U+017F&nbsp;&#39;ſ&#39;&nbsp;Latin&nbsp;small&nbsp;letter&nbsp;long&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="5380479">//&nbsp;&nbsp;*&nbsp;k&nbsp;maps&nbsp;to&nbsp;K&nbsp;and&nbsp;to&nbsp;U+212A&nbsp;&#39;K&#39;&nbsp;Kelvin&nbsp;sign</span><br>
<span class="lineno"></span><span class="comment" id="5380529">//&nbsp;See&nbsp;http://play.golang.org/p/tTxjOc0OGo</span><br>
<span class="lineno">30</span><span class="comment" id="5380572">//</span><br>
<span class="lineno"></span><span class="comment" id="5380575">//&nbsp;The&nbsp;returned&nbsp;function&nbsp;is&nbsp;specialized&nbsp;for&nbsp;matching&nbsp;against&nbsp;s&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5380642">//&nbsp;should&nbsp;only&nbsp;be&nbsp;given&nbsp;s.&nbsp;It&#39;s&nbsp;not&nbsp;curried&nbsp;for&nbsp;performance&nbsp;reasons.</span><br>
<span class="lineno"></span><span class="keyword" id="5380711">func</span>&nbsp;<span class="ident" id="5380716">foldFunc</span><span class="op" id="5380724">(</span><span class="ident" id="5380725">s</span>&nbsp;<span class="op" id="5380727">[</span><span class="op" id="5380728">]</span><span class="builtintype" id="5380729">byte</span><span class="op" id="5380733">)</span>&nbsp;<span class="keyword" id="5380735">func</span><span class="op" id="5380739">(</span><span class="ident" id="5380740">s</span><span class="op" id="5380741">,</span>&nbsp;<span class="ident" id="5380743">t</span>&nbsp;<span class="op" id="5380745">[</span><span class="op" id="5380746">]</span><span class="builtintype" id="5380747">byte</span><span class="op" id="5380751">)</span>&nbsp;<span class="builtintype" id="5380753">bool</span>&nbsp;<span class="op" id="5380758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380761">nonLetter</span>&nbsp;<span class="op" id="5380771">:=</span>&nbsp;<span class="builtintype" id="5380774">false</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380781">special</span>&nbsp;<span class="op" id="5380789">:=</span>&nbsp;<span class="builtintype" id="5380792">false</span>&nbsp;<span class="comment" id="5380798">//&nbsp;special&nbsp;letter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380817">for</span>&nbsp;<span class="ident" id="5380821">_</span><span class="op" id="5380822">,</span>&nbsp;<span class="ident" id="5380824">b</span>&nbsp;<span class="op" id="5380826">:=</span>&nbsp;<span class="keyword" id="5380829">range</span>&nbsp;<span class="ident" id="5380835">s</span>&nbsp;<span class="op" id="5380837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380841">if</span>&nbsp;<span class="ident" id="5380844">b</span>&nbsp;<span class="op" id="5380846">&gt;=</span>&nbsp;<span class="ident" id="5380849">utf8</span><span class="op" id="5380853">.</span><span class="ident" id="5380854">RuneSelf</span>&nbsp;<span class="op" id="5380863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380868">return</span>&nbsp;<span class="ident" id="5380875">bytes</span><span class="op" id="5380880">.</span><span class="ident" id="5380881">EqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5380893">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380897">upper</span>&nbsp;<span class="op" id="5380903">:=</span>&nbsp;<span class="ident" id="5380906">b</span>&nbsp;<span class="op" id="5380908">&amp;</span>&nbsp;<span class="ident" id="5380910">caseMask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380921">if</span>&nbsp;<span class="ident" id="5380924">upper</span>&nbsp;<span class="op" id="5380930">&lt;</span>&nbsp;<span class="string" id="5380932">&#39;A&#39;</span>&nbsp;<span class="op" id="5380936">||</span>&nbsp;<span class="ident" id="5380939">upper</span>&nbsp;<span class="op" id="5380945">&gt;</span>&nbsp;<span class="string" id="5380947">&#39;Z&#39;</span>&nbsp;<span class="op" id="5380951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380956">nonLetter</span>&nbsp;<span class="op" id="5380966">=</span>&nbsp;<span class="builtintype" id="5380968">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5380975">}</span>&nbsp;<span class="keyword" id="5380977">else</span>&nbsp;<span class="keyword" id="5380982">if</span>&nbsp;<span class="ident" id="5380985">upper</span>&nbsp;<span class="op" id="5380991">==</span>&nbsp;<span class="string" id="5380994">&#39;K&#39;</span>&nbsp;<span class="op" id="5380998">||</span>&nbsp;<span class="ident" id="5381001">upper</span>&nbsp;<span class="op" id="5381007">==</span>&nbsp;<span class="string" id="5381010">&#39;S&#39;</span>&nbsp;<span class="op" id="5381014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5381019">//&nbsp;See&nbsp;above&nbsp;for&nbsp;why&nbsp;these&nbsp;letters&nbsp;are&nbsp;special.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381070">special</span>&nbsp;<span class="op" id="5381078">=</span>&nbsp;<span class="builtintype" id="5381080">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381093">if</span>&nbsp;<span class="ident" id="5381096">special</span>&nbsp;<span class="op" id="5381104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381108">return</span>&nbsp;<span class="ident" id="5381115">equalFoldRight</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381134">if</span>&nbsp;<span class="ident" id="5381137">nonLetter</span>&nbsp;<span class="op" id="5381147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381151">return</span>&nbsp;<span class="ident" id="5381158">asciiEqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381177">return</span>&nbsp;<span class="ident" id="5381184">simpleLetterEqualFold</span><br>
<span class="lineno">55</span><span class="op" id="5381206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5381209">//&nbsp;equalFoldRight&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;when&nbsp;s&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5381276">//&nbsp;known&nbsp;to&nbsp;be&nbsp;all&nbsp;ASCII&nbsp;(including&nbsp;punctuation),&nbsp;but&nbsp;contains&nbsp;an&nbsp;&#39;s&#39;,</span><br>
<span class="lineno"></span><span class="comment" id="5381347">//&nbsp;&#39;S&#39;,&nbsp;&#39;k&#39;,&nbsp;or&nbsp;&#39;K&#39;,&nbsp;requiring&nbsp;a&nbsp;Unicode&nbsp;fold&nbsp;on&nbsp;the&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno">60</span><span class="comment" id="5381412">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="5381441">func</span>&nbsp;<span class="ident" id="5381446">equalFoldRight</span><span class="op" id="5381460">(</span><span class="ident" id="5381461">s</span><span class="op" id="5381462">,</span>&nbsp;<span class="ident" id="5381464">t</span>&nbsp;<span class="op" id="5381466">[</span><span class="op" id="5381467">]</span><span class="builtintype" id="5381468">byte</span><span class="op" id="5381472">)</span>&nbsp;<span class="builtintype" id="5381474">bool</span>&nbsp;<span class="op" id="5381479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381482">for</span>&nbsp;<span class="ident" id="5381486">_</span><span class="op" id="5381487">,</span>&nbsp;<span class="ident" id="5381489">sb</span>&nbsp;<span class="op" id="5381492">:=</span>&nbsp;<span class="keyword" id="5381495">range</span>&nbsp;<span class="ident" id="5381501">s</span>&nbsp;<span class="op" id="5381503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381507">if</span>&nbsp;<span class="builtinfunc" id="5381510">len</span><span class="op" id="5381513">(</span><span class="ident" id="5381514">t</span><span class="op" id="5381515">)</span>&nbsp;<span class="op" id="5381517">==</span>&nbsp;<span class="num" id="5381520">0</span>&nbsp;<span class="op" id="5381522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381527">return</span>&nbsp;<span class="builtintype" id="5381534">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381546">tb</span>&nbsp;<span class="op" id="5381549">:=</span>&nbsp;<span class="ident" id="5381552">t</span><span class="op" id="5381553">[</span><span class="num" id="5381554">0</span><span class="op" id="5381555">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381559">if</span>&nbsp;<span class="ident" id="5381562">tb</span>&nbsp;<span class="op" id="5381565">&lt;</span>&nbsp;<span class="ident" id="5381567">utf8</span><span class="op" id="5381571">.</span><span class="ident" id="5381572">RuneSelf</span>&nbsp;<span class="op" id="5381581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381586">if</span>&nbsp;<span class="ident" id="5381589">sb</span>&nbsp;<span class="op" id="5381592">!=</span>&nbsp;<span class="ident" id="5381595">tb</span>&nbsp;<span class="op" id="5381598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381604">sbUpper</span>&nbsp;<span class="op" id="5381612">:=</span>&nbsp;<span class="ident" id="5381615">sb</span>&nbsp;<span class="op" id="5381618">&amp;</span>&nbsp;<span class="ident" id="5381620">caseMask</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381633">if</span>&nbsp;<span class="string" id="5381636">&#39;A&#39;</span>&nbsp;<span class="op" id="5381640">&lt;=</span>&nbsp;<span class="ident" id="5381643">sbUpper</span>&nbsp;<span class="op" id="5381651">&amp;&amp;</span>&nbsp;<span class="ident" id="5381654">sbUpper</span>&nbsp;<span class="op" id="5381662">&lt;=</span>&nbsp;<span class="string" id="5381665">&#39;Z&#39;</span>&nbsp;<span class="op" id="5381669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381676">if</span>&nbsp;<span class="ident" id="5381679">sbUpper</span>&nbsp;<span class="op" id="5381687">!=</span>&nbsp;<span class="ident" id="5381690">tb</span><span class="op" id="5381692">&amp;</span><span class="ident" id="5381693">caseMask</span>&nbsp;<span class="op" id="5381702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381710">return</span>&nbsp;<span class="builtintype" id="5381717">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381734">}</span>&nbsp;<span class="keyword" id="5381736">else</span>&nbsp;<span class="op" id="5381741">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381748">return</span>&nbsp;<span class="builtintype" id="5381755">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381775">t</span>&nbsp;<span class="op" id="5381777">=</span>&nbsp;<span class="ident" id="5381779">t</span><span class="op" id="5381780">[</span><span class="num" id="5381781">1</span><span class="op" id="5381782">:</span><span class="op" id="5381783">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381788">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5381803">//&nbsp;sb&nbsp;is&nbsp;ASCII&nbsp;and&nbsp;t&nbsp;is&nbsp;not.&nbsp;t&nbsp;must&nbsp;be&nbsp;either&nbsp;kelvin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5381858">//&nbsp;sign&nbsp;or&nbsp;long&nbsp;s;&nbsp;sb&nbsp;must&nbsp;be&nbsp;s,&nbsp;S,&nbsp;k,&nbsp;or&nbsp;K.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381905">tr</span><span class="op" id="5381907">,</span>&nbsp;<span class="ident" id="5381909">size</span>&nbsp;<span class="op" id="5381914">:=</span>&nbsp;<span class="ident" id="5381917">utf8</span><span class="op" id="5381921">.</span><span class="ident" id="5381922">DecodeRune</span><span class="op" id="5381932">(</span><span class="ident" id="5381933">t</span><span class="op" id="5381934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381938">switch</span>&nbsp;<span class="ident" id="5381945">sb</span>&nbsp;<span class="op" id="5381948">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381952">case</span>&nbsp;<span class="string" id="5381957">&#39;s&#39;</span><span class="op" id="5381960">,</span>&nbsp;<span class="string" id="5381962">&#39;S&#39;</span><span class="op" id="5381965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381970">if</span>&nbsp;<span class="ident" id="5381973">tr</span>&nbsp;<span class="op" id="5381976">!=</span>&nbsp;<span class="ident" id="5381979">smallLongEss</span>&nbsp;<span class="op" id="5381992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381998">return</span>&nbsp;<span class="builtintype" id="5382005">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382018">case</span>&nbsp;<span class="string" id="5382023">&#39;k&#39;</span><span class="op" id="5382026">,</span>&nbsp;<span class="string" id="5382028">&#39;K&#39;</span><span class="op" id="5382031">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382036">if</span>&nbsp;<span class="ident" id="5382039">tr</span>&nbsp;<span class="op" id="5382042">!=</span>&nbsp;<span class="ident" id="5382045">kelvin</span>&nbsp;<span class="op" id="5382052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382058">return</span>&nbsp;<span class="builtintype" id="5382065">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382078">default</span><span class="op" id="5382085">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382090">return</span>&nbsp;<span class="builtintype" id="5382097">false</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382109">t</span>&nbsp;<span class="op" id="5382111">=</span>&nbsp;<span class="ident" id="5382113">t</span><span class="op" id="5382114">[</span><span class="ident" id="5382115">size</span><span class="op" id="5382119">:</span><span class="op" id="5382120">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382127">if</span>&nbsp;<span class="builtinfunc" id="5382130">len</span><span class="op" id="5382133">(</span><span class="ident" id="5382134">t</span><span class="op" id="5382135">)</span>&nbsp;<span class="op" id="5382137">&gt;</span>&nbsp;<span class="num" id="5382139">0</span>&nbsp;<span class="op" id="5382141">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382145">return</span>&nbsp;<span class="builtintype" id="5382152">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382162">return</span>&nbsp;<span class="builtintype" id="5382169">true</span><br>
<span class="lineno"></span><span class="op" id="5382174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5382177">//&nbsp;asciiEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for&nbsp;use&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5382247">//&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;(but&nbsp;may&nbsp;contain&nbsp;non-letters)&nbsp;and&nbsp;contains&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="5382311">//&nbsp;special-folding&nbsp;letters.</span><br>
<span class="lineno"></span><span class="comment" id="5382339">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="5382368">func</span>&nbsp;<span class="ident" id="5382373">asciiEqualFold</span><span class="op" id="5382387">(</span><span class="ident" id="5382388">s</span><span class="op" id="5382389">,</span>&nbsp;<span class="ident" id="5382391">t</span>&nbsp;<span class="op" id="5382393">[</span><span class="op" id="5382394">]</span><span class="builtintype" id="5382395">byte</span><span class="op" id="5382399">)</span>&nbsp;<span class="builtintype" id="5382401">bool</span>&nbsp;<span class="op" id="5382406">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382409">if</span>&nbsp;<span class="builtinfunc" id="5382412">len</span><span class="op" id="5382415">(</span><span class="ident" id="5382416">s</span><span class="op" id="5382417">)</span>&nbsp;<span class="op" id="5382419">!=</span>&nbsp;<span class="builtinfunc" id="5382422">len</span><span class="op" id="5382425">(</span><span class="ident" id="5382426">t</span><span class="op" id="5382427">)</span>&nbsp;<span class="op" id="5382429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382433">return</span>&nbsp;<span class="builtintype" id="5382440">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382450">for</span>&nbsp;<span class="ident" id="5382454">i</span><span class="op" id="5382455">,</span>&nbsp;<span class="ident" id="5382457">sb</span>&nbsp;<span class="op" id="5382460">:=</span>&nbsp;<span class="keyword" id="5382463">range</span>&nbsp;<span class="ident" id="5382469">s</span>&nbsp;<span class="op" id="5382471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382475">tb</span>&nbsp;<span class="op" id="5382478">:=</span>&nbsp;<span class="ident" id="5382481">t</span><span class="op" id="5382482">[</span><span class="ident" id="5382483">i</span><span class="op" id="5382484">]</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382488">if</span>&nbsp;<span class="ident" id="5382491">sb</span>&nbsp;<span class="op" id="5382494">==</span>&nbsp;<span class="ident" id="5382497">tb</span>&nbsp;<span class="op" id="5382500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382505">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382520">if</span>&nbsp;<span class="op" id="5382523">(</span><span class="string" id="5382524">&#39;a&#39;</span>&nbsp;<span class="op" id="5382528">&lt;=</span>&nbsp;<span class="ident" id="5382531">sb</span>&nbsp;<span class="op" id="5382534">&amp;&amp;</span>&nbsp;<span class="ident" id="5382537">sb</span>&nbsp;<span class="op" id="5382540">&lt;=</span>&nbsp;<span class="string" id="5382543">&#39;z&#39;</span><span class="op" id="5382546">)</span>&nbsp;<span class="op" id="5382548">||</span>&nbsp;<span class="op" id="5382551">(</span><span class="string" id="5382552">&#39;A&#39;</span>&nbsp;<span class="op" id="5382556">&lt;=</span>&nbsp;<span class="ident" id="5382559">sb</span>&nbsp;<span class="op" id="5382562">&amp;&amp;</span>&nbsp;<span class="ident" id="5382565">sb</span>&nbsp;<span class="op" id="5382568">&lt;=</span>&nbsp;<span class="string" id="5382571">&#39;Z&#39;</span><span class="op" id="5382574">)</span>&nbsp;<span class="op" id="5382576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382581">if</span>&nbsp;<span class="ident" id="5382584">sb</span><span class="op" id="5382586">&amp;</span><span class="ident" id="5382587">caseMask</span>&nbsp;<span class="op" id="5382596">!=</span>&nbsp;<span class="ident" id="5382599">tb</span><span class="op" id="5382601">&amp;</span><span class="ident" id="5382602">caseMask</span>&nbsp;<span class="op" id="5382611">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382617">return</span>&nbsp;<span class="builtintype" id="5382624">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382637">}</span>&nbsp;<span class="keyword" id="5382639">else</span>&nbsp;<span class="op" id="5382644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382649">return</span>&nbsp;<span class="builtintype" id="5382656">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382664">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382670">return</span>&nbsp;<span class="builtintype" id="5382677">true</span><br>
<span class="lineno"></span><span class="op" id="5382682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5382685">//&nbsp;simpleLetterEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for</span><br>
<span class="lineno">130</span><span class="comment" id="5382753">//&nbsp;use&nbsp;when&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;letters&nbsp;(no&nbsp;underscores,&nbsp;etc)&nbsp;and&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="5382819">//&nbsp;doesn&#39;t&nbsp;contain&nbsp;&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;or&nbsp;&#39;S&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5382861">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="5382890">func</span>&nbsp;<span class="ident" id="5382895">simpleLetterEqualFold</span><span class="op" id="5382916">(</span><span class="ident" id="5382917">s</span><span class="op" id="5382918">,</span>&nbsp;<span class="ident" id="5382920">t</span>&nbsp;<span class="op" id="5382922">[</span><span class="op" id="5382923">]</span><span class="builtintype" id="5382924">byte</span><span class="op" id="5382928">)</span>&nbsp;<span class="builtintype" id="5382930">bool</span>&nbsp;<span class="op" id="5382935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382938">if</span>&nbsp;<span class="builtinfunc" id="5382941">len</span><span class="op" id="5382944">(</span><span class="ident" id="5382945">s</span><span class="op" id="5382946">)</span>&nbsp;<span class="op" id="5382948">!=</span>&nbsp;<span class="builtinfunc" id="5382951">len</span><span class="op" id="5382954">(</span><span class="ident" id="5382955">t</span><span class="op" id="5382956">)</span>&nbsp;<span class="op" id="5382958">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382962">return</span>&nbsp;<span class="builtintype" id="5382969">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382979">for</span>&nbsp;<span class="ident" id="5382983">i</span><span class="op" id="5382984">,</span>&nbsp;<span class="ident" id="5382986">b</span>&nbsp;<span class="op" id="5382988">:=</span>&nbsp;<span class="keyword" id="5382991">range</span>&nbsp;<span class="ident" id="5382997">s</span>&nbsp;<span class="op" id="5382999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383003">if</span>&nbsp;<span class="ident" id="5383006">b</span><span class="op" id="5383007">&amp;</span><span class="ident" id="5383008">caseMask</span>&nbsp;<span class="op" id="5383017">!=</span>&nbsp;<span class="ident" id="5383020">t</span><span class="op" id="5383021">[</span><span class="ident" id="5383022">i</span><span class="op" id="5383023">]</span><span class="op" id="5383024">&amp;</span><span class="ident" id="5383025">caseMask</span>&nbsp;<span class="op" id="5383034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383039">return</span>&nbsp;<span class="builtintype" id="5383046">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383060">return</span>&nbsp;<span class="builtintype" id="5383067">true</span><br>
<span class="lineno"></span><span class="op" id="5383072">}</span>
</div>
</body>
</html>
